{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h1>Group Details</h1>
    <p><a href="/admin/groups" class="btn btn-secondary">â† Back</a></p>

    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Group Information</h5>
            <p><strong>ID:</strong> {{ group.id }}</p>
            <p><strong>Name:</strong> {{ group.name }}</p>
            <p><strong>Data Folder:</strong> <code>{{ group.data_folder }}</code></p>
            <p><strong>Folder Size:</strong> {{ group.folder_size_mb }} MB</p>
            <p><strong>Created:</strong> {{ group.created_at }}</p>
        </div>
    </div>

    <div class="card mt-4">
        <div class="card-body">
            <h5 class="card-title">Members ({{ group.members|length }})</h5>
            <table class="table table-sm">
                <thead>
                    <tr>
                        <th>User ID</th>
                        <th>Username</th>
                        <th>Role</th>
                    </tr>
                </thead>
                <tbody>
                    {% for member in group.members %}
                    <tr>
                        <td>{{ member.user_id }}</td>
                        <td>{{ member.username }}</td>
                        <td>
                            {% if member.role == 'admin' %}
                                <span class="badge badge-danger">Admin</span>
                            {% else %}
                                <span class="badge badge-info">Member</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="mt-4">
        <h5>Actions</h5>
        <form method="POST" action="/admin/groups/{{ group.id }}/backup" style="display:inline;">
            <button class="btn btn-info">ğŸ“¦ Create Backup</button>
        </form>
        <form method="POST" action="/admin/groups/{{ group.id }}/delete" style="display:inline;" id="deleteGroupForm">
            <button type="button" class="btn btn-danger" onclick="deleteGroupConfirm()">ğŸ—‘ï¸ Delete Group</button>
        </form>
    </div>
</div>

<script>
async function deleteGroupConfirm() {
    if (await showModalConfirm('Î”Î¹Î±Î³ÏÎ±Ï†Î® ÎŸÎ¼Î¬Î´Î±Ï‚', 'Î˜Î­Î»ÎµÎ¹Ï‚ ÏƒÎ¯Î³Î¿Ï…ÏÎ± Î½Î± Î´Î¹Î±Î³ÏÎ¬ÏˆÎµÎ¹Ï‚ Î±Ï…Ï„Î®Î½ Ï„Î·Î½ Î¿Î¼Î¬Î´Î± ÎºÎ±Î¹ ÏŒÎ»Î± Ï„Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Ï„Î·Ï‚; Î˜Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î·Î¸ÎµÎ¯ Ï€ÏÏÏ„Î± backup.', 'Î”Î¹Î±Î³ÏÎ±Ï†Î®', 'Î†ÎºÏ…ÏÎ¿')) {
        document.getElementById('deleteGroupForm').submit();
    }
}
</script>
{% endblock %}
