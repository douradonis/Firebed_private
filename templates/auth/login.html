{% extends 'base.html' %}

{% block title %}Î£ÏÎ½Î´ÎµÏƒÎ· - Firebed Private{% endblock %}

{% block content %}
  <div class="content-wrap">
    <div class="max-w-md">
      <h1 class="text-2xl font-bold mb-2">ğŸ” Î£ÏÎ½Î´ÎµÏƒÎ·</h1>
      <p class="text-gray-600 mb-6">Î£Ï…Î½Î´ÎµÎ¸ÎµÎ¯Ï„Îµ Î¼Îµ Ï„Î¿ Firebase Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒ ÏƒÎ±Ï‚</p>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="space-y-3 mb-4">
            {% for category, msg in messages %}
              {% if category in ['danger', 'error'] %}
                <div class="p-3 rounded border border-red-200 bg-red-50 text-red-800">{{ msg|safe }}</div>
              {% elif category == 'success' %}
                <div class="p-3 rounded border border-green-200 bg-green-50 text-green-800">{{ msg|safe }}</div>
              {% elif category == 'warning' %}
                <div class="p-3 rounded border border-yellow-200 bg-yellow-50 text-yellow-800">{{ msg|safe }}</div>
              {% elif category == 'info' %}
                <div class="p-3 rounded border border-sky-200 bg-sky-50 text-sky-800">{{ msg|safe }}</div>
              {% else %}
                <div class="p-3 rounded border border-gray-200 bg-gray-50 text-gray-800">{{ msg|safe }}</div>
              {% endif %}
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      <form method="post" action="/firebase-auth/login" class="grid gap-4">
        <label class="block">
          <span class="text-sm font-medium text-gray-700 mb-1 block">Email</span>
          <input type="email" name="email" required class="mt-1 px-3 py-2 border rounded w-full focus:outline-none focus:ring-2 focus:ring-sky-600" placeholder="your@email.com" />
        </label>
        
        <label class="block">
          <span class="text-sm font-medium text-gray-700 mb-1 block">ÎšÏ‰Î´Î¹ÎºÏŒÏ‚</span>
          <div class="mt-1 relative">
            <input id="loginPassword" type="password" name="password" required class="px-3 py-2 border rounded w-full pr-10 focus:outline-none focus:ring-2 focus:ring-sky-600" autocomplete="current-password" />
            <button type="button" class="absolute inset-y-0 right-0 px-3 text-gray-500 hover:text-gray-700" data-toggle-password="loginPassword" aria-label="Î•Î½Î±Î»Î»Î±Î³Î® ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ·Ï‚ ÎºÏ‰Î´Î¹ÎºÎ¿Ï" aria-pressed="false">
              <span data-eye-show class="block">ğŸ‘</span>
              <span data-eye-hide class="hidden">ğŸ™ˆ</span>
            </button>
          </div>
        </label>

        <button type="submit" class="px-4 py-3 rounded bg-sky-600 hover:bg-sky-700 text-white font-medium transition">
          âœ“ Î£ÏÎ½Î´ÎµÏƒÎ·
        </button>
      </form>

      <div class="mt-6 pt-6 border-t border-gray-300 space-y-3">
        <p class="text-center text-sm text-gray-600">
          Î”ÎµÎ½ Î­Ï‡ÎµÏ„Îµ Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒ;
          <a href="/firebase-auth/signup" class="font-semibold text-sky-600 hover:text-sky-700">
            Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼Î¿Ï
          </a>
        </p>
        <p class="text-center text-sm text-gray-600">
          <a href="/firebase-auth/password/reset" class="text-sky-600 hover:text-sky-700">
            ÎÎ­Ï‡Î±ÏƒÎ±Ï„Îµ Ï„Î¿Î½ ÎºÏ‰Î´Î¹ÎºÏŒ;
          </a>
        </p>
      </div>
    </div>
  </div>
{% endblock %}

{% block scripts %}
<script>
(function(){
  document.querySelectorAll('[data-toggle-password]').forEach(function(btn){
    btn.addEventListener('click', function(){
      const targetId = btn.getAttribute('data-toggle-password');
      const input = targetId ? document.getElementById(targetId) : null;
      if(!input) return;
      const showing = input.type === 'text';
      input.type = showing ? 'password' : 'text';
      btn.setAttribute('aria-pressed', showing ? 'false' : 'true');
      btn.querySelectorAll('[data-eye-show]').forEach(function(el){ el.classList.toggle('hidden', !showing); });
      btn.querySelectorAll('[data-eye-hide]').forEach(function(el){ el.classList.toggle('hidden', showing); });
    });
  });
})();
</script>
{% endblock %}
