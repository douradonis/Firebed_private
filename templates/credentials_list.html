{% extends "base.html" %}
{% block title %}Credentials{% endblock %}
{% block content %}
<h2>Stored Credentials</h2>
{% if message %}
  <div class="alert alert-{{ 'success' if message[0]=='success' else 'danger' }}">{{ message[1] }}</div>
{% endif %}
<form method="post" class="mb-3">
  <div class="row g-2">
    <div class="col-md-3"><input name="name" class="form-control" placeholder="Name (label)"></div>
    <div class="col-md-3"><input name="user" class="form-control" placeholder="AADE User ID"></div>
    <div class="col-md-3"><input name="key" class="form-control" placeholder="AADE Subscription Key"></div>
    <div class="col-md-2"><input name="vat" class="form-control" placeholder="Default VAT"></div>
    <div class="col-md-1"><button class="btn btn-primary w-100">Add</button></div>
  </div>
</form>

<table class="table table-striped">
  <thead><tr><th>Name</th><th>VAT</th><th>Env</th><th>Actions</th></tr></thead>
  <tbody>
    {% for c in credentials %}
      <tr>
        <td>{{ c.name }}</td>
        <td>{{ c.vat }}</td>
        <td>{{ c.env }}</td>
        <td>
          <a class="btn btn-sm btn-outline-primary" href="{{ url_for('credentials_edit', name=c.name) }}">Edit</a>
          <form method="post" action="{{ url_for('credentials_delete', name=c.name) }}" style="display:inline" onsubmit="return confirm('Delete?')">
            <button class="btn btn-sm btn-danger">Delete</button>
          </form>
        </td>
      </tr>
    {% else %}
      <tr><td colspan="4">No credentials saved</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
