2025-10-21 01:06:06+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:06:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:06:10+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:06:16+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:06:16+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:06:16+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:06:17+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:06:22+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:06:23+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:06:23+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:06:23+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:06:23+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:06:26+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:06:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:01+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:02+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:02+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:02+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:02+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:02+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:03+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:03+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:28+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:28+0300 INFO search: invoice-flow blocked (forbidden type) code=9.3 name=Δελτίο Αποστολής mark=400011185853502 vat=802576637
2025-10-21 01:07:28+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:28+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:29+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:07:29+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:08:36+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:08:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:08:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:08:37+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:08:37+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:08:37+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:08:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:08:38+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:08:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:08:38+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:08:50+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:08:50+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:08:51+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:08:52+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:08:52+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:08:52+0300 INFO api_confirm_receipt: blocked empty/invalid receipt summary
2025-10-21 01:10:06+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 01:10:07+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:07+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:07+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:07+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:14+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 01:10:14+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:15+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:15+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:15+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:23+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:23+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:10:23+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:10:23+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:26+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:26+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:10:26+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:10:26+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:26+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:26+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:10:26+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:10:26+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:27+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:27+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:10:27+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:10:28+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:28+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:28+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:10:28+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:10:28+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:37+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:10:37+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:10:37+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:10:37+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:04+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 01:11:05+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:05+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:05+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:05+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:17+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:17+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:17+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:18+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:18+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:18+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:18+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:18+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:42+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 01:11:42+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:42+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:48+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:48+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:11:48+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:11:48+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:51+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:51+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:53+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:54+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:54+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:11:54+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:11:54+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:56+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:57+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:11:57+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:11:57+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:11:57+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:13+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:13+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:13+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:13+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:14+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:14+0300 INFO save_summary: start request from 127.0.0.1
2025-10-21 01:12:14+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-21 01:12:14+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:14+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:14+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:25+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:25+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:12:26+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:12:26+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:32+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:33+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:12:33+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:12:33+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:12:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:44+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:12:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:12:46+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:12:46+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:47+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:47+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:47+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:12:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:20+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:20+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/fetch
2025-10-21 01:13:20+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/fetch
2025-10-21 01:13:21+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/fetch
2025-10-21 01:13:22+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:22+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:22+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:22+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:25+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 01:13:26+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:26+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:26+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:26+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:39+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:39+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:13:40+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:13:40+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:47+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:48+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:13:48+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:13:48+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:13:49+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:49+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:49+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:13:49+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:25+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 01:20:26+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:26+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:26+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:26+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:28+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 01:20:29+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:29+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:29+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:29+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:35+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:35+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:20:35+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:20:35+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:42+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 01:20:42+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:42+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:54+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 01:20:55+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:55+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:55+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:55+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:58+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:58+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:20:58+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:20:58+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:59+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:20:59+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:20:59+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:20:59+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:21:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:21:21+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:21:21+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:21:21+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:21:21+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:08+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/fetch
2025-10-21 01:24:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/fetch
2025-10-21 01:24:10+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/fetch
2025-10-21 01:24:10+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:10+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:13+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:13+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:24:13+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:24:14+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:24:14+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:14+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:15+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:15+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:25+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:25+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:24:25+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:24:25+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:32+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 01:24:33+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:33+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:33+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:33+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:46+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:46+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:46+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:46+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:46+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:46+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:47+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:47+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:47+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:47+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:52+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:24:52+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:24:52+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:24:52+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:25:05+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:25:05+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:25:05+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:25:06+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 01:25:06+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:25:06+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:25:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:25:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:25:07+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:25:07+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:26:41+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 01:26:42+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:26:42+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:26:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:26:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:26:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:26:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:26:45+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 01:26:46+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:26:46+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:26:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:26:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:26:46+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:26:46+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:11+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/fetch
2025-10-21 01:27:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/fetch
2025-10-21 01:27:12+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/fetch
2025-10-21 01:27:12+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:12+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:13+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:13+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:15+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:15+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/credentials
2025-10-21 01:27:15+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/credentials
2025-10-21 01:27:16+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/credentials
2025-10-21 01:27:16+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:16+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:16+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:16+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:22+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:22+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:27:22+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:27:22+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:27+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 01:27:27+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:27+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:27+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:27+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:39+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 01:27:39+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 01:27:39+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 01:27:39+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:37:41+0300 INFO Starting app - MYDATA_ENV=sandbox
2025-10-21 11:37:42+0300 INFO Starting app - MYDATA_ENV=production
2025-10-21 11:37:47+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5.github.dev/
2025-10-21 11:37:48+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/
2025-10-21 11:37:48+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/
2025-10-21 11:37:50+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/
2025-10-21 11:37:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/credentials
2025-10-21 11:37:50+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/credentials
2025-10-21 11:37:52+0300 INFO Incoming request: method=POST path=/set_active remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/credentials
2025-10-21 11:37:52+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/credentials
2025-10-21 11:37:52+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/credentials
2025-10-21 11:37:52+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/credentials
2025-10-21 11:37:53+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/credentials
2025-10-21 11:37:54+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:37:54+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:37:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:37:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:37:54+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:37:54+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:00+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:00+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:00+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:00+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:00+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:00+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:00+0300 INFO save_summary: start request from 127.0.0.1
2025-10-21 11:38:00+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-21 11:38:00+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:01+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:01+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:01+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:01+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:03+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:12+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:12+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 11:38:12+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 11:38:13+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:16+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:16+0300 INFO save_summary: start request from 127.0.0.1
2025-10-21 11:38:16+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-21 11:38:16+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:16+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:16+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:27+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:33+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:33+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:33+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:33+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:33+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:35+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:35+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 11:38:35+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 11:38:36+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:36+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:36+0300 INFO save_summary: start request from 127.0.0.1
2025-10-21 11:38:36+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-21 11:38:36+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:36+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:36+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:50+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:50+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-21 11:38:50+0300 INFO delete_invoices: marks_to_delete resolved = ['400011199848735', '400011219241352', '400011219241353']
2025-10-21 11:38:50+0300 INFO delete_invoices: deleted 3 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011199848735', '400011219241352', '400011219241353']
2025-10-21 11:38:50+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-21 11:38:50+0300 INFO delete_invoices: Deleted 3 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-21 11:38:50+0300 INFO delete_invoices: finished request. requested=3 excel=3 epsilon=3
2025-10-21 11:38:50+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:50+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:50+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:50+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:38:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:08+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:10+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 11:40:10+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:10+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:13+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 11:40:13+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:13+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:17+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:22+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:22+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 11:40:22+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 11:40:22+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:23+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:23+0300 INFO save_summary: start request from 127.0.0.1
2025-10-21 11:40:23+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-21 11:40:23+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:23+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:23+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:23+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:40:23+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:42:48+0300 INFO Starting app - MYDATA_ENV=sandbox
2025-10-21 11:42:49+0300 INFO Starting app - MYDATA_ENV=production
2025-10-21 11:42:51+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5.github.dev/
2025-10-21 11:42:51+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/
2025-10-21 11:42:51+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/
2025-10-21 11:42:52+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/
2025-10-21 11:42:53+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:42:53+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:42:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:42:53+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:42:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:42:53+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:42:58+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:42:58+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-21 11:42:58+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241351', '400011219241352']
2025-10-21 11:42:58+0300 INFO delete_invoices: deleted 2 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241351', '400011219241352']
2025-10-21 11:42:58+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-21 11:42:58+0300 INFO delete_invoices: Deleted 2 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-21 11:42:58+0300 INFO delete_invoices: finished request. requested=2 excel=2 epsilon=2
2025-10-21 11:42:58+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:42:58+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:42:58+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:42:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:42:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:42:59+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:42:59+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:43:06+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:43:06+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:43:06+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:43:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:43:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:43:06+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:43:06+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:43:06+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:43:06+0300 INFO save_summary: start request from 127.0.0.1
2025-10-21 11:43:06+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-21 11:43:06+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:43:07+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:43:07+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:43:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:43:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:43:07+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:43:07+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:04+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:05+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/fetch
2025-10-21 11:46:05+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/fetch
2025-10-21 11:46:05+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/fetch
2025-10-21 11:46:05+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:05+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:06+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:06+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:07+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:08+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 11:46:08+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 11:46:08+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 11:46:09+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:09+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:13+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 11:46:13+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:13+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:13+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:13+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:15+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:16+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 11:46:16+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 11:46:16+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/list
2025-10-21 11:46:17+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:17+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:19+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 11:46:19+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:19+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:19+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:46:19+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5001.app.github.dev/search
2025-10-21 11:47:15+0300 INFO Starting app - MYDATA_ENV=sandbox
2025-10-21 11:47:16+0300 INFO Starting app - MYDATA_ENV=production
2025-10-21 11:47:20+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5.github.dev/
2025-10-21 11:47:21+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/
2025-10-21 11:47:21+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/
2025-10-21 11:47:22+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/
2025-10-21 11:47:22+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/credentials
2025-10-21 11:47:22+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/credentials
2025-10-21 11:47:24+0300 INFO Incoming request: method=POST path=/set_active remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/credentials
2025-10-21 11:47:24+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/credentials
2025-10-21 11:47:24+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/credentials
2025-10-21 11:47:24+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/credentials
2025-10-21 11:47:25+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/credentials
2025-10-21 11:47:25+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:25+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:25+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:25+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:27+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:27+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:47:28+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:47:28+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:47:28+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:28+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:28+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:28+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:31+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 11:47:31+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:31+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:31+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:31+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:38+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 11:47:38+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:38+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:39+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:39+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:41+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:41+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 11:47:41+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 11:47:41+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:41+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:41+0300 INFO save_summary: start request from 127.0.0.1
2025-10-21 11:47:41+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-21 11:47:41+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:42+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:42+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:47:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:48:08+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:48:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:48:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:48:09+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:48:09+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:48:09+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:48:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:48:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:48:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:48:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:06+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:07+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:50:07+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:50:07+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:50:07+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:07+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:08+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:08+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:10+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:10+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/fetch
2025-10-21 11:50:10+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/fetch
2025-10-21 11:50:10+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/fetch
2025-10-21 11:50:11+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:11+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:33+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/fetch
2025-10-21 11:50:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/fetch
2025-10-21 11:50:34+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/fetch
2025-10-21 11:50:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:35+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:35+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:36+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:50:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:50:37+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:50:37+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:37+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:37+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:37+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:50:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:18+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 11:53:18+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:18+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:18+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:18+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:33+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 11:53:33+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:33+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:36+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 11:53:36+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:36+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:45+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:45+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-21 11:53:45+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-21 11:53:45+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:46+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:46+0300 INFO save_summary: start request from 127.0.0.1
2025-10-21 11:53:46+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-21 11:53:46+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:46+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:46+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:46+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:53:46+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:16+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:16+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-21 11:55:16+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241352']
2025-10-21 11:55:16+0300 INFO delete_invoices: deleted 1 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241352']
2025-10-21 11:55:16+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-21 11:55:16+0300 INFO delete_invoices: Deleted 1 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-21 11:55:16+0300 INFO delete_invoices: finished request. requested=1 excel=1 epsilon=1
2025-10-21 11:55:16+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:16+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:16+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:16+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:16+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:21+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:21+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-21 11:55:22+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-21 11:55:22+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:22+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:22+0300 INFO save_summary: start request from 127.0.0.1
2025-10-21 11:55:22+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-21 11:55:22+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:22+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:22+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:23+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:23+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:39+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:55:39+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DLD220246620005207041E1FBEDB99D16B0DAC75CC4C6E0B434B80FA86C15.17
2025-10-21 11:55:40+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DLD220246620005207041E1FBEDB99D16B0DAC75CC4C6E0B434B80FA86C15.17 is_invoice=False mark=
2025-10-21 11:56:10+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:56:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:56:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:56:12+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:56:12+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:56:12+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:56:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:56:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:56:13+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:56:13+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:56:49+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:56:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/fetch
2025-10-21 11:56:50+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/fetch
2025-10-21 11:56:50+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/fetch
2025-10-21 11:56:50+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:56:50+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:56:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:56:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:56:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:56:51+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:56:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:00+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:00+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:57:00+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:57:00+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:57:01+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:01+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:01+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:01+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:02+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:57:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:57:02+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:57:03+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:03+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:03+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:03+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:06+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:06+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:57:06+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:57:06+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:57:07+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:07+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:07+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:07+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:09+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/fetch
2025-10-21 11:57:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/fetch
2025-10-21 11:57:10+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/fetch
2025-10-21 11:57:10+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/credentials
2025-10-21 11:57:10+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/credentials
2025-10-21 11:57:11+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/credentials
2025-10-21 11:57:11+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:11+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:57:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:58:18+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:58:18+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DLD220246620005207041E1FBEDB99D16B0DAC75CC4C6E0B434B80FA86C15.17
2025-10-21 11:58:19+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DLD220246620005207041E1FBEDB99D16B0DAC75CC4C6E0B434B80FA86C15.17 is_invoice=False mark=
2025-10-21 11:59:11+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:59:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:59:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:59:12+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/list
2025-10-21 11:59:12+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:59:12+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:59:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:59:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:59:13+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 11:59:13+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:00:00+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 12:00:00+0300 ERROR Template rendering failed for search.html: block 'scripts' defined twice
Traceback (most recent call last):
  File "/workspaces/Firebed_private/app.py", line 1749, in safe_render
    return render_template(template_name, **ctx)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/loaders.py", line 138, in load
    code = environment.compile(source, name, filename)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/environment.py", line 771, in compile
    self.handle_exception(source=source_hint)
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/workspaces/Firebed_private/templates/search.html", line 216, in template
    {% block scripts %}
jinja2.exceptions.TemplateAssertionError: block 'scripts' defined twice

2025-10-21 12:00:00+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:00:39+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 12:00:39+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:00:39+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:00:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:00:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:00:40+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:00:40+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:02:02+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:04:45+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 12:04:45+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:04:45+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:04:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:04:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:04:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:04:46+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:08:28+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-21 12:08:28+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:08:28+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:08:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:08:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:08:29+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:08:29+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:08:30+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:08:30+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:08:30+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:08:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:08:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:08:30+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:08:30+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:08:31+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search
2025-10-21 12:08:31+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search?auto_submit=1
2025-10-21 12:08:31+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search?auto_submit=1
2025-10-21 12:08:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search?auto_submit=1
2025-10-21 12:08:31+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search?auto_submit=1
2025-10-21 12:08:31+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search?auto_submit=1
2025-10-21 12:08:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://sturdy-space-goldfish-5g7x6wqqgv66c76w5-5000.app.github.dev/search?auto_submit=1
2025-10-22 12:51:48+0300 INFO Starting app - MYDATA_ENV=sandbox
2025-10-22 12:51:49+0300 INFO Starting app - MYDATA_ENV=production
2025-10-22 12:52:09+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47.github.dev/
2025-10-22 12:52:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 12:52:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 12:52:10+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 12:52:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 12:52:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 12:52:13+0300 INFO Incoming request: method=POST path=/set_active remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 12:52:13+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 12:52:13+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 12:52:13+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 12:52:14+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 12:52:15+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:15+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:15+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:15+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:23+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:23+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 12:52:23+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 12:52:24+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 12:52:24+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:24+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:24+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:24+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:28+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:28+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 12:52:28+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 12:52:28+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:28+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:28+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 12:52:28+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 12:52:28+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:29+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:29+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:29+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:29+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:34+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:36+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:36+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 12:52:36+0300 INFO delete_invoices: marks_to_delete resolved = ['400011185872109', '400011219241351']
2025-10-22 12:52:36+0300 INFO delete_invoices: deleted 2 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011185872109', '400011219241351']
2025-10-22 12:52:36+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 12:52:36+0300 INFO delete_invoices: Deleted 2 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 12:52:36+0300 INFO delete_invoices: finished request. requested=2 excel=2 epsilon=2
2025-10-22 12:52:36+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:37+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:37+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:37+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:37+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:38+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:38+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 12:52:38+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 12:52:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 12:52:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 12:52:39+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 12:52:39+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 12:52:41+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 12:52:41+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 12:52:41+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 12:52:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 12:52:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 12:52:41+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 12:52:41+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 12:52:42+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 12:52:42+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 12:52:42+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 12:52:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 12:52:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 12:52:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 12:52:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 12:52:47+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 12:52:47+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 12:52:47+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241353', '400011219241354']
2025-10-22 12:52:48+0300 INFO delete_invoices: deleted 2 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241353', '400011219241354']
2025-10-22 12:52:48+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 12:52:48+0300 INFO delete_invoices: Deleted 2 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 12:52:48+0300 INFO delete_invoices: finished request. requested=2 excel=2 epsilon=2
2025-10-22 12:52:48+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 12:52:48+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:48+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:48+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:48+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:49+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:53+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:53+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 12:52:53+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 12:52:53+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:53+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:53+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 12:52:53+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 12:52:53+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:53+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:53+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:54+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:52:54+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:00+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:00+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 12:53:00+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241355', '400011219241356']
2025-10-22 12:53:00+0300 INFO delete_invoices: deleted 2 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241355', '400011219241356']
2025-10-22 12:53:00+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 12:53:00+0300 INFO delete_invoices: Deleted 2 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 12:53:00+0300 INFO delete_invoices: finished request. requested=2 excel=2 epsilon=2
2025-10-22 12:53:00+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:00+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:00+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:00+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:00+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:08+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:08+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 12:53:08+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 12:53:09+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 12:53:09+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:09+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:12+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:13+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:18+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:34+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:36+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:36+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 12:53:36+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 12:53:36+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:36+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:36+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:38+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:41+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:41+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 12:53:41+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 12:53:41+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:41+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:41+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 12:53:41+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 12:53:42+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:42+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:42+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:56+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:56+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 12:53:56+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 12:53:56+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:56+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:56+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 12:53:56+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 12:53:56+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:56+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:56+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:56+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:53:56+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:08+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:08+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 12:54:08+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 12:54:08+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:08+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:08+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 12:54:08+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 12:54:08+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:08+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:08+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:14+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:14+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 12:54:14+0300 INFO delete_invoices: marks_to_delete resolved = ['400011172559639', '400011219241352', '400011219241353', '400011219241354']
2025-10-22 12:54:14+0300 INFO delete_invoices: deleted 4 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011172559639', '400011219241352', '400011219241353', '400011219241354']
2025-10-22 12:54:14+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 12:54:14+0300 INFO delete_invoices: Deleted 4 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 12:54:14+0300 INFO delete_invoices: finished request. requested=4 excel=4 epsilon=4
2025-10-22 12:54:14+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:14+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:14+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:30+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:31+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:35+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 12:54:35+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:35+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:35+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:35+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:36+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:36+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 12:54:36+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 12:54:36+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:44+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:44+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:44+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:44+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:44+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 12:54:44+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 12:54:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:45+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:45+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:45+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:48+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:48+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 12:54:48+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 12:54:48+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:52+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:58+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 12:54:58+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:58+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:58+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:54:58+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:01+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:01+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 12:55:01+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 12:55:02+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:03+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:03+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 12:55:03+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 12:55:03+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:03+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:03+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:03+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:03+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:04+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:10+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 12:55:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 12:55:11+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 12:55:11+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:11+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:13+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:13+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 12:55:13+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 12:55:13+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:41+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:41+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 12:55:41+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 12:55:42+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 12:55:42+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:42+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:45+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:46+0300 INFO api_scrape_receipt: incoming url=https://github.com/adonisdour/Firebed_private/tree/mydatanaut
2025-10-22 12:55:56+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:57+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 12:55:57+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 12:55:57+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 12:55:57+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:57+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:57+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:57+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:58+0300 INFO api_scrape_receipt: scraped url=https://github.com/adonisdour/Firebed_private/tree/mydatanaut is_invoice=False mark=
2025-10-22 12:55:58+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:55:58+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 12:55:59+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 12:55:59+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:04+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:04+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 12:56:04+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241352']
2025-10-22 12:56:04+0300 INFO delete_invoices: deleted 1 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241352']
2025-10-22 12:56:04+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 12:56:04+0300 INFO delete_invoices: Deleted 1 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 12:56:04+0300 INFO delete_invoices: finished request. requested=1 excel=1 epsilon=1
2025-10-22 12:56:04+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:05+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:05+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:05+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:05+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:09+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 12:56:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 12:56:10+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 12:56:10+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:10+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:10+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:10+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:13+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:13+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 12:56:13+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 12:56:13+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:17+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:17+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 12:56:17+0300 INFO delete_invoices: marks_to_delete resolved = ['400011172559639']
2025-10-22 12:56:17+0300 INFO delete_invoices: deleted 1 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011172559639']
2025-10-22 12:56:17+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 12:56:17+0300 INFO delete_invoices: Deleted 1 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 12:56:17+0300 INFO delete_invoices: finished request. requested=1 excel=1 epsilon=1
2025-10-22 12:56:17+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:18+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:18+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:18+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:18+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:20+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:23+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:25+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:25+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:25+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:25+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:25+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:27+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:27+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 12:56:27+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 12:56:27+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:27+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:27+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:27+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:27+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:30+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:33+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:33+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 12:56:33+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 12:56:33+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:36+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:39+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 12:56:40+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:40+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:40+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:40+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:42+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:42+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 12:56:43+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 12:56:43+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:44+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:44+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 12:56:44+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 12:56:44+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:46+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:49+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 12:56:50+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:50+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:50+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:54+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 12:56:54+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 12:56:55+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 12:56:55+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:35+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:04:35+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:35+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:39+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:41+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:45+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:45+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:04:45+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:04:46+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:52+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:55+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:04:55+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:55+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:55+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:55+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:56+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:56+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:04:57+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:04:57+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:04:59+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:05:01+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:05:01+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:05:01+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:05:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:05:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:05:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:05:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:05:07+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:05:07+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:05:07+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:05:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:05:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:05:07+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:05:07+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:05:08+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:05:08+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:05:09+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:05:09+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:07:17+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:07:17+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:07:17+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:07:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:07:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:07:18+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:07:18+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:07:20+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:07:20+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:07:20+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:07:20+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:09:54+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:09:54+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:09:54+0300 INFO Incoming request: method=GET path=/static/rc_receipts_autoconfirm_patch.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:09:54+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:09:55+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:09:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:09:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:09:55+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:09:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:09:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:09:59+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:09:59+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:09:59+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:09:59+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:10:56+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:10:56+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:10:56+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:10:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:10:56+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:10:56+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:10:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:00+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:00+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:11:00+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:11:00+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:03+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:03+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 13:11:03+0300 INFO delete_invoices: marks_to_delete resolved = ['400011172559639', '400011219241352']
2025-10-22 13:11:03+0300 INFO delete_invoices: deleted 2 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011172559639', '400011219241352']
2025-10-22 13:11:03+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:11:03+0300 INFO delete_invoices: Deleted 2 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 13:11:03+0300 INFO delete_invoices: finished request. requested=2 excel=2 epsilon=2
2025-10-22 13:11:03+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:04+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:04+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:04+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:04+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:07+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:07+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:11:07+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:11:07+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:11:08+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:08+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:08+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:08+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:10+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:11+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:11+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:12+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:12+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:11:13+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:11:13+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:15+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:18+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:11:18+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:18+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:18+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:18+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:19+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:19+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:11:19+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:11:20+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:11:20+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:11:20+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:11:20+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:11:20+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:11:20+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:11:21+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:11:21+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:11:22+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:11:22+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 13:11:22+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:11:22+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:11:22+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:22+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:23+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:23+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:25+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:30+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:11:30+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:30+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:30+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:30+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:33+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:33+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:11:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:11:34+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:11:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:37+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:37+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 13:11:37+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 13:11:37+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 13:11:38+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:38+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:38+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:38+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:41+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:41+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 13:11:41+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 13:11:42+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 13:11:42+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:42+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:43+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:11:43+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:11:43+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:11:43+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:54+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:14:54+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:54+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:54+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:55+0300 INFO Incoming request: method=GET path=/static/js/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:55+0300 ERROR Unhandled exception: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 278, in <lambda>
    view_func=lambda **kw: self_ref().send_static_file(**kw),  # type: ignore # noqa: B950
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 326, in send_static_file
    return send_from_directory(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/helpers.py", line 572, in send_from_directory
    return werkzeug.utils.send_from_directory(  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/werkzeug/utils.py", line 575, in send_from_directory
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2025-10-22 13:14:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:55+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:55+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:58+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:14:58+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:58+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:58+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:58+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:58+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:58+0300 INFO Incoming request: method=GET path=/static/js/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:14:58+0300 ERROR Unhandled exception: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 278, in <lambda>
    view_func=lambda **kw: self_ref().send_static_file(**kw),  # type: ignore # noqa: B950
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 326, in send_static_file
    return send_from_directory(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/helpers.py", line 572, in send_from_directory
    return werkzeug.utils.send_from_directory(  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/werkzeug/utils.py", line 575, in send_from_directory
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2025-10-22 13:14:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:15:01+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:15:01+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:15:02+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:15:02+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:20:35+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:20:36+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:20:36+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:20:36+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:20:36+0300 INFO Incoming request: method=GET path=/static/js/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:20:36+0300 ERROR Unhandled exception: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 278, in <lambda>
    view_func=lambda **kw: self_ref().send_static_file(**kw),  # type: ignore # noqa: B950
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 326, in send_static_file
    return send_from_directory(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/helpers.py", line 572, in send_from_directory
    return werkzeug.utils.send_from_directory(  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/werkzeug/utils.py", line 575, in send_from_directory
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2025-10-22 13:20:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:20:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:20:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:20:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:20:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:20:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:20:36+0300 INFO Incoming request: method=GET path=/static/js/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:20:36+0300 ERROR Unhandled exception: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 278, in <lambda>
    view_func=lambda **kw: self_ref().send_static_file(**kw),  # type: ignore # noqa: B950
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 326, in send_static_file
    return send_from_directory(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/helpers.py", line 572, in send_from_directory
    return werkzeug.utils.send_from_directory(  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/werkzeug/utils.py", line 575, in send_from_directory
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2025-10-22 13:20:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:21:16+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:21:16+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:21:17+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:21:17+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:21:47+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:21:47+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:21:47+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:21:47+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:21:48+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:21:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:21:48+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:21:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:21:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:21:48+0300 INFO Incoming request: method=GET path=/static/js/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:21:48+0300 ERROR Unhandled exception: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 278, in <lambda>
    view_func=lambda **kw: self_ref().send_static_file(**kw),  # type: ignore # noqa: B950
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 326, in send_static_file
    return send_from_directory(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/helpers.py", line 572, in send_from_directory
    return werkzeug.utils.send_from_directory(  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/werkzeug/utils.py", line 575, in send_from_directory
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2025-10-22 13:21:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:21:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:22:23+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:22:24+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:22:24+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:22:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:22:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:22:24+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:22:24+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:22:24+0300 INFO Incoming request: method=GET path=/static/js/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:22:24+0300 ERROR Unhandled exception: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 278, in <lambda>
    view_func=lambda **kw: self_ref().send_static_file(**kw),  # type: ignore # noqa: B950
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 326, in send_static_file
    return send_from_directory(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/helpers.py", line 572, in send_from_directory
    return werkzeug.utils.send_from_directory(  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/werkzeug/utils.py", line 575, in send_from_directory
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2025-10-22 13:22:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:22:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:22:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:22:47+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:22:47+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:22:47+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:22:47+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:23:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:23:08+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:23:13+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:05+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:27:06+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:06+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:06+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:06+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:06+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:12+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:12+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:27:12+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:27:12+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:12+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:12+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:27:13+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:13+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:13+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:13+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:13+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:13+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:19+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:19+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 13:27:19+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241352', '400011219241353']
2025-10-22 13:27:19+0300 INFO delete_invoices: deleted 2 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241352', '400011219241353']
2025-10-22 13:27:19+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:27:19+0300 INFO delete_invoices: Deleted 2 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 13:27:19+0300 INFO delete_invoices: finished request. requested=2 excel=2 epsilon=2
2025-10-22 13:27:19+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:19+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:19+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:19+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:19+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:19+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:27+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:27+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:27:27+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:27:28+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:27:28+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:28+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:28+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:28+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:28+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:32+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:32+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 13:27:32+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 13:27:33+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 13:27:33+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:33+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:33+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:33+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:33+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:35+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:35+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:27:35+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:27:36+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:41+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:42+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:48+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:48+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:48+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:48+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:48+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:48+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:51+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:51+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:27:51+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:27:51+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:52+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:52+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:27:52+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:27:52+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:52+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:52+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:52+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:52+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:52+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:52+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:52+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:54+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:27:55+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:27:55+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:27:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:27:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:27:55+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:27:55+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:27:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:27:55+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:28:46+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:28:46+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:28:46+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:28:46+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:28:51+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:28:51+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:51+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:52+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:52+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:52+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:52+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:54+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:54+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:28:54+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:28:54+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:54+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:54+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:28:54+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:55+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:55+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:55+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:55+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:28:55+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:29:50+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:29:50+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:29:50+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:29:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:29:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:29:51+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:29:51+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:29:51+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:29:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:29:54+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:29:54+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:29:54+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:29:55+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:29:55+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:55+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:56+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:56+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:56+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:59+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:29:59+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:59+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:59+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:59+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:59+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:29:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:01+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:30:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:30:02+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:30:02+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:02+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:03+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:10+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:30:11+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:11+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:11+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:22+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:22+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:30:22+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:30:22+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:32+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:30:33+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:30:33+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:30:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:30:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:30:33+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:30:33+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:30:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:30:33+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:30:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:30:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:30:35+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:30:35+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:30:36+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:30:36+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:30:36+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:30:36+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:30:36+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:30:36+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:30:36+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:30:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:30:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:30:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:30:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:30:37+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:30:37+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:30:42+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:30:42+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:30:43+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:30:43+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:30:59+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:30:59+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 13:30:59+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241352', '400011219241353', '400011219241354']
2025-10-22 13:30:59+0300 INFO delete_invoices: deleted 3 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241352', '400011219241353', '400011219241354']
2025-10-22 13:30:59+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:30:59+0300 INFO delete_invoices: Deleted 3 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 13:30:59+0300 INFO delete_invoices: finished request. requested=3 excel=3 epsilon=3
2025-10-22 13:30:59+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:00+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:00+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:00+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:00+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:00+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:04+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:04+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:04+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:04+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:04+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:04+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:08+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:08+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:31:08+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:31:08+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:08+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:08+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:31:08+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:31:09+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:09+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:09+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:17+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:17+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:31:17+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:31:17+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:24+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:31:25+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:25+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:25+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:25+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:25+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:27+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:27+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:31:27+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:31:27+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:27+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:27+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:31:28+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:28+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:28+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:28+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:28+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:28+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:31:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:34:39+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:34:39+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 13:34:39+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 13:34:40+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 13:34:40+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:40+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:40+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:41+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:41+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:45+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 13:34:45+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:45+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:45+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:46+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:46+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:50+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:34:50+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:34:50+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:34:50+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:34:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:34:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:34:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:34:50+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:34:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:34:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:34:52+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:34:52+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:34:52+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:34:52+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:34:56+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:34:56+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:34:56+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:34:56+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:34:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:34:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:34:56+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:34:56+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:34:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:34:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:34:59+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:34:59+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:34:59+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:34:59+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:09+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:35:09+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:09+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:10+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:10+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:14+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:14+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:35:14+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:35:14+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:14+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:14+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:35:15+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:15+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:15+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:15+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:15+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:15+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:20+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:20+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 13:35:20+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241352', '400011219241353', '400011219241354']
2025-10-22 13:35:20+0300 INFO delete_invoices: deleted 3 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241352', '400011219241353', '400011219241354']
2025-10-22 13:35:20+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:35:20+0300 INFO delete_invoices: Deleted 3 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 13:35:20+0300 INFO delete_invoices: finished request. requested=3 excel=3 epsilon=3
2025-10-22 13:35:20+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:20+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:35:20+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:35:20+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:35:20+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:35:20+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:35:20+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:35:20+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:35:20+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:35:20+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:35:20+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:35:21+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:35:22+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:35:22+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:35:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:35:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:35:22+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:35:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:35:22+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:35:22+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:35:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:35:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:35:23+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:35:23+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:35:23+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:35:23+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:35:27+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:35:27+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:27+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:27+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:27+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:27+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:33+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:33+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:35:33+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:35:33+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:34+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:34+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:35:34+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:35:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:34+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:39+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:35:39+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:35:39+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:35:40+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:36:22+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:36:22+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 13:36:22+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 13:36:23+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 13:36:23+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:36:23+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:36:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:36:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:36:24+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:36:24+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:36:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:36:24+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:36:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:36:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:36:29+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:36:29+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 13:36:29+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 13:36:29+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:36:29+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:36:29+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:36:30+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:36:30+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:36:30+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:36:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:36:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:36:30+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:36:30+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:36:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:36:30+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:06+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:06+0300 INFO api_scrape_receipt: incoming url=https://mydata.wedoconnect.com/Validation?AC=780A376C9EE3B1300158D75D046DD6954E95A170
2025-10-22 13:37:09+0300 INFO api_scrape_receipt: scraped url=https://mydata.wedoconnect.com/Validation?AC=780A376C9EE3B1300158D75D046DD6954E95A170 is_invoice=True mark=400010624500556
2025-10-22 13:37:33+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:37:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:34+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:37+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:37+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DLD220246620005207041E1FBEDB99D16B0DAC75CC4C6E0B434B80FA86C15.17
2025-10-22 13:37:37+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DLD220246620005207041E1FBEDB99D16B0DAC75CC4C6E0B434B80FA86C15.17 is_invoice=False mark=
2025-10-22 13:37:53+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:37:53+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:53+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:54+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:54+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:54+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:56+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:56+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:37:56+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:37:56+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:57+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:57+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:37:57+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:57+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:57+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:57+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:57+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:57+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:37:59+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:38:00+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:38:00+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:38:00+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:38:00+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:00+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:00+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:00+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:01+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:03+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:38:03+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:03+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:03+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:03+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:03+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:07+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:07+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:38:07+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:38:07+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:11+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:12+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 13:38:12+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 13:38:12+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 13:38:13+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:13+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:13+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:13+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:13+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:16+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:16+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:38:16+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:38:16+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:16+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:16+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:38:16+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:16+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:38:16+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:38:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:38:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:38:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:38:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:38:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:38:17+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:38:56+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:38:56+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 13:38:56+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241352', '400011219241353', '400011219241354', '400011219241355']
2025-10-22 13:38:56+0300 INFO delete_invoices: deleted 4 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241352', '400011219241353', '400011219241354', '400011219241355']
2025-10-22 13:38:56+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:38:56+0300 INFO delete_invoices: Deleted 4 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 13:38:56+0300 INFO delete_invoices: finished request. requested=4 excel=4 epsilon=4
2025-10-22 13:38:56+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:38:56+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:56+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:56+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:57+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:57+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:38:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:03+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:03+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:39:03+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:39:03+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:09+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:39:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:39:10+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:39:10+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:10+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:10+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:10+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:10+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:13+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:13+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:39:13+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:39:13+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:13+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:13+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:39:13+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:39:14+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:39:14+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:39:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:39:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:39:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:39:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:39:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:39:14+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:41:19+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:41:19+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:41:19+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:41:19+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:41:22+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:41:23+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 13:41:23+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 13:41:24+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 13:41:24+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:41:24+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:41:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:41:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:41:25+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:41:25+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:41:25+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:41:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:41:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:41:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:41:28+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:41:28+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:41:28+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:41:28+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:41:28+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:41:28+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:41:29+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:41:29+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:41:29+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:41:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:41:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:41:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:41:29+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:41:29+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:41:29+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:35+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:46:36+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:36+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:38+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:45+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:45+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:45+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:51+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:52+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:52+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:52+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:52+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:52+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:52+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:52+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:56+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:46:57+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:57+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:57+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:57+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:57+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:46:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:10+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:10+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:47:10+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:47:10+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:10+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:10+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:47:10+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:11+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:11+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:11+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:13+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:13+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:47:13+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:47:13+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:17+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:17+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:17+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:17+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:18+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:18+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:18+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:18+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:18+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:18+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:20+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:20+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:47:20+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:47:20+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:20+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:20+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:47:20+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:21+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:21+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:21+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:21+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:21+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:22+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:23+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:23+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:23+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:23+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:23+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:23+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:23+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:23+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:23+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:24+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:24+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:35+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:35+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:47:35+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:47:35+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:44+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 13:47:44+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:47:44+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:47:46+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:47:47+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:47:47+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:47:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:47:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:47:47+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:47:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:47:47+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:47:47+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:47:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:47:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:47:50+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:47:50+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:47:51+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:47:51+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:47:51+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:47:51+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:47:51+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:47:51+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:51+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:52+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:52+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:52+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:47:52+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:48:00+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:48:00+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:48:00+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:48:00+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:48:00+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:48:00+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 13:48:00+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:48:00+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:48:01+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:01+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:01+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:01+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:01+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:13+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:13+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:48:13+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:48:14+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:14+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:14+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 13:48:14+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:48:14+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:14+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:14+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:14+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:48:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:09+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:09+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 13:49:09+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241352', '400011219241353', '400011219241354', '400011219241355', '400011219241356', '400011219241357', '400011219241358']
2025-10-22 13:49:09+0300 INFO delete_invoices: deleted 7 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241352', '400011219241353', '400011219241354', '400011219241355', '400011219241356', '400011219241357', '400011219241358']
2025-10-22 13:49:09+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:49:09+0300 INFO delete_invoices: Deleted 7 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 13:49:09+0300 INFO delete_invoices: finished request. requested=7 excel=7 epsilon=7
2025-10-22 13:49:09+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:09+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:09+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:10+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:10+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:10+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:13+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:13+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:49:13+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:49:13+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:13+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:13+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:49:13+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:14+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:14+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:14+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:21+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:21+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:49:21+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:49:21+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:26+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:26+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:49:26+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:49:27+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:49:27+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:27+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:27+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:27+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:27+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:32+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:32+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:49:32+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:49:32+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:32+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:32+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:49:32+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:49:32+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:33+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:33+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:33+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:33+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:35+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:35+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:49:35+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:49:35+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:41+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:41+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:41+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:41+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:41+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:41+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:43+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:43+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:49:43+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:49:44+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:44+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:44+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:49:44+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:44+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:44+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:44+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:46+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:49:46+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:49:46+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:49:46+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:50:04+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:50:04+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:50:04+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:50:05+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:50:05+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:50:05+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:50:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:50:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:50:05+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:50:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:50:05+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:50:05+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:50:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:50:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:50:08+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:50:09+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:09+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:09+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:11+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:11+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:50:11+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:50:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:50:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:50:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:50:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:50:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:50:11+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:50:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:50:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:50:13+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 13:50:13+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:13+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:14+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:50:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:52:23+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:52:24+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:52:24+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:52:24+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:52:25+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:25+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:25+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:25+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:25+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:26+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:27+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:52:27+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:52:27+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:52:27+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:27+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:28+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:28+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:28+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:30+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:30+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:30+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:30+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:30+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:30+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:32+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:32+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:52:32+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:52:33+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:52:33+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:33+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:33+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:33+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:33+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:52:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:06+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:54:06+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:06+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:07+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:07+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:07+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:08+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:08+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:54:08+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:54:09+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:54:09+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:09+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:09+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:11+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:12+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:54:12+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:54:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:54:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:54:12+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:54:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:54:12+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:54:12+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:54:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:54:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:54:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:54:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:54:13+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 13:54:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:54:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:54:14+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:54:15+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 13:54:15+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 13:54:15+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 13:54:15+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:15+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:15+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:15+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:15+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:27+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 13:54:28+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:28+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:28+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:28+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:28+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:32+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:32+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:54:32+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:54:32+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:33+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:33+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:54:33+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:33+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:33+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:33+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:33+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:33+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:42+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:42+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:42+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:42+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:44+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:44+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:54:44+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:54:44+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:47+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:48+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:54:48+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:54:48+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 13:54:48+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:48+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:49+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:49+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:49+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:54+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:54+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 13:54:54+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 13:54:54+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:54+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:54+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:54:54+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:54:55+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:55+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:55+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:55+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:54:55+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:55:03+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:55:03+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 13:55:03+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241352', '400011219241353', '400011219241354', '400011219241355', '400011219241356']
2025-10-22 13:55:03+0300 INFO delete_invoices: deleted 5 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241352', '400011219241353', '400011219241354', '400011219241355', '400011219241356']
2025-10-22 13:55:03+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 13:55:03+0300 INFO delete_invoices: Deleted 5 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 13:55:03+0300 INFO delete_invoices: finished request. requested=5 excel=5 epsilon=5
2025-10-22 13:55:04+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 13:55:04+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:55:04+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:55:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:55:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:55:04+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:55:04+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:55:04+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:55:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:55:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 13:55:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:25+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:01:25+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:25+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:25+0300 INFO Incoming request: method=GET path=/static/js/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:25+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:25+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:26+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:26+0300 ERROR Unhandled exception: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 278, in <lambda>
    view_func=lambda **kw: self_ref().send_static_file(**kw),  # type: ignore # noqa: B950
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 326, in send_static_file
    return send_from_directory(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/helpers.py", line 572, in send_from_directory
    return werkzeug.utils.send_from_directory(  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/werkzeug/utils.py", line 575, in send_from_directory
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2025-10-22 14:01:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:27+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:01:27+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:27+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:28+0300 INFO Incoming request: method=GET path=/static/js/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:28+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:28+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:01:28+0300 ERROR Unhandled exception: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 278, in <lambda>
    view_func=lambda **kw: self_ref().send_static_file(**kw),  # type: ignore # noqa: B950
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 326, in send_static_file
    return send_from_directory(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/helpers.py", line 572, in send_from_directory
    return werkzeug.utils.send_from_directory(  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/werkzeug/utils.py", line 575, in send_from_directory
    raise NotFound()
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2025-10-22 14:01:28+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:06+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:02:06+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:06+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:06+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:06+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:06+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:09+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:09+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:02:09+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:02:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:02:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:02:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:02:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:02:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:02:09+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:02:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:02:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:02:12+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:02:12+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:02:12+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:02:13+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:02:13+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:13+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:13+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:13+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:13+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:18+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:18+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:02:18+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:02:18+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:26+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:26+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:02:26+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:02:28+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:02:28+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:28+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:28+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:28+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:28+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:32+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:32+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:32+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:32+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:32+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:32+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:35+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:35+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:02:35+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:02:35+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:36+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:36+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:02:36+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:02:36+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:02:36+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:02:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:02:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:02:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:02:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:02:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:02:36+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:06+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:09:06+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:06+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:07+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:07+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:07+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:07+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:08+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:09:08+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:09:09+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:09:09+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:09+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:09+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:12+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:12+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:09:12+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:09:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:09:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:09:12+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:09:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:09:12+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:09:12+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:09:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:09:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:09:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:09:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:09:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:09:14+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:09:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:09:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:09:15+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:09:15+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:15+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:15+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:15+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:15+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:20+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:20+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:09:20+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:09:20+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:22+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:23+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:23+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:23+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:23+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:23+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:26+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:26+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:09:26+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:09:26+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:26+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:26+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:09:27+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:27+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:27+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:27+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:27+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:27+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:30+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:09:30+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:09:30+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:09:30+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:09:30+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:30+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:31+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:31+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:31+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:34+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:09:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:34+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:09:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:27+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:12:27+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:27+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:27+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:27+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:29+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:29+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:12:29+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:12:30+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:12:30+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:30+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:30+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:30+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:49+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:49+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:12:49+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:12:50+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:12:50+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:50+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:51+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:51+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:52+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:52+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:12:52+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:12:52+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:12:53+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:53+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:53+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:53+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:54+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:55+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:12:55+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:12:55+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:12:56+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:56+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:56+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:56+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:12:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:02+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:02+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:13:02+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:13:02+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:13+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:13:13+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:13+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:15+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:15+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:13:15+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:13:16+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:13:16+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:16+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:16+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:16+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:16+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:18+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:18+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:13:18+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:13:19+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:13:19+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:19+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:19+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:19+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:19+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:40+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:13:40+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:40+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:41+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:41+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:41+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:42+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:13:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:13:43+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:13:43+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:43+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:43+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:43+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:43+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:45+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:13:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:13:46+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:13:46+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:46+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:46+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:46+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:46+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:13:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:29+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:18:29+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:29+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:29+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:29+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:30+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:30+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:33+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:33+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:18:33+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:18:33+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:18:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:34+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:34+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:18:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:18+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:18+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:20:18+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:20:18+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:21+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:21+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:21+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:21+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:21+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:21+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:22+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:25+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:25+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:20:25+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:20:25+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:25+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:25+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:20:25+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:25+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:25+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:26+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:26+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:26+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:26+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:29+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:29+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 14:20:29+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241352', '400011219241353', '400011219241354']
2025-10-22 14:20:29+0300 INFO delete_invoices: deleted 3 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241352', '400011219241353', '400011219241354']
2025-10-22 14:20:29+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:20:29+0300 INFO delete_invoices: Deleted 3 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 14:20:29+0300 INFO delete_invoices: finished request. requested=3 excel=3 epsilon=3
2025-10-22 14:20:29+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:29+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:29+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:29+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:30+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:30+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:30+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:30+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:31+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:20:31+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:20:31+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:20:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:20:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:20:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:20:31+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:20:31+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:20:31+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:20:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:20:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:20:36+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:20:37+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:20:37+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:20:37+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:20:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:20:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:20:37+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:20:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:20:37+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:20:37+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:20:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:20:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:20:40+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:20:40+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:20:40+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:20:40+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:20:45+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:20:46+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:20:46+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:20:46+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:20:46+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:46+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:46+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:47+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:47+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:47+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:49+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:49+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:20:49+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:20:49+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:50+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:50+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:20:50+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:20:50+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:50+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:50+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:50+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:20:50+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:25:05+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:25:05+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:25:05+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:25:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:25:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:25:06+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:25:06+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:25:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:25:07+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:25:08+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:25:08+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:25:09+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:25:09+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:25:09+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:25:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:25:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:25:10+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:25:10+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:25:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:25:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:25:11+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:25:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:25:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:25:12+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:25:12+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:25:12+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:25:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:25:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:25:12+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:25:12+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:25:14+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:25:14+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:25:14+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:25:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:25:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:25:15+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:25:15+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:25:20+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:25:20+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:25:20+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:25:20+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:25:26+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:25:26+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:25:26+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:25:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:25:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:25:26+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:25:27+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:25:29+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:25:29+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:25:29+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:25:29+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:26:14+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:26:14+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:26:14+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:26:14+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:26:14+0300 INFO Incoming request: method=GET path=/static/receipts_mode_repeat_bridge.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:26:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:26:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:26:15+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:26:15+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:26:15+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:26:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:26:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:26:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:26:17+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-22 14:26:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:26:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:26:18+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:26:18+0300 INFO Incoming request: method=GET path=/static/receipts_mode_repeat_bridge.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:18+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:18+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:18+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:18+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:18+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:18+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:20+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:20+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:26:20+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:26:21+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:26:21+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:21+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:21+0300 INFO Incoming request: method=GET path=/static/receipts_mode_repeat_bridge.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:21+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:21+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:21+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:21+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:26:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:20+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:20+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:28:20+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:28:20+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:24+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:25+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:28:25+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:28:25+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:28:26+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:26+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:26+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:26+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:26+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:26+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:28+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:28+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:28:28+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:28:28+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:28+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:28+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:28:29+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:29+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:29+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:29+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:29+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:29+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:29+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:31+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:31+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:28:32+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:28:32+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:34+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:28:34+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:34+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:35+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:35+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:28:36+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:28:36+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:36+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:36+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:28:36+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:36+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:36+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:36+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:37+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:37+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:37+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:38+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:38+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:28:38+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:28:39+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:40+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:40+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:40+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:40+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:40+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:40+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:40+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:42+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:42+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:28:42+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:28:42+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:43+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:43+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:28:43+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:43+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:43+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:43+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:43+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:43+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:43+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:57+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:28:57+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:28:57+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:28:57+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:28:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:28:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:28:57+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:28:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:28:57+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:28:57+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:28:59+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:28:59+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:28:59+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:28:59+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:00+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:01+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:01+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:01+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:01+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:01+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:01+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:05+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:05+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:05+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:05+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:05+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:05+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:05+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:07+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:07+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:07+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:07+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:08+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:08+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:08+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:11+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:29:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:29:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:29:11+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:29:12+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:29:12+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:29:12+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:29:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:29:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:29:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:29:12+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:29:12+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:29:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:29:12+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:29:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:29:19+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:29:19+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:29:19+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:29:19+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:29:19+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:29:19+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:29:20+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:29:20+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:20+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:20+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:20+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:20+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:20+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:20+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:20+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:20+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:22+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:22+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:29:22+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:29:22+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:26+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:29:27+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:27+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:27+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:27+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:27+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:29:27+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:41+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:30:41+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:41+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:41+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:42+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:43+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:43+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:30:43+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:30:43+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:43+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:43+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:30:43+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:44+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:44+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:44+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:44+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:45+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:46+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:46+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:46+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:46+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:46+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:46+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:48+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:48+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:48+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:48+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:48+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:48+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:48+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:51+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:51+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:51+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:51+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:51+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:51+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:51+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:52+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:52+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:52+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:52+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:52+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:52+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:52+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:52+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:52+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:52+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:58+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:30:58+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:30:58+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:30:59+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:01+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:01+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:01+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:01+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:01+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:01+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:01+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:04+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:04+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:04+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:04+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:04+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:04+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:04+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:06+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:06+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:31:06+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:31:07+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:31:07+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:07+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:07+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:07+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:07+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:07+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:12+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:31:12+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:12+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:12+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:13+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:13+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:13+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:16+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:31:17+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:17+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:17+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:17+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:20+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:20+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:31:20+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:31:20+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:20+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:20+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:31:21+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:21+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:21+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:21+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:21+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:21+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:21+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:29+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:30+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:30+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:30+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:30+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:30+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:30+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:33+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:33+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:31:33+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:31:33+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:34+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:34+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:31:34+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:31:34+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:31:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:34+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:34+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:43+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:43+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:31:43+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:31:43+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:43+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:43+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:31:43+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:43+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:31:43+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:31:44+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:44+0300 ERROR Failed building table_html for search page
Traceback (most recent call last):
  File "/workspaces/Firebed_private/app.py", line 3944, in search
    df = pd.read_excel(excel_path, engine="openpyxl", dtype=str).fillna("")
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_base.py", line 495, in read_excel
    io = ExcelFile(
         ^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_base.py", line 1567, in __init__
    self._reader = self._engines[engine](
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_openpyxl.py", line 553, in __init__
    super().__init__(
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_base.py", line 573, in __init__
    self.book = self.load_workbook(self.handles.handle, engine_kwargs)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_openpyxl.py", line 572, in load_workbook
    return load_workbook(
           ^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/openpyxl/reader/excel.py", line 346, in load_workbook
    reader = ExcelReader(filename, read_only, keep_vba,
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/openpyxl/reader/excel.py", line 123, in __init__
    self.archive = _validate_archive(fn)
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/openpyxl/reader/excel.py", line 95, in _validate_archive
    archive = ZipFile(filename, 'r')
              ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/python/3.12.1/lib/python3.12/zipfile/__init__.py", line 1339, in __init__
    self._RealGetContents()
  File "/usr/local/python/3.12.1/lib/python3.12/zipfile/__init__.py", line 1436, in _RealGetContents
    raise BadZipFile("Bad magic number for central directory")
zipfile.BadZipFile: Bad magic number for central directory
2025-10-22 14:31:44+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:44+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:44+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:44+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:58+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:31:58+0300 ERROR Failed building table_html for search page
Traceback (most recent call last):
  File "/workspaces/Firebed_private/app.py", line 3944, in search
    df = pd.read_excel(excel_path, engine="openpyxl", dtype=str).fillna("")
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_base.py", line 495, in read_excel
    io = ExcelFile(
         ^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_base.py", line 1567, in __init__
    self._reader = self._engines[engine](
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_openpyxl.py", line 553, in __init__
    super().__init__(
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_base.py", line 573, in __init__
    self.book = self.load_workbook(self.handles.handle, engine_kwargs)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_openpyxl.py", line 572, in load_workbook
    return load_workbook(
           ^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/openpyxl/reader/excel.py", line 346, in load_workbook
    reader = ExcelReader(filename, read_only, keep_vba,
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/openpyxl/reader/excel.py", line 123, in __init__
    self.archive = _validate_archive(fn)
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/openpyxl/reader/excel.py", line 95, in _validate_archive
    archive = ZipFile(filename, 'r')
              ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/python/3.12.1/lib/python3.12/zipfile/__init__.py", line 1339, in __init__
    self._RealGetContents()
  File "/usr/local/python/3.12.1/lib/python3.12/zipfile/__init__.py", line 1436, in _RealGetContents
    raise BadZipFile("Bad magic number for central directory")
zipfile.BadZipFile: Bad magic number for central directory
2025-10-22 14:31:58+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:58+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:58+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:58+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:59+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:59+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:31:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:01+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:01+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:32:01+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:32:05+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:32:05+0300 ERROR Failed building table_html for search page
Traceback (most recent call last):
  File "/workspaces/Firebed_private/app.py", line 3944, in search
    df = pd.read_excel(excel_path, engine="openpyxl", dtype=str).fillna("")
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_base.py", line 495, in read_excel
    io = ExcelFile(
         ^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_base.py", line 1567, in __init__
    self._reader = self._engines[engine](
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_openpyxl.py", line 553, in __init__
    super().__init__(
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_base.py", line 573, in __init__
    self.book = self.load_workbook(self.handles.handle, engine_kwargs)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_openpyxl.py", line 572, in load_workbook
    return load_workbook(
           ^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/openpyxl/reader/excel.py", line 346, in load_workbook
    reader = ExcelReader(filename, read_only, keep_vba,
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/openpyxl/reader/excel.py", line 123, in __init__
    self.archive = _validate_archive(fn)
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/openpyxl/reader/excel.py", line 95, in _validate_archive
    archive = ZipFile(filename, 'r')
              ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/python/3.12.1/lib/python3.12/zipfile/__init__.py", line 1339, in __init__
    self._RealGetContents()
  File "/usr/local/python/3.12.1/lib/python3.12/zipfile/__init__.py", line 1436, in _RealGetContents
    raise BadZipFile("Bad magic number for central directory")
zipfile.BadZipFile: Bad magic number for central directory
2025-10-22 14:32:05+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:05+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:05+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:05+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:05+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:05+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:29+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:30+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:32:30+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:32:36+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:32:37+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:37+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:37+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:37+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:37+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:37+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:39+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:39+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:32:40+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:32:40+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:45+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:32:45+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:45+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:45+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:45+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:48+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:48+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:32:49+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:32:49+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:49+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:49+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:32:50+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:32:50+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:50+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:50+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:50+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:50+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:54+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:54+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:32:54+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:32:54+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:56+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:32:56+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:56+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:56+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:56+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:56+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:57+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:58+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:58+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:32:58+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:32:58+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:58+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:58+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:32:59+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:59+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:59+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:59+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:59+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:59+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:32:59+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:00+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:01+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:01+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:01+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:01+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:01+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:01+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:02+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:02+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:33:02+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:33:02+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:04+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:05+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:05+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:05+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:05+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:05+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:05+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:06+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:06+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:33:06+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:33:06+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:07+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:07+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:33:07+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:07+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:07+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:07+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:07+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:07+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:07+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:11+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:11+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:33:11+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:33:11+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:15+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:15+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:15+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:15+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:15+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:15+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:15+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:16+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:16+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:33:16+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:33:16+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:16+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:16+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:33:17+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:17+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:17+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:17+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:17+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:19+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:19+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:33:20+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:33:20+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:21+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:22+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:22+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:22+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:22+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:22+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:22+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:23+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:23+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:33:23+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:33:23+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:23+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:23+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:33:23+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:24+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:24+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:24+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:24+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:24+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:24+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:27+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:27+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:33:27+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:33:27+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:29+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:29+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:29+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:29+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:29+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:29+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:29+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:31+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:31+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:33:31+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:33:31+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:31+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:31+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:33:31+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:31+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:31+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:31+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:32+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:32+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:32+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:36+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:36+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:33:36+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:33:36+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:37+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:38+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:38+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:38+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:38+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:38+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:38+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:39+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:39+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:33:39+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:33:39+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:39+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:39+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:33:40+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:40+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:40+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:40+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:40+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:40+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:40+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:41+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:41+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:33:41+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:33:42+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:43+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:43+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:43+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:43+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:43+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:43+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:43+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:44+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:44+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:33:44+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:33:44+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:44+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:44+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:33:45+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:45+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:45+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:45+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:45+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:46+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:46+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:33:46+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:33:46+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:48+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:48+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:48+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:48+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:48+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:48+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:48+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:49+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:49+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:33:49+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:33:50+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:50+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:50+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:33:50+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:50+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:50+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:50+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:50+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:50+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:56+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:56+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:33:56+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:33:56+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:56+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:56+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:33:56+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:33:56+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:33:56+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:33:56+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:33:56+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:33:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:33:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:33:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:33:57+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:33:57+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:33:57+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:33:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:33:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:04+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:04+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:34:04+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:34:04+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:05+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:05+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:34:05+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:34:05+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:05+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:34:05+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:05+0300 ERROR Failed building table_html for search page
Traceback (most recent call last):
  File "/workspaces/Firebed_private/app.py", line 3944, in search
    df = pd.read_excel(excel_path, engine="openpyxl", dtype=str).fillna("")
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_base.py", line 495, in read_excel
    io = ExcelFile(
         ^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_base.py", line 1567, in __init__
    self._reader = self._engines[engine](
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_openpyxl.py", line 553, in __init__
    super().__init__(
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_base.py", line 573, in __init__
    self.book = self.load_workbook(self.handles.handle, engine_kwargs)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_openpyxl.py", line 572, in load_workbook
    return load_workbook(
           ^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/openpyxl/reader/excel.py", line 346, in load_workbook
    reader = ExcelReader(filename, read_only, keep_vba,
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/openpyxl/reader/excel.py", line 123, in __init__
    self.archive = _validate_archive(fn)
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/openpyxl/reader/excel.py", line 95, in _validate_archive
    archive = ZipFile(filename, 'r')
              ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/python/3.12.1/lib/python3.12/zipfile/__init__.py", line 1339, in __init__
    self._RealGetContents()
  File "/usr/local/python/3.12.1/lib/python3.12/zipfile/__init__.py", line 1406, in _RealGetContents
    raise BadZipFile("File is not a zip file")
zipfile.BadZipFile: File is not a zip file
2025-10-22 14:34:05+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:05+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:05+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:05+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:05+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:05+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:23+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:23+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:34:23+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:34:23+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:23+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:23+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:34:23+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:34:23+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:24+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:24+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:24+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:24+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:24+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:24+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:32+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:32+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:34:32+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:34:32+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:33+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:33+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:34:33+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:33+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:34:33+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:33+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:33+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:33+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:33+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:33+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:33+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:40+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:40+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:34:40+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:34:40+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:40+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:40+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:34:40+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:34:40+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:41+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:41+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:41+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:41+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:41+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:41+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:57+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:57+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:34:57+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:34:57+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:57+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:57+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:34:57+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:34:57+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:58+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:58+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:58+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:58+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:58+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:58+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:34:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:01+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:01+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:35:01+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:35:01+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:01+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:01+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:35:01+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:35:01+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:01+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:35:01+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:01+0300 ERROR Failed building table_html for search page
Traceback (most recent call last):
  File "/workspaces/Firebed_private/app.py", line 3944, in search
    df = pd.read_excel(excel_path, engine="openpyxl", dtype=str).fillna("")
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_base.py", line 495, in read_excel
    io = ExcelFile(
         ^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_base.py", line 1567, in __init__
    self._reader = self._engines[engine](
                   ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_openpyxl.py", line 553, in __init__
    super().__init__(
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_base.py", line 573, in __init__
    self.book = self.load_workbook(self.handles.handle, engine_kwargs)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/io/excel/_openpyxl.py", line 572, in load_workbook
    return load_workbook(
           ^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/openpyxl/reader/excel.py", line 346, in load_workbook
    reader = ExcelReader(filename, read_only, keep_vba,
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/openpyxl/reader/excel.py", line 123, in __init__
    self.archive = _validate_archive(fn)
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/openpyxl/reader/excel.py", line 95, in _validate_archive
    archive = ZipFile(filename, 'r')
              ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/python/3.12.1/lib/python3.12/zipfile/__init__.py", line 1339, in __init__
    self._RealGetContents()
  File "/usr/local/python/3.12.1/lib/python3.12/zipfile/__init__.py", line 1406, in _RealGetContents
    raise BadZipFile("File is not a zip file")
zipfile.BadZipFile: File is not a zip file
2025-10-22 14:35:02+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:02+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:02+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:02+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:04+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:04+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:35:05+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:35:05+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:05+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:05+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:35:05+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:35:05+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:05+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:05+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:05+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:06+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:06+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:06+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:22+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:22+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:35:22+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:35:22+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:22+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:22+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:35:22+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:35:22+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:22+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:22+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:22+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:23+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:23+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:23+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:39+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:39+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:35:39+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:35:39+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:39+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:39+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:35:39+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:35:39+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:40+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:40+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:40+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:40+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:40+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:40+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:55+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:55+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:35:55+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:35:55+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:55+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:55+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:35:55+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:35:55+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:55+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:55+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:55+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:55+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:56+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:56+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:35:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:04+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:04+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:36:05+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:36:05+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:05+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:05+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:36:05+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:36:05+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:05+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:36:05+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:05+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:05+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:05+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:05+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:05+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:05+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:10+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:11+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:36:11+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:36:11+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:36:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:36:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:36:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:36:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:36:11+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:36:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:36:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:36:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:36:13+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:36:13+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:36:13+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:36:13+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:36:13+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:36:13+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:36:13+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:36:14+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:36:14+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:14+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:14+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:14+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:20+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:20+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:36:20+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:36:20+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:20+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:20+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:36:20+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:36:20+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:20+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:20+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:36:21+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:21+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:21+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:21+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:21+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:21+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:35+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:35+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 14:36:35+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241352', '400011219241353', '400011219241354', '400011219241355', '400011219241356', '400011219241357', '400011219241358', '400011219241359', '400011219241360', '400011219241361', 'on']
2025-10-22 14:36:35+0300 INFO delete_invoices: deleted 10 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241352', '400011219241353', '400011219241354', '400011219241355', '400011219241356', '400011219241357', '400011219241358', '400011219241359', '400011219241360', '400011219241361', 'on']
2025-10-22 14:36:35+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:36:35+0300 INFO delete_invoices: Deleted 10 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 14:36:35+0300 INFO delete_invoices: finished request. requested=11 excel=10 epsilon=10
2025-10-22 14:36:35+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:36+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:36+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:36+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:36+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:46+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:46+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 14:36:46+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241362', '400011219241363', '400011219241364', '400011219241365', '400011219241366', '400011219241367', '400011219241368', '400011219241369', '400011219241370', '400011219241371', 'on']
2025-10-22 14:36:46+0300 INFO delete_invoices: deleted 10 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241362', '400011219241363', '400011219241364', '400011219241365', '400011219241366', '400011219241367', '400011219241368', '400011219241369', '400011219241370', '400011219241371', 'on']
2025-10-22 14:36:46+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:36:46+0300 INFO delete_invoices: Deleted 10 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 14:36:46+0300 INFO delete_invoices: finished request. requested=11 excel=10 epsilon=10
2025-10-22 14:36:46+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:46+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:46+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:46+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:46+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:46+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:46+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:51+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:51+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 14:36:51+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241372', '400011219241373', '400011219241374']
2025-10-22 14:36:51+0300 INFO delete_invoices: deleted 3 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241372', '400011219241373', '400011219241374']
2025-10-22 14:36:51+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:36:51+0300 INFO delete_invoices: Deleted 3 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 14:36:51+0300 INFO delete_invoices: finished request. requested=3 excel=3 epsilon=3
2025-10-22 14:36:51+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:51+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:51+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:51+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:51+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:51+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:51+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:36:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:09+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:09+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:37:09+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:37:10+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:13+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:14+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:15+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:15+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:15+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:15+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:16+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:16+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:16+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:17+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:17+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:17+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:17+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:17+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:20+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:20+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:37:20+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:37:20+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:23+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:26+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:27+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:28+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:37:29+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:37:29+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:37:29+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:29+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:29+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:29+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:30+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:30+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:32+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:32+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:37:32+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:37:32+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:34+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:37:35+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:35+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:35+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:35+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:35+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:35+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:37+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:37+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:37:37+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:37:37+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:37+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:37+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:37:38+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:37:38+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:37:38+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:37:38+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:37:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:37:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:37:38+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:37:38+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:37:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:37:38+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:38:14+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:38:14+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:38:14+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:38:14+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:38:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:38:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:38:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:38:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:38:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:38:14+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:38:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:38:17+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:38:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:38:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:38:17+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:38:18+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:18+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:18+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:18+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:18+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:18+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:20+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:20+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:38:20+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:38:20+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:38:20+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:20+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:20+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:21+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:21+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:21+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:22+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:22+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:38:22+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:38:23+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:38:23+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:38:23+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:38:24+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:38:24+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:24+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:24+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:24+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:24+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:24+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:25+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:26+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:38:26+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:38:26+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:38:27+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:27+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:27+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:27+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:27+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:27+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:29+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:29+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:38:29+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:38:29+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:38:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:38:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:38:29+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:38:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:38:29+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:38:29+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:38:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:38:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:38:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:38:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:38:31+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 14:38:32+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:38:32+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:38:34+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:38:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:34+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:34+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:53+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:38:53+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:53+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:53+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:53+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:53+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:53+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:58+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:38:58+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:38:58+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:38:58+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:00+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:39:01+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:01+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:01+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:01+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:01+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:01+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:06+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:39:06+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:06+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:06+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:06+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:06+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:06+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:10+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:10+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:39:10+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:39:10+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:10+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:10+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:39:11+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:11+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:11+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:11+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:11+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:13+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:13+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:39:13+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:39:13+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:15+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:16+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:16+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:16+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:16+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:16+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:16+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:17+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:17+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:39:17+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:39:17+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:17+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:17+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:39:17+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:18+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:18+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:18+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:18+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:18+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:18+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:19+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:19+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:19+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:19+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:19+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:19+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:20+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:20+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:21+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:21+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:39:21+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:39:21+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:39:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:39:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:39:22+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:39:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:39:22+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:39:22+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:39:22+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:39:22+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:39:22+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:39:22+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:39:53+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:39:53+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:39:53+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:39:53+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:39:54+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:54+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:54+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:54+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:54+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:54+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:55+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:55+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:39:56+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:39:56+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:56+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:56+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:39:56+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:39:56+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:56+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:56+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:57+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:57+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:39:57+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:40:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:40:43+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:40:43+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:40:43+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:40:43+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:40:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:40:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:40:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:40:43+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:40:43+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:40:43+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:40:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:40:50+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:40:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:40:51+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:40:51+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:40:51+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:51+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:51+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:51+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:51+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:51+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:52+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:54+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:55+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:40:55+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:40:55+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:40:55+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:55+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:55+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:56+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:56+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:56+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:40:59+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:00+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:41:00+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:41:00+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:41:00+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:00+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:00+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:01+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:01+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:01+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:02+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:03+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:04+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:04+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:14+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:15+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:16+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:16+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:16+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:16+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:16+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:16+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:17+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:17+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:41:18+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:41:18+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:18+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:18+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:18+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:18+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:18+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:18+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:20+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:23+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:24+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:27+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:27+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:33+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:34+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:34+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:34+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:37+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:37+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:37+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:37+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:37+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:37+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:37+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:41+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:41+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 14:41:41+0300 INFO delete_invoices: marks_to_delete resolved = ['400011172559639']
2025-10-22 14:41:41+0300 INFO delete_invoices: deleted 1 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011172559639']
2025-10-22 14:41:41+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:41:41+0300 INFO delete_invoices: Deleted 1 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 14:41:41+0300 INFO delete_invoices: finished request. requested=1 excel=1 epsilon=1
2025-10-22 14:41:41+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:41+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:41+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:41+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:41+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:41+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:41+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:45+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:45+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:45+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:45+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:45+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:49+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:49+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:49+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:49+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:49+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:49+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:49+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:49+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:49+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:41:49+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:41:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:49+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:49+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:49+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:49+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:50+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:50+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:53+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:53+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:53+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:53+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:53+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:53+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:53+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:55+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:41:55+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:41:55+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:41:55+0300 INFO Incoming request: method=GET path=/static/receipts_mode_persist.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:41:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:41:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:41:56+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:41:56+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:41:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:41:56+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:41:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:41:56+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:41:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:42:19+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:42:19+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:19+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:19+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:19+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:19+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:26+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:26+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:26+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:26+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:26+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:26+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:29+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:29+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:29+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:29+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:29+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:29+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:33+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:33+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:42:33+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:42:33+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:35+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:36+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:36+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:36+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:39+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:39+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:39+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:40+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:40+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:40+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:44+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:45+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:45+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:45+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:48+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:42:48+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:48+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:48+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:48+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:48+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:49+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:49+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:42:49+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:42:50+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 14:42:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:42:50+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:42:50+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-22 14:42:50+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:50+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:51+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:51+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:51+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:54+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:54+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:42:54+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:42:55+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:55+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:55+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:42:55+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:55+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:42:55+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:42:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:42:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:42:55+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:42:55+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:42:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:42:55+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:42:57+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:42:57+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:42:57+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:42:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:42:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:42:58+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:42:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:42:58+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:42:58+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:42:59+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:42:59+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:42:59+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:42:59+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:01+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:43:01+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:01+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:01+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:01+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:01+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:04+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:43:04+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:04+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:04+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:04+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:04+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:06+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:06+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:43:06+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:43:06+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:06+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:06+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:43:06+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:07+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:07+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:07+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:07+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:07+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:26+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:26+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 14:43:26+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241352', '400011219241353', '400011219241354', '400011219241355', '400011172559639', '400011219241356', '400011219241357']
2025-10-22 14:43:26+0300 INFO delete_invoices: deleted 7 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241352', '400011219241353', '400011219241354', '400011219241355', '400011172559639', '400011219241356', '400011219241357']
2025-10-22 14:43:26+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:43:26+0300 INFO delete_invoices: Deleted 7 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 14:43:26+0300 INFO delete_invoices: finished request. requested=7 excel=7 epsilon=7
2025-10-22 14:43:26+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:43:26+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:43:26+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:43:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:43:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:43:26+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:43:26+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:43:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:43:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:43:27+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:43:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:43:29+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:43:56+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:43:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:18+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:18+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:44:18+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:44:18+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:24+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:44:24+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:24+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:24+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:24+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:24+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:28+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:28+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:44:28+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:44:28+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:28+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:28+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:44:28+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:29+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:44:29+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:44:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:44:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:44:29+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:44:29+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:44:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:44:29+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:44:30+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:44:30+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:44:31+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:44:31+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:44:31+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:31+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:31+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:31+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:31+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:34+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:44:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:35+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:35+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:35+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:39+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:44:39+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:39+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:39+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:39+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:39+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:41+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:41+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:44:41+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:44:41+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:44+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 14:44:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:45+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:47+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:47+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:44:47+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:44:47+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:47+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:47+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:44:48+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:44:48+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:44:48+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:44:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:44:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:44:48+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:44:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:44:48+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:44:48+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:03+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:03+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:48:03+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:48:03+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:05+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:05+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:05+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:05+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:05+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:05+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:08+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:08+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:48:08+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:48:08+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:08+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:08+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:48:09+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:09+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:09+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:09+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:11+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:11+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:11+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:11+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:14+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:14+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:14+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:14+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:17+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:17+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:17+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:17+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:20+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:21+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:21+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:21+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:21+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:21+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:21+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:48:21+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:48:21+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:48:22+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:48:22+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:22+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:22+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:22+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:22+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:24+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:24+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:48:24+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:24+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:24+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:24+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:24+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:27+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:48:28+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:28+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:28+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:28+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:28+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:33+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:48:33+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:33+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:33+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:33+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:33+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:37+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:48:38+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:38+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:38+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:38+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:38+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:41+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:41+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:48:41+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:48:42+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 14:48:42+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:42+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:42+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:45+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:48:45+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:48:45+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:48:45+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:49:23+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:49:24+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:49:24+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:49:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:49:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:49:24+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:49:24+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:49:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:49:24+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:49:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:49:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:49:30+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:49:30+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:49:31+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:49:31+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:49:31+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:49:31+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:49:31+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:49:31+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:31+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:32+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:32+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:32+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:33+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:33+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:49:33+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:49:33+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:45+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:49:45+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:45+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:46+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:46+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:46+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:49+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:49+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 14:49:49+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 14:49:49+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:49+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:49+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:49:49+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:50+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:50+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:50+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:49:50+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:51:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:53:34+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:53:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:53:38+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:53:38+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:53:38+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:53:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:53:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:53:39+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:53:39+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:53:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:53:39+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:53:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:53:42+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 14:53:42+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:42+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:43+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:43+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:43+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:45+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:45+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:45+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:45+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:48+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:48+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 14:53:48+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 14:53:48+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:49+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:49+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:49+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:49+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:49+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:53+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-22 14:53:53+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:53+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:53+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:53+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:53+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:53:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:40+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:54:40+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:40+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:41+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:41+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:44+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:44+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:44+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:44+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:45+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:45+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:55+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:56+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:56+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:56+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:56+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:58+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 14:54:58+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:54:58+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:54:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:54:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:54:58+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:54:58+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:54:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:54:58+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:54:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 14:55:12+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:12+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:55:12+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:55:12+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:20+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:55:21+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:21+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:21+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:21+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:23+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:23+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:55:23+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:55:23+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:28+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:28+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:55:29+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:29+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:29+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:29+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:32+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 14:55:32+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:32+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:32+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:32+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:34+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 14:55:34+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 14:55:34+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 14:55:34+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 15:17:49+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 15:17:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 15:17:50+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 15:17:51+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 15:17:51+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:17:51+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:17:51+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:17:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:17:51+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:17:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:17:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:05+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:05+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:05+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:06+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:06+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:09+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:09+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 15:18:09+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 15:18:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 15:18:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 15:18:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 15:18:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 15:18:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 15:18:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 15:18:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639&force_edit=1
2025-10-22 15:18:11+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 15:18:11+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 15:18:11+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 15:18:11+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011172559639
2025-10-22 15:18:11+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:11+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:12+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:12+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:14+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 15:18:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 15:18:15+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 15:18:15+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:15+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:15+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:15+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:18+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:18+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 15:18:18+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 15:18:19+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 15:18:19+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:19+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:19+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:19+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:23+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:18:23+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 15:18:24+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 15:18:24+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:01+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 15:19:02+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:02+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:03+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:03+0300 INFO api_scrape_receipt: incoming url=https://raw.githubusercontent.com/adonisdour/Firebed_private/4fa9d3efb260c924c591b84b7f699b30c2ee36a6/templates/search.html
2025-10-22 15:19:03+0300 INFO api_scrape_receipt: scraped url=https://raw.githubusercontent.com/adonisdour/Firebed_private/4fa9d3efb260c924c591b84b7f699b30c2ee36a6/templates/search.html is_invoice=True mark=
2025-10-22 15:19:13+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 15:19:14+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:14+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:17+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:17+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 15:19:18+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 15:19:18+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:27+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:30+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 15:19:31+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:31+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:31+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:31+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:36+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:36+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 15:19:36+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 15:19:36+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:37+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:37+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 15:19:37+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 15:19:38+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:38+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:38+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:38+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:19:38+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:35+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 15:28:36+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:36+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:41+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:41+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 15:28:41+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241357', '400011219241356', '400011219241355', '400011219241354', '400011219241353', '400011219241352', '400011172559639']
2025-10-22 15:28:41+0300 INFO delete_invoices: deleted 7 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241357', '400011219241356', '400011219241355', '400011219241354', '400011219241353', '400011219241352', '400011172559639']
2025-10-22 15:28:41+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 15:28:41+0300 INFO delete_invoices: Deleted 7 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 15:28:41+0300 INFO delete_invoices: finished request. requested=7 excel=7 epsilon=7
2025-10-22 15:28:41+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:41+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:41+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:44+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:45+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:46+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 15:28:46+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 15:28:47+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 15:28:47+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:47+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:47+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:47+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:51+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:51+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 15:28:51+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 15:28:51+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:53+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:57+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 15:28:58+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:58+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:58+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:28:58+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:29:01+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 15:29:01+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:29:01+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:29:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:29:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:29:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:29:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:29:05+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 15:29:06+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:29:06+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:29:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:29:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:29:06+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:29:06+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:29:09+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:29:09+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-22 15:29:10+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-22 15:29:10+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:31:43+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 15:31:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:31:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:31:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:31:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:31:44+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:31:44+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:31:44+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:31:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:31:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:31:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:14+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:14+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 15:33:14+0300 INFO Built per-mark epsilon entry for mark 400011172559639 (vat 802576637)
2025-10-22 15:33:14+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:14+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:14+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:16+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:16+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 15:33:16+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 15:33:16+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:17+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:17+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:17+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:22+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:22+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:22+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:22+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:22+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:22+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:33+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:34+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:35+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:35+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 15:33:35+0300 INFO Built per-mark epsilon entry for mark 400011172559639 (vat 802576637)
2025-10-22 15:33:35+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:35+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:35+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:35+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:35+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:37+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:37+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 15:33:37+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 15:33:37+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:37+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:37+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:38+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:38+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:38+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:47+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:47+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:47+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:47+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:47+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:47+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:49+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:49+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 15:33:49+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 15:33:49+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:50+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:50+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:50+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:50+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:54+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:57+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:57+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:57+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:58+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:58+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:58+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:33:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:00+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:00+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:34:00+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:34:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:34:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:34:00+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:34:00+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:34:00+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:34:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:34:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:34:00+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739
2025-10-22 15:34:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:34:02+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739
2025-10-22 15:34:02+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 15:34:02+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 15:34:02+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739
2025-10-22 15:34:02+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:02+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:02+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:07+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:34:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:41+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 15:45:42+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:42+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:42+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:44+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:44+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 15:45:44+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 15:45:44+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 15:45:45+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:45+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:45+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:48+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 15:45:48+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:48+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:48+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:48+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:48+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:45:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:34+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:35+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:35+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:35+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:35+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:35+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:36+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:36+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:55:36+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:55:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:55:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:55:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:55:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:55:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:55:36+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:55:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:55:37+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739
2025-10-22 15:55:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739&force_edit=1
2025-10-22 15:55:38+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739
2025-10-22 15:55:38+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 15:55:38+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 15:55:39+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011174046739
2025-10-22 15:55:39+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:39+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:39+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:39+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:39+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:44+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:44+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:44+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:44+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:44+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:44+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 15:55:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:44+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:45+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:55:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:06+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 15:56:07+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:14+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:14+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 15:56:14+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 15:56:14+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:32+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 15:56:32+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:32+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:32+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:32+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:32+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:47+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:47+0300 INFO api_scrape_receipt: incoming url=400011184830173
2025-10-22 15:56:47+0300 INFO api_scrape_receipt: scraped url=400011184830173 is_invoice=False mark=
2025-10-22 15:56:47+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:47+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:47+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 15:56:47+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:48+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:56:48+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:56:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:56:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:56:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:56:48+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:56:48+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:56:48+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:56:53+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:56:53+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-22 15:56:53+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241352']
2025-10-22 15:56:53+0300 INFO delete_invoices: deleted 1 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241352']
2025-10-22 15:56:53+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 15:56:53+0300 INFO delete_invoices: Deleted 1 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-22 15:56:53+0300 INFO delete_invoices: finished request. requested=1 excel=1 epsilon=1
2025-10-22 15:56:53+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:56:53+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:53+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:53+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:53+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:53+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:58+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:58+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:58+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:58+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:58+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:58+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:58+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:58+0300 INFO save_summary: start request from 127.0.0.1
2025-10-22 15:56:58+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 15:56:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:59+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:59+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:59+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:59+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:59+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:59+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:56:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:23+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:23+0300 INFO search: invoice-flow blocked (forbidden type) code=8.4 name=Απόδειξη Είσπραξης POS mark=400011185773449 vat=802576637
2025-10-22 15:57:23+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:23+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:23+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:23+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:23+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:29+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:29+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 15:57:29+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 15:57:30+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:53+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:53+0300 INFO search: invoice-flow blocked (forbidden type) code=8.4 name=Απόδειξη Είσπραξης POS mark=400011185773449 vat=802576637
2025-10-22 15:57:53+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:54+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:54+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:54+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:54+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:57:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:58:00+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:58:00+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 15:58:00+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 15:58:00+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:58:00+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:58:00+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 15:58:00+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:58:01+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:01+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:01+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:01+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:01+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:07+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:07+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 15:58:07+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 15:58:07+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:08+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 15:58:08+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:08+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:08+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:08+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:08+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:10+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:10+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 15:58:10+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 15:58:10+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:10+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:10+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 15:58:10+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:11+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:11+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:11+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 15:58:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 16:01:36+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 16:01:36+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 16:01:36+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 16:01:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 16:01:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 16:01:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 16:01:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 16:01:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 16:01:37+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 16:01:37+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 16:01:40+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 16:01:40+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 16:01:41+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 16:01:41+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:41+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:41+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:41+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:41+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:43+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:43+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 16:01:43+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 16:01:44+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 16:01:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:44+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:44+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:44+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:50+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 16:01:50+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:01:50+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:01:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:01:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:01:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:01:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:01:51+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:01:51+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:01:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:01:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:01:53+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:01:53+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 16:01:53+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 16:01:53+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:01:57+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:00+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 16:02:01+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:01+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:01+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:01+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:01+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:02+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:05+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 16:02:06+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:06+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:06+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:06+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:06+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:09+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 16:02:09+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:09+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:10+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:10+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:10+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:13+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 16:02:13+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:13+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:13+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:13+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:13+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:15+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:15+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 16:02:15+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 16:02:15+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:22+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 16:02:22+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:22+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:22+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:22+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:22+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:26+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 16:02:26+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:26+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:26+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:27+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:27+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:30+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-22 16:02:30+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:30+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:30+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:30+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:30+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:34+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:34+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:36+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:36+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-22 16:02:36+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-22 16:02:37+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:37+0300 INFO Incoming request: method=POST path=/api/confirm_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:37+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-22 16:02:37+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-22 16:02:37+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 16:02:37+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 16:02:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 16:02:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 16:02:37+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 16:02:37+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 16:02:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 16:02:38+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-22 23:58:44+0300 INFO Starting app - MYDATA_ENV=sandbox
2025-10-22 23:58:45+0300 INFO Starting app - MYDATA_ENV=production
2025-10-22 23:58:54+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47.github.dev/
2025-10-22 23:58:54+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 23:58:54+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 23:58:56+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 23:58:57+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 23:58:57+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 23:59:00+0300 INFO Incoming request: method=POST path=/set_active remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 23:59:00+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 23:59:00+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 23:59:00+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 23:59:02+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/credentials
2025-10-22 23:59:03+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:03+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:03+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:04+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:04+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:06+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:07+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 23:59:07+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 23:59:08+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 23:59:08+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:08+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:08+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:08+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:08+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:16+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 23:59:16+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:16+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:17+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:19+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:19+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 23:59:19+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 23:59:20+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-22 23:59:21+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:21+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:21+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:21+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:21+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:24+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:25+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 23:59:25+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 23:59:26+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-22 23:59:26+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:26+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:26+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:26+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:26+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-22 23:59:29+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:01:16+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-23 00:01:17+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:01:17+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:01:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:01:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:01:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:01:17+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:01:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:01:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:01:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:01:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:01:35+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:01:36+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:36+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:36+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:37+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:37+0300 INFO search: invoice-flow blocked (forbidden type) code=9.3 name=Δελτίο Αποστολής mark=400011185784064 vat=802576637
2025-10-23 00:01:38+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:38+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:38+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:38+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:38+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:47+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:48+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:48+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:48+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:48+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:48+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:58+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:58+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:58+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:59+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:59+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:59+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:01:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:02:03+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:02:03+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-23 00:02:03+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-23 00:02:04+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-23 00:02:04+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:04+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:05+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:05+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:05+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:09+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:09+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:09+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:09+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:09+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:10+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:10+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:10+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:10+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:10+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:21+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:21+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:21+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:21+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:21+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:21+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:21+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:25+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:25+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:02:25+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:02:25+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:26+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:26+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:26+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:26+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:26+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:30+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:30+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:30+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:30+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:30+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:30+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:31+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:32+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:32+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:32+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:32+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:32+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:37+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:37+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011185825004&force_edit=1
2025-10-23 00:02:37+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011185825004&force_edit=1
2025-10-23 00:02:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011185825004&force_edit=1
2025-10-23 00:02:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011185825004&force_edit=1
2025-10-23 00:02:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011185825004&force_edit=1
2025-10-23 00:02:38+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011185825004&force_edit=1
2025-10-23 00:02:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011185825004&force_edit=1
2025-10-23 00:02:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011185825004&force_edit=1
2025-10-23 00:02:38+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011185825004
2025-10-23 00:02:38+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011185825004
2025-10-23 00:02:38+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011185825004
2025-10-23 00:02:41+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011185825004
2025-10-23 00:02:41+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:02:41+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:02:41+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011185825004
2025-10-23 00:02:41+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:41+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:42+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:02:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:22+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011185825004
2025-10-23 00:03:22+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:22+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:23+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:23+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:23+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:32+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:32+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-23 00:03:32+0300 INFO delete_invoices: marks_to_delete resolved = ['400011174046739', '400011184084271', '400011184830173', '400011219241352', '400011219241353', '400011219241354', '400011185825004']
2025-10-23 00:03:32+0300 INFO delete_invoices: deleted 7 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011174046739', '400011184084271', '400011184830173', '400011219241352', '400011219241353', '400011219241354', '400011185825004']
2025-10-23 00:03:32+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:03:32+0300 INFO delete_invoices: Deleted 7 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-23 00:03:32+0300 INFO delete_invoices: finished request. requested=7 excel=7 epsilon=7
2025-10-23 00:03:32+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:32+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:32+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:32+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:32+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:38+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:38+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:38+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:39+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:39+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:42+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:42+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:03:42+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:03:42+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:42+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:42+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:03:51+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:05+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:05+0300 INFO search: invoice-flow blocked (forbidden type) code=8.4 name=Απόδειξη Είσπραξης POS mark=400011185773449 vat=802576637
2025-10-23 00:04:05+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:05+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:06+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:06+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:22+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:22+0300 INFO search: invoice-flow blocked (forbidden type) code=8.4 name=Απόδειξη Είσπραξης POS mark=400011185773449 vat=802576637
2025-10-23 00:04:22+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:22+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:22+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:22+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:31+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:32+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:32+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:32+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:32+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:32+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:32+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:04:32+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:04:32+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:32+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:33+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:33+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:33+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:41+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:42+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:42+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:04:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:02+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:02+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:05:02+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:05:03+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:03+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:03+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:05:03+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:05:03+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:04+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:04+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:04+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:04+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:20+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:20+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:05:20+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:05:21+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:05:21+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:21+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:22+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:22+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:23+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:23+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:05:24+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:05:24+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:24+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:24+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:05:24+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:05:24+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:24+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:24+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:24+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:24+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:32+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:32+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-23 00:05:32+0300 INFO delete_invoices: marks_to_delete resolved = ['400011185825004', '400011184830173', '400011219241352', '400011219241353']
2025-10-23 00:05:32+0300 INFO delete_invoices: deleted 4 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011185825004', '400011184830173', '400011219241352', '400011219241353']
2025-10-23 00:05:32+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:05:32+0300 INFO delete_invoices: Deleted 4 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-23 00:05:32+0300 INFO delete_invoices: finished request. requested=4 excel=4 epsilon=4
2025-10-23 00:05:32+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:33+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:33+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:33+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:33+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:37+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:37+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:37+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:37+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:37+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:40+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:40+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:40+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:40+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:40+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:43+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:43+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:05:43+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:05:44+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:05:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:46+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:05:46+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:05:46+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:05:46+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:16+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:06:17+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:17+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:17+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:24+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:25+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:06:25+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:06:25+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:06:25+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:25+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:26+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:26+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_autosave.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:26+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:28+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:28+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:06:28+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:06:29+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:38+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:38+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:06:38+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:06:39+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:06:39+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:39+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:39+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:39+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:43+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:43+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-23 00:06:43+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-23 00:06:44+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-23 00:06:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:48+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:49+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:49+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:49+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:49+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:51+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:51+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:06:51+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:06:51+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:55+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:06:55+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:06:55+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:06:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:06:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:06:55+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:06:55+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:04+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:04+0300 INFO api_scrape_receipt: incoming url=400011184830173
2025-10-23 00:07:04+0300 INFO api_scrape_receipt: scraped url=400011184830173 is_invoice=False mark=
2025-10-23 00:07:04+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:14+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:07:14+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:14+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:26+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:26+0300 INFO search: invoice-flow blocked (forbidden type) code=9.3 name=Δελτίο Αποστολής mark=400011185784064 vat=802576637
2025-10-23 00:07:27+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:27+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:27+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:27+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:34+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:34+0300 INFO search: invoice-flow blocked (forbidden type) code=8.4 name=Απόδειξη Είσπραξης POS mark=400011185773449 vat=802576637
2025-10-23 00:07:35+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:35+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:35+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:35+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:43+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:44+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:44+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:44+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:44+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:07:44+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:07:44+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:07:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:07:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:07:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:07:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:07:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:07:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:07:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:07:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:07:53+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:07:53+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:07:54+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:07:54+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:12+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:13+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:13+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:13+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:13+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:13+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:13+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:08:13+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:08:13+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:13+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:13+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:17+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:17+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:17+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:18+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:18+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:18+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:19+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:19+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:19+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:19+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:25+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:25+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:08:25+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:08:25+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:32+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:32+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:08:32+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:08:34+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:08:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:41+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:42+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:42+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:44+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:44+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:08:44+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:08:44+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:47+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-23 00:08:47+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:47+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:47+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:08:47+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:33+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-23 00:19:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:36+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-23 00:19:36+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:36+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:39+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-23 00:19:40+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:40+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:40+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:40+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:42+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:43+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:19:43+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:19:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:19:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:19:43+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:19:43+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:19:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:19:47+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:19:47+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:19:48+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:19:48+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:19:54+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:19:55+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:19:55+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:19:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:19:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:19:55+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:19:55+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:19:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:19:58+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:19:58+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:19:58+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:19:58+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:21:09+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:21:10+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:21:10+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:21:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:21:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:21:10+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:21:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:21:10+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:21:16+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:21:16+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:21:16+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:21:16+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:22:58+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:22:58+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:22:58+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:22:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:22:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:22:59+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:22:59+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:23:09+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:23:09+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:23:09+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:23:10+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:23:10+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:23:10+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:23:10+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:23:10+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:23:10+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:10+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:14+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:14+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:23:14+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:23:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:23:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:23:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:23:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:23:18+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:23:18+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:23:18+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:23:18+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:23:18+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:23:18+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:23:18+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:23:18+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:23:19+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:19+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:19+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:19+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:26+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:26+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-23 00:23:26+0300 INFO delete_invoices: marks_to_delete resolved = ['400011184830173', '400011184530011', '400011219241352', '400011219241353']
2025-10-23 00:23:26+0300 INFO delete_invoices: deleted 4 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011184830173', '400011184530011', '400011219241352', '400011219241353']
2025-10-23 00:23:26+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:23:26+0300 INFO delete_invoices: Deleted 4 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-23 00:23:26+0300 INFO delete_invoices: finished request. requested=4 excel=4 epsilon=4
2025-10-23 00:23:26+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:27+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:27+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:27+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:27+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:31+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:31+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:31+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:31+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:31+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:35+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:35+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:35+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:38+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:38+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:23:38+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:23:38+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:59+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:23:59+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:23:59+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:00+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:00+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:01+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:02+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:02+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:02+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:02+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:24:02+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:24:02+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:24:02+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:02+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:03+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:03+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:09+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:09+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:24:09+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:24:09+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:34+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:34+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:34+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:34+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:36+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:36+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:24:36+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:24:36+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:38+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:39+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:39+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:39+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:39+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:40+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:40+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:24:40+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:24:40+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:43+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:44+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:24:44+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:24:45+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:24:45+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:45+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:46+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:46+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:47+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:47+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:24:47+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:24:47+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:51+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:52+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-23 00:24:52+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-23 00:24:52+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-23 00:24:53+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:53+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:53+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:53+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:53+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/
2025-10-23 00:24:53+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:53+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:54+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:54+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:55+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:24:55+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:24:55+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:24:55+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:30+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:39+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:40+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:40+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:40+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:40+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:41+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:41+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:41+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:41+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:41+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:44+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:44+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:25:44+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:25:44+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:44+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:44+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:49+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:49+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:25:49+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:25:49+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:54+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:55+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:55+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:56+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:56+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:56+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:58+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:25:58+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:58+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:58+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:25:58+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:03+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:03+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:26:03+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:26:03+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:05+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:05+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:26:06+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:26:06+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:26:07+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:07+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:07+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:07+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:09+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:26:09+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:09+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:10+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:10+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:26:10+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:26:10+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:13+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:26:13+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:13+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:13+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:18+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:26:18+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-23 00:26:18+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-23 00:26:18+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:27:25+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/list
2025-10-23 00:27:26+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:27:26+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:27:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:27:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:27:26+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:27:26+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:27:40+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:27:40+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-23 00:27:40+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-23 00:27:40+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:01+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-23 00:28:01+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:01+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:05+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:05+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-23 00:28:05+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-23 00:28:05+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:11+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-23 00:28:11+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:11+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:14+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-23 00:28:15+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:15+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:15+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:15+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:25+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-23 00:28:26+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:26+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:26+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:26+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:26+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:37+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:37+0300 INFO api_scrape_receipt: incoming url={% extends "base.html" %} {% block title %}Αναζήτηση MARK{% endblock %}  {% block content %}  <div class="bg-white rounded shadow p-6">     <h2 class="text-lg font-semibold mb-2">Αναζήτηση MARK</h2>      {% if error %}     <div class="mb-3 p-2 rounded bg-red-50 text-red-800">{{ error }}</div>     {% endif %}      <form method="post" class="flex gap-2 items-center" id="markSearchForm">         <!-- Auto-submit segmented toggle (scoped to client) -->         <div class="flex items-center gap-2 ml-4" id="autoSubmitGroup">             <span class="text-sm">Auto‑submit</span>             <div class="inline-flex rounded-md overflow-hidden border border-gray-300">                 <button type="button" id="autoSubmitBtnOff" class="px-2 py-1 text-sm focus:outline-none">Off</button>                 <button type="button" id="autoSubmitBtnOn" class="px-2 py-1 text-sm focus:outline-none">On</button>             </div>         </div>          <input name="mark" id="markInput" type="text" placeholder="15ψήφιο MARK" class="p-2 border rounded w-2/4" value="{{ mark }}">         <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αναζήτηση</button>         <div class="flex items-center gap-2 ml-4">             <label for="useReceiptsSwitch" class="text-sm">                 Τιμολόγια<label>                     <input type="checkbox" id="useReceiptsSwitch" role="switch" aria-checked="false" class="toggle-switch">                     <label for="useReceiptsSwitch" class="text-sm">Αποδείξεις</label>         </div>          <!-- Toggle επαναληψιμης εισαγωγής + edit button -->         <div class="flex items-center gap-2 ml-4">             <label for="repeatEntrySwitch" class="text-sm">Επαναληψιμη εισαγωγή</label>             <input type="checkbox" id="repeatEntrySwitch" class="toggle-switch">             <button type="button" id="editRepeatMappingBtn" class="ml-2 px-2 py-1 border rounded text-sm hidden">Επεξεργασία</button>         </div>          <!-- Toggle switch for receipts scrape -->      </form> </div>  {# ΣΗΜΕΙΩΣΗ: το στατικό confirmation modal που υπήρχε εδώ αφαιρέθηκε όπως ζήτησες. Χρησιμοποιείται πλέον το summaryModal για όλες τις περιπτώσεις. #}  {# --- Yellow box αν υπάρχει MARK ήδη στο Excel --- #} {% if allow_edit_existing and not request.args.get('force_edit') %} <div class="mt-4 p-4 bg-yellow-50 rounded border border-yellow-300 text-yellow-800" id="existingBanner">     Το MARK <strong>{{ mark }}</strong> υπάρχει ήδη στο Excel. Θέλεις να τροποποιήσεις τον χαρακτηρισμό;     <div class="mt-2 flex gap-2">         <button id="forceEditBtn" type="button" class="bg-yellow-600 text-white px-3 py-2 rounded hover:bg-yellow-700">             Επιβεβαίωση         </button>         <button id="dismissBannerBtn" type="button" onclick="this.parentElement.parentElement.style.display='none'"                 class="px-3 py-2 border rounded hover:bg-gray-50">             Άκυρο         </button>     </div> </div> {% endif %}     {% if modal_summary and (request.args.get('force_edit') == '1' or not allow_edit_existing) %} <!-- SUMMARY MODAL --> <div id="summaryModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-6xl p-6">          <!-- HEADER -->         <div class="flex justify-between items-center mb-4">             <h3 class="text-lg font-semibold">                 Περίληψη Παραστατικού - <span id="summaryModalMark">MARK</span>             </h3>             <button id="modalCloseX" class="text-gray-500 text-xl font-bold">✕</button>         </div>          <!-- SUMMARY INFO -->         <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">             <div><strong>Α/Α Παραστατικού</strong><div id="summary_AA"></div></div>             <div><strong>ΑΦΜ</strong><div id="summary_AFM"></div></div>             <div><strong>Επωνυμία</strong><div id="summary_Name"></div></div>             <div><strong>Ημερομηνία</strong><div id="summary_issueDate"></div></div>             <div><strong>Τύπος Παραστατικού</strong><div id="summary_type_name"></div></div>             <div><strong>Καθαρή Αξία</strong><div id="summary_totalNetValue"></div></div>             <div><strong>ΦΠΑ</strong><div id="summary_totalVatAmount"></div></div>             <div><strong>Σύνολο</strong><div id="summary_totalValue"></div></div>         </div>          <!-- LINES -->         <h4 class="font-medium mt-4 mb-2">Γραμμές Παραστατικού (για χαρακτηρισμό)</h4>         <div id="summaryLinesContainer" class="overflow-auto max-h-96 border rounded p-2"></div>            <!-- FOOTER -->         <div class="mt-4 flex justify-between items-center">             <div class="text-sm text-gray-600">                 Σημείωση: οι κατηγορίες προέρχονται από τα settings του πελάτη. Μπορείτε να ορίσετε/επεξεργαστείτε αυτές τις επιλογές στη σελίδα Credentials.             </div>              <div class="flex justify-end gap-2">                 <form method="POST" action="{{ url_for('save_summary') }}" id="saveSummaryForm">                     <input type="hidden" name="summary_json" id="summaryJsonInput" value='{{ modal_summary | tojson | safe if modal_summary else "{}" }}'>                     <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση στο Cache</button>                     <input type="hidden" id="scrapeUrlField" name="scrape_url" value="">                     <input type="hidden" id="scrapeCategoryField" name="scrape_category" value="">                     <input type="hidden" id="scrapeForceField" name="scrape_force" value="false">                 </form>                 <button id="modalCloseBtn" class="px-3 py-2 border rounded">Κλείσιμο</button>             </div>         </div>      </div> </div> {% endif %}   {# --- Repeat mapping modal (dynamic, populated by JS) --- #} <div id="repeatMappingModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-2xl p-6">         <div class="flex justify-between items-center mb-3">             <h3 class="text-lg font-semibold">Επαναληπτική αντιστοίχιση κατηγοριών</h3>             <button id="repeatModalCloseX" class="text-gray-500 text-xl font-bold">✕</button>         </div>          <div id="repeatModalBody" class="space-y-3">             <div class="text-sm text-gray-600">Επίλεξε για κάθε ΦΠΑ-κατηγορία ποια κατηγορία εξόδου θέλεις να χρησιμοποιείται επαναληπτικά. Μπορείς επίσης να ορίσεις <em>προεπιλογή</em>.</div>             <!-- JS θα γεμίσει εδώ -->             <div id="repeatMappingList" class="space-y-2"></div>         </div>          <div class="mt-4 flex justify-end gap-2">             <button id="repeatModalCancel" class="px-3 py-2 border rounded">Άκυρο</button>             <button id="repeatModalSave" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση</button>         </div>     </div> </div>  {% if modal_warning %} <div id="afmWarningModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-md p-6">         <div class="flex justify-between items-center mb-4">             <h3 class="text-lg font-semibold text-red-600">Προειδοποίηση</h3>         </div>         <div id="afmWarningBody" class="mb-4 text-gray-700">             {{ modal_warning }}         </div>         <div class="flex justify-end gap-2">             <button id="afmModalConfirm" class="bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700">Κατάλαβα</button>         </div>     </div> </div> {% endif %}  {# Flash container (JS will inject messages here) #} <div id="clientFlashContainer" class="fixed top-4 right-4 z-60"></div>  {% include 'list_inner.html' %}   {% endblock %}  {% block scripts %}  <script src="/static/loop_hard_guard.js"></script> <script src="{{ url_for('static', filename='repeat_flow_guard.js') }}"></script>  <script>    (function () {   const KEY = 'UI:useReceipts'; // '1' = Αποδείξεις, '0' = Τιμολόγια    function fireChange(el){     if(!el) return;     try {       el.dispatchEvent(new Event('change', { bubbles:true }));     } catch {       const evt = document.createEvent('Event');       evt.initEvent('change', true, true);       el.dispatchEvent(evt);     }   }    document.addEventListener('DOMContentLoaded', () => {     const sw = document.getElementById('useReceiptsSwitch');     if (!sw) return;      // Αν υπάρχει ?use_receipts=1/0 στο URL, γράψ’ το στο localStorage (authoritative)     try {       const q = new URLSearchParams(location.search);       if (q.has('use_receipts')) {         localStorage.setItem(KEY, q.get('use_receipts') === '1' ? '1' : '0');       }     } catch {}      // Restore από localStorage     const saved = localStorage.getItem(KEY);     if (saved !== null) sw.checked = (saved === '1');      // ΠΟΛΥ ΣΗΜΑΝΤΙΚΟ:     // Τρέξε τον υπάρχοντα change handler του switch ώστε να εμφανίσει/κρύψει     // τα σωστά inputs (MARK vs URL). Το κάνουμε 2 φορές (rAF + microtask)     // για να “πιάσει” σε DOM που φτιάχνεται δυναμικά.     requestAnimationFrame(() => {       fireChange(sw);       setTimeout(() => fireChange(sw), 0);     });      // Persist σε κάθε αλλαγή χρήστη     sw.addEventListener('change', () => {       try { localStorage.setItem(KEY, sw.checked ? '1' : '0'); } catch {}       // Προαιρετικό: κρατάμε και ένα data-mode στο body αν το θες για CSS hooks       document.body.dataset.mode = sw.checked ? 'receipts' : 'invoices';     });      // Όταν κάνεις submit/save απόδειξης, κλείδωσε το mode σε “Αποδείξεις”     // ώστε στο redirect/refresh να παραμείνει.     document.getElementById('saveSummaryForm')?.addEventListener('submit', () => {       try {         const raw = document.getElementById('summaryJsonInput')?.value || '';         const s = raw ? JSON.parse(raw) : {};         const isReceipt = s.is_receipt === true ||                           /αποδει/i.test(`${s.type_name || ''} ${s.category || s.characteristic || ''}`);         if (isReceipt) localStorage.setItem(KEY, '1');       } catch {}     });   }); })(); // --- Reclass guard (yellow box -> ?force_edit=1) --- const URL_PARAMS = (function(){ try { return new URL(window.location.href).searchParams; } catch(_) { return new URLSearchParams(''); } })(); const FORCE_EDIT = (function(){ try { return URL_PARAMS.get('force_edit') === '1'; } catch(_) { return false; } })();  const SEARCH_BASE_URL = "{{ url_for('search') }}"; const VAT = "{{ vat or '' }}"; // active vat from server const INITIAL_MARK = "{{ mark|e }}"; // αρχική τιμή mark (αν υπήρχε) const ACTIVE_YEAR = (function(){ try { return {{ active_year|default('null') }}; } catch(e){ return null; } })(); async function getActiveFiscalYear() {   // Προτίμησε την τιμή που ήρθε από server-side render (Jinja)   if (typeof ACTIVE_YEAR !== 'undefined' && ACTIVE_YEAR !== null) {     try { return String(ACTIVE_YEAR); } catch(_) { /* noop */ }   }   // Fallback: ρώτα το backend (υπάρχει route)   try {     const r = await fetch('/get_fiscal_year', {credentials:'same-origin'});     const j = await r.json();     if (j && j.exists) return String(j.fiscal_year);   } catch(_) {}   return null; }   (function(){   // Ανεξάρτητο modal μόνο για Αποδείξεις (δεν ακουμπά το afmWarningModal)   window.openReceiptWarning = function(message){     var id='receiptWarn', m=document.getElementById(id);     if(!m){       var el=document.createElement('div');       el.id=id;       el.style.cssText='position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.4);z-index:9999';       el.innerHTML =         '<div style="background:#fff;border-radius:10px;max-width:480px;width:calc(100% - 32px);padding:20px;">'         + '<h3 style="margin:0 0 10px;color:#b91c1c;font-weight:600;font-size:18px">Προειδοποίηση</h3>'         + '<div id="receiptWarnBody" style="margin-bottom:14px;color:#374151;font-size:14px"></div>'         + '<div style="text-align:right"><button id="receiptWarnOk" type="button"'         + ' style="background:#b91c1c;color:#fff;border:none;border-radius:6px;padding:8px 12px;cursor:pointer">Κατάλαβα</button></div>'         + '</div>';       document.body.appendChild(el);       el.addEventListener('click', function(e){ if(e.target===el) el.style.display='none'; });       el.querySelector('#receiptWarnOk').addEventListener('click', function(){ el.style.display='none'; });       m = el;     }     var body = m.querySelector('#receiptWarnBody');     if(body) body.textContent = message || 'Προειδοποίηση.';     m.style.display='flex';   }; })();      // Καθαρισμός ανά γραμμή (πολλαπλές γραμμές)   document.addEventListener('click', function (e) {     const btn = e.target.closest('.clear-row-btn');     if (btn) {       e.stopPropagation();       const tr = btn.closest('tr');       const sel = tr && tr.querySelector('select[name^="category["]');       if (sel) sel.value = '';     }   });    // Καθαρισμός στη single-line περίπτωση   const singleClear = document.getElementById('single-clear');   if (singleClear) {     singleClear.addEventListener('click', function (e) {       e.stopPropagation();       const sel = document.querySelector('select[name^="category["]');       if (sel) sel.value = '';     });   }    // Προληπτικά: μην ξανα-ανοίγει δεύτερο modal στο click "Αποθήκευση"   // (αν έχεις delegate listeners κάτω από το modal)   document.addEventListener('submit', function(e){     const form = e.target;     if (form && form.closest('#summaryModal')) {       const submitBtn = form.querySelector('[type="submit"]');       if (submitBtn) submitBtn.disabled = true;       e.stopPropagation(); // Μπλοκάρει bubbling που θα πυροδοτούσε κάτωθεν click handlers     }   }, true);     // initial categories passed from server as fallback; will be overridden if API returns expense_tags let CUSTOMER_CATEGORIES = (function(){ try { return {{ customer_categories | tojson | safe }} || []; } catch(e){ return []; } })();  // Helper: show transient flash (client-side) /* ====== Render summary lines into modal and wire handlers ====== */  function renderSummaryLinesFromObject(obj) {   const receiptsMode = !!(document.getElementById('useReceiptsSwitch')?.checked) || !!obj?.is_receipt;   const RECEIPT_CATEGORY = 'αποδειξακια';    const container = document.getElementById('summaryLinesContainer');   const summaryInput = document.getElementById('summaryJsonInput');   if(!container || !summaryInput) return;    container.innerHTML = '';   const lines = Array.isArray(obj.lines) ? obj.lines : [];    // helper to persist back to the hidden input     (function(){   function safeParseJson(s){     try { return JSON.parse(s || '{}'); } catch(e){ return {}; }   }    const summaryInput = document.getElementById('summaryJsonInput');   const container = document.getElementById('summaryLinesContainer');    // fallback server-side object (if Jinja rendered modal_summary)   const SERVER_MODAL_SUMMARY = (function(){     try { return {{ modal_summary | tojson | safe if modal_summary else 'null' }}; } catch(e){ return null; }   })()   try {     var __cc = document.getElementById('summaryLinesContainer');     if (__cc && __cc.dataset && __cc.dataset.phase === 'iife') {       // IIFE already rendered content -> skip second render path       if (typeof persist === 'function') try{ persist(); }catch(e){}       return;     }   } catch(e) {} ;    // helper to get current summary object (prefer hidden input, fallback server var)   function getSummaryObj(){     if(summaryInput && summaryInput.value && summaryInput.value.trim() !== ''){       const parsed = safeParseJson(summaryInput.value);       if(parsed && typeof parsed === 'object') return parsed;     }     if(SERVER_MODAL_SUMMARY) return SERVER_MODAL_SUMMARY;     return { lines: [] };   }    // ensure each line has id and normalized keys   function normalizeSummary(summary){     if(!summary) summary = {};     const lines = Array.isArray(summary.lines) ? summary.lines.slice() : [];     const norm = lines.map((l, idx) => {       const id = (l && (l.id || l.line_id)) ? String(l.id || l.line_id) : ('l' + idx);       return {         id: id,         description: l && (l.description || l.desc || '') || '',         amount: l && (l.amount || l.lineTotal || l.total || '') || '',         vat: l && (l.vat || l.vatRate || '') || '',         vatCategory: l && (l.vatCategory || l.vat_category || '') || '',         category: l && (l.category || l.cat || '') || ''       };     });     return { ...summary, lines: norm };   }    // build DOM for multiple lines (table)   function buildTableHTML(lines, categories){     const table = document.createElement('table');     table.className = 'w-full border-collapse';     const thead = document.createElement('thead');     thead.className = 'bg-gray-100 sticky top-0';     thead.innerHTML = '<tr>' +       '<th class="p-2 border text-left">#</th>' +       '<th class="p-2 border text-left">ΦΠΑ Κατηγορία</th>' +       '<th class="p-2 border text-right">Ποσό</th>' +       '<th class="p-2 border text-right">ΦΠΑ</th>' +       '<th class="p-2 border text-left">Κατηγορία Εξόδου</th>' +       '</tr>';     table.appendChild(thead);      const tbody = document.createElement('tbody');     tbody.id = 'renderedLinesTableBody';     lines.forEach((ln, idx) => {       const tr = document.createElement('tr');       tr.dataset.lineId = ln.id || ('l' + idx);       tr.dataset.vat = ln.vatCategory || ln.vat || '';        tr.innerHTML = '<td class="p-2 border text-sm text-gray-600">' + (idx+1) + '</td>' +         '<td class="p-2 border break-words">' + escapeHtml(ln.vatCategory || '') + '</td>' +         '<td class="p-2 border text-right">' + escapeHtml(String(ln.amount || '')) + '</td>' +         '<td class="p-2 border text-right">' + escapeHtml(String(ln.vat || '')) + '</td>' +         '<td class="p-2 border"></td>';        // create select       const select = document.createElement('select');       select.className = 'expense-category p-1 border rounded w-full';       select.dataset.lineId = ln.id || ('l' + idx);       const emptyOpt = document.createElement('option'); emptyOpt.value=''; emptyOpt.innerText='-- επίλεξε --';       select.appendChild(emptyOpt);       (categories || []).forEach(c => {         const o = document.createElement('option'); o.value = c; o.innerText = c;         if(c === ln.category) o.selected = true;         select.appendChild(o);       });        tr.querySelector('td:last-child').appendChild(select);       tbody.appendChild(tr);     });      table.appendChild(tbody);     return table;   }    // build single-line buttons UI   function buildSingleLineHTML(line, categories){     const wrapper = document.createElement('div');     wrapper.className = 'border rounded p-4';     wrapper.dataset.lineId = line.id || 'l0';      const grid = document.createElement('div');     grid.className = 'mb-3 grid grid-cols-1 md:grid-cols-3 gap-3';     grid.innerHTML = '<div><strong>ΦΠΑ Κατηγορία</strong><div>' + escapeHtml(line.vatCategory || '') + '</div></div>' +       '<div><strong>Ποσό</strong><div>' + escapeHtml(String(line.amount || '')) + '</div></div>' +       '<div><strong>ΦΠΑ</strong><div>' + escapeHtml(String(line.vat || '')) + '</div></div>';     wrapper.appendChild(grid);      const controls = document.createElement('div');     controls.className = 'mb-3';     const title = document.createElement('strong');     title.innerText = 'Επίλεξε Κατηγορία Εξόδου';     controls.appendChild(title);      const btnwrap = document.createElement('div');     btnwrap.id = 'renderedCategoryButtons';     btnwrap.className = 'mt-2 flex flex-wrap gap-2';     (categories || []).forEach(c => {       const btn = document.createElement('button');       btn.type = 'button';       btn.className = 'category-btn px-3 py-2 border rounded hover:bg-sky-50';       btn.dataset.cat = c;       btn.dataset.lineId = line.id || 'l0';       btn.innerText = c;       if(c === line.category){         btn.classList.add('bg-sky-600');         btn.classList.add('text-white');       }       btnwrap.appendChild(btn);     });      const clearBtn = document.createElement('button');     clearBtn.type = 'button';     clearBtn.className = 'px-3 py-2 border rounded text-sm ml-2 clear-category';     clearBtn.innerText = 'Καθαρισμός';     btnwrap.appendChild(clearBtn);      controls.appendChild(btnwrap);     wrapper.appendChild(controls);     return wrapper;   }    function escapeHtml(s){     if(!s && s !== 0) return '';     return String(s)       .replace(/&/g, '&amp;')       .replace(/</g, '&lt;')       .replace(/>/g, '&gt;')       .replace(/"/g, '&quot;')       .replace(/'/g, '&#39;');   }    // read categories from server-provided global or from a safe default   function getCategories(){     try {       const js = (function(){ try { return {{ customer_categories | tojson | safe }}; } catch(e){ return null; } })();       if(Array.isArray(js) && js.length) return js;     } catch(e){}     return window.CUSTOMER_CATEGORIES || [];   }    // render everything into the container   function renderSummaryLines(){     if(!container) return;     const summary = normalizeSummary(getSummaryObj());     const lines = summary.lines || [];     const categories = getCategories();      // clear container     container.innerHTML = '';      // Title (optional)     // const info = document.createElement('div'); info.className='mb-2 text-sm text-gray-700'; container.appendChild(info);      if(lines.length === 0){       const warn = document.createElement('div');       warn.className = 'mt-4 p-3 bg-yellow-50 rounded';       warn.innerText = 'Δεν βρέθηκαν γραμμές για αυτό το MARK.';       container.appendChild(warn);       wireInteractions();     try{ container.dataset.phase = 'iife'; }catch(e){}  // ensure handlers cleared       return;     }      if(lines.length === 1){       container.appendChild(buildSingleLineHTML(lines[0], categories));     } else {       container.appendChild(buildTableHTML(lines, categories));     }      // after building DOM, wire events     wireInteractions();   }    // update hidden input from current DOM selections/buttons    function wireInteractions(){     // remove old handlers by cloning nodes if necessary (to avoid duplicate attachments)     document.querySelectorAll('select.expense-category').forEach(sel => {       sel.addEventListener('change', function(){         updateSummaryFromDom();       });     });      // category buttons (single-line)     document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(btn => {       btn.addEventListener('click', function(){         const lineId = this.dataset.lineId || '';         // toggle this button active/inactive         document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(b => {           if(b.dataset.lineId === lineId){             b.classList.remove('bg-sky-600'); b.classList.remove('text-white');           }         });         const isActive = !(this.classList.contains('bg-sky-600'));         if(isActive){           this.classList.add('bg-sky-600'); this.classList.add('text-white');         } else {           this.classList.remove('bg-sky-600'); this.classList.remove('text-white');         }         updateSummaryFromDom();       });     });      // clear buttons     document.querySelectorAll('.clear-category').forEach(cb => {       cb.addEventListener('click', function(){         const parent = cb.closest('[data-line-id]');         if(!parent) return;         const lid = parent.dataset.lineId || '';         // clear UI         document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(b => {           if(b.dataset.lineId === lid){ b.classList.remove('bg-sky-600'); b.classList.remove('text-white'); }         });         // if there is a select for same line (unlikely in single-line view) clear it         const sel = document.querySelector('select.expense-category[data-line-id="' + lid + '"]');         if(sel) sel.value = '';         updateSummaryFromDom();       });     });   }    // watch hidden input changes (some flows set it programmatically before opening modal)   let lastSummaryValue = summaryInput ? summaryInput.value : '';   function pollSummaryInput(){     const now = summaryInput ? summaryInput.value : '';     if(now !== lastSummaryValue){       lastSummaryValue = now;       // re-render so UI matches new data       renderSummaryLines();     }   }   let pollTimer = null;   try {     pollTimer = setInterval(pollSummaryInput, 250);     window.addEventListener('beforeunload', ()=> { if(pollTimer) clearInterval(pollTimer); });   } catch(e){ /* ignore */ }    // ensure initial render on load (modal might be shown later)   try { renderSummaryLines(); } catch(e){ console.warn('initial renderSummaryLines failed', e); }    // also re-render whenever modal is shown (in case show logic sets display later)   const modal = document.getElementById('summaryModal');   if(modal){     // intercept style changes to detect show     const obs = new MutationObserver(muts => {       muts.forEach(m => {         if(m.attributeName === 'style' || m.attributeName === 'class'){           const disp = window.getComputedStyle(modal).display;           if(disp !== 'none'){             // modal visible -> render (ensure DOM inside ready)             setTimeout(renderSummaryLines, 10);           }         }       });     });     try { obs.observe(modal, { attributes: true, attributeFilter:['style','class'] }); } catch(e){ /* ignore */ }   }    // expose for debug   window._renderSummaryLines = renderSummaryLines; })();   function persist() {     summaryInput.value = JSON.stringify(obj || {});   }    if (!lines || lines.length === 0) {     container.innerHTML = '<div class="mt-4 p-3 bg-yellow-50 rounded">Δεν βρέθηκαν γραμμές για αυτό το MARK.</div>';     persist();     return;   }    if (lines.length > 1) {     // build table     const tbl = document.createElement('table');     tbl.className = 'w-full border-collapse';     tbl.innerHTML = `<thead class="bg-gray-100 sticky top-0">       <tr>         <th class="p-2 border text-left">#</th>         <th class="p-2 border text-left">ΦΠΑ Κατηγορία</th>         <th class="p-2 border text-right">Ποσό</th>         <th class="p-2 border text-right">ΦΠΑ</th>         <th class="p-2 border text-left">Κατηγορία Εξόδου</th>       </tr>     </thead>`;     const tbody = document.createElement('tbody');     lines.forEach((ln, idx) => {       const lid = (ln.id !== undefined) ? String(ln.id) : ('l' + idx);       const vat_cat = ln.vatCategory || ln.vat_category || ln.vat || '';       const amt = ln.amount || ln.lineTotal || ln.total || '';       const vatv = ln.vat || ln.vatRate || '';       const tr = document.createElement('tr');       tr.dataset.lineId = lid;       tr.dataset.vat = vat_cat;       tr.className = '';       tr.innerHTML = `         <td class="p-2 border text-sm text-gray-600">${idx+1}</td>         <td class="p-2 border break-words">${vat_cat}</td>         <td class="p-2 border text-right">${amt}</td>         <td class="p-2 border text-right">${vatv}</td>         <td class="p-2 border"></td>`;       // build select       const td = tr.querySelector('td:last-child');       const sel = document.createElement('select');       sel.className = 'expense-category p-1 border rounded w-full';       sel.dataset.lineId = lid;       const opt0 = document.createElement('option'); opt0.value = ''; opt0.innerText = '-- επίλεξε --'; sel.appendChild(opt0);       (window.CUSTOMER_CATEGORIES || []).forEach(c => {         const o = document.createElement('option'); o.value = c; o.innerText = c;         if ((ln.category || '') === c) o.selected = true;         sel.appendChild(o);       });       sel.addEventListener('change', function(){         const val = this.value;         // find line in obj and update         const found = (obj.lines || []).find(x => String(x.id || x.line_id || '') === lid);         if(found) found.category = val;         persist();       });       td.appendChild(sel);       tbody.appendChild(tr);     });     tbl.appendChild(tbody);     // wrap in container     const wrapper = document.createElement('div');     wrapper.className = 'overflow-auto max-h-96 border rounded';     wrapper.appendChild(tbl);     container.appendChild(wrapper);     persist();     return;   }    // single line case -> render buttons   const single = lines[0];   const lid = (single.id !== undefined) ? String(single.id) : (single.line_id !== undefined ? String(single.line_id) : 'l0');   const amt = single.amount || single.lineTotal || '';   const vatv = single.vat || single.vatRate || '';   const vat_cat = single.vatCategory || single.vat_category || '';   const selected_cat = single.category || '';    const singleDiv = document.createElement('div');   singleDiv.id = 'singleLine';   singleDiv.className = 'border rounded p-4';   singleDiv.dataset.lineId = lid;   singleDiv.dataset.amount = amt;   singleDiv.dataset.vat = vatv;   singleDiv.dataset.vatcat = vat_cat;    const infoHtml = document.createElement('div');   infoHtml.className = 'mb-3 grid grid-cols-1 md:grid-cols-3 gap-3';   infoHtml.innerHTML = `<div><strong>ΦΠΑ Κατηγορία</strong><div>${vat_cat}</div></div>                         <div><strong>Ποσό</strong><div>${amt}</div></div>                         <div><strong>ΦΠΑ</strong><div>${vatv}</div></div>`;   singleDiv.appendChild(infoHtml);    const chooseWrap = document.createElement('div');   chooseWrap.className = 'mb-3';   chooseWrap.innerHTML = `<strong>Επίλεξε Κατηγορία Εξόδου</strong>`;   const btnRow = document.createElement('div');   btnRow.id = 'categoryButtons';   btnRow.className = 'mt-2 flex flex-wrap gap-2';    (window.CUSTOMER_CATEGORIES || []).forEach(c => {     const b = document.createElement('button');     b.type = 'button';     b.className = 'category-btn px-3 py-2 border rounded hover:bg-sky-50';     b.dataset.cat = c;     b.dataset.lineId = lid;     b.innerText = c;     if (c === selected_cat) { b.classList.add('bg-sky-600', 'text-white'); }     b.addEventListener('click', function(){       const cat = this.dataset.cat;       // toggle selection       const currently = (obj.lines[0].category || '');       obj.lines[0].category = (currently === cat) ? '' : cat;       // reflect UI       Array.from(btnRow.querySelectorAll('button.category-btn')).forEach(bb=>{         bb.classList.toggle('bg-sky-600', bb.dataset.cat === obj.lines[0].category);         bb.classList.toggle('text-white', bb.dataset.cat === obj.lines[0].category);       });       persist();     });     btnRow.appendChild(b);   });    const clearBtn = document.createElement('button');   clearBtn.type = 'button';   clearBtn.id = 'clearCategory';   clearBtn.className = 'px-3 py-2 border rounded text-sm ml-2';   clearBtn.innerText = 'Καθαρισμός';   clearBtn.addEventListener('click', function(){     obj.lines[0].category = '';     Array.from(btnRow.querySelectorAll('button.category-btn')).forEach(bb=>{       bb.classList.remove('bg-sky-600', 'text-white');     });     persist();   });    btnRow.appendChild(clearBtn);   chooseWrap.appendChild(btnRow);   singleDiv.appendChild(chooseWrap);   container.appendChild(singleDiv);   persist(); }  /* Call this helper whenever you open the summary modal after you populated summaryJsonInput.    Examples of call sites are below (where modal.style.display='flex' is set). */   function showFlash(message, type='info', timeout=3000){   try {     const container = document.getElementById('clientFlashContainer');     if(!container) return;     const el = document.createElement('div');     el.className = 'mb-2 p-3 rounded shadow text-sm';     if(type === 'success') el.classList.add('bg-green-50', 'text-green-800');     else if(type === 'error') el.classList.add('bg-red-50', 'text-red-800');     else el.classList.add('bg-gray-50', 'text-gray-800');     el.innerText = message;     container.appendChild(el);     setTimeout(()=>{ try{ el.style.opacity='0'; setTimeout(()=>el.remove(), 300); }catch(e){} }, timeout);   } catch(e){ console.warn('showFlash failed', e); } }  // Helper API calls async function apiGetRepeatEntry(vat){   try {     const url = '/api/repeat_entry/get' + (vat ? ('?vat=' + encodeURIComponent(vat)) : '');     const res = await fetch(url, { credentials: 'same-origin' });     if (!res.ok) return { ok: false };     return await res.json();   } catch(e){     console.warn('apiGetRepeatEntry failed', e);     return { ok: false };   } } async function apiSaveRepeatEntry(enabled, mapping, vat){   try {     const res = await fetch('/api/repeat_entry/save', {       method: 'POST',       headers: {'Content-Type': 'application/json'},       credentials: 'same-origin',       body: JSON.stringify({ enabled: !!enabled, mapping: mapping || {}, vat: vat || VAT })     });     if(!res.ok) {       const txt = await res.text().catch(()=>null);       return { ok: false, status: res.status, body: txt };     }     return await res.json();   } catch(e){     console.warn('apiSaveRepeatEntry failed', e);     return { ok: false, error: String(e) };   } }  function removeForceEditParamFromUrl(){   try {     const url = new URL(window.location.href);     if (url.searchParams.has('force_edit')) {       url.searchParams.delete('force_edit');       history.replaceState(null, '', url.pathname + (url.search ? ('?' + url.searchParams.toString()) : '') + url.hash);     }   } catch(e){ console.warn('removeForceEditParamFromUrl failed', e); } }  document.addEventListener('DOMContentLoaded', function(){   // ---------- DOM references ----------   const repeatSwitch = document.getElementById('repeatEntrySwitch');   const editRepeatBtn = document.getElementById('editRepeatMappingBtn');   const repeatModal = document.getElementById('repeatMappingModal');   const repeatModalList = document.getElementById('repeatMappingList');   const repeatModalSave = document.getElementById('repeatModalSave');   const repeatModalCancel = document.getElementById('repeatModalCancel');   const repeatModalCloseX = document.getElementById('repeatModalCloseX');   const summaryInput = document.getElementById('summaryJsonInput'); // may be null   const saveSummaryForm = document.getElementById('saveSummaryForm');    // New: receipts switch + url input   // ---------- Μικρή, local επιδιόρθωση για τα κουμπιά/Select στο modal summary ---------- // ----- Prefill modal fields & categories from summaryJsonInput ----- function prefillSummaryModal(){   try {     const input = document.getElementById('summaryJsonInput');     if(!input) return;     let data = {};     try { data = JSON.parse(input.value || '{}'); } catch(e) { data = {}; }      // Header fields mapping     const map = {       mark: 'summaryModalMark',       AA: 'summary_AA',       AFM_issuer: 'summary_AFM',       AFM: 'summary_AFM',       Name: 'summary_Name',       issuer_name: 'summary_Name',       issueDate: 'summary_issueDate',       type_name: 'summary_type_name',       totalNetValue: 'summary_totalNetValue',       totalVatAmount: 'summary_totalVatAmount',       totalValue: 'summary_totalValue'     };     Object.keys(map).forEach(k => {       const el = document.getElementById(map[k]);       if(!el) return;       el.innerText = (data[k] !== undefined && data[k] !== null) ? String(data[k]) : (data[k.toUpperCase()] || '');     });      // Ensure container exists     const container = document.getElementById('summaryLinesContainer') || document;     const lines = Array.isArray(data.lines) ? data.lines : [];      // For each line, set select/button states     lines.forEach(line => {       const lid = String(line.id || line.line_id || '').trim();       if(!lid) return;        // Try to find matching element inside modal (row or singleLine)       let row = container.querySelector('[data-line-id="'+lid+'"]');       if(!row){         // fallback: global lookup         row = document.querySelector('[data-line-id="'+lid+'"]');       }       if(!row) return;        const cat = line.category || line.cat || '';       // set select if present       const sel = row.querySelector('select.expense-category[data-line-id="'+lid+'"]');       if(sel){         try { sel.value = cat || ''; } catch(e){ /* ignore */ }       }       // set button states if buttons present       const btns = row.querySelectorAll('.category-btn[data-line-id="'+lid+'"]');       if(btns && btns.length){         btns.forEach(b => b.classList.remove('bg-sky-600','text-white'));         if(cat){           // try to find exact button           const esc = (window.CSS && CSS.escape) ? CSS.escape(cat) : cat.replace(/"/g,'\\"');           const target = row.querySelector('.category-btn[data-line-id="'+lid+'"][data-cat="'+cat+'"]') ||                          row.querySelector('.category-btn[data-line-id="'+lid+'"][data-cat="'+esc+'"]');           if(target) target.classList.add('bg-sky-600','text-white');         }       }     });   } catch(err){     console.warn('prefillSummaryModal error', err);   } }  // Call prefill when modal gets shown by your existing code. // Find the places where you do: modal.style.display = 'flex' and add prefillSummaryModal().    (function(){   // helper: ασφαλής update του hidden json από το DOM   function updateSummaryFromDom(){     try {       const input = document.getElementById('summaryJsonInput');       if(!input) return;       let data = {};       try { data = JSON.parse(input.value || '{}'); } catch(e){ data = {}; }       data.lines = Array.isArray(data.lines) ? data.lines.slice() : [];        // For every element that has data-line-id inside the modal container, read category       const container = document.getElementById('summaryLinesContainer') || document;       container.querySelectorAll('[data-line-id]').forEach(el => {         const lid = String(el.dataset.lineId || '').trim();         if(!lid) return;         // prefer select.expense-category if present         let chosen = '';         const sel = el.querySelector('select.expense-category[data-line-id="'+lid+'"]');         if(sel && sel.value) chosen = sel.value;         else {           // else look for active category button in same element           const btn = el.querySelector('.category-btn.bg-sky-600');           if(btn) chosen = btn.dataset.cat || '';         }         // find or create line entry         let found = data.lines.find(x => String(x.id) === lid);         if(!found){           found = { id: lid, category: '' };           data.lines.push(found);         }         found.category = chosen || '';       });        input.value = JSON.stringify(data);     } catch(err){       console.warn('updateSummaryFromDom error', err);     }   }    // only operate inside the modal area to avoid interfering globally   const container = document.getElementById('summaryLinesContainer');   if(!container) {     // fallback: attach to document but remain minimal     console.warn('summaryLinesContainer not found — fix handlers limitedly');   }    // Event delegation: capture clicks on category buttons and selects inside modal   const targetRoot = container || document;   // Use capture true so we intercept before other handlers   targetRoot.addEventListener('click', function(e){     const btn = e.target.closest && e.target.closest('.category-btn');     if(btn && (container ? container.contains(btn) : true)){       // Prevent bubbling to other global handlers that open the receipts-modal       e.preventDefault();       e.stopPropagation();        // ensure it's not treated as a submit (defensive): set type=button if missing       try { if(btn.tagName === 'BUTTON' && !btn.hasAttribute('type')) btn.setAttribute('type','button'); } catch(_) {}        // determine line id: prefer dataset, else find closest ancestor with data-line-id       const lineEl = btn.closest('[data-line-id]');       const lineId = lineEl ? (lineEl.dataset.lineId || '') : (btn.dataset.lineId || '');        // Toggle active class for buttons of the same line only       if(lineId){         const group = (container || document).querySelectorAll('.category-btn[data-line-id="'+lineId+'"]');         group.forEach(b => { b.classList.remove('bg-sky-600','text-white'); });       } else {         // fallback: toggle only this button       }       const isActive = !btn.classList.contains('bg-sky-600');       if(isActive) btn.classList.add('bg-sky-600','text-white');       else btn.classList.remove('bg-sky-600','text-white');        // if there's a select corresponding to this line, keep it in sync       if(lineId){         const sel = (container || document).querySelector('select.expense-category[data-line-id="'+lineId+'"]');         if(sel) sel.value = isActive ? (btn.dataset.cat || '') : '';       }        // update hidden JSON immediately       updateSummaryFromDom();       return;     }      // if clicking on a select inside modal, prevent bubbling too     const sel = e.target.closest && e.target.closest('select.expense-category');     if(sel && (container ? container.contains(sel) : true)){       e.stopPropagation();       // let change event handle updating (below we also listen change)       return;     }   }, true);    // Listen change events on selects inside container and update JSON   (container || document).addEventListener('change', function(e){     const sel = e.target.closest && e.target.closest('select.expense-category');     if(sel && (container ? container.contains(sel) : true)){       e.stopPropagation();       // sync any visual button states (remove active if select chosen)       const lid = sel.dataset.lineId || (sel.closest('[data-line-id]') && sel.closest('[data-line-id]').dataset.lineId) || '';       if(lid){         // clear buttons for that line         const group = (container || document).querySelectorAll('.category-btn[data-line-id="'+lid+'"]');         group.forEach(b => b.classList.remove('bg-sky-600','text-white'));       }       updateSummaryFromDom();     }   }, true);    // Ensure Save form updates JSON right before submit (defensive)   const saveForm = document.getElementById('saveSummaryForm');   if(saveForm){     saveForm.addEventListener('submit', function(e){       try {         updateSummaryFromDom();         // small synchronous update only; let the submit continue       } catch(err){ console.warn('pre-submit update failed', err); }     });   }    // Expose helper in case other code wants to call it   window.updateSummaryFromDom = updateSummaryFromDom; })();    const useReceiptsSwitch = document.getElementById('useReceiptsSwitch');   // find or create an URL input (if not present in template we create one dynamically)   let urlInput = document.getElementById('scrapeUrlInput');   if(!urlInput){     urlInput = document.createElement('input');     urlInput.id = 'scrapeUrlInput';     urlInput.placeholder = 'Εισάγετε URL παραστατικού (για αποδείξεις)';     urlInput.className = 'p-2 border rounded w-2/4 hidden';     urlInput.type = 'text';     // insert after markInput     const mi = document.getElementById('markInput');     if(mi && mi.parentElement) mi.parentElement.insertBefore(urlInput, mi.nextSibling);   }    // --- ensure search icon behaves same as input clear/submit ---   (function wireSearchIconBehavior(){     const mi = document.getElementById('markInput');     if (!mi) return;      const possibleSelectors = [       '.icon-search', '.btn-search', '#searchIcon', '.fa-search', '.magnifier',       'button[aria-label="search"]', 'button[data-action="search"]'     ];      let found = null;     for (const sel of possibleSelectors) {       const el = document.querySelector(sel);       if (el) { found = el; break; }     }      if (!found) {       const delBtn = document.querySelector('button#deleteSelected, button.delete-selected, button[data-action="delete-selected"]');       if (delBtn && delBtn.parentElement) {         const sibling = delBtn.parentElement.querySelector('button, a, svg, i');         if (sibling && sibling !== delBtn) found = sibling;       }     }      if (!found) return;      found.addEventListener('click', function(e){       try {         mi.value = '';         mi.dispatchEvent(new Event('input', { bubbles: true }));         mi.dispatchEvent(new KeyboardEvent('keyup', { bubbles: true, key: 'Backspace' }));         if (window.jQuery && jQuery.fn && jQuery.fn.dataTable) {           try {             const dt = $('.summary-table').DataTable();             dt.search('').columns().search('').draw();           } catch(ignore){}         }       } catch(err){         console.warn('search icon handler failed', err);       }     });   })();     // detect vat keys in summary   function detectVatKeysFromSummary(){     if(summaryInput && summaryInput.value){       try {         const obj = JSON.parse(summaryInput.value || '{}');         const lines = Array.isArray(obj.lines) ? obj.lines : [];         const set = new Set();         lines.forEach(l => {           const key = (l.vatCategory || l.vat_category || l.vat || '').toString().trim();           if(key) set.add(key);         });         if(set.size) return Array.from(set);       } catch(e){ /* ignore */ }     }     return ['0%','6%','13%','24%'];   }    // Build repeat modal UI given an existing mapping (object)   function buildRepeatModalUI(existingMapping){     repeatModalList.innerHTML = '';     const vatKeys = detectVatKeysFromSummary();     const mapping = existingMapping || {};     // default row     const defaultRow = document.createElement('div');     defaultRow.className = 'flex items-center gap-3';     defaultRow.innerHTML = `<div class="w-36 text-sm font-medium">Προεπιλογή</div>`;     const defaultSelect = document.createElement('select');     defaultSelect.className = 'p-1 border rounded flex-1';     const opt0 = document.createElement('option'); opt0.value=''; opt0.innerText='-- (κανένα) --'; defaultSelect.appendChild(opt0);     CUSTOMER_CATEGORIES.forEach(c=>{       const o = document.createElement('option'); o.value = c; o.innerText = c;       if(mapping['__default'] === c) o.selected = true;       defaultSelect.appendChild(o);     });     defaultRow.appendChild(defaultSelect);     repeatModalList.appendChild(defaultRow);      vatKeys.forEach(vk=>{       const row = document.createElement('div');       row.className = 'flex items-center gap-3';       const label = document.createElement('div');       label.className = 'w-36 text-sm font-medium';       label.innerText = vk || '(άγνωστο)';       const sel = document.createElement('select');       sel.className = 'p-1 border rounded flex-1';       const oEmpty = document.createElement('option'); oEmpty.value=''; oEmpty.innerText='-- (προεπιλογή) --'; sel.appendChild(oEmpty);       CUSTOMER_CATEGORIES.forEach(c=>{         const o=document.createElement('option'); o.value=c; o.innerText=c;         if(mapping[vk] === c) o.selected = true;         sel.appendChild(o);       });       row.appendChild(label);       row.appendChild(sel);       repeatModalList.appendChild(row);     });   }    function openRepeatModalWithMapping(mapping){     // If receipts mode is on, block editing mapping because receipts get fixed category     if(useReceiptsSwitch && useReceiptsSwitch.checked){       alert('Όταν είναι επιλεγμένες οι Αποδείξεις, δεν επιτρέπεται η επεξεργασία χαρακτηρισμών — οι αποδείξεις παίρνουν μόνο την κατηγορία "αποδειξακια".');       return;     }     buildRepeatModalUI(mapping || {});     repeatModal.style.display = 'flex';   }   function closeRepeatModal(){ repeatModal.style.display = 'none'; }    // collect mapping from modal selects   function collectMappingFromModal(){     const mapping = {};     const selects = repeatModalList.querySelectorAll('select');     if(selects.length){       const first = selects[0];       if(first && first.value) mapping['__default'] = first.value;       const vatKeys = detectVatKeysFromSummary();       for(let i=1;i<selects.length;i++){         const sel = selects[i];         const vatKey = vatKeys[i-1];         if(sel && sel.value) mapping[vatKey] = sel.value;       }     }     return mapping;   }    // apply given mapping to summary JSON and submit saveSummaryForm   function applyMappingToSummaryAndSubmitUsingMapping(mapping){     if(!summaryInput || !saveSummaryForm) return false;     try {       const data = JSON.parse(summaryInput.value || '{}');       if(!Array.isArray(data.lines)) data.lines = [];       data.lines = data.lines.map(l => {         const vatKey = (l.vatCategory || l.vat_category || l.vat || '').toString().trim();         if(mapping && mapping[vatKey]) l.category = mapping[vatKey];         else if(mapping && mapping.__default) l.category = mapping.__default;         return l;       });       summaryInput.value = JSON.stringify(data);       saveSummaryForm.submit();       return true;     } catch(e){       console.warn('applyMappingToSummaryAndSubmitUsingMapping error', e);       return false;     }   }    // ---------- Initialization: load server repeat_entry config ----------   (async function initRepeatEntry(){     try {       const resp = await apiGetRepeatEntry(VAT);       if(resp && resp.ok){         const repeat = resp.repeat_entry || { enabled: false, mapping: {} };         if(resp.expense_tags && Array.isArray(resp.expense_tags) && resp.expense_tags.length){           CUSTOMER_CATEGORIES = resp.expense_tags.slice();         }         const enabled = !!repeat.enabled;         const mapping = repeat.mapping || {};          if(repeatSwitch){           repeatSwitch.checked = enabled;           // show edit button if mapping exists and receipts not selected           if(mapping && Object.keys(mapping).length && !(useReceiptsSwitch && useReceiptsSwitch.checked)) editRepeatBtn.classList.remove('hidden');           repeatSwitch.addEventListener('change', async function(){             const now = this.checked;             // if enabling and no mapping -> open modal to create mapping             if(now){               if(!mapping || Object.keys(mapping).length === 0){                 // open modal letting user create mapping (but only if receipts not selected)                 if(useReceiptsSwitch && useReceiptsSwitch.checked){                   // do not open — receipts use only αποδειξακια                   editRepeatBtn.classList.add('hidden');                 } else {                   openRepeatModalWithMapping({});                 }               } else {                 if(useReceiptsSwitch && useReceiptsSwitch.checked){                   // receipts + repeat -> hide edit button                   editRepeatBtn.classList.add('hidden');                 } else {                   editRepeatBtn.classList.remove('hidden');                 }               }             } else {               editRepeatBtn.classList.add('hidden');             }             // Persist enabled flag immediately (keep mapping as-is)             const saveResp = await apiSaveRepeatEntry(now, mapping, VAT);             if(saveResp && saveResp.ok){               showFlash('Ενημερώθηκε η ρύθμιση επαναληπτικής εισαγωγής.', 'success');               if(saveResp.expense_tags && Array.isArray(saveResp.expense_tags) && saveResp.expense_tags.length){                 CUSTOMER_CATEGORIES = saveResp.expense_tags.slice();               }             } else {               showFlash('Αποτυχία αποθήκευσης ρύθμισης.', 'error');             }           });         }          // If repeat enabled and mapping exists and modal_summary present -> auto apply mapping now         if (enabled && mapping && Object.keys(mapping).length && summaryInput) {         const receiptsOn = !!(useReceiptsSwitch && useReceiptsSwitch.checked);           if (!receiptsOn && !FORCE_EDIT) {             const did = applyMappingToSummaryAndSubmitUsingMapping(mapping);           if (did) {             const sm = document.getElementById('summaryModal');           if (sm) sm.style.display = 'none';       }     }   }          // Wire edit button         if(editRepeatBtn){           editRepeatBtn.classList.toggle('hidden', !mapping || Object.keys(mapping).length===0 || (useReceiptsSwitch && useReceiptsSwitch.checked));           editRepeatBtn.addEventListener('click', function(){             openRepeatModalWithMapping(mapping);           });         }       } else {         if(repeatSwitch) repeatSwitch.checked = false;       }     } catch(e){       console.warn('initRepeatEntry failed', e);     }   })();    // wire receipts switch to show/hide url input and to enforce mapping rule   if(useReceiptsSwitch){     useReceiptsSwitch.addEventListener('change', function(){       const on = !!this.checked;       // UI: swap inputs       if(on){         document.getElementById('markInput')?.classList.add('hidden');         urlInput?.classList.remove('hidden');         urlInput?.focus();         // when receipts are active, edit button must be hidden (even if repeat on)         if(editRepeatBtn) editRepeatBtn.classList.add('hidden');       } else {         document.getElementById('markInput')?.classList.remove('hidden');         urlInput?.classList.add('hidden');         document.getElementById('markInput')?.focus();         // restore edit button visibility based on repeatSwitch/mapping         // re-init repeat button visibility by calling initRepeatEntry lightly:         (async function(){           try {             const resp = await apiGetRepeatEntry(VAT);             if(resp && resp.ok){               const mapping = (resp.repeat_entry && resp.repeat_entry.mapping) ? resp.repeat_entry.mapping : {};               if(mapping && Object.keys(mapping).length && repeatSwitch && repeatSwitch.checked){                 editRepeatBtn.classList.remove('hidden');               } else {                 editRepeatBtn.classList.add('hidden');               }             }           } catch(e){}         })();       }     });   }    // repeat modal handlers   repeatModalCloseX?.addEventListener('click', closeRepeatModal);   repeatModalCancel?.addEventListener('click', closeRepeatModal);    repeatModalSave?.addEventListener('click', async function(){     // collect mapping     const mapping = collectMappingFromModal();     // persist to backend and enable repeat     const resp = await apiSaveRepeatEntry(true, mapping, VAT);     if (resp && resp.ok) {       if (resp.expense_tags && Array.isArray(resp.expense_tags) && resp.expense_tags.length) {         CUSTOMER_CATEGORIES = resp.expense_tags.slice();       }       if (repeatSwitch) repeatSwitch.checked = true;       // if receipts mode is on, edited mapping should not be used—hide edit button       if (useReceiptsSwitch && useReceiptsSwitch.checked) editRepeatBtn.classList.add('hidden');       else editRepeatBtn.classList.remove('hidden');        showFlash('Αποθηκεύτηκαν οι ρυθμίσεις επαναληπτικής εισαγωγής. Η σελίδα θα επαναφορτωθεί...', 'success', 800);       closeRepeatModal();       setTimeout(function(){ try { window.location.reload(); } catch(e){ console.warn('reload failed', e); } }, 600);       return;     } else {       console.warn('Failed saving repeat mapping', resp);       showFlash('Αποτυχία αποθήκευσης ρυθμίσεων επαναληπτικής εισαγωγής.', 'error');     }   });    // ---------- existing original JS (dismiss banner, force edit, summary modal wiring, etc) ----------   const forceBtn = document.getElementById('forceEditBtn');   const markInput = document.getElementById('markInput');   const existingBanner = document.getElementById('existingBanner');   const dismissBannerBtn = document.getElementById('dismissBannerBtn');    if(dismissBannerBtn){     dismissBannerBtn.addEventListener('click', function(){ if(existingBanner) existingBanner.style.display = 'none'; });   }    if (forceBtn){     forceBtn.addEventListener('click', function(){       const markValRaw = (markInput && markInput.value) ? markInput.value.trim() : '{{ mark or "" }}';       const markVal = encodeURIComponent(markValRaw || '');       if (!markVal){ alert('Δεν δόθηκε MARK για επιβεβαίωση.'); return; }       if (confirm('Θες σίγουρα να επαναχαρακτηρίσεις το MARK και να ανοίξει η φόρμα επεξεργασίας;')) {         if(existingBanner) existingBanner.style.display = 'none';         window.location = SEARCH_BASE_URL + '?mark=' + markVal + '&force_edit=1';       }     });   }    const modal = document.getElementById('summaryModal');   const modalCloseBtns = Array.from(document.querySelectorAll('#modalCloseX, #modalCloseBtn'));   modalCloseBtns.forEach(b => b?.addEventListener('click', function(){     if(modal) modal.style.display = 'none';     removeForceEditParamFromUrl();   }));    {% if modal_summary and (request.args.get('force_edit') == '1' or not allow_edit_existing) %}   setTimeout(()=>{   const m = document.getElementById('summaryModal');   if (!m) return;    // Αν είμαστε σε mode αποδείξεων ΚΑΙ είναι ενεργό το repeat, μην ανοίγεις modal   // ΕΞΑΙΡΕΣΗ: αν είναι reclassification (force_edit=1), τότε άνοιξέ το για να αλλάξουμε χαρακτηρισμούς.   const receiptsOn = !!(document.getElementById('useReceiptsSwitch') && document.getElementById('useReceiptsSwitch').checked);   const repeatOn   = !!(document.getElementById('repeatEntrySwitch') && document.getElementById('repeatEntrySwitch').checked);    // Επιπλέον έλεγχος: αν το summary είναι σαφώς Απόδειξη, αντιμετώπισέ το ως receipts flow   let isReceiptSummary = false;   try {     const raw = (document.getElementById('summaryJsonInput')?.value || '').trim();     if (raw) {       const sobj = JSON.parse(raw);       const tname = (sobj.type_name || sobj.type || '').toString().toLowerCase();       const cat   = (sobj.category || sobj.characteristic || sobj['χαρακτηρισμός'] || '').toString().toLowerCase();       isReceiptSummary = !!(sobj.is_receipt || tname.includes('απόδει') || tname.includes('receipt') || cat === 'αποδειξακια');     }   } catch(_){}     if ((receiptsOn || isReceiptSummary) && repeatOn && !FORCE_EDIT) {     // auto-flow αποδείξεων όταν είναι ενεργό το "Επαναληψιμη εισαγωγή"     try {       let raw = (document.getElementById('summaryJsonInput')?.value || '').trim();       if (!raw || raw === '{}' || raw === 'null') {         try { raw = JSON.stringify({{ modal_summary | tojson | safe }}); } catch(_) {}       }       const sobj = raw ? JSON.parse(raw) : {};       // Κανονικοποίησε σαν απόδειξη και επιβεβαίωσε μία φορά       const url = document.getElementById('scrapeUrlInput')?.value || '';       (async () => {         try {           await RC.confirmReceiptOnce(RC.normalizeReceiptSummary(sobj), url);           // κράτα το mode σε receipts και κάνε hard redirect για καθαρή κατάσταση           try { localStorage.setItem('useReceiptsSwitch','1'); } catch(_){}           const base = location.pathname + '?use_receipts=1';           location.replace(base);         } catch(e) {           console.warn('auto-confirm receipt failed', e);         }       })();     } catch(e) { console.warn('auto-flow receipts error', e); }     return;   }     // Αλλιώς, άνοιξέ το κανονικά   try {     const summaryInputEl = document.getElementById('summaryJsonInput');     if (summaryInputEl && (!summaryInputEl.value || summaryInputEl.value === '{}')) {       summaryInputEl.value = {{ modal_summary | tojson | safe }};     }     const obj = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');     renderSummaryLinesFromObject(obj);   } catch(e) { console.warn('renderSummaryLinesFromObject error', e); }    m.style.display = 'flex';   removeForceEditParamFromUrl(); }, 80); {% endif %}      {% if modal_warning %}   const afmModal = document.getElementById('afmWarningModal');   const afmModalBtn = document.getElementById('afmModalConfirm');   if (afmModal && afmModalBtn){     setTimeout(()=>{ afmModal.style.display = 'flex'; }, 50);     afmModalBtn.addEventListener('click', function(){ afmModal.style.display = 'none'; });   }   {% endif %}    // --- the rest of your existing summary wiring (no changes) ---   if (summaryInput){   try {     let summaryData = JSON.parse(summaryInput.value || '{}');     if (!Array.isArray(summaryData.lines)) summaryData.lines = [];     summaryData.lines = summaryData.lines.map(l => {       if (!l) return {id:'', description:'', amount:'', vat:'', category:'', vatCategory:''};       l.id = (l.id!==undefined)?String(l.id):(l.line_id!==undefined?String(l.line_id):'');       l.category = l.category || l.cat || l.line_category || l['κατηγορία'] || '';       return l;     });      // multi-line selects     document.querySelectorAll('#linesTableBody tr[data-line-id]').forEach(tr => {       const lid = String(tr.dataset.lineId || '');       const sel = tr.querySelector('select.expense-category');       if (!sel) return;       let existing = summaryData.lines.find(x => String(x.id) === lid);       if (!existing){         existing = {id: lid, category: ''};         summaryData.lines.push(existing);       }       sel.value = existing.category || '';       sel.addEventListener('change', function(){ existing.category = sel.value; summaryInput.value = JSON.stringify(summaryData); });     });      // single-line buttons     const singleLine = document.getElementById('singleLine');     if (singleLine){       const lid = String(singleLine.dataset.lineId || '');       let existing = summaryData.lines.find(x => String(x.id) === lid);       if (!existing){         existing = {id: lid, category: ''};         summaryData.lines.push(existing);       }       const buttons = document.querySelectorAll('#categoryButtons .category-btn');       function markActive(cat){         buttons.forEach(b => {           b.classList.toggle('bg-sky-600', b.dataset.cat === cat);           b.classList.toggle('text-white', b.dataset.cat === cat);         });       }       if (existing.category) markActive(existing.category);       buttons.forEach(btn => {         btn.addEventListener('click', function(){           const cat = this.dataset.cat;           existing.category = (existing.category === cat) ? '' : cat;           markActive(existing.category);           summaryInput.value = JSON.stringify(summaryData);         });       });       const clearBtn = document.getElementById('clearCategory');       clearBtn?.addEventListener('click', function(){         existing.category = '';         markActive('');         summaryInput.value = JSON.stringify(summaryData);       });     }     summaryInput.value = JSON.stringify(summaryData);   } catch(e){     console.warn('summary JSON parse/normalize error', e);   } }     // --- the table / datatables logic code (kept unchanged) ---   const hasTable = document.querySelector('.summary-table') !== null;   if (hasTable){     const jq = window.jQuery;     const dtAvail = jq && jq.fn && jq.fn.dataTable;     if (dtAvail){       try {         const dt = $('.summary-table').DataTable({           paging: true,           scrollY: '55vh',           scrollX: true,           scrollCollapse: true,           fixedHeader: { header: true, headerOffset: 0 },           colReorder: true,           autoWidth: false,           columnDefs: [{ orderable: false, targets: 0 }]         });         if (typeof dt.colResize === 'function') {           try { dt.colResize({ resizeMode: 'flex' }); } catch(e){ console.warn('colResize failed', e); }         }         const globalSearch = document.getElementById('globalSearch');         if (globalSearch){           globalSearch.addEventListener('input', function(){ dt.search(this.value).draw(); });         }         setTimeout(()=>{ try{ dt.columns.adjust().draw(); }catch(e){} }, 120);       } catch(e){         console.warn('DataTables init failed — falling back', e);       }     } else {       const globalSearch = document.getElementById('globalSearch');       if (globalSearch){         globalSearch.addEventListener('input', function(){           const q = this.value.toLowerCase();           document.querySelectorAll('.summary-table tbody tr').forEach(tr => {             tr.style.display = tr.textContent.toLowerCase().indexOf(q) !== -1 ? '' : 'none';           });         });       }     }      try {       const anyCheckbox = document.querySelector('input[name="delete_mark"]');       if (anyCheckbox){         const firstTh = document.querySelector('.summary-table thead th');         if (firstTh && !document.getElementById('selectAll')){           const chk = document.createElement('input');           chk.type = 'checkbox'; chk.id = 'selectAll'; chk.title = 'Επιλογή όλων';           chk.style.marginRight = '6px';           firstTh.prepend(chk);           chk.addEventListener('change', function(){ document.querySelectorAll('input[name="delete_mark"]').forEach(cb => cb.checked = this.checked); });         }         const headers = Array.from(document.querySelectorAll('.summary-table thead th')).map(h => h.innerText.trim().toLowerCase());         let markIdx = headers.findIndex(h => h.includes('mark'));         if (markIdx === -1) markIdx = headers.findIndex(h => h.includes('αφμ') || h.includes('afm'));         if (markIdx >= 0){           document.querySelectorAll('.summary-table tbody tr').forEach(row => {             const cb = row.querySelector('input[name="delete_mark"]');             if (cb){               const td = row.querySelectorAll('td')[markIdx];               if (td){                 const v = td.innerText.trim();                 if (v) cb.value = v;               }             }           });         }       }     } catch(e){ console.warn('select-all / mark mapping error', e); }   }    // --- new: restore table / reload when markInput cleared ---   (function wireRobustClearRestore(){     const mi = (typeof markInput !== 'undefined' && markInput) ? markInput : document.getElementById('markInput');     if (!mi) return;      let t = null;     let lastVal = mi.value || '';      function restoreAllRowsAndUi(){       try {         if (window.jQuery && jQuery.fn && jQuery.fn.dataTable) {           try {             const dt = $('.summary-table').DataTable();             dt.search('').columns().search('').draw();             try {               dt.rows().nodes().to$().each(function(){ this.style.display = ''; });             } catch(e){ /* ignore */ }             try { dt.columns.adjust().draw(false); } catch(e){ /* ignore */ }           } catch(e) {             console.warn('DataTables restore failed, falling back to DOM restore', e);             document.querySelectorAll('.summary-table tbody tr').forEach(tr => tr.style.display = '');           }         } else {           document.querySelectorAll('.summary-table tbody tr').forEach(tr => tr.style.display = '');         }          const selectAll = document.getElementById('selectAll') || document.querySelector('.summary-table thead input[type="checkbox"]#selectAll');         if (selectAll) selectAll.checked = false;          const evt = new Event('tableRestored');         document.querySelectorAll('.summary-table').forEach(t => t.dispatchEvent(evt));       } catch(err){         console.warn('restoreAllRowsAndUi failed', err);       }     }   document.addEventListener('DOMContentLoaded', function(){   try {     const m = document.getElementById('summaryModal');     if(m && (m.style.display === 'flex' || getComputedStyle(m).display !== 'none')){       // small timeout to let template-rendered inner HTML settle       setTimeout(()=>{ try { prefillSummaryModal(); } catch(e){ console.warn(e); } }, 40);     }   } catch(e){ /* ignore */ } });     function maybeRestore(){       clearTimeout(t);       t = setTimeout(()=>{         try {           const v = (mi.value || '').trim();           if (v === '' && (lastVal && lastVal.trim() !== '')) {             try {               if (typeof INITIAL_MARK !== 'undefined' && INITIAL_MARK && INITIAL_MARK.trim() !== '') {                 const cur = new URL(window.location.href);                 if (cur.searchParams.has('mark') || cur.searchParams.has('force_edit')) {                   window.location = SEARCH_BASE_URL;                   return;                 }               }             } catch(e){ /* ignore URL errors and fallthrough to client restore */ }              restoreAllRowsAndUi();           }           lastVal = v;         } catch(e){           console.warn(e);         }       }, 150);     }      mi.addEventListener('input', maybeRestore);     mi.addEventListener('keyup', maybeRestore);     mi.addEventListener('paste', function(){ setTimeout(maybeRestore, 50); });     mi.addEventListener('cut', function(){ setTimeout(maybeRestore, 50); });     mi.addEventListener('blur', maybeRestore);      let pollInterval = null;     try {       pollInterval = setInterval(() => {         const current = (mi.value || '').trim();         if (current !== (lastVal || '').trim()) {           maybeRestore();         }       }, 300);        window.addEventListener('beforeunload', () => {         if (pollInterval) clearInterval(pollInterval);       });     } catch(e){     }   })();    // ----- SCRAPER integration: auto call endpoint when URL provided and show modal -----   // Add a handler: when receipts switch ON and user submits form -> call /api/scrape_receipt and show modal   // ====================== RECEIPTS SCRAPE FLOW ====================== document.getElementById('markSearchForm')?.addEventListener('submit', async function (evt) {   if (useReceiptsSwitch && useReceiptsSwitch.checked) {      // --- de-dupe receipts submit (scrape) ---     // --- de-dupe receipts submit (scrape) ---   const form = evt.currentTarget;   if (form && form.dataset.receiptsSubmitting === '1') {     evt.preventDefault();     return;   }   if (form) form.dataset.receiptsSubmitting = '';   if (form) form.dataset.receiptsSubmitting = '1';  evt.preventDefault();     const url = (urlInput && urlInput.value) ? urlInput.value.trim() : '';     if (!url) {       showFlash('Εισάγετε URL για αποδείξεις.', 'error');       return;     }      try {       const res = await fetch('/api/scrape_receipt', {         method: 'POST',         credentials: 'same-origin',         headers: { 'Content-Type': 'application/json', 'X-Requested-With': 'XMLHttpRequest' },         body: JSON.stringify({ url: url })       });        const j = await res.json().catch(() => null);       if (!res.ok || !j || j.ok === false) {         const msg = j && (j.error || j.message) ? (j.error || j.message) : ('Server ' + (res.status || ''));         showFlash('Σφάλμα scraper: ' + msg, 'error', 6000);         return;       }        if (j && j.is_invoice === true) {   openReceiptWarning('Το URL φαίνεται να περιέχει Τιμολόγιο — δεν θα αποθηκευτεί ως Απόδειξη. Έλεγξε το παραστατικό.');   return; // STOP         }         // ---- Έλεγχος έτους απόδειξης vs ενεργή χρήση (modal + STOP) try {   // 1) Πάρε ενεργή χρήση από ACTIVE_YEAR ή από το backend (fallback)   const activeYear = await getActiveFiscalYear();    // 2) Εξήγαγε issueYear από την απόκριση του scraper   let issueYear = null;   if (j && j.issue_year != null && String(j.issue_year).trim() !== '') {     // δέξου είτε καθαρό έτος είτε π.χ. "2025"     const m = String(j.issue_year).match(/\b(19|20)\d{2}\b/);     issueYear = m ? m[0] : String(j.issue_year);   } else if (j) {     const anyDate = j.issue_date || j.issueDate || j.date || '';     if (typeof anyDate === 'string') {       const m = anyDate.match(/\b(19|20)\d{2}\b/);       if (m) issueYear = m[0];     }   }    // 3) Αν δεν ταιριάζουν -> δείξε modal και σταμάτα   if (activeYear && issueYear && String(issueYear) !== String(activeYear)) {     openReceiptWarning(`Προσοχή: Η απόδειξη είναι του ${issueYear}, ενώ η ενεργή χρήση είναι ${activeYear}. Η διαδικασία μπλοκάρεται.`);     return; // STOP   } } catch (_) {   /* αν αποτύχει ο έλεγχος, δεν μπλοκάρουμε σιωπηλά */ }         // Δημιουργία αυξανόμενου MARK 15 ψηφίων (από το backend)       const markRes = await fetch('/api/next_receipt_mark', { credentials: 'same-origin' });       const markData = await markRes.json().catch(() => null);       const nextMark = (markData && markData.mark) ? markData.mark : '';        // Prepare summary object για modal       const summaryObj = {         mark: nextMark,         AA: j.progressive_aa || '',         AFM_issuer: j.issuer_vat || '',         Name: j.issuer_name || '',         issueDate: j.issue_date || '',         type_name: 'ΑΠΟΔΕΙΞΗ',         totalValue: j.total_amount || '',         totalNetValue: j.total_amount || '',         totalVatAmount: (j.raw && (j.raw.totalVatAmount || j.raw.totalVat)) || '',         lines: []       ,   type: 'ΑΠΟΔΕΙΞΗ',   category: 'αποδειξακια',   is_receipt: true,   number: (j.progressive_aa || '')};        if (j.raw && Array.isArray(j.raw.lines) && j.raw.lines.length) {         j.raw.lines.forEach((l, idx) => {           summaryObj.lines.push({             id: l.id || ('r' + idx),             amount: l.amount || l.lineTotal || '',             vat: l.vat || l.vatRate || '',             vatCategory: l.vatCategory || l.vat_category || '',             description: l.description || l.desc || ''           });         });       } else {         summaryObj.lines.push({           id: 'r0',           amount: j.total_amount || '',           vat: (j.raw && (j.raw.vat || '')) || '',           vatCategory: (j.raw && (j.raw.vatCategory || '')) || '',           description: (j.raw && (j.raw.description || '')) || ''         });       }        // Populate modal inputs       const summaryInput = document.getElementById('summaryJsonInput');       if (summaryInput) summaryInput.value = JSON.stringify(summaryObj);         document.getElementById('scrapeUrlField')?.setAttribute('value', url);       const desiredCat = CUSTOMER_CATEGORIES.includes('αποδειξακια')         ? 'αποδειξακια'         : (CUSTOMER_CATEGORIES[0] || '');       document.getElementById('scrapeCategoryField')?.setAttribute('value', desiredCat);       document.getElementById('scrapeForceField')?.setAttribute('value', 'false');        // Ενημέρωση modal       const modal = document.getElementById('summaryModal');       if (modal) {         // ensure populate code runs (some populate watchers poll or listen for modal display)         // prefer calling RC_forcePopulateSummaryModal if present         if (window.RC_forcePopulateSummaryModal) {           try { window.RC_forcePopulateSummaryModal(); } catch(e){ console.warn('RC_forcePopulateSummaryModal failed', e); }         }         if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }         if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { showFlash('Λήφθηκε απόδειξη — ελέγξτε τα στοιχεία και πατήστε "Αποθήκευση στο Cache".', 'success', 5000); }       }      } catch (err) {       console.error('scrape_receipt error', err);       showFlash('Σφάλμα scraper: ' + (err.message || err), 'error', 6000);     }   } });     // Intercept "Αποθήκευση στο Cache" to perform AJAX save for scraped receipts   // intercept saveSummaryForm submit when scrapeUrlField is present // --- replace the previous payload construction + fetch with this robust version --- document.getElementById('saveSummaryForm')?.addEventListener('submit', async function(e){   const scrapeUrl = document.getElementById('scrapeUrlField')?.value || '';   if(!scrapeUrl) return; // let normal (invoice) flow proceed   e.preventDefault();    let summary = {};   try {     summary = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');   } catch(err){     console.warn('Failed parsing summaryJsonInput', err);     alert('Σφάλμα: άκυρα δεδομένα παραστατικού.');     return;   }    summary.is_receipt = true;   if (!summary.category || String(summary.category).trim() === '') summary.category = 'αποδειξακια';   if (!summary.type || String(summary.type).trim() === '') summary.type = 'ΑΠΟΔΕΙΞΗ';   if (!summary.type_name || String(summary.type_name).trim() === '') summary.type_name = 'Απόδειξη';    const aaCoalesce = summary.number || summary.AA || summary.aa || summary.progressive_aa || '';   summary.number = aaCoalesce;    if (!Array.isArray(summary.lines)) summary.lines = [];   summary.lines = summary.lines.map((l, i) => ({     id: (l && (l.id || l.line_id)) ? String(l.id || l.line_id) : ('r' + i),     description: (l && (l.description || l.desc)) || '',     amount: (l && (l.amount || l.lineTotal || l.total)) || '',     vat: (l && (l.vat || l.vatRate)) || '',     vatCategory: (l && (l.vatCategory || l.vat_category)) || '',     category: (l && l.category) || ''   }));    try {     const res = await fetch('/save_summary', {       method: 'POST',       credentials: 'same-origin',       headers: { 'Content-Type': 'application/json', 'X-Requested-With': 'XMLHttpRequest' },       body: JSON.stringify(summary)     });     if (!res.ok) {       const t = await res.text().catch(()=>'');       alert('Αποτυχία αποθήκευσης (HTTP ' + res.status + '): ' + t);       return;     }     try { document.getElementById('summaryModal').style.display = 'none'; } catch(_) {}     window.location = window.location.pathname;   } catch (err) {     console.error('save_summary AJAX error', err);     alert('Σφάλμα αποθήκευσης: ' + (err.message || err));   } });  document.getElementById('saveSummaryForm')?.addEventListener('submit', async function(e){   const scrapeUrl = document.getElementById('scrapeUrlField')?.value || '';   if(!scrapeUrl) return; // allow normal server flow for invoice flow   e.preventDefault();    // parse summary from hidden input   let summary = {};   try {     summary = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');   } catch(err){     console.warn('Failed parsing summaryJsonInput', err);     showFlash('Σφάλμα: άκυρα δεδομένα παραστατικού.', 'error');     return;   }    // robust AFM extraction (try many variants)   const afmFromSummary = (summary && (summary.AFM_issuer || summary.AFM || summary.issuer_vat || summary.issuerVat || summary.issuer_vat)) ||                          (summary && summary.raw && (summary.raw.issuer_vat || summary.raw.issuerVat || summary.raw.AFM || summary.raw.AFM_issuer));   const afmVal = (typeof VAT !== 'undefined' && VAT) ? VAT : (afmFromSummary ? String(afmFromSummary).trim() : '');    // robust year extraction: prefer ACTIVE_YEAR, then summary.year, then parse issueDate, then fallback to current year   let yearVal = null;   try {     if (typeof ACTIVE_YEAR !== 'undefined' && ACTIVE_YEAR) yearVal = String(ACTIVE_YEAR);     else if (summary && (summary.year || summary.Year)) yearVal = String(summary.year || summary.Year);     else if (summary && summary.issueDate) {       const parts = (summary.issueDate || '').split('/');       if (parts.length >= 3) yearVal = parts[2];     }     if (!yearVal) yearVal = String((new Date()).getUTCFullYear());   } catch(e){     yearVal = String((new Date()).getUTCFullYear());   }    // final mark   const markVal = summary.mark || document.getElementById('scrapeUrlField')?.dataset.mark || '';    // if afm missing -> abort with client message (server requires AFM or active session)   if (!afmVal) {     console.warn('confirm_receipt abort: missing AFM', { summary });     showFlash('Αδύνατο να αποθηκευτεί: λείπει AFM του ενεργού πελάτη. Επιλέξτε ενεργό πελάτη ή βεβαιωθείτε ότι το παραστατικό περιέχει ΑΦΜ.', 'error', 7000);     return;   }    const payload = {     url: scrapeUrl,     summary: summary,     force: (document.getElementById('scrapeForceField')?.value === 'true'),     category: 'αποδειξακια',     afm: afmVal,     year: String(yearVal),     mark: (summary.mark || markVal || '')   };    console.log('[RC-DEBUG] FETCH -> /api/confirm_receipt called', '/api/confirm_receipt', payload);    // send to backend   try {     const res = await fetch('/api/confirm_receipt', {       method: 'POST',       credentials: 'same-origin',       headers: {'Content-Type':'application/json','X-Requested-With':'XMLHttpRequest'},       body: JSON.stringify(payload)     });     const j = await res.json().catch(()=>null);     if(!res.ok || !j || !j.ok){       console.warn('confirm_receipt failed', res.status, j);       showFlash('Σφάλμα αποθήκευσης: ' + ((j && j.error) ? j.error : ('Server ' + (res.status || ''))) , 'error', 7000);       return;     }     showFlash('Αποθηκεύτηκε η απόδειξη (excel + json).', 'success');     document.getElementById('summaryModal').style.display = 'none';     // clean hidden fields     document.getElementById('scrapeUrlField').value = '';     document.getElementById('scrapeForceField').value = 'false';   } catch(err){     console.error('confirm_receipt fetch error', err);     showFlash('Σφάλμα δικτύου κατά την αποθήκευση.', 'error');   } });  // --- Fix: on page load, populate modal if summaryJsonInput already contains summary JSON --- // This replaces a missing populateSummaryModal call and uses the populate watcher (RC_forcePopulateSummaryModal) if available. // Robust startup: only show summary modal if summaryJsonInput actually contains meaningful data document.addEventListener("DOMContentLoaded", function(){   try {     const summaryEl = document.getElementById("summaryJsonInput");     const modal = document.getElementById("summaryModal");     if (!summaryEl) return;      let obj = {};     try { obj = JSON.parse(summaryEl.value || '{}'); } catch(e){ obj = {}; }      function isMeaningful(o){       if (!o || typeof o !== 'object') return false;        // quick acceptors: important single fields       const important = ['mark','MARK','AFM_issuer','AFM','totalValue','totalNetValue','total_amount','issueDate','issue_date','progressive_aa','AA'];       for (const k of important) {         if (o[k] !== undefined && o[k] !== null && String(o[k]).trim() !== '') return true;       }        // if lines array exists and has at least one line with some non-empty field -> accept       if (Array.isArray(o.lines) && o.lines.length) {         for (const ln of o.lines) {           if (!ln) continue;           if ( (ln.description && String(ln.description).trim() !== '') ||                (ln.amount && String(ln.amount).trim() !== '') ||                (ln.id && String(ln.id).trim() !== '') ) return true;         }       }        // fallback: if object has more than one non-empty key -> accept       const nonEmptyKeys = Object.keys(o).filter(k => {         try { return o[k] !== null && o[k] !== undefined && String(o[k]).trim() !== ''; } catch(e){ return false; }       });       if (nonEmptyKeys.length > 1) return true;        return false;     }      if (isMeaningful(obj)) {       // ask the populate watcher to run (if available), else run a safe local populate       if (window.RC_forcePopulateSummaryModal) {         try { window.RC_forcePopulateSummaryModal(); } catch(e){ console.warn('RC_forcePopulateSummaryModal failed', e); }       } else {         // try to populate basic fields if populate function not present         try {           if (typeof populateSummaryModal === 'function') try { populateSummaryModal(obj); } catch(_) {}         } catch(_) {}       }        if (modal) if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }     } else {       // ensure modal remains hidden on load       if (modal) modal.style.display = 'none';     }   } catch(e){     console.warn('startup populate summary failed', e);   } });      // This expects rows to have 'input[type="radio"][name="active_name"]' and row id pattern cred-row-<name>   document.querySelectorAll('tr[id^="cred-row-"]').forEach(tr=>{     tr.addEventListener('dblclick', function(e){       try {         const radio = tr.querySelector('input[type="radio"][name="active_name"]');         if(radio){           radio.checked = true;           // also give visual feedback (optional)           tr.classList.add('bg-gray-100');           setTimeout(()=>tr.classList.remove('bg-gray-100'), 600);         }       } catch(err){ console.warn('dblclick select radio failed', err); }     });   });  });  // === DEBUG SNIPPET: paste near end of your existing scripts === (function(){   function safeLog(...a){ try{ console.log('[RC-DEBUG]', ...a); }catch(e){} }    // Global JS error catcher   window.addEventListener('error', function(e){     safeLog('Window error', e.message, e.filename + ':' + e.lineno, e.error);   });   window.addEventListener('unhandledrejection', function(ev){     safeLog('Unhandled promise rejection', ev.reason);   });    // Watch important DOM elements existence   function checkDom(){     const names = [       'markSearchForm','useReceiptsSwitch','scrapeUrlInput',       'summaryModal','summaryJsonInput','saveSummaryForm',       'scrapeUrlField','scrapeCategoryField','scrapeForceField'     ];     const out = {};     names.forEach(n => out[n] = !!document.getElementById(n));     safeLog('DOM presence', out);   }   document.addEventListener('DOMContentLoaded', function(){ checkDom(); });    // Hook markSearchForm submit   const msf = document.getElementById('markSearchForm');   if(msf){     msf.addEventListener('submit', function(e){       try{         const useReceipts = !!(document.getElementById('useReceiptsSwitch') && document.getElementById('useReceiptsSwitch').checked);         safeLog('markSearchForm.submit fired', 'useReceipts=', useReceipts, 'mark=', (document.getElementById('markInput')?.value||''), 'urlInput=', (document.getElementById('scrapeUrlInput')?.value||''));       }catch(err){ safeLog('submit hook error', err); }     }, true);   } else safeLog('markSearchForm NOT FOUND');    // Hook receipts switch changes   const rs = document.getElementById('useReceiptsSwitch');   if(rs){     rs.addEventListener('change', function(e){       safeLog('useReceiptsSwitch change, checked=', rs.checked);       // show/hide created url input for visibility       const ui = document.getElementById('scrapeUrlInput');       if(ui) ui.style.outline = rs.checked ? '2px solid orange' : 'none';     });   } else safeLog('useReceiptsSwitch NOT FOUND');    // Monitor fetch to /api/scrape_receipt by wrapping fetch (only for debugging)   const origFetch = window.fetch;   window.fetch = async function(resource, init){     try{       if(typeof resource === 'string' && resource.indexOf('/api/scrape_receipt') !== -1){         safeLog('FETCH -> /api/scrape_receipt called', resource, init && init.body ? (init.body.length>100 ? init.body.slice(0,100)+'...' : init.body) : init);       }       if(typeof resource === 'string' && resource.indexOf('/api/confirm_receipt') !== -1){         safeLog('FETCH -> /api/confirm_receipt called', resource, init && init.body ? (function(){ try { return JSON.parse(init.body); } catch(e){ return init.body; } })() : init);         // Visual cue: flash border on modal         const m = document.getElementById('summaryModal');         if(m) { m.style.outline = '4px dashed lime'; setTimeout(()=>{ if(m) m.style.outline=''; }, 1200); }       }     }catch(e){ safeLog('fetch-wrap log failed', e); }     return origFetch.apply(this, arguments);   };    // Hook the saveSummaryForm submit (the interceptor should already exist in your code)   const ssf = document.getElementById('saveSummaryForm');   if(ssf){     ssf.addEventListener('submit', function(e){       try{         // show current fields         const summaryVal = (document.getElementById('summaryJsonInput')?.value) || null;         const scrapeUrl = document.getElementById('scrapeUrlField')?.value || null;         const scrapeCat = document.getElementById('scrapeCategoryField')?.value || null;         const scrapeForce = document.getElementById('scrapeForceField')?.value || null;         safeLog('saveSummaryForm.submit (intercept) summaryPresent=', !!summaryVal, 'scrapeUrl=', scrapeUrl, 'scrapeCat=', scrapeCat, 'scrapeForce=', scrapeForce);         // also pretty-print JSON if small         if(summaryVal){           try { safeLog('summary JSON', JSON.parse(summaryVal)); } catch(e){ safeLog('summary raw', summaryVal.slice(0,500)); }         }       }catch(err){ safeLog('saveSummaryForm submit hook error', err); }     }, true);   } else safeLog('saveSummaryForm NOT FOUND');    // When modal is shown/hidden, log it   const observer = new MutationObserver(function(muts){     try{       const modal = document.getElementById('summaryModal');       if(modal){         const style = window.getComputedStyle(modal);         if(style.display !== 'none'){           safeLog('summaryModal is visible');         } else {           // optional: safeLog('summaryModal is hidden');         }       }     }catch(e){ safeLog('mutation observer err', e); }   });   observer.observe(document.documentElement || document.body, { attributes: true, childList: true, subtree: true });    // Periodic sanity check: print whether modal and form are present every 2s for 6 checks   let checks = 0;   const interval = setInterval(function(){     checks++;     const present = {       modal: !!document.getElementById('summaryModal'),       summaryInput: !!document.getElementById('summaryJsonInput'),       saveForm: !!document.getElementById('saveSummaryForm'),       urlField: !!document.getElementById('scrapeUrlField')     };     safeLog('periodic-dom-check', present);     if(checks>6) clearInterval(interval);   }, 2000);    safeLog('RC-DEBUG injected'); })(); (function(){   function getSummaryData(){     const input = document.getElementById('summaryJsonInput');     if(!input) return null;     try {       const data = JSON.parse(input.value || '{}');       if(!Array.isArray(data.lines)) data.lines = [];       return { input, data };     } catch(e) {       return { input, data: { lines: [] } };     }   }    function saveSummaryData(obj){     if(!obj || !obj.input) return;     obj.input.value = JSON.stringify(obj.data);   }    // Click on category buttons (delegation)   document.addEventListener('click', function(ev){     const btn = ev.target.closest && ev.target.closest('.category-btn');     if(!btn) return;     ev.preventDefault();     // prevent other handlers (the "other modal" that opened)     try { ev.stopImmediatePropagation(); } catch(e){}     try { ev.stopPropagation(); } catch(e){}      const lid = btn.dataset.lineId || (btn.closest('[data-line-id]') && btn.closest('[data-line-id]').dataset.lineId) || '';     const cat = btn.dataset.cat || '';     if(!lid) return;      const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }      // toggle: if already set -> clear, else set     line.category = (String(line.category || '') === String(cat)) ? '' : String(cat);      // update button classes for that line     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.toggle('bg-sky-600', (b.dataset.cat === line.category));       b.classList.toggle('text-white', (b.dataset.cat === line.category));     });      // also update corresponding select if present     const sel = document.querySelector('select.expense-category[data-line-id="'+CSSescape(lid)+'"]');     if(sel) try { sel.value = line.category || ''; } catch(e){}      saveSummaryData(state);   }, true);    // change on line-selects   document.addEventListener('change', function(ev){     const sel = ev.target;     if(!sel || !sel.matches || !sel.matches('select.expense-category')) return;     const lid = sel.dataset.lineId || (sel.closest('[data-line-id]') && sel.closest('[data-line-id]').dataset.lineId) || '';     if(!lid) return;     const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }     line.category = String(sel.value || '');     // update any buttons     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.toggle('bg-sky-600', (b.dataset.cat === line.category));       b.classList.toggle('text-white', (b.dataset.cat === line.category));     });     saveSummaryData(state);   }, true);    // clear button (if exists)   document.addEventListener('click', function(ev){     const cb = ev.target.closest && ev.target.closest('#clearCategory');     if(!cb) return;     ev.preventDefault();     try { ev.stopImmediatePropagation(); } catch(e){}     const container = cb.closest('[data-line-id]') || document;     const lid = container && container.dataset && container.dataset.lineId ? container.dataset.lineId : '';     if(!lid) return;     const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }     line.category = '';     // update UI     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.remove('bg-sky-600','text-white');     });     const sel = document.querySelector('select.expense-category[data-line-id="'+CSSescape(lid)+'"]');     if(sel) sel.value = '';     saveSummaryData(state);   }, true);    // Ensure hidden input is up-to-date before normal form submit   const saveForm = document.getElementById('saveSummaryForm');   if(saveForm){     saveForm.addEventListener('submit', function(ev){       // just ensure input is stringified (handlers already update it live)       const s = getSummaryData();       if(s) saveSummaryData(s);       // allow normal submit (server-side will persist)     });   }    // small CSS.escape fallback used above   function CSSescape(s){     if(window.CSS && CSS.escape) return CSS.escape(s);     return String(s).replace(/([ #;?%&,.+*~\':"!^$[\]()=>|\/@])/g,'\\$1');   } })();  (function RC_AUTO_INJECT_SUMMARY_MODAL(){   try {     console.log('[RC-DEBUG] periodic-dom-check starting');      function exists(id){ return !!document.getElementById(id); }      const needs = {       modal: exists('summaryModal'),       summaryInput: exists('summaryJsonInput'),       saveForm: exists('saveSummaryForm'),       urlField: exists('scrapeUrlField')     };     console.log('[RC-DEBUG] DOM presence (before inject)', needs);      if (needs.modal && needs.summaryInput && needs.saveForm) {       console.log('[RC-DEBUG] All required DOM elements present, no injection needed');       return;     }      // Build modal HTML (minimal, matches server-side expected IDs)     const modalHtml = ` <div id="summaryModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">   <div class="bg-white rounded-lg shadow-lg w-full max-w-6xl p-6">     <div class="flex justify-between items-center mb-4">       <h3 class="text-lg font-semibold">Περίληψη Παραστατικού - <span id="summaryModalMark">MARK</span></h3>       <button id="modalCloseX" class="text-gray-500 text-xl font-bold">✕</button>     </div>      <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">       <div><strong>Α/Α Παραστατικού</strong><div id="summary_AA"></div></div>       <div><strong>ΑΦΜ</strong><div id="summary_AFM"></div></div>       <div><strong>Επωνυμία</strong><div id="summary_Name"></div></div>       <div><strong>Ημερομηνία</strong><div id="summary_issueDate"></div></div>       <div><strong>Τύπος Παραστατικού</strong><div id="summary_type_name"></div></div>       <div><strong>Καθαρή Αξία</strong><div id="summary_totalNetValue"></div></div>       <div><strong>ΦΠΑ</strong><div id="summary_totalVatAmount"></div></div>       <div><strong>Σύνολο</strong><div id="summary_totalValue"></div></div>     </div>      <h4 class="font-medium mt-4 mb-2">Γραμμές Παραστατικού (για χαρακτηρισμό)</h4>     <div id="summaryLinesContainer" class="overflow-auto max-h-96 border rounded p-2"></div>      <div class="mt-4 flex justify-between items-center">       <div class="text-sm text-gray-600">Σημείωση: οι κατηγορίες προέρχονται από τα settings του πελάτη.</div>       <div class="flex justify-end gap-2">         <form method="POST" action="{{ url_for('save_summary') }}" id="saveSummaryForm">           <input type="hidden" name="summary_json" id="summaryJsonInput" value='{}'>           <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση στο Cache</button>           <input type="hidden" id="scrapeUrlField" name="scrape_url" value="">           <input type="hidden" id="scrapeCategoryField" name="scrape_category" value="">           <input type="hidden" id="scrapeForceField" name="scrape_force" value="false">         </form>         <button id="modalCloseBtn" class="px-3 py-2 border rounded">Κλείσιμο</button>       </div>     </div>   </div> </div>`.trim();      // Inject into document.body     const wrapper = document.createElement('div');     wrapper.innerHTML = modalHtml;     // append at end of body so it does not break layout     document.body.appendChild(wrapper.firstChild);      // wire close buttons to hide modal (same behavior as original)     function hideModal(){       const m = document.getElementById('summaryModal');       if (m) m.style.display = 'none';       try { history.replaceState(null, '', location.pathname + (location.search || '') + location.hash); } catch(e){}     }     document.getElementById('modalCloseX')?.addEventListener('click', hideModal);     document.getElementById('modalCloseBtn')?.addEventListener('click', hideModal);      // Re-check presence     const needs_after = {       modal: exists('summaryModal'),       summaryInput: exists('summaryJsonInput'),       saveForm: exists('saveSummaryForm'),       urlField: exists('scrapeUrlField')     };     console.log('[RC-DEBUG] DOM presence (after inject)', needs_after);     console.log('[RC-DEBUG] Auto-injection done — the client flow should now find the modal and form.');    } catch (e) {     console.error('[RC-DEBUG] auto-inject error', e);   } })(); (function RC_POPULATE_SUMMARY_MODAL(){   try {     console.log('[RC-DEBUG] summary-populate init');      const summaryInput = document.getElementById('summaryJsonInput');     const modal = document.getElementById('summaryModal');     const markEl = document.getElementById('summaryModalMark');     const aaEl = document.getElementById('summary_AA');     const afmEl = document.getElementById('summary_AFM');     const nameEl = document.getElementById('summary_Name');     const issueEl = document.getElementById('summary_issueDate');     const typeEl = document.getElementById('summary_type_name');     const netEl = document.getElementById('summary_totalNetValue');     const vatEl = document.getElementById('summary_totalVatAmount');     const totEl = document.getElementById('summary_totalValue');     const linesContainer = document.getElementById('summaryLinesContainer');      if (!summaryInput) {       console.warn('[RC-DEBUG] summaryJsonInput NOT FOUND — modal will not populate');       return;     }     if (!modal) {       console.warn('[RC-DEBUG] summaryModal NOT FOUND — abort populate watcher');       return;     }      let lastVal = '';     function safeText(node, v){       if(!node) return;       node.textContent = (v === null || v === undefined) ? '' : String(v);     }      function renderLines(lines){       if(!linesContainer) return;       linesContainer.innerHTML = '';       if(!Array.isArray(lines) || lines.length === 0){         const p = document.createElement('div'); p.className = 'p-2 text-sm text-gray-600'; p.textContent = 'Δεν βρέθηκαν γραμμές.';         linesContainer.appendChild(p);         return;       }        // build a small table       const tbl = document.createElement('table');       tbl.className = 'w-full text-sm';       tbl.style.borderCollapse = 'collapse';       const thead = document.createElement('thead');       thead.innerHTML = '<tr><th class="p-1 border text-left">#</th><th class="p-1 border text-left">Περιγραφή</th><th class="p-1 border text-right">Ποσό</th><th class="p-1 border text-right">ΦΠΑ</th></tr>';       tbl.appendChild(thead);       const tbody = document.createElement('tbody');       lines.forEach((ln, idx) => {         const tr = document.createElement('tr');         tr.innerHTML = `<td class="p-1 border text-left">${idx+1}</td>                         <td class="p-1 border text-left">${(ln.description||ln.desc||'').toString().slice(0,200)}</td>                         <td class="p-1 border text-right">${ln.amount||ln.lineTotal||''}</td>                         <td class="p-1 border text-right">${ln.vat||ln.vatRate||''}</td>`;         tbody.appendChild(tr);       });       tbl.appendChild(tbody);       linesContainer.appendChild(tbl);     }      function populateOnce(){       try {         const v = (summaryInput.value || '').trim();         if (!v) {           // nothing to show           return;         }         if (v === lastVal) return;         lastVal = v;         let obj = {};         try { obj = JSON.parse(v); } catch(err){           console.warn('[RC-DEBUG] failed parsing summaryJsonInput JSON', err, v);           return;         }         console.log('[RC-DEBUG] populate modal from summary JSON', obj);          safeText(markEl, obj.mark || obj.MARK || (obj.raw && obj.raw.MARK) || '');         safeText(aaEl, obj.AA || obj.aa || obj.progressive_aa || (obj.raw && obj.raw.progressive_aa) || '');         safeText(afmEl, obj.AFM_issuer || obj.AFM || obj.issuer_vat || (obj.raw && obj.raw.issuer_vat) || '');         safeText(nameEl, obj.Name || obj.Name_issuer || obj.issuer_name || (obj.raw && obj.raw.issuer_name) || '');         safeText(issueEl, obj.issueDate || obj.issue_date || (obj.raw && obj.raw.issue_date) || '');         safeText(typeEl, obj.type_name || obj.type || (obj.raw && obj.raw.doc_type) || '');         safeText(netEl, obj.totalNetValue || obj.total_amount || obj.totalValue || (obj.raw && obj.raw.total_amount) || '');         safeText(vatEl, obj.totalVatAmount || (obj.raw && obj.raw.totalVatAmount) || '');         safeText(totEl, obj.totalValue || obj.total_amount || (obj.raw && obj.raw.total_amount) || '');          // lines         let lines = [];         if (Array.isArray(obj.lines) && obj.lines.length) lines = obj.lines;         else if (obj.raw && Array.isArray(obj.raw.lines) && obj.raw.lines.length) lines = obj.raw.lines;         else if (obj.lines && typeof obj.lines === 'object') {           // sometimes backend sends object: try to collect values           try {             lines = Object.values(obj.lines).filter(x => x);           } catch(e){}         }         renderLines(lines);          // if modal is hidden, ensure it's visible when populate invoked by scraper flow         try {           if (modal && modal.style.display === 'none') {             if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }           }         } catch(e){}        } catch(e){         console.error('[RC-DEBUG] populateOnce error', e);       }     }      // Start polling for changes to summaryJsonInput.value     const poll = setInterval(populateOnce, 250);      // Also populate when modal opens (observe style attribute)     const obs = new MutationObserver(muts => {       for(const m of muts){         if (m.type === 'attributes' && m.attributeName === 'style'){           try { if (modal.style.display !== 'none') populateOnce(); } catch(e){}         }       }     });     try { obs.observe(modal, { attributes: true, attributeFilter: ['style'] }); } catch(e){}      // expose a debug function on window to force populate     window.RC_forcePopulateSummaryModal = populateOnce;      console.log('[RC-DEBUG] summary-populate watcher started');      // Optional: stop polling after N seconds to be tidy     setTimeout(()=>{ clearInterval(poll); console.log('[RC-DEBUG] stopped summary-populate polling (timeout)'); }, 60*1000);    } catch (err) {     console.error('[RC-DEBUG] summary-populate init failed', err);   } })();  (function RC_FORCE_MODAL_GUARD(){   try {     const dbg = (...a) => { try { console.log('[RC-MODAL-GUARD]', ...a); } catch(e) {} };      function parseSummary() {       const el = document.getElementById('summaryJsonInput');       if (!el) return {};       try { return JSON.parse(el.value || '{}') || {}; } catch(e){ dbg('parseSummary JSON error', e); return {}; }     }      function hasMeaningfulSummary(obj) {       if (!obj || typeof obj !== 'object') return false;       // important single fields that guarantee modal should open       const keys = ['mark','MARK','AFM_issuer','AFM','totalValue','totalNetValue','total_amount','issueDate','issue_date','progressive_aa','AA'];       for (const k of keys) {         if (obj[k] !== undefined && obj[k] !== null && String(obj[k]).trim() !== '') return true;       }       // check raw.* fields if present       if (obj.raw && typeof obj.raw === 'object') {         for (const k of ['MARK','issuer_vat','total_amount','issue_date','progressive_aa']) {           if (obj.raw[k] !== undefined && obj.raw[k] !== null && String(obj.raw[k]).trim() !== '') return true;         }       }       // lines array with at least one non-empty line       if (Array.isArray(obj.lines) && obj.lines.length) {         for (const ln of obj.lines) {           if (!ln) continue;           if ((ln.description && String(ln.description).trim() !== '') ||               (ln.amount && String(ln.amount).trim() !== '') ||               (ln.id && String(ln.id).trim() !== '')) return true;         }       }       // fallback: object with >1 non-empty keys       const nonEmpty = Object.keys(obj).filter(k=>{         try { return obj[k] !== null && obj[k] !== undefined && String(obj[k]).trim() !== ''; } catch(e){ return false; }       });       return nonEmpty.length > 1;     }      function ensureModalHiddenUnlessMeaningful() {       const modal = document.getElementById('summaryModal');       const summaryEl = document.getElementById('summaryJsonInput');       if (!modal || !summaryEl) { dbg('no modal/summaryEl present'); return; }        // Force-hide now (neutralize server/client auto-show)       try { modal.style.display = 'none'; } catch(_) {}        // If summary becomes meaningful, show it (and populate watcher should fill fields)       const checkAndMaybeShow = () => {         const obj = parseSummary();         if (hasMeaningfulSummary(obj)) {           dbg('summary meaningful -> showing modal', obj);           try {             // try to trigger your populate logic if present             if (window.RC_forcePopulateSummaryModal) {               try { window.RC_forcePopulateSummaryModal(); } catch(e){ dbg('RC_forcePopulateSummaryModal failed', e); }             } else if (typeof populateSummaryModal === 'function') {               try { populateSummaryModal(obj); } catch(e){ dbg('populateSummaryModal failed', e); }             }             if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }           } catch(e){ dbg('show modal failed', e); }         } else {           // keep hidden           dbg('summary not meaningful -> keep modal hidden');           try { modal.style.display = 'none'; } catch(_) {}         }       };        // run immediate check after tiny delay (let other init finish)       setTimeout(checkAndMaybeShow, 60);        // observe changes to summaryJsonInput.value (detect writes by other code)       try {         let lastVal = summaryEl.value || '';         const poll = setInterval(() => {           try {             const cur = summaryEl.value || '';             if (cur !== lastVal) {               lastVal = cur;               dbg('summaryJsonInput changed -> recheck');               checkAndMaybeShow();             }           } catch(e){ dbg('poll error', e); }         }, 200);         // auto-stop polling after 60s         setTimeout(()=>clearInterval(poll), 60*1000);       } catch(e){ dbg('poll install failed', e); }        // observe modal style changes by others: if someone tries to open it while summary not meaningful, immediately hide       try {         const mo = new MutationObserver(muts => {           try {             const obj = parseSummary();             if (!hasMeaningfulSummary(obj)) {               const modalEl = document.getElementById('summaryModal');               if (modalEl) {                 const disp = window.getComputedStyle(modalEl).display;                 if (disp !== 'none') {                   dbg('modal was opened by other code while summary not meaningful -> hiding it');                   modalEl.style.display = 'none';                 }               }             }           } catch(e){ dbg('mutation observer callback error', e); }         });         const modalNode = document.getElementById('summaryModal');         if (modalNode) mo.observe(modalNode, { attributes: true, attributeFilter: ['style', 'class'] });       } catch(e){ dbg('mutation observer install failed', e); }     }      // Run after DOM ready (also run if DOM already ready)     if (document.readyState === 'loading') {       document.addEventListener('DOMContentLoaded', ensureModalHiddenUnlessMeaningful);     } else {       setTimeout(ensureModalHiddenUnlessMeaningful, 10);     }      dbg('RC_FORCE_MODAL_GUARD installed');   } catch(err) {     try { console.error('[RC-MODAL-GUARD] init failed', err); } catch(e){}   } })();  document.addEventListener('click', function(ev){   const btn = ev.target.closest('.category-btn');   if(!btn) return;    // 1) Αποτροπή bubbling για να μην ανοίγει άλλο modal   ev.preventDefault();   try { ev.stopImmediatePropagation(); } catch(e){}   try { ev.stopPropagation(); } catch(e){}    // 2) Ενημέρωση κουμπιών (UI)   const lineId = btn.dataset.lineId;   const cat = btn.dataset.cat;   const siblings = btn.parentElement.querySelectorAll('.category-btn');   siblings.forEach(s => s.classList.remove('bg-sky-600','text-white'));   btn.classList.add('bg-sky-600','text-white');    // 3) Ενημέρωση του select για compatibility   const sel = document.querySelector('select.expense-category[data-line-id="'+lineId+'"]');   if(sel) sel.value = cat;    // 4) Ενημέρωση του hidden JSON input   const input = document.getElementById('summaryJsonInput');   if(!input) return;   let data = {};   try { data = JSON.parse(input.value || '{}'); } catch(e){ data = {}; }    // Ensure lines array exists   if(!Array.isArray(data.lines)) data.lines = [];    // Update or add line   let line = data.lines.find(l => String(l.id || l.line_id || '') === lineId);   if(!line){     line = {id: lineId};     data.lines.push(line);   }   line.category = cat; // <--- εδώ γράφεται η κατηγορία    // Save back   input.value = JSON.stringify(data); });  document.querySelectorAll('.category-btn').forEach(btn=>{   btn.addEventListener('click', function(ev){     ev.preventDefault(); // δεν χρειάζεται stopPropagation      const lineId = this.dataset.lineId;     const cat = this.dataset.cat;      // Αποτύπωση UI     const siblings = this.parentElement.querySelectorAll('.category-btn');     siblings.forEach(s => s.classList.remove('bg-sky-600','text-white'));     this.classList.add('bg-sky-600','text-white');      // Ενημέρωση select για συμβατότητα     const sel = document.querySelector('select.expense-category[data-line-id="'+lineId+'"]');     if(sel) sel.value = cat;      // Ενημέρωση summaryJsonInput     const input = document.getElementById('summaryJsonInput');     if(!input) return;     let data = {};     try { data = JSON.parse(input.value || '{}'); } catch(e){ data={}; }     if(!Array.isArray(data.lines)) data.lines = [];     let line = data.lines.find(l => String(l.id||l.line_id||'')===lineId);     if(!line){       line = {id: lineId};       data.lines.push(line);     }     line.category = cat;     input.value = JSON.stringify(data);      // !!! Σημαντικό: μην καλείς stopPropagation εδώ !!!     // Άλλο modal handler θα πρέπει να φιλτράρει ποιο στοιχείο το ενεργοποιεί   }); }); document.addEventListener('click', function(ev){   // Αν το click προέρχεται από κουμπί category, αγνόησε   if(ev.target.closest('.category-btn')) return;    // άλλος κώδικας που ανοίγει modal });      // === Frontend patch: enrich delete_invoices POST + clear client-side cache === document.addEventListener('submit', function(ev){   try{     const form = ev.target;     if(!form || !form.action) return;     // Match delete_invoices endpoint (relative or absolute)     const a = document.createElement('a'); a.href = form.action;     const path = (a.pathname || '') + (a.search || '');     if(!/delete_invoices/.test(path)) return;      // 1) Ensure active_vat is posted     const existingHv = form.querySelector('input[name="active_vat"]');     if(!existingHv){       const hv = document.createElement('input');       hv.type = 'hidden';       hv.name = 'active_vat';       const activeVat = (document.querySelector('#vatSelector')?.value                       || document.querySelector('[name="vat"]')?.value                       || document.body.dataset.activeVat                       || '').toString().trim();       hv.value = activeVat;       form.appendChild(hv);     }      // 2) Collect marks to delete     let marks = Array.from(form.querySelectorAll('input[name="delete_mark"]')).map(i => (i.value||'').trim()).filter(Boolean);     if(!marks.length){       marks = Array.from(document.querySelectorAll('input[name="delete_mark"]:checked')).map(i => (i.value||'').trim()).filter(Boolean);     }      // 3) Clear client-side caches (localStorage keys that reference these MARKs)     try{       marks.forEach(mk => {         // common per-mark keys         localStorage.removeItem(`epsilon_summary_${mk}`);         localStorage.removeItem(`EPSILON:INV:${mk}`);       });       // any key containing one of the marks       for(let i=localStorage.length-1; i>=0; i--){         const k = localStorage.key(i);         if(!k) continue;         if(marks.some(mk => k.includes(mk))){           localStorage.removeItem(k);         }       }       // also clear any prefilled summary hidden input to avoid stale reopen       const sumInp = document.getElementById('summaryJsonInput');       if(sumInp) sumInp.value = '';     }catch(e){ /* ignore storage errors */ }    }catch(err){     console.warn('delete_invoices frontend patch failed', err);   } }, true); (function receiptsRepeatModalGuard(){   const once = { submitted:false };    function qs(id){ return document.getElementById(id); }    function readSummary(){     try { return JSON.parse(qs('summaryJsonInput')?.value || '{}'); }     catch(_) { return {}; }   }    function isMeaningfulSummary(o){     try{       if (!o || typeof o!=='object') return false;       const mark = String(o.mark || o.MARK || '').trim();       if (!mark || mark.length<6) return false;       const lines = Array.isArray(o.lines) ? o.lines : [];       if (lines.length===0) return false;       return lines.some(l=>{         if(!l) return false;         const desc=(l.description||l.desc||'').toString().trim();         const amt =(l.amount||l.lineTotal||l.total||'').toString().trim();         const id  =(l.id||l.line_id||'').toString().trim();         return !!(desc||amt||id);       });     }catch(_){ return false; }   }    function isReceiptSummary(o){     try{       const t = (o.type_name || o.type || '').toString().toLowerCase();       const c = (o.category || o.characteristic || o['χαρακτηρισμός'] || '').toString().toLowerCase();       return !!(o.is_receipt || t.includes('απόδει') || t.includes('receipt') || t.includes('λιαν') || c==='αποδειξακια');     }catch(_){ return false; }   }    function forceEdit(){     try { return new URLSearchParams(location.search).get('force_edit') === '1'; }     catch(_){ return false; }   }    function shouldOpenSummaryModal(obj){     const receiptsOn = !!(qs('useReceiptsSwitch') && qs('useReceiptsSwitch').checked);     const repeatOn   = !!(qs('repeatEntrySwitch') && qs('repeatEntrySwitch').checked);     // Αν είμαστε σε αποδείξεις (ή το summary είναι απόδειξη) και repeat ON και ΔΕΝ είναι reclassification -> ΜΗΝ ανοίξεις modal     if ((receiptsOn || isReceiptSummary(obj)) && repeatOn && !forceEdit()) return false;     return true;   }    function autoSubmitReceipt(obj){     if (once.submitted) return;                       // το στείλαμε ήδη σε αυτόν τον κύκλο     if (!isMeaningfulSummary(obj)) return;            // ασφαλιστική δικλείδα     const mark = (obj.mark || obj.MARK || '').toString().trim();     if (!mark) return;     const key = 'rc-auto:' + mark;     if (sessionStorage.getItem(key)) return;          // ήδη υποβλήθηκε μετά από reload      // Επέβαλε “Αποδειξάκια”     try{       if (!Array.isArray(obj.lines)) obj.lines = [];       obj.is_receipt = true;       obj.category = 'αποδειξακια';       obj.characteristic = 'αποδειξακια';       obj['χαρακτηρισμός'] = 'αποδειξακια';       qs('summaryJsonInput').value = JSON.stringify(obj);     }catch(_){}      const form = qs('saveSummaryForm');     if (!form) return;     once.submitted = true;     sessionStorage.setItem(key,'1');                 // ώστε στο επόμενο reload να ΜΗΝ ξαναστείλει     form.submit();   }    // Φρένο: ΜΗΝ υποβάλλεις την search-form χωρίς mark KAI χωρίς url   (function guardEmptySearchSubmit(){     const form = qs('markSearchForm');     if (!form) return;     form.addEventListener('submit', (e)=>{       const mark = (qs('markInput')?.value || '').trim();       const url  = (qs('scrapeUrlInput')?.value || '').trim();       if (!mark && !url) e.preventDefault();     }, true);   })();    // Παρακολούθησε το modal: αν πάει να ανοίξει ενώ ΔΕΝ πρέπει, κλείστο και κάνε auto-submit   const modal = qs('summaryModal');   if (!modal) return;    const observer = new MutationObserver(function(){     try{       const visible = modal && getComputedStyle(modal).display !== 'none';       if (!visible) return;       const obj = readSummary();       if (!shouldOpenSummaryModal(obj)) {         // Μπλόκαρε το modal και προχώρησε σε auto-submit         modal.style.display = 'none';         autoSubmitReceipt(obj);       }     }catch(_){}   });    try{     observer.observe(modal, { attributes:true, attributeFilter:['style','class'] });   }catch(_){}    // One-shot check αν τυχόν ξεκινά ήδη ανοιχτό   setTimeout(()=>{     try{       const visible = modal && getComputedStyle(modal).display !== 'none';       const obj = readSummary();       if (visible && !shouldOpenSummaryModal(obj)) {         modal.style.display = 'none';         autoSubmitReceipt(obj);       }     }catch(_){}   }, 80); })();  </script>  <style>     /* minimal styling for the toggle switch */     /* μόνο για modal */     .modal-summary-table th {         background-color: #0d6efd;         color: white;         border: 1px solid #ccc;     }      .modal-summary-table td {         border: 1px solid #e2e8f0;     }      .modal-summary-table tr:nth-child(even) {         background-color: #f9fafb;     }      .modal-summary-table tr:hover {         background-color: #e6f0ff;     }      .modal-summary-table tfoot td {         background-color: #f1f5f9;     }      /* κλείδωμα κλικ πίσω από modal */     .modal-backdrop {         position: fixed;         inset: 0;         background: rgba(0,0,0,.45);         z-index: 99998;     }      #summaryModal {         z-index: 99999;         position: fixed;         inset: 0;         display: none;         align-items: center;         justify-content: center;     }          #summaryModal.show {             display: flex;         }      body.modal-open #page-root {         pointer-events: none;     }     /* βάλε id=page-root στο κύριο wrapper της σελίδας */     body.modal-open #summaryModal,     body.modal-open #summaryModal * {         pointer-events: auto;     }      .toggle-switch {         width: 42px;         height: 24px;         -webkit-appearance: none;         appearance: none;         background: #e5e7eb;         border-radius: 999px;         position: relative;         outline: none;         cursor: pointer;         vertical-align: middle;     }          .toggle-switch:checked {             background: #0ea5a4;         }          .toggle-switch::after {             content: "";             position: absolute;             top: 3px;             left: 3px;             width: 18px;             height: 18px;             border-radius: 999px;             background: white;             transition: transform .15s ease;         }          .toggle-switch:checked::after {             transform: translateX(18px);         } </style>    <script>/* ===== Auto-submit segmented toggle + guarded auto-detect (receipts & invoices) ===== */ (function(){   try {     // Globals     window.__RC_FLAGS  = window.__RC_FLAGS  || {};     window.__RC_LOCKS  = window.__RC_LOCKS  || {};     const AUTO_KEY = 'rc:autoSubmitEnabled';      // UI refs (may be absent in some partial renders)     const form     = document.getElementById('markSearchForm');     const markEl   = document.getElementById('markInput');     const urlEl    = document.getElementById('scrapeUrlInput'); // may be dynamically created in your code     const btnOn    = document.getElementById('autoSubmitBtnOn');     const btnOff   = document.getElementById('autoSubmitBtnOff');     const receiptsSwitch = document.getElementById('useReceiptsSwitch');      // State helpers     function getAuto(){ try { return localStorage.getItem(AUTO_KEY) === '1'; } catch(_) { return false; } }     function setAuto(v){   try { localStorage.setItem(AUTO_KEY, v ? '1' : '0'); } catch(_) {}   window.__RC_FLAGS.auto_submit_enabled = !!v;   updateUi();    // reload με συγχρονισμό querystring   try {     const p = new URLSearchParams(location.search);     if (v) p.set('auto_submit','1'); else p.delete('auto_submit');     const newQS = p.toString();     const cur  = location.pathname + location.search;     const next = location.pathname + (newQS ? '?' + newQS : '');     if (next === cur) {       location.reload();          // αν δεν αλλάζει το URL, αναγκαστικό reload     } else {       location.search = newQS;    // αλλάζοντας το query κάνει reload μόνο του     }   } catch (e) {     location.reload();   } }      function updateUi(){       const on = getAuto();       if (btnOn && btnOff) {         btnOn.classList.toggle('bg-sky-600', on);         btnOn.classList.toggle('text-white', on);         btnOff.classList.toggle('bg-sky-600', !on);         btnOff.classList.toggle('text-white', !on);       }     }     updateUi();     if (btnOn)  btnOn.addEventListener('click', ()=> setAuto(true));     if (btnOff) btnOff.addEventListener('click', ()=> setAuto(false));      // Utilities     function isVisible(el){       if(!el) return false;       const cs = getComputedStyle(el);       return !(cs.display === 'none' || cs.visibility === 'hidden' || cs.opacity === '0');     }     function warningOpen(){       const ids = ['receiptWarn','afmWarningModal','receiptWarningModal','yearWarningModal'];       for (const id of ids){ const el = document.getElementById(id); if (el && isVisible(el)) return true; }       // generic: any visible dialog that is not the summary modal       const nodes = document.querySelectorAll('[role="dialog"],[aria-modal="true"],.modal,.modal-root');       for (const n of nodes){         if (!isVisible(n)) continue;         if (n.id === 'summaryModal' || n.id === 'receiptsModal') continue;         const t = (n.textContent || '').toLowerCase();         if (/\bπροειδοπ|\bπροσοχ|warning|σφάλμα|error/.test(t)) return true;       }       return false;     }      const normMark = v => (v||'').replace(/\D/g,'');     const isMark   = v => normMark(v).length === 15;     const isUrl    = v => {       const s = (v||'').trim();       return /^https?:\/\/\S+/i.test(s) || /^www\.\S+/i.test(s);     };     const extractMark = s => {       const m = String(s||'').match(/\b(\d{15})\b/);       return m ? m[1] : '';     };      function currentKey(){       const mv = (markEl && markEl.value) ? markEl.value.trim() : '';       const uv = (document.getElementById('scrapeUrlInput')?.value || '').trim(); // requery in case it was injected after       const receipts = !!(receiptsSwitch && receiptsSwitch.checked);        // For receipts: prefer a URL, but accept MARK inside URL as fallback       if (receipts) {         if (isUrl(uv)) return 'url:'+uv.replace(/\/+$/,'');         const ex = extractMark(uv); if (ex) return 'mark:'+ex;         // also allow mark typed in markInput if user didn't switch field         if (isMark(mv)) return 'mark:'+normMark(mv);         return null;       }        // For invoices: prefer MARK; but accept URL too       if (isMark(mv)) return 'mark:'+normMark(mv);       if (isUrl(mv)) return 'url:'+mv.replace(/\/+$/,'');       return null;     }      let pending = false;     const KEY_LAST = 'rc:lastSubmitKey';     const TTL_MS   = 20000;     function readLast(){       try {         const raw = sessionStorage.getItem(KEY_LAST);         if(!raw) return null;         const o = JSON.parse(raw);         if(!o || !o.ts || (Date.now()-o.ts)>TTL_MS) return null;         return o.k || null;       }catch(_){ return null; }     }     function writeLast(k){       try { sessionStorage.setItem(KEY_LAST, JSON.stringify({k, ts: Date.now()})); } catch(_) {}     }      const debounce = (fn,ms)=>{ let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a),ms); }; };      function trySubmit(){       if (!form || !getAuto()) return;       if (warningOpen()) return;       const k = currentKey();       if (!k) return;        // prevent collisions with existing receipts lock if present       if (window.__RC_LOCKS && window.__RC_LOCKS.scrape) return;        // prevent duplicate submits on same key       const last = readLast();       if (last && last === k) return;        // submit once       writeLast(k);       if (pending) return;       pending = true;       try {         if (form.requestSubmit) form.requestSubmit(); else form.submit();       } finally {         setTimeout(()=>{ pending=false; }, 500);       }     }      const onChange = debounce(trySubmit, 140);      // Wire inputs if present     if (markEl) {       markEl.addEventListener('input', onChange);       markEl.addEventListener('keyup', onChange);       markEl.addEventListener('paste', ()=>setTimeout(onChange,0));     }     // url input could be injected later; observe for appearance     let tries = 30;     const iv = setInterval(()=>{       const u = document.getElementById('scrapeUrlInput');       if (u) {         u.addEventListener('input', onChange);         u.addEventListener('keyup', onChange);         u.addEventListener('paste', ()=>setTimeout(onChange,0));         clearInterval(iv);       }       if(--tries<=0) clearInterval(iv);     }, 200);      // Initial pass (for browser autofill)     window.addEventListener('load', ()=> setTimeout(onChange, 60));      // Ensure a stub exists to avoid ReferenceError when other code calls it     if (typeof window.autoSubmitReceipt !== 'function') {       window.autoSubmitReceipt = function(){ /* stub to avoid ReferenceError; actual flow handled elsewhere */ };     }   } catch (err) {     console.warn('Auto-submit toggle patch failed', err);   } })();</script>  <script>/* === Persist Receipts/Invoices toggle across refresh === */ <script> /* === Persist Receipts/Invoices toggle across refresh (v2) === */ (function persistReceiptsToggle(){   const KEY = 'rc:useReceipts';   const sw  = document.getElementById('useReceiptsSwitch');   const markInput = document.getElementById('markInput');   function ensureUrlInput(){     let el = document.getElementById('scrapeUrlInput');     if (!el) {       // try to locate after markInput if dynamically created later by other code       el = document.createElement('input');       el.id = 'scrapeUrlInput';       el.placeholder = 'Εισάγετε URL παραστατικού (για αποδείξεις)';       el.className = 'p-2 border rounded w-2/4 hidden';       el.type = 'text';       if (markInput && markInput.parentElement) {         markInput.parentElement.insertBefore(el, markInput.nextSibling);       } else {         document.body.appendChild(el);       }     }     return el;   }   function applyUI(isReceipts){     const urlInput = ensureUrlInput();     if (isReceipts){       markInput && markInput.classList.add('hidden');       urlInput && urlInput.classList.remove('hidden');     } else {       markInput && markInput.classList.remove('hidden');       urlInput && urlInput.classList.add('hidden');     }   }    if (!sw) return;   // restore saved value   const saved = localStorage.getItem(KEY);   if (saved !== null) sw.checked = (saved === '1');   applyUI(sw.checked);    // if URL input appears later (other scripts), re-apply for a short window   let tries = 20;   const iv = setInterval(()=>{     applyUI(sw.checked);     if (--tries <= 0) clearInterval(iv);   }, 200);    sw.addEventListener('change', () => {     localStorage.setItem(KEY, sw.checked ? '1' : '0');     applyUI(sw.checked);   }); })();</script>  <script>/* === Lightweight warning detector (client/server modals) === */ (function ensureWarningOpenHelper(){   if (typeof window.__rc_warningOpen === 'function') return;   window.__rc_warningOpen = function(){     function vis(el){ if(!el) return false; const cs=getComputedStyle(el); return !(cs.display==='none'||cs.visibility==='hidden'||cs.opacity==='0'); }     const ids=['receiptWarn','afmWarningModal','receiptWarningModal','yearWarningModal'];     for (const id of ids){ const el=document.getElementById(id); if (el && vis(el)) return true; }     const nodes=document.querySelectorAll('[role="dialog"],[aria-modal="true"],.modal,.modal-root');     for (const n of nodes){       if (!vis(n)) continue;       if (n.id==='summaryModal' || n.id==='receiptsModal') continue;       const t=(n.textContent||'').toLowerCase();       if (/(προειδοπ|προσοχ|warning|σφάλμα|error)/.test(t)) return true;     }     return false;   }; })();</script>  <script> /* === RC helpers μόνο για flow Αποδείξεων === */ window.RC = window.RC || {};  RC.hasWarnings = function(){ return (typeof window.__rc_warningOpen === 'function') ? window.__rc_warningOpen() : false; };  RC.normalizeReceiptSummary = function (summaryObj) {   summaryObj.is_receipt = true;   summaryObj.type = summaryObj.type || 'ΑΠΟΔΕΙΞΗ';   summaryObj.type_name = summaryObj.type_name || 'ΑΠΟΔΕΙΞΗ';   summaryObj.category = 'αποδειξακια';   if (!Array.isArray(summaryObj.lines) || !summaryObj.lines.length) {     const tot = summaryObj.total_amount || summaryObj.totalValue || summaryObj.totalNetValue || '';     summaryObj.lines = [{ id:'r0', description:'', amount:String(tot||''), vat:'', vatCategory:'', category:'αποδειξακια' }];   } else {     summaryObj.lines = summaryObj.lines.map((l,i)=>({       id: String(l?.id || l?.line_id || ('r'+i)),       description: String(l?.description || l?.desc || ''),       amount: String(l?.amount || l?.lineTotal || l?.total || ''),       vat: String(l?.vat || l?.vatRate || ''),       vatCategory: String(l?.vatCategory || l?.vat_category || ''),       category: String(l?.category || '') || 'αποδειξακια'     }));   }   return summaryObj; };  RC.confirmReceiptOnce = async function(summaryObj, scrapeUrl){   window.__RC_LOCKS = window.__RC_LOCKS || {};   if (window.__RC_LOCKS.confirm) return { ok:false, reason:'locked' };   window.__RC_LOCKS.confirm = true;    try {     const VAT = "{{ vat or '' }}";     const afmVal = (VAT || summaryObj.AFM_issuer || summaryObj.AFM || (summaryObj.raw && summaryObj.raw.issuer_vat) || '').toString().trim();     if (!afmVal) return { ok:false, reason:'missing_afm' };      if (!/\b\d{15}\b/.test(String(summaryObj.mark||'').trim())) {       const r = await fetch('/api/next_receipt_mark', { credentials:'same-origin' });       const j = await r.json().catch(()=>null);       if (j && j.mark) summaryObj.mark = j.mark;     }      let yearVal = "{{ active_year|default('') }}";     if (!yearVal) {       try { const fy = await fetch('/get_fiscal_year', { credentials:'same-origin' }); const fyj = await fy.json(); if (fyj && fyj.exists) yearVal = String(fyj.fiscal_year); } catch(_){}     }     if (!yearVal) {       const any = summaryObj.issueDate || summaryObj.issue_date || (summaryObj.raw && summaryObj.raw.issue_date) || '';       const m = String(any).match(/\b(19|20)\d{2}\b/);       yearVal = m ? m[0] : String((new Date()).getUTCFullYear());     }      const payload = {       url: (scrapeUrl||'').trim(),       summary_json: JSON.stringify(summaryObj),       force: false,       category: 'αποδειξακια',       afm: afmVal,       year: String(yearVal),       mark: String(summaryObj.mark||'')     };      const res = await fetch('/api/confirm_receipt', {       method: 'POST',       credentials: 'same-origin',       headers: {'Content-Type':'application/json','X-Requested-With':'XMLHttpRequest'},       body: JSON.stringify(payload)     });     const jj = await res.json().catch(()=>null);     if (!res.ok || !jj || !jj.ok) return { ok:false, reason: (jj&&jj.error) || ('HTTP '+res.status) };      return { ok:true };   } finally {     window.__RC_LOCKS.confirm = false;   } };  RC.handleReceiptAfterScrape = async function(summaryObj, scrapeUrl){   try {     const repeatOn = !!document.getElementById('repeatEntrySwitch')?.checked;     const forceEdit = (typeof FORCE_EDIT !== 'undefined') ? !!FORCE_EDIT : false;     if (!repeatOn || forceEdit || RC.hasWarnings()) return false;      RC.normalizeReceiptSummary(summaryObj);     const summaryInput = document.getElementById('summaryJsonInput');     if (summaryInput) summaryInput.value = JSON.stringify(summaryObj);      const r = await RC.confirmReceiptOnce(summaryObj, scrapeUrl);     if (!r.ok) {       if (r.reason === 'missing_afm') {         window.openReceiptWarning && openReceiptWarning('Λείπει AFM ενεργού πελάτη.');       } else {         showFlash('Σφάλμα αποθήκευσης: ' + (r.reason || 'άγνωστο'), 'error', 6000);       }       return false;     }     window.__RC_FLAGS = window.__RC_FLAGS || {}; window.__RC_FLAGS.autoHandled = true;     showFlash('Αποθηκεύτηκε η απόδειξη (repeat).', 'success', 900);     try { document.getElementById('summaryModal').style.display = 'none'; } catch(_){}     try { document.getElementById('scrapeUrlInput').value = ''; } catch(_){}     try { document.getElementById('markInput').value = ''; } catch(_){}     window.location = window.location.pathname;     return true;   } catch (e) {     console.warn('handleReceiptAfterScrape failed', e);     return false;   } }; document.addEventListener('DOMContentLoaded', () => {   const params = new URLSearchParams(location.search);    const isReceipts =     (params.get('use_receipts') === '1') ||     (localStorage.getItem('pref_use_receipts') === '1');    const repeatOn =     (params.get('repeat') === '1') ||     (localStorage.getItem('pref_repeat') === '1');    const autoOn = params.has('auto_submit')     ? (params.get('auto_submit') === '1')     : (localStorage.getItem('pref_auto_submit') === '1');    if (!(isReceipts && repeatOn && autoOn)) return;    // 1) Κρύψε ό,τι modal επιβεβαίωσης υπάρχει για αποδείξεις   const hideModal = () => {     ['#receiptsModal', '#summaryModal', '[data-role="modal-warning"]', '#warningModal']       .forEach(sel => {         const el = document.querySelector(sel);         if (!el) return;         el.classList?.add('hidden');         el.style.display = 'none';       });   };   hideModal();    // 2) Βεβαιώσου ότι στο submit περνάει repeat_enabled=1   const ensureRepeatHidden = (form) => {     if (!form) return;     let h = form.querySelector('input[name="repeat_enabled"]');     if (!h) {       h = document.createElement('input');       h.type = 'hidden';       h.name = 'repeat_enabled';       form.appendChild(h);     }     h.value = '1';   };    // 3) Αυτόματο submit μόλις είναι έτοιμη η φόρμα/δεδομένα   let submitted = false;   const tryAutoSubmit = () => {     if (submitted) return;      // Βρες τη φόρμα αποθήκευσης     const form = document.querySelector('form[action$="/save_summary"]');     if (!form) return;      // Έλεγξε ότι υπάρχει payload: summary_json (input/textarea) ή τουλάχιστον το mark     const payloadEl = form.querySelector('input[name="summary_json"],textarea[name="summary_json"]');     const hasPayload = payloadEl ? String(payloadEl.value || '').trim().length > 0 : false;     const hasMark = String((form.querySelector('[name="mark"]') || {}).value || '').trim().length === 15;      if (!hasPayload && !hasMark) return;      ensureRepeatHidden(form);     submitted = true;     hideModal();     form.submit();   };    // Δοκίμασε άμεσα & με μικρό retry   tryAutoSubmit();   const i1 = setInterval(() => {     if (submitted) { clearInterval(i1); return; }     tryAutoSubmit();   }, 150);    // Παρακολούθησε DOM changes (όταν γεμίσει το modal/φόρμα από το fetch)   const mo = new MutationObserver(() => tryAutoSubmit());   mo.observe(document.body, { subtree: true, childList: true, attributes: false });    // Safety stop μετά από ~6s για να μην τρέχει για πάντα   setTimeout(() => mo.disconnect(), 6000); });  </script>  <script> /* === Receipts Repeat AutoSave (cache submit) — receipts-only, idempotent === */ (function(){   if (window.__rc_autosave_installed__) return;   window.__rc_autosave_installed__ = true;    function $id(id){ return document.getElementById(id); }   function lsGet(k,d){ try{ const v = localStorage.getItem(k); return v==null?d:v; }catch(_){ return d; } }   function lsSet(k,v){ try{ localStorage.setItem(k,v); }catch(_){ } }   function ssGet(k){ try{ return sessionStorage.getItem(k); }catch(_){ return null; } }   function ssSet(k,v){ try{ sessionStorage.setItem(k,v); }catch(_){ } }   function onceKey(mark){ return 'rc-cache:' + String(mark||'').trim(); }    function isReceipts(){ try{ var sw=$id('useReceiptsSwitch'); if (sw) return !!sw.checked; }catch(_){}                           return lsGet('UI:useReceipts','0')==='1'; }   function isRepeat(){   try{ var rsw=$id('repeatEntrySwitch'); if (rsw) return !!rsw.checked; }catch(_){}                           return lsGet('REPEAT:enabled','0')==='1'; }    function parseSummary(){     var el = $id('summaryJsonInput');     if (!el || !el.value || el.value === '{}' || el.value === 'null') return null;     try { return JSON.parse(el.value); } catch(_){ return null; }   }    function isReceiptSummary(s){     if (!s || typeof s!=='object') return false;     if (s.is_receipt === true) return true;     var t = String(s.type_name||s.type||'').toLowerCase();     if (t.includes('απόδει') || t.includes('receipt')) return true;     // fallback: when UI string shows "Λήφθηκε απόδειξη — ελέγξτε..."     var ui = String(s.ui_hint||'').toLowerCase();     if (ui.includes('λήφθηκε') && ui.includes('αποδεί')) return true;     return false;   }    function hasLines(s){ try{ return Array.isArray(s.lines) && s.lines.length>0; } catch(_){ return false; } }    function waitFor(fn, then, maxMs, step){     maxMs = maxMs || 6000; step = step || 120;     var waited = 0;     (function cycle(){       try{ if (fn()) { then(); return; } }catch(_){}       waited += step; if (waited >= maxMs) return;       setTimeout(cycle, step);     })();   }    function tryAutoSave(){     if (!isReceipts() || !isRepeat()) return;     var s = parseSummary();     if (!s || !isReceiptSummary(s) || !hasLines(s)) return;      var mark = String(s.mark || s.MARK || '').trim();     if (!mark) return;     if (ssGet(onceKey(mark))) return; // already submitted this cycle      var form = $id('saveSummaryForm');     if (!form) return;      // Normalize to αποδειξάκια before save, without touching invoices     try{       s.is_receipt = true;       s.category = s.category || 'αποδειξακια';       s.characteristic = s.characteristic || 'αποδειξακια';       if (!Array.isArray(s.lines)) s.lines = [];       s.lines = s.lines.map(function(l){ l=l||{}; l.category='αποδειξακια'; return l; });       $id('summaryJsonInput').value = JSON.stringify(s);     }catch(_){}      // Arm dedupe, keep receipts mode sticky     try { ssSet(onceKey(mark),'1'); } catch(_){}     lsSet('UI:useReceipts','1');      // Submit the cache form programmatically     try {       if (typeof form.requestSubmit === 'function') form.requestSubmit();       else form.submit();       // On navigation, allow next MARK to submit again       setTimeout(function(){ try{ ssSet(onceKey(mark), ''); }catch(_){} }, 2500);     } catch(e) {       console.warn('[RC-AUTOSAVE] submit failed', e);       try{ sessionStorage.removeItem(onceKey(mark)); }catch(_){}     }   }    document.addEventListener('DOMContentLoaded', function(){     // Reflect stored receipts state to the UI toggle early     try {       if (lsGet('UI:useReceipts','0')==='1') {         var sw = $id('useReceiptsSwitch');         if (sw && !sw.checked) { sw.checked = true; sw.dispatchEvent(new Event('change',{bubbles:true})); }       }     } catch(_){}      // Try immediately, microtask, and a short delay     tryAutoSave();     setTimeout(tryAutoSave, 0);     setTimeout(tryAutoSave, 300);      // Poll for hidden input changes produced by scraping     var el = $id('summaryJsonInput');     if (el){       var last = el.value;       setInterval(function(){         if (el.value !== last) { last = el.value; tryAutoSave(); }       }, 250);     }      // Re-run when receipts switch toggles on, or repeat toggles on     var r1 = $id('useReceiptsSwitch');     var r2 = $id('repeatEntrySwitch');     if (r1) r1.addEventListener('change', function(){ if (this.checked) setTimeout(tryAutoSave,10); });     if (r2) r2.addEventListener('change', function(){ if (this.checked) setTimeout(tryAutoSave,10); });      // When modal opens (if present), attempt again     var modal = $id('summaryModal');     if (modal && window.MutationObserver){       var mo = new MutationObserver(function(){ setTimeout(tryAutoSave, 20); });       try { mo.observe(modal, {attributes:true, childList:false, subtree:false}); } catch(_){}     }   }); })(); </script>  {% endblock %}  <!-- === BEGIN: Injected fix (v2) for receipts auto-flow & afm_epsilon cleanup === --> <script><script> /* RC-REPEAT-STATE bridge για Αποδείξεις & Τιμολόγια    - Διαβάζει το state από backend (/api/repeat_state/get) στην εκκίνηση    - Το περνάει και σε localStorage (REPEAT:enabled) & body dataset (data-repeat-enabled)    - Όταν αλλάζει ο διακόπτης repeatEntrySwitch, κάνει POST στο /api/repeat_state/set    - Στο submit της φόρμας αναζήτησης, κάνει ένα φρεσκάρισμα του state πριν τη ροή */ (function() {   const LS_KEY_REPEAT_ENABLED = 'REPEAT:enabled';    async function refreshRepeatState() {     try {       const r = await fetch('/api/repeat_state/get', { credentials: 'include' });       const j = await r.json();       const enabled = !!(j && j.ok && j.enabled);       localStorage.setItem(LS_KEY_REPEAT_ENABLED, enabled ? '1' : '0');       document.body.dataset.repeatEnabled = enabled ? '1' : '0';       window.REPEAT_ENABLED = enabled;        // συγχρόνισε και το switch αν υπάρχει       const sw = document.getElementById('repeatEntrySwitch');       if (sw) {         sw.checked = enabled;       }       console.debug('[RC-REPEAT-STATE] GET ->', { enabled });     } catch (e) {       console.warn('[RC-REPEAT-STATE] GET failed', e);     }   }    async function setRepeatEnabled(enabled) {     try {       const r = await fetch('/api/repeat_state/set', {         method: 'POST',         headers: { 'Content-Type': 'application/json' },         credentials: 'include',         body: JSON.stringify({ enabled: !!enabled })       });       const j = await r.json();       if (!j || !j.ok) throw new Error(j && j.error || 'unknown');       // persist τοπικά       localStorage.setItem(LS_KEY_REPEAT_ENABLED, enabled ? '1' : '0');       document.body.dataset.repeatEnabled = enabled ? '1' : '0';       window.REPEAT_ENABLED = !!enabled;       console.debug('[RC-REPEAT-STATE] SET ->', { enabled });     } catch (e) {       console.warn('[RC-REPEAT-STATE] SET failed', e);     }   }    // bootstrap: στην εκκίνηση   document.addEventListener('DOMContentLoaded', () => {     refreshRepeatState();     const sw = document.getElementById('repeatEntrySwitch');     if (sw) {       sw.addEventListener('change', function() {         setRepeatEnabled(this.checked);       });     }      // στο submit της αναζήτησης: κάνε ένα γρήγορο refresh για να «δει» σωστά το autosave των αποδείξεων     const form = document.getElementById('markSearchForm');     if (form) {       form.addEventListener('submit', () => {         // fire-and-forget, δεν μπλοκάρουμε το submit         refreshRepeatState();       });     }   }); })();</script>   (function(){   function isDetailed(x){     try{       if(!x || typeof x !== 'object') return false;       if (Array.isArray(x.lines) && x.lines.length) {         // any non-empty field in a line         for (const l of x.lines) {           if (l && (String(l.amount||'').trim() || String(l.description||'').trim() || String(l.vat||'').trim())) {             return true;           }         }       }       if (String(x.totalNetValue||'').trim() || String(x.totalValue||'').trim()) return true;       const t = (x.type||x.type_name||'').toString().toLowerCase();       if ((t.includes('απόδει') || t.includes('receipt')) && String(x.totalValue||'').trim()) return true;       return false;     }catch(e){ return false; }   }   function isReceipt(x){     try{       if (x && x.is_receipt) return true;       const t = (x?.type || x?.type_name || '').toString().toLowerCase();       if (t.includes('απόδει') || t.includes('receipt')) return true;       const ch = (x?.category || x?.χαρακτηρισμός || x?.characteristic || '');       return ch === 'αποδειξακια';     }catch(e){ return false; }   }   function prefer(a,b){     const da = isDetailed(a), db = isDetailed(b);     if (da && !db) return a;     if (db && !da) return b;     const la = Array.isArray(a?.lines) ? a.lines.length : 0;     const lb = Array.isArray(b?.lines) ? b.lines.length : 0;     if (lb > la) return b;     return a;   }   function sanitizeAfmEpsilon(arr){     try{       if(!Array.isArray(arr)) return arr;       const byMark = new Map();       for(const item of arr){         const m = String(item?.mark || '').trim();         if(!m) continue;         if(!byMark.has(m)) byMark.set(m, item);         else byMark.set(m, prefer(byMark.get(m), item));       }       let out = Array.from(byMark.values());       out = out.filter(isDetailed); // drop placeholders       return out;     }catch(e){       console.warn('sanitizeAfmEpsilon failed', e);       return arr;     }   }    // Clean global cache once   try { if (window.afm_epsilon) { window.afm_epsilon = sanitizeAfmEpsilon(window.afm_epsilon); } } catch(e){}    // Pick ONE receipt to submit when repeat+receipts is ON   function pickReceiptSummary(){     try{       // Priority 1: explicit modal summary if page defines it       if (window.modal_summary && isReceipt(window.modal_summary)) return window.modal_summary;       // Priority 2: data attribute on any modal container       const el = document.querySelector('[data-modal-summary]');       if (el){         try{           const obj = JSON.parse(el.getAttribute('data-modal-summary'));           if (isReceipt(obj)) return obj;         }catch(_){}       }       // Priority 3: last detailed receipt from afm_epsilon       const arr = Array.isArray(window.afm_epsilon) ? window.afm_epsilon.slice() : [];       const receipts = arr.filter(x => isReceipt(x) && isDetailed(x));       if (receipts.length) return receipts[receipts.length - 1];     }catch(e){ console.warn('pickReceiptSummary failed', e); }     return null;   }    try {     const repeatSwitch = document.getElementById('repeatEntrySwitch');     const useReceipts   = document.getElementById('useReceiptsSwitch');     const summaryInput  = document.getElementById('summaryJsonInput');     const saveForm      = document.getElementById('saveSummaryForm');     const auto = !!(useReceipts && useReceipts.checked) && !!(repeatSwitch && repeatSwitch.checked);     if (auto && summaryInput && saveForm) {       const chosen = pickReceiptSummary();       if (!chosen) {         console.warn('Auto-submit suppressed: no detailed receipt summary found.');         return;       }       // Ensure per-line category and flags       try{         if (!Array.isArray(chosen.lines)) chosen.lines = [];         if (chosen.lines.length === 0) {           // synthesize a simple line from totalValue when missing           const lid = (String(chosen.mark||'') + '_r0').replace(/^_+|_+$/g,'') || 'r0';           chosen.lines = [{             id: lid, description: "", amount: String(chosen.totalValue||""), vat: "", category: "αποδειξακια", vatCategory: ""           }];         } else {           chosen.lines = chosen.lines.map(l => (l && typeof l === 'object') ? {             ...l,             category: l.category || 'αποδειξακια'           } : l);         }         chosen.is_receipt = true;         chosen.category = chosen.category || 'αποδειξακια';         chosen.characteristic = chosen.characteristic || 'αποδειξακια';       }catch(_){}       summaryInput.value = JSON.stringify(chosen);       setTimeout(function(){         if (!saveForm.dataset._autoSubmitted) {           saveForm.dataset._autoSubmitted = '1';           saveForm.requestSubmit ? saveForm.requestSubmit() : saveForm.submit();         }       }, 30);     }   } catch(e) { console.warn('receipts auto-confirm failed', e); } })();</script> <!-- === END: Injected fix (v2) === --> <!-- RC_RECEIPT_AUTOPILOT_PATCH --> <script>(function(){'use strict';   // ====== Robust receipts repeat autopilot (no UI break) ======   window.__RC_FLAGS = window.__RC_FLAGS || {};    function lsget(key, fallback){ try{ const v=localStorage.getItem(key); if(v===null) return fallback; if(v==='1') return true; if(v==='0') return false; return v; }catch(_){     return fallback; } }    function receiptsSwitchOn(){ try{ return !!document.getElementById('useReceiptsSwitch')?.checked; }catch(_){     return !!lsget('rc:useReceipts','receipts')==='receipts'; } }    function autoSubmitOn(){ return !!lsget('rc:autoSubmitEnabled', true); }   function repeatSwitchOn(){ try{ return !!document.getElementById('repeatEntrySwitch')?.checked; }catch(_){ return !!lsget('rc:repeat_enabled', false); } }    async function serverRepeatEnabled(){     try{ const r = await fetch('/api/repeat_entry/get', { credentials:'include' });          const j = await r.json(); return !!(j && (j.enabled || j.repeat_enabled)); }     catch(_){ return repeatSwitchOn(); }   }    function hideReceiptBanner(){     const nodes = document.querySelectorAll('#existingBanner, .flash, .alert');     nodes.forEach(el => {       try{ if(/Λήφθηκε απόδειξη/i.test(el.textContent||'')) el.style.display='none'; }catch(_){}     });   }    function tryAutoSave(){     const form = document.getElementById('saveSummaryForm');     const input = document.getElementById('summaryJsonInput');     if (!form || !input) return false;     // mark flags to suppress informational toast     window.__RC_FLAGS.autoHandled = true;     hideReceiptBanner();     // Submit the server form (keeps server-side logic, excel write etc.)     // Use a microtask so any last-second JSON sync runs first     setTimeout(() => {       try { form.submit(); } catch(e) {         try { form.dispatchEvent(new Event('submit', { cancelable:false })); } catch(_){}       }     }, 30);     return true;   }    function observeModalAndAuto(){     const modal = document.getElementById('summaryModal');     if (!modal) return;     let done = false;     const doIt = () => {       if (done) return;       const visible = getComputedStyle(modal).display !== 'none';       if (!visible) return;       if (tryAutoSave()) { done = true; modal.style.display = 'none'; }     };     try { new MutationObserver(doIt).observe(modal, { attributes:true, attributeFilter:['style','class'] }); } catch(_){}     setTimeout(doIt, 80);   }    // Kickoff when DOM is ready   document.addEventListener('DOMContentLoaded', () => {     // Make search submit more reliable when auto-submit is ON     const form = document.getElementById('markSearchForm');     if (form) {       form.addEventListener('keydown', (e) => {         if (e.key === 'Enter' && autoSubmitOn()) {           const mark = (document.getElementById('markInput')?.value || '').trim();           const url  = (document.getElementById('scrapeUrlInput')?.value || document.getElementById('scrapeUrlField')?.value || '').trim();           if (!mark && !url) e.preventDefault(); // guard empty         }       }, true);     }      // Always ensure page comes back to a clean state after any save     const saveForm = document.getElementById('saveSummaryForm');     if (saveForm) {       let reloaded = false;       const reloadSoon = () => { if (!reloaded) { reloaded = true; setTimeout(() => location.reload(), 300); } };       saveForm.addEventListener('ajax:done', reloadSoon, { once:true });       saveForm.addEventListener('submit', () => setTimeout(reloadSoon, 1200), { once:true });     }      // If receipts + repeat are ON, suppress the "Λήφθηκε..." toast and auto-save     Promise.resolve(serverRepeatEnabled()).then((rep) => {       if (receiptsSwitchOn() && rep) {         window.__RC_FLAGS.repeat_enabled = true;         window.__RC_FLAGS.autoHandled = true; // prevents info message in existing code         if (!tryAutoSave()) observeModalAndAuto();       }     });   }); })();</script>   <!-- ===== Receipts repeat auto-confirm SHIM (appended) ===== --> <script>(function(){   // small utility: safe JSON parse   function parseJSON(x){ try{ return JSON.parse(x); }catch(_){ return null; } }   function getLS(k, d){ try{ const v = localStorage.getItem(k); return (v===null||v===undefined)?d:v; }catch(_){ return d; } }   function setLS(k, v){ try{ localStorage.setItem(k, v); }catch(_){ } }   function isTruthy(v){ return v === true || v === '1' || v === 1 || v === 'true'; }    // Read repeat + receipts mode from both localStorage and globals/switches   function getRepeatOn(){     const ls = getLS('REPEAT:enabled', null);     if (ls !== null) return isTruthy(ls);     if (window.REPEAT_ENABLED !== undefined) return !!window.REPEAT_ENABLED;     const sw = document.getElementById('repeatEntrySwitch');     return !!(sw && sw.checked);   }   function getReceiptsModeOn(){     const ls = getLS('UI:useReceipts', null);     if (ls !== null) return isTruthy(ls);     if (window.USE_RECEIPTS !== undefined) return !!window.USE_RECEIPTS;     const sw = document.getElementById('useReceiptsSwitch');     return !!(sw && sw.checked);   }    function isReceiptSummary(obj){     if(!obj || typeof obj !== 'object') return false;     if (obj.is_receipt === true) return true;     const t = String(obj.type_name || obj.type || '').toLowerCase();     const cat = String(obj.category || obj.characteristic || obj['χαρακτηρισμός'] || '').toLowerCase();     return (t.includes('απόδει') || t.includes('receipt') || cat === 'αποδειξακια');   }    function hasMeaningfulLines(obj){     const arr = Array.isArray(obj && obj.lines) ? obj.lines : [];     if (arr.length === 0) return false;     // any non-empty amount OR category is enough     return arr.some(l => {       const amt = String(l && (l.amount || l.total || l.lineTotal || '')).trim();       const cat = String(l && (l.category || l.cat || '')).trim();       return !!(amt || cat);     });   }    function readSummaryObject(){     const input = document.getElementById('summaryJsonInput');     if(!input) return null;     return parseJSON(input.value || '{}') || null;   }    function getScrapeUrl(){     const u = document.getElementById('scrapeUrlInput') || document.getElementById('scrapeUrlField');     return u ? (u.value || '') : '';   }    let lastMarkTried = null;   let busy = false;    async function tryAutoConfirm(){     if (busy) return;     const rep = getRepeatOn();     const inRec = getReceiptsModeOn();     if (!rep || !inRec) return;      const s = readSummaryObject();     if (!s || !isReceiptSummary(s) || !hasMeaningfulLines(s)) return;      // avoid double firing for the same mark     const mk = String(s.mark || s.MARK || '').trim();     if (!mk || mk === lastMarkTried) return;     lastMarkTried = mk;      // hide modal pre-emptively to avoid flicker     try {       const modal = document.getElementById('summaryModal');       if (modal) modal.style.display = 'none';     } catch(_){}      if (!(window.RC && RC.confirmReceiptOnce && RC.normalizeReceiptSummary)) {       // RC not yet ready; retry later       return;     }      busy = true;     try {       await RC.confirmReceiptOnce(RC.normalizeReceiptSummary(s), getScrapeUrl());       // keep receipts mode sticky on refresh       setLS('UI:useReceipts', '1');       // soft reload to clear form quickly       setTimeout(function(){         try {           const base = location.pathname + '?use_receipts=1';           location.replace(base);         } catch(_){ location.reload(); }       }, 120);     } catch(err){       console.warn('[RC-AUTOCONFIRM] failed', err);       // allow another attempt       lastMarkTried = null;     } finally {       busy = false;     }   }    // Poll for summary changes & conditions (fast but lightweight)   let pollId = null;   function startPoll(){     if (pollId) return;     pollId = setInterval(tryAutoConfirm, 200);   }   function stopPoll(){     if (pollId) { clearInterval(pollId); pollId = null; }   }    // Start ASAP   startPoll();    // Re-run when user submits the search form (so mode is immediately persisted)   document.addEventListener('submit', function(e){     const f = e.target;     if (f && f.id === 'markSearchForm') {       // persist current mode for autosave       try {         const sw = document.getElementById('useReceiptsSwitch');         if (sw) setLS('UI:useReceipts', sw.checked ? '1' : '0');       } catch(_){}       setTimeout(tryAutoConfirm, 0);     }   }, true);    // Also, when repeat switch toggles, persist immediately   document.addEventListener('change', function(e){     const sw = e.target && e.target.id === 'repeatEntrySwitch' ? e.target : null;     if (sw){       setLS('REPEAT:enabled', sw.checked ? '1' : '0');       setTimeout(tryAutoConfirm, 0);     }   }, true);    // One-time bootstrap from server state (if available via endpoint)   // This is best-effort; if it fails, user toggles or previous LS values will be used.   (async function bootstrapRepeatOnce(){     try {       const r = await fetch('/api/repeat_entry/get', { credentials: 'same-origin' });       const j = await r.json();       if (j && j.ok && j.repeat_entry) {         setLS('REPEAT:enabled', j.repeat_entry.enabled ? '1' : '0');         // leave mapping to backend; we only need the enabled bit here         setTimeout(tryAutoConfirm, 0);       }     } catch(_){}   })(); })();</script> <!-- ===== end SHIM ===== -->{% extends "base.html" %} {% block title %}Αναζήτηση MARK{% endblock %}  {% block content %}  <div class="bg-white rounded shadow p-6">     <h2 class="text-lg font-semibold mb-2">Αναζήτηση MARK</h2>      {% if error %}     <div class="mb-3 p-2 rounded bg-red-50 text-red-800">{{ error }}</div>     {% endif %}      <form method="post" class="flex gap-2 items-center" id="markSearchForm">         <!-- Auto-submit segmented toggle (scoped to client) -->         <div class="flex items-center gap-2 ml-4" id="autoSubmitGroup">             <span class="text-sm">Auto‑submit</span>             <div class="inline-flex rounded-md overflow-hidden border border-gray-300">                 <button type="button" id="autoSubmitBtnOff" class="px-2 py-1 text-sm focus:outline-none">Off</button>                 <button type="button" id="autoSubmitBtnOn" class="px-2 py-1 text-sm focus:outline-none">On</button>             </div>         </div>          <input name="mark" id="markInput" type="text" placeholder="15ψήφιο MARK" class="p-2 border rounded w-2/4" value="{{ mark }}">         <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αναζήτηση</button>         <div class="flex items-center gap-2 ml-4">             <label for="useReceiptsSwitch" class="text-sm">                 Τιμολόγια<label>                     <input type="checkbox" id="useReceiptsSwitch" role="switch" aria-checked="false" class="toggle-switch">                     <label for="useReceiptsSwitch" class="text-sm">Αποδείξεις</label>         </div>          <!-- Toggle επαναληψιμης εισαγωγής + edit button -->         <div class="flex items-center gap-2 ml-4">             <label for="repeatEntrySwitch" class="text-sm">Επαναληψιμη εισαγωγή</label>             <input type="checkbox" id="repeatEntrySwitch" class="toggle-switch">             <button type="button" id="editRepeatMappingBtn" class="ml-2 px-2 py-1 border rounded text-sm hidden">Επεξεργασία</button>         </div>          <!-- Toggle switch for receipts scrape -->      </form> </div>  {# ΣΗΜΕΙΩΣΗ: το στατικό confirmation modal που υπήρχε εδώ αφαιρέθηκε όπως ζήτησες. Χρησιμοποιείται πλέον το summaryModal για όλες τις περιπτώσεις. #}  {# --- Yellow box αν υπάρχει MARK ήδη στο Excel --- #} {% if allow_edit_existing and not request.args.get('force_edit') %} <div class="mt-4 p-4 bg-yellow-50 rounded border border-yellow-300 text-yellow-800" id="existingBanner">     Το MARK <strong>{{ mark }}</strong> υπάρχει ήδη στο Excel. Θέλεις να τροποποιήσεις τον χαρακτηρισμό;     <div class="mt-2 flex gap-2">         <button id="forceEditBtn" type="button" class="bg-yellow-600 text-white px-3 py-2 rounded hover:bg-yellow-700">             Επιβεβαίωση         </button>         <button id="dismissBannerBtn" type="button" onclick="this.parentElement.parentElement.style.display='none'"                 class="px-3 py-2 border rounded hover:bg-gray-50">             Άκυρο         </button>     </div> </div> {% endif %}     {% if modal_summary and (request.args.get('force_edit') == '1' or not allow_edit_existing) %} <!-- SUMMARY MODAL --> <div id="summaryModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-6xl p-6">          <!-- HEADER -->         <div class="flex justify-between items-center mb-4">             <h3 class="text-lg font-semibold">                 Περίληψη Παραστατικού - <span id="summaryModalMark">MARK</span>             </h3>             <button id="modalCloseX" class="text-gray-500 text-xl font-bold">✕</button>         </div>          <!-- SUMMARY INFO -->         <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">             <div><strong>Α/Α Παραστατικού</strong><div id="summary_AA"></div></div>             <div><strong>ΑΦΜ</strong><div id="summary_AFM"></div></div>             <div><strong>Επωνυμία</strong><div id="summary_Name"></div></div>             <div><strong>Ημερομηνία</strong><div id="summary_issueDate"></div></div>             <div><strong>Τύπος Παραστατικού</strong><div id="summary_type_name"></div></div>             <div><strong>Καθαρή Αξία</strong><div id="summary_totalNetValue"></div></div>             <div><strong>ΦΠΑ</strong><div id="summary_totalVatAmount"></div></div>             <div><strong>Σύνολο</strong><div id="summary_totalValue"></div></div>         </div>          <!-- LINES -->         <h4 class="font-medium mt-4 mb-2">Γραμμές Παραστατικού (για χαρακτηρισμό)</h4>         <div id="summaryLinesContainer" class="overflow-auto max-h-96 border rounded p-2"></div>            <!-- FOOTER -->         <div class="mt-4 flex justify-between items-center">             <div class="text-sm text-gray-600">                 Σημείωση: οι κατηγορίες προέρχονται από τα settings του πελάτη. Μπορείτε να ορίσετε/επεξεργαστείτε αυτές τις επιλογές στη σελίδα Credentials.             </div>              <div class="flex justify-end gap-2">                 <form method="POST" action="{{ url_for('save_summary') }}" id="saveSummaryForm">                     <input type="hidden" name="summary_json" id="summaryJsonInput" value='{{ modal_summary | tojson | safe if modal_summary else "{}" }}'>                     <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση στο Cache</button>                     <input type="hidden" id="scrapeUrlField" name="scrape_url" value="">                     <input type="hidden" id="scrapeCategoryField" name="scrape_category" value="">                     <input type="hidden" id="scrapeForceField" name="scrape_force" value="false">                 </form>                 <button id="modalCloseBtn" class="px-3 py-2 border rounded">Κλείσιμο</button>             </div>         </div>      </div> </div> {% endif %}   {# --- Repeat mapping modal (dynamic, populated by JS) --- #} <div id="repeatMappingModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-2xl p-6">         <div class="flex justify-between items-center mb-3">             <h3 class="text-lg font-semibold">Επαναληπτική αντιστοίχιση κατηγοριών</h3>             <button id="repeatModalCloseX" class="text-gray-500 text-xl font-bold">✕</button>         </div>          <div id="repeatModalBody" class="space-y-3">             <div class="text-sm text-gray-600">Επίλεξε για κάθε ΦΠΑ-κατηγορία ποια κατηγορία εξόδου θέλεις να χρησιμοποιείται επαναληπτικά. Μπορείς επίσης να ορίσεις <em>προεπιλογή</em>.</div>             <!-- JS θα γεμίσει εδώ -->             <div id="repeatMappingList" class="space-y-2"></div>         </div>          <div class="mt-4 flex justify-end gap-2">             <button id="repeatModalCancel" class="px-3 py-2 border rounded">Άκυρο</button>             <button id="repeatModalSave" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση</button>         </div>     </div> </div>  {% if modal_warning %} <div id="afmWarningModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-md p-6">         <div class="flex justify-between items-center mb-4">             <h3 class="text-lg font-semibold text-red-600">Προειδοποίηση</h3>         </div>         <div id="afmWarningBody" class="mb-4 text-gray-700">             {{ modal_warning }}         </div>         <div class="flex justify-end gap-2">             <button id="afmModalConfirm" class="bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700">Κατάλαβα</button>         </div>     </div> </div> {% endif %}  {# Flash container (JS will inject messages here) #} <div id="clientFlashContainer" class="fixed top-4 right-4 z-60"></div>  {% include 'list_inner.html' %}   {% endblock %}  {% block scripts %}  <script src="/static/loop_hard_guard.js"></script> <script src="{{ url_for('static', filename='repeat_flow_guard.js') }}"></script>  <script>    (function () {   const KEY = 'UI:useReceipts'; // '1' = Αποδείξεις, '0' = Τιμολόγια    function fireChange(el){     if(!el) return;     try {       el.dispatchEvent(new Event('change', { bubbles:true }));     } catch {       const evt = document.createEvent('Event');       evt.initEvent('change', true, true);       el.dispatchEvent(evt);     }   }    document.addEventListener('DOMContentLoaded', () => {     const sw = document.getElementById('useReceiptsSwitch');     if (!sw) return;      // Αν υπάρχει ?use_receipts=1/0 στο URL, γράψ’ το στο localStorage (authoritative)     try {       const q = new URLSearchParams(location.search);       if (q.has('use_receipts')) {         localStorage.setItem(KEY, q.get('use_receipts') === '1' ? '1' : '0');       }     } catch {}      // Restore από localStorage     const saved = localStorage.getItem(KEY);     if (saved !== null) sw.checked = (saved === '1');      // ΠΟΛΥ ΣΗΜΑΝΤΙΚΟ:     // Τρέξε τον υπάρχοντα change handler του switch ώστε να εμφανίσει/κρύψει     // τα σωστά inputs (MARK vs URL). Το κάνουμε 2 φορές (rAF + microtask)     // για να “πιάσει” σε DOM που φτιάχνεται δυναμικά.     requestAnimationFrame(() => {       fireChange(sw);       setTimeout(() => fireChange(sw), 0);     });      // Persist σε κάθε αλλαγή χρήστη     sw.addEventListener('change', () => {       try { localStorage.setItem(KEY, sw.checked ? '1' : '0'); } catch {}       // Προαιρετικό: κρατάμε και ένα data-mode στο body αν το θες για CSS hooks       document.body.dataset.mode = sw.checked ? 'receipts' : 'invoices';     });      // Όταν κάνεις submit/save απόδειξης, κλείδωσε το mode σε “Αποδείξεις”     // ώστε στο redirect/refresh να παραμείνει.     document.getElementById('saveSummaryForm')?.addEventListener('submit', () => {       try {         const raw = document.getElementById('summaryJsonInput')?.value || '';         const s = raw ? JSON.parse(raw) : {};         const isReceipt = s.is_receipt === true ||                           /αποδει/i.test(`${s.type_name || ''} ${s.category || s.characteristic || ''}`);         if (isReceipt) localStorage.setItem(KEY, '1');       } catch {}     });   }); })(); // --- Reclass guard (yellow box -> ?force_edit=1) --- const URL_PARAMS = (function(){ try { return new URL(window.location.href).searchParams; } catch(_) { return new URLSearchParams(''); } })(); const FORCE_EDIT = (function(){ try { return URL_PARAMS.get('force_edit') === '1'; } catch(_) { return false; } })();  const SEARCH_BASE_URL = "{{ url_for('search') }}"; const VAT = "{{ vat or '' }}"; // active vat from server const INITIAL_MARK = "{{ mark|e }}"; // αρχική τιμή mark (αν υπήρχε) const ACTIVE_YEAR = (function(){ try { return {{ active_year|default('null') }}; } catch(e){ return null; } })(); async function getActiveFiscalYear() {   // Προτίμησε την τιμή που ήρθε από server-side render (Jinja)   if (typeof ACTIVE_YEAR !== 'undefined' && ACTIVE_YEAR !== null) {     try { return String(ACTIVE_YEAR); } catch(_) { /* noop */ }   }   // Fallback: ρώτα το backend (υπάρχει route)   try {     const r = await fetch('/get_fiscal_year', {credentials:'same-origin'});     const j = await r.json();     if (j && j.exists) return String(j.fiscal_year);   } catch(_) {}   return null; }   (function(){   // Ανεξάρτητο modal μόνο για Αποδείξεις (δεν ακουμπά το afmWarningModal)   window.openReceiptWarning = function(message){     var id='receiptWarn', m=document.getElementById(id);     if(!m){       var el=document.createElement('div');       el.id=id;       el.style.cssText='position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.4);z-index:9999';       el.innerHTML =         '<div style="background:#fff;border-radius:10px;max-width:480px;width:calc(100% - 32px);padding:20px;">'         + '<h3 style="margin:0 0 10px;color:#b91c1c;font-weight:600;font-size:18px">Προειδοποίηση</h3>'         + '<div id="receiptWarnBody" style="margin-bottom:14px;color:#374151;font-size:14px"></div>'         + '<div style="text-align:right"><button id="receiptWarnOk" type="button"'         + ' style="background:#b91c1c;color:#fff;border:none;border-radius:6px;padding:8px 12px;cursor:pointer">Κατάλαβα</button></div>'         + '</div>';       document.body.appendChild(el);       el.addEventListener('click', function(e){ if(e.target===el) el.style.display='none'; });       el.querySelector('#receiptWarnOk').addEventListener('click', function(){ el.style.display='none'; });       m = el;     }     var body = m.querySelector('#receiptWarnBody');     if(body) body.textContent = message || 'Προειδοποίηση.';     m.style.display='flex';   }; })();      // Καθαρισμός ανά γραμμή (πολλαπλές γραμμές)   document.addEventListener('click', function (e) {     const btn = e.target.closest('.clear-row-btn');     if (btn) {       e.stopPropagation();       const tr = btn.closest('tr');       const sel = tr && tr.querySelector('select[name^="category["]');       if (sel) sel.value = '';     }   });    // Καθαρισμός στη single-line περίπτωση   const singleClear = document.getElementById('single-clear');   if (singleClear) {     singleClear.addEventListener('click', function (e) {       e.stopPropagation();       const sel = document.querySelector('select[name^="category["]');       if (sel) sel.value = '';     });   }    // Προληπτικά: μην ξανα-ανοίγει δεύτερο modal στο click "Αποθήκευση"   // (αν έχεις delegate listeners κάτω από το modal)   document.addEventListener('submit', function(e){     const form = e.target;     if (form && form.closest('#summaryModal')) {       const submitBtn = form.querySelector('[type="submit"]');       if (submitBtn) submitBtn.disabled = true;       e.stopPropagation(); // Μπλοκάρει bubbling που θα πυροδοτούσε κάτωθεν click handlers     }   }, true);     // initial categories passed from server as fallback; will be overridden if API returns expense_tags let CUSTOMER_CATEGORIES = (function(){ try { return {{ customer_categories | tojson | safe }} || []; } catch(e){ return []; } })();  // Helper: show transient flash (client-side) /* ====== Render summary lines into modal and wire handlers ====== */  function renderSummaryLinesFromObject(obj) {   const receiptsMode = !!(document.getElementById('useReceiptsSwitch')?.checked) || !!obj?.is_receipt;   const RECEIPT_CATEGORY = 'αποδειξακια';    const container = document.getElementById('summaryLinesContainer');   const summaryInput = document.getElementById('summaryJsonInput');   if(!container || !summaryInput) return;    container.innerHTML = '';   const lines = Array.isArray(obj.lines) ? obj.lines : [];    // helper to persist back to the hidden input     (function(){   function safeParseJson(s){     try { return JSON.parse(s || '{}'); } catch(e){ return {}; }   }    const summaryInput = document.getElementById('summaryJsonInput');   const container = document.getElementById('summaryLinesContainer');    // fallback server-side object (if Jinja rendered modal_summary)   const SERVER_MODAL_SUMMARY = (function(){     try { return {{ modal_summary | tojson | safe if modal_summary else 'null' }}; } catch(e){ return null; }   })()   try {     var __cc = document.getElementById('summaryLinesContainer');     if (__cc && __cc.dataset && __cc.dataset.phase === 'iife') {       // IIFE already rendered content -> skip second render path       if (typeof persist === 'function') try{ persist(); }catch(e){}       return;     }   } catch(e) {} ;    // helper to get current summary object (prefer hidden input, fallback server var)   function getSummaryObj(){     if(summaryInput && summaryInput.value && summaryInput.value.trim() !== ''){       const parsed = safeParseJson(summaryInput.value);       if(parsed && typeof parsed === 'object') return parsed;     }     if(SERVER_MODAL_SUMMARY) return SERVER_MODAL_SUMMARY;     return { lines: [] };   }    // ensure each line has id and normalized keys   function normalizeSummary(summary){     if(!summary) summary = {};     const lines = Array.isArray(summary.lines) ? summary.lines.slice() : [];     const norm = lines.map((l, idx) => {       const id = (l && (l.id || l.line_id)) ? String(l.id || l.line_id) : ('l' + idx);       return {         id: id,         description: l && (l.description || l.desc || '') || '',         amount: l && (l.amount || l.lineTotal || l.total || '') || '',         vat: l && (l.vat || l.vatRate || '') || '',         vatCategory: l && (l.vatCategory || l.vat_category || '') || '',         category: l && (l.category || l.cat || '') || ''       };     });     return { ...summary, lines: norm };   }    // build DOM for multiple lines (table)   function buildTableHTML(lines, categories){     const table = document.createElement('table');     table.className = 'w-full border-collapse';     const thead = document.createElement('thead');     thead.className = 'bg-gray-100 sticky top-0';     thead.innerHTML = '<tr>' +       '<th class="p-2 border text-left">#</th>' +       '<th class="p-2 border text-left">ΦΠΑ Κατηγορία</th>' +       '<th class="p-2 border text-right">Ποσό</th>' +       '<th class="p-2 border text-right">ΦΠΑ</th>' +       '<th class="p-2 border text-left">Κατηγορία Εξόδου</th>' +       '</tr>';     table.appendChild(thead);      const tbody = document.createElement('tbody');     tbody.id = 'renderedLinesTableBody';     lines.forEach((ln, idx) => {       const tr = document.createElement('tr');       tr.dataset.lineId = ln.id || ('l' + idx);       tr.dataset.vat = ln.vatCategory || ln.vat || '';        tr.innerHTML = '<td class="p-2 border text-sm text-gray-600">' + (idx+1) + '</td>' +         '<td class="p-2 border break-words">' + escapeHtml(ln.vatCategory || '') + '</td>' +         '<td class="p-2 border text-right">' + escapeHtml(String(ln.amount || '')) + '</td>' +         '<td class="p-2 border text-right">' + escapeHtml(String(ln.vat || '')) + '</td>' +         '<td class="p-2 border"></td>';        // create select       const select = document.createElement('select');       select.className = 'expense-category p-1 border rounded w-full';       select.dataset.lineId = ln.id || ('l' + idx);       const emptyOpt = document.createElement('option'); emptyOpt.value=''; emptyOpt.innerText='-- επίλεξε --';       select.appendChild(emptyOpt);       (categories || []).forEach(c => {         const o = document.createElement('option'); o.value = c; o.innerText = c;         if(c === ln.category) o.selected = true;         select.appendChild(o);       });        tr.querySelector('td:last-child').appendChild(select);       tbody.appendChild(tr);     });      table.appendChild(tbody);     return table;   }    // build single-line buttons UI   function buildSingleLineHTML(line, categories){     const wrapper = document.createElement('div');     wrapper.className = 'border rounded p-4';     wrapper.dataset.lineId = line.id || 'l0';      const grid = document.createElement('div');     grid.className = 'mb-3 grid grid-cols-1 md:grid-cols-3 gap-3';     grid.innerHTML = '<div><strong>ΦΠΑ Κατηγορία</strong><div>' + escapeHtml(line.vatCategory || '') + '</div></div>' +       '<div><strong>Ποσό</strong><div>' + escapeHtml(String(line.amount || '')) + '</div></div>' +       '<div><strong>ΦΠΑ</strong><div>' + escapeHtml(String(line.vat || '')) + '</div></div>';     wrapper.appendChild(grid);      const controls = document.createElement('div');     controls.className = 'mb-3';     const title = document.createElement('strong');     title.innerText = 'Επίλεξε Κατηγορία Εξόδου';     controls.appendChild(title);      const btnwrap = document.createElement('div');     btnwrap.id = 'renderedCategoryButtons';     btnwrap.className = 'mt-2 flex flex-wrap gap-2';     (categories || []).forEach(c => {       const btn = document.createElement('button');       btn.type = 'button';       btn.className = 'category-btn px-3 py-2 border rounded hover:bg-sky-50';       btn.dataset.cat = c;       btn.dataset.lineId = line.id || 'l0';       btn.innerText = c;       if(c === line.category){         btn.classList.add('bg-sky-600');         btn.classList.add('text-white');       }       btnwrap.appendChild(btn);     });      const clearBtn = document.createElement('button');     clearBtn.type = 'button';     clearBtn.className = 'px-3 py-2 border rounded text-sm ml-2 clear-category';     clearBtn.innerText = 'Καθαρισμός';     btnwrap.appendChild(clearBtn);      controls.appendChild(btnwrap);     wrapper.appendChild(controls);     return wrapper;   }    function escapeHtml(s){     if(!s && s !== 0) return '';     return String(s)       .replace(/&/g, '&amp;')       .replace(/</g, '&lt;')       .replace(/>/g, '&gt;')       .replace(/"/g, '&quot;')       .replace(/'/g, '&#39;');   }    // read categories from server-provided global or from a safe default   function getCategories(){     try {       const js = (function(){ try { return {{ customer_categories | tojson | safe }}; } catch(e){ return null; } })();       if(Array.isArray(js) && js.length) return js;     } catch(e){}     return window.CUSTOMER_CATEGORIES || [];   }    // render everything into the container   function renderSummaryLines(){     if(!container) return;     const summary = normalizeSummary(getSummaryObj());     const lines = summary.lines || [];     const categories = getCategories();      // clear container     container.innerHTML = '';      // Title (optional)     // const info = document.createElement('div'); info.className='mb-2 text-sm text-gray-700'; container.appendChild(info);      if(lines.length === 0){       const warn = document.createElement('div');       warn.className = 'mt-4 p-3 bg-yellow-50 rounded';       warn.innerText = 'Δεν βρέθηκαν γραμμές για αυτό το MARK.';       container.appendChild(warn);       wireInteractions();     try{ container.dataset.phase = 'iife'; }catch(e){}  // ensure handlers cleared       return;     }      if(lines.length === 1){       container.appendChild(buildSingleLineHTML(lines[0], categories));     } else {       container.appendChild(buildTableHTML(lines, categories));     }      // after building DOM, wire events     wireInteractions();   }    // update hidden input from current DOM selections/buttons    function wireInteractions(){     // remove old handlers by cloning nodes if necessary (to avoid duplicate attachments)     document.querySelectorAll('select.expense-category').forEach(sel => {       sel.addEventListener('change', function(){         updateSummaryFromDom();       });     });      // category buttons (single-line)     document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(btn => {       btn.addEventListener('click', function(){         const lineId = this.dataset.lineId || '';         // toggle this button active/inactive         document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(b => {           if(b.dataset.lineId === lineId){             b.classList.remove('bg-sky-600'); b.classList.remove('text-white');           }         });         const isActive = !(this.classList.contains('bg-sky-600'));         if(isActive){           this.classList.add('bg-sky-600'); this.classList.add('text-white');         } else {           this.classList.remove('bg-sky-600'); this.classList.remove('text-white');         }         updateSummaryFromDom();       });     });      // clear buttons     document.querySelectorAll('.clear-category').forEach(cb => {       cb.addEventListener('click', function(){         const parent = cb.closest('[data-line-id]');         if(!parent) return;         const lid = parent.dataset.lineId || '';         // clear UI         document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(b => {           if(b.dataset.lineId === lid){ b.classList.remove('bg-sky-600'); b.classList.remove('text-white'); }         });         // if there is a select for same line (unlikely in single-line view) clear it         const sel = document.querySelector('select.expense-category[data-line-id="' + lid + '"]');         if(sel) sel.value = '';         updateSummaryFromDom();       });     });   }    // watch hidden input changes (some flows set it programmatically before opening modal)   let lastSummaryValue = summaryInput ? summaryInput.value : '';   function pollSummaryInput(){     const now = summaryInput ? summaryInput.value : '';     if(now !== lastSummaryValue){       lastSummaryValue = now;       // re-render so UI matches new data       renderSummaryLines();     }   }   let pollTimer = null;   try {     pollTimer = setInterval(pollSummaryInput, 250);     window.addEventListener('beforeunload', ()=> { if(pollTimer) clearInterval(pollTimer); });   } catch(e){ /* ignore */ }    // ensure initial render on load (modal might be shown later)   try { renderSummaryLines(); } catch(e){ console.warn('initial renderSummaryLines failed', e); }    // also re-render whenever modal is shown (in case show logic sets display later)   const modal = document.getElementById('summaryModal');   if(modal){     // intercept style changes to detect show     const obs = new MutationObserver(muts => {       muts.forEach(m => {         if(m.attributeName === 'style' || m.attributeName === 'class'){           const disp = window.getComputedStyle(modal).display;           if(disp !== 'none'){             // modal visible -> render (ensure DOM inside ready)             setTimeout(renderSummaryLines, 10);           }         }       });     });     try { obs.observe(modal, { attributes: true, attributeFilter:['style','class'] }); } catch(e){ /* ignore */ }   }    // expose for debug   window._renderSummaryLines = renderSummaryLines; })();   function persist() {     summaryInput.value = JSON.stringify(obj || {});   }    if (!lines || lines.length === 0) {     container.innerHTML = '<div class="mt-4 p-3 bg-yellow-50 rounded">Δεν βρέθηκαν γραμμές για αυτό το MARK.</div>';     persist();     return;   }    if (lines.length > 1) {     // build table     const tbl = document.createElement('table');     tbl.className = 'w-full border-collapse';     tbl.innerHTML = `<thead class="bg-gray-100 sticky top-0">       <tr>         <th class="p-2 border text-left">#</th>         <th class="p-2 border text-left">ΦΠΑ Κατηγορία</th>         <th class="p-2 border text-right">Ποσό</th>         <th class="p-2 border text-right">ΦΠΑ</th>         <th class="p-2 border text-left">Κατηγορία Εξόδου</th>       </tr>     </thead>`;     const tbody = document.createElement('tbody');     lines.forEach((ln, idx) => {       const lid = (ln.id !== undefined) ? String(ln.id) : ('l' + idx);       const vat_cat = ln.vatCategory || ln.vat_category || ln.vat || '';       const amt = ln.amount || ln.lineTotal || ln.total || '';       const vatv = ln.vat || ln.vatRate || '';       const tr = document.createElement('tr');       tr.dataset.lineId = lid;       tr.dataset.vat = vat_cat;       tr.className = '';       tr.innerHTML = `         <td class="p-2 border text-sm text-gray-600">${idx+1}</td>         <td class="p-2 border break-words">${vat_cat}</td>         <td class="p-2 border text-right">${amt}</td>         <td class="p-2 border text-right">${vatv}</td>         <td class="p-2 border"></td>`;       // build select       const td = tr.querySelector('td:last-child');       const sel = document.createElement('select');       sel.className = 'expense-category p-1 border rounded w-full';       sel.dataset.lineId = lid;       const opt0 = document.createElement('option'); opt0.value = ''; opt0.innerText = '-- επίλεξε --'; sel.appendChild(opt0);       (window.CUSTOMER_CATEGORIES || []).forEach(c => {         const o = document.createElement('option'); o.value = c; o.innerText = c;         if ((ln.category || '') === c) o.selected = true;         sel.appendChild(o);       });       sel.addEventListener('change', function(){         const val = this.value;         // find line in obj and update         const found = (obj.lines || []).find(x => String(x.id || x.line_id || '') === lid);         if(found) found.category = val;         persist();       });       td.appendChild(sel);       tbody.appendChild(tr);     });     tbl.appendChild(tbody);     // wrap in container     const wrapper = document.createElement('div');     wrapper.className = 'overflow-auto max-h-96 border rounded';     wrapper.appendChild(tbl);     container.appendChild(wrapper);     persist();     return;   }    // single line case -> render buttons   const single = lines[0];   const lid = (single.id !== undefined) ? String(single.id) : (single.line_id !== undefined ? String(single.line_id) : 'l0');   const amt = single.amount || single.lineTotal || '';   const vatv = single.vat || single.vatRate || '';   const vat_cat = single.vatCategory || single.vat_category || '';   const selected_cat = single.category || '';    const singleDiv = document.createElement('div');   singleDiv.id = 'singleLine';   singleDiv.className = 'border rounded p-4';   singleDiv.dataset.lineId = lid;   singleDiv.dataset.amount = amt;   singleDiv.dataset.vat = vatv;   singleDiv.dataset.vatcat = vat_cat;    const infoHtml = document.createElement('div');   infoHtml.className = 'mb-3 grid grid-cols-1 md:grid-cols-3 gap-3';   infoHtml.innerHTML = `<div><strong>ΦΠΑ Κατηγορία</strong><div>${vat_cat}</div></div>                         <div><strong>Ποσό</strong><div>${amt}</div></div>                         <div><strong>ΦΠΑ</strong><div>${vatv}</div></div>`;   singleDiv.appendChild(infoHtml);    const chooseWrap = document.createElement('div');   chooseWrap.className = 'mb-3';   chooseWrap.innerHTML = `<strong>Επίλεξε Κατηγορία Εξόδου</strong>`;   const btnRow = document.createElement('div');   btnRow.id = 'categoryButtons';   btnRow.className = 'mt-2 flex flex-wrap gap-2';    (window.CUSTOMER_CATEGORIES || []).forEach(c => {     const b = document.createElement('button');     b.type = 'button';     b.className = 'category-btn px-3 py-2 border rounded hover:bg-sky-50';     b.dataset.cat = c;     b.dataset.lineId = lid;     b.innerText = c;     if (c === selected_cat) { b.classList.add('bg-sky-600', 'text-white'); }     b.addEventListener('click', function(){       const cat = this.dataset.cat;       // toggle selection       const currently = (obj.lines[0].category || '');       obj.lines[0].category = (currently === cat) ? '' : cat;       // reflect UI       Array.from(btnRow.querySelectorAll('button.category-btn')).forEach(bb=>{         bb.classList.toggle('bg-sky-600', bb.dataset.cat === obj.lines[0].category);         bb.classList.toggle('text-white', bb.dataset.cat === obj.lines[0].category);       });       persist();     });     btnRow.appendChild(b);   });    const clearBtn = document.createElement('button');   clearBtn.type = 'button';   clearBtn.id = 'clearCategory';   clearBtn.className = 'px-3 py-2 border rounded text-sm ml-2';   clearBtn.innerText = 'Καθαρισμός';   clearBtn.addEventListener('click', function(){     obj.lines[0].category = '';     Array.from(btnRow.querySelectorAll('button.category-btn')).forEach(bb=>{       bb.classList.remove('bg-sky-600', 'text-white');     });     persist();   });    btnRow.appendChild(clearBtn);   chooseWrap.appendChild(btnRow);   singleDiv.appendChild(chooseWrap);   container.appendChild(singleDiv);   persist(); }  /* Call this helper whenever you open the summary modal after you populated summaryJsonInput.    Examples of call sites are below (where modal.style.display='flex' is set). */   function showFlash(message, type='info', timeout=3000){   try {     const container = document.getElementById('clientFlashContainer');     if(!container) return;     const el = document.createElement('div');     el.className = 'mb-2 p-3 rounded shadow text-sm';     if(type === 'success') el.classList.add('bg-green-50', 'text-green-800');     else if(type === 'error') el.classList.add('bg-red-50', 'text-red-800');     else el.classList.add('bg-gray-50', 'text-gray-800');     el.innerText = message;     container.appendChild(el);     setTimeout(()=>{ try{ el.style.opacity='0'; setTimeout(()=>el.remove(), 300); }catch(e){} }, timeout);   } catch(e){ console.warn('showFlash failed', e); } }  // Helper API calls async function apiGetRepeatEntry(vat){   try {     const url = '/api/repeat_entry/get' + (vat ? ('?vat=' + encodeURIComponent(vat)) : '');     const res = await fetch(url, { credentials: 'same-origin' });     if (!res.ok) return { ok: false };     return await res.json();   } catch(e){     console.warn('apiGetRepeatEntry failed', e);     return { ok: false };   } } async function apiSaveRepeatEntry(enabled, mapping, vat){   try {     const res = await fetch('/api/repeat_entry/save', {       method: 'POST',       headers: {'Content-Type': 'application/json'},       credentials: 'same-origin',       body: JSON.stringify({ enabled: !!enabled, mapping: mapping || {}, vat: vat || VAT })     });     if(!res.ok) {       const txt = await res.text().catch(()=>null);       return { ok: false, status: res.status, body: txt };     }     return await res.json();   } catch(e){     console.warn('apiSaveRepeatEntry failed', e);     return { ok: false, error: String(e) };   } }  function removeForceEditParamFromUrl(){   try {     const url = new URL(window.location.href);     if (url.searchParams.has('force_edit')) {       url.searchParams.delete('force_edit');       history.replaceState(null, '', url.pathname + (url.search ? ('?' + url.searchParams.toString()) : '') + url.hash);     }   } catch(e){ console.warn('removeForceEditParamFromUrl failed', e); } }  document.addEventListener('DOMContentLoaded', function(){   // ---------- DOM references ----------   const repeatSwitch = document.getElementById('repeatEntrySwitch');   const editRepeatBtn = document.getElementById('editRepeatMappingBtn');   const repeatModal = document.getElementById('repeatMappingModal');   const repeatModalList = document.getElementById('repeatMappingList');   const repeatModalSave = document.getElementById('repeatModalSave');   const repeatModalCancel = document.getElementById('repeatModalCancel');   const repeatModalCloseX = document.getElementById('repeatModalCloseX');   const summaryInput = document.getElementById('summaryJsonInput'); // may be null   const saveSummaryForm = document.getElementById('saveSummaryForm');    // New: receipts switch + url input   // ---------- Μικρή, local επιδιόρθωση για τα κουμπιά/Select στο modal summary ---------- // ----- Prefill modal fields & categories from summaryJsonInput ----- function prefillSummaryModal(){   try {     const input = document.getElementById('summaryJsonInput');     if(!input) return;     let data = {};     try { data = JSON.parse(input.value || '{}'); } catch(e) { data = {}; }      // Header fields mapping     const map = {       mark: 'summaryModalMark',       AA: 'summary_AA',       AFM_issuer: 'summary_AFM',       AFM: 'summary_AFM',       Name: 'summary_Name',       issuer_name: 'summary_Name',       issueDate: 'summary_issueDate',       type_name: 'summary_type_name',       totalNetValue: 'summary_totalNetValue',       totalVatAmount: 'summary_totalVatAmount',       totalValue: 'summary_totalValue'     };     Object.keys(map).forEach(k => {       const el = document.getElementById(map[k]);       if(!el) return;       el.innerText = (data[k] !== undefined && data[k] !== null) ? String(data[k]) : (data[k.toUpperCase()] || '');     });      // Ensure container exists     const container = document.getElementById('summaryLinesContainer') || document;     const lines = Array.isArray(data.lines) ? data.lines : [];      // For each line, set select/button states     lines.forEach(line => {       const lid = String(line.id || line.line_id || '').trim();       if(!lid) return;        // Try to find matching element inside modal (row or singleLine)       let row = container.querySelector('[data-line-id="'+lid+'"]');       if(!row){         // fallback: global lookup         row = document.querySelector('[data-line-id="'+lid+'"]');       }       if(!row) return;        const cat = line.category || line.cat || '';       // set select if present       const sel = row.querySelector('select.expense-category[data-line-id="'+lid+'"]');       if(sel){         try { sel.value = cat || ''; } catch(e){ /* ignore */ }       }       // set button states if buttons present       const btns = row.querySelectorAll('.category-btn[data-line-id="'+lid+'"]');       if(btns && btns.length){         btns.forEach(b => b.classList.remove('bg-sky-600','text-white'));         if(cat){           // try to find exact button           const esc = (window.CSS && CSS.escape) ? CSS.escape(cat) : cat.replace(/"/g,'\\"');           const target = row.querySelector('.category-btn[data-line-id="'+lid+'"][data-cat="'+cat+'"]') ||                          row.querySelector('.category-btn[data-line-id="'+lid+'"][data-cat="'+esc+'"]');           if(target) target.classList.add('bg-sky-600','text-white');         }       }     });   } catch(err){     console.warn('prefillSummaryModal error', err);   } }  // Call prefill when modal gets shown by your existing code. // Find the places where you do: modal.style.display = 'flex' and add prefillSummaryModal().    (function(){   // helper: ασφαλής update του hidden json από το DOM   function updateSummaryFromDom(){     try {       const input = document.getElementById('summaryJsonInput');       if(!input) return;       let data = {};       try { data = JSON.parse(input.value || '{}'); } catch(e){ data = {}; }       data.lines = Array.isArray(data.lines) ? data.lines.slice() : [];        // For every element that has data-line-id inside the modal container, read category       const container = document.getElementById('summaryLinesContainer') || document;       container.querySelectorAll('[data-line-id]').forEach(el => {         const lid = String(el.dataset.lineId || '').trim();         if(!lid) return;         // prefer select.expense-category if present         let chosen = '';         const sel = el.querySelector('select.expense-category[data-line-id="'+lid+'"]');         if(sel && sel.value) chosen = sel.value;         else {           // else look for active category button in same element           const btn = el.querySelector('.category-btn.bg-sky-600');           if(btn) chosen = btn.dataset.cat || '';         }         // find or create line entry         let found = data.lines.find(x => String(x.id) === lid);         if(!found){           found = { id: lid, category: '' };           data.lines.push(found);         }         found.category = chosen || '';       });        input.value = JSON.stringify(data);     } catch(err){       console.warn('updateSummaryFromDom error', err);     }   }    // only operate inside the modal area to avoid interfering globally   const container = document.getElementById('summaryLinesContainer');   if(!container) {     // fallback: attach to document but remain minimal     console.warn('summaryLinesContainer not found — fix handlers limitedly');   }    // Event delegation: capture clicks on category buttons and selects inside modal   const targetRoot = container || document;   // Use capture true so we intercept before other handlers   targetRoot.addEventListener('click', function(e){     const btn = e.target.closest && e.target.closest('.category-btn');     if(btn && (container ? container.contains(btn) : true)){       // Prevent bubbling to other global handlers that open the receipts-modal       e.preventDefault();       e.stopPropagation();        // ensure it's not treated as a submit (defensive): set type=button if missing       try { if(btn.tagName === 'BUTTON' && !btn.hasAttribute('type')) btn.setAttribute('type','button'); } catch(_) {}        // determine line id: prefer dataset, else find closest ancestor with data-line-id       const lineEl = btn.closest('[data-line-id]');       const lineId = lineEl ? (lineEl.dataset.lineId || '') : (btn.dataset.lineId || '');        // Toggle active class for buttons of the same line only       if(lineId){         const group = (container || document).querySelectorAll('.category-btn[data-line-id="'+lineId+'"]');         group.forEach(b => { b.classList.remove('bg-sky-600','text-white'); });       } else {         // fallback: toggle only this button       }       const isActive = !btn.classList.contains('bg-sky-600');       if(isActive) btn.classList.add('bg-sky-600','text-white');       else btn.classList.remove('bg-sky-600','text-white');        // if there's a select corresponding to this line, keep it in sync       if(lineId){         const sel = (container || document).querySelector('select.expense-category[data-line-id="'+lineId+'"]');         if(sel) sel.value = isActive ? (btn.dataset.cat || '') : '';       }        // update hidden JSON immediately       updateSummaryFromDom();       return;     }      // if clicking on a select inside modal, prevent bubbling too     const sel = e.target.closest && e.target.closest('select.expense-category');     if(sel && (container ? container.contains(sel) : true)){       e.stopPropagation();       // let change event handle updating (below we also listen change)       return;     }   }, true);    // Listen change events on selects inside container and update JSON   (container || document).addEventListener('change', function(e){     const sel = e.target.closest && e.target.closest('select.expense-category');     if(sel && (container ? container.contains(sel) : true)){       e.stopPropagation();       // sync any visual button states (remove active if select chosen)       const lid = sel.dataset.lineId || (sel.closest('[data-line-id]') && sel.closest('[data-line-id]').dataset.lineId) || '';       if(lid){         // clear buttons for that line         const group = (container || document).querySelectorAll('.category-btn[data-line-id="'+lid+'"]');         group.forEach(b => b.classList.remove('bg-sky-600','text-white'));       }       updateSummaryFromDom();     }   }, true);    // Ensure Save form updates JSON right before submit (defensive)   const saveForm = document.getElementById('saveSummaryForm');   if(saveForm){     saveForm.addEventListener('submit', function(e){       try {         updateSummaryFromDom();         // small synchronous update only; let the submit continue       } catch(err){ console.warn('pre-submit update failed', err); }     });   }    // Expose helper in case other code wants to call it   window.updateSummaryFromDom = updateSummaryFromDom; })();    const useReceiptsSwitch = document.getElementById('useReceiptsSwitch');   // find or create an URL input (if not present in template we create one dynamically)   let urlInput = document.getElementById('scrapeUrlInput');   if(!urlInput){     urlInput = document.createElement('input');     urlInput.id = 'scrapeUrlInput';     urlInput.placeholder = 'Εισάγετε URL παραστατικού (για αποδείξεις)';     urlInput.className = 'p-2 border rounded w-2/4 hidden';     urlInput.type = 'text';     // insert after markInput     const mi = document.getElementById('markInput');     if(mi && mi.parentElement) mi.parentElement.insertBefore(urlInput, mi.nextSibling);   }    // --- ensure search icon behaves same as input clear/submit ---   (function wireSearchIconBehavior(){     const mi = document.getElementById('markInput');     if (!mi) return;      const possibleSelectors = [       '.icon-search', '.btn-search', '#searchIcon', '.fa-search', '.magnifier',       'button[aria-label="search"]', 'button[data-action="search"]'     ];      let found = null;     for (const sel of possibleSelectors) {       const el = document.querySelector(sel);       if (el) { found = el; break; }     }      if (!found) {       const delBtn = document.querySelector('button#deleteSelected, button.delete-selected, button[data-action="delete-selected"]');       if (delBtn && delBtn.parentElement) {         const sibling = delBtn.parentElement.querySelector('button, a, svg, i');         if (sibling && sibling !== delBtn) found = sibling;       }     }      if (!found) return;      found.addEventListener('click', function(e){       try {         mi.value = '';         mi.dispatchEvent(new Event('input', { bubbles: true }));         mi.dispatchEvent(new KeyboardEvent('keyup', { bubbles: true, key: 'Backspace' }));         if (window.jQuery && jQuery.fn && jQuery.fn.dataTable) {           try {             const dt = $('.summary-table').DataTable();             dt.search('').columns().search('').draw();           } catch(ignore){}         }       } catch(err){         console.warn('search icon handler failed', err);       }     });   })();     // detect vat keys in summary   function detectVatKeysFromSummary(){     if(summaryInput && summaryInput.value){       try {         const obj = JSON.parse(summaryInput.value || '{}');         const lines = Array.isArray(obj.lines) ? obj.lines : [];         const set = new Set();         lines.forEach(l => {           const key = (l.vatCategory || l.vat_category || l.vat || '').toString().trim();           if(key) set.add(key);         });         if(set.size) return Array.from(set);       } catch(e){ /* ignore */ }     }     return ['0%','6%','13%','24%'];   }    // Build repeat modal UI given an existing mapping (object)   function buildRepeatModalUI(existingMapping){     repeatModalList.innerHTML = '';     const vatKeys = detectVatKeysFromSummary();     const mapping = existingMapping || {};     // default row     const defaultRow = document.createElement('div');     defaultRow.className = 'flex items-center gap-3';     defaultRow.innerHTML = `<div class="w-36 text-sm font-medium">Προεπιλογή</div>`;     const defaultSelect = document.createElement('select');     defaultSelect.className = 'p-1 border rounded flex-1';     const opt0 = document.createElement('option'); opt0.value=''; opt0.innerText='-- (κανένα) --'; defaultSelect.appendChild(opt0);     CUSTOMER_CATEGORIES.forEach(c=>{       const o = document.createElement('option'); o.value = c; o.innerText = c;       if(mapping['__default'] === c) o.selected = true;       defaultSelect.appendChild(o);     });     defaultRow.appendChild(defaultSelect);     repeatModalList.appendChild(defaultRow);      vatKeys.forEach(vk=>{       const row = document.createElement('div');       row.className = 'flex items-center gap-3';       const label = document.createElement('div');       label.className = 'w-36 text-sm font-medium';       label.innerText = vk || '(άγνωστο)';       const sel = document.createElement('select');       sel.className = 'p-1 border rounded flex-1';       const oEmpty = document.createElement('option'); oEmpty.value=''; oEmpty.innerText='-- (προεπιλογή) --'; sel.appendChild(oEmpty);       CUSTOMER_CATEGORIES.forEach(c=>{         const o=document.createElement('option'); o.value=c; o.innerText=c;         if(mapping[vk] === c) o.selected = true;         sel.appendChild(o);       });       row.appendChild(label);       row.appendChild(sel);       repeatModalList.appendChild(row);     });   }    function openRepeatModalWithMapping(mapping){     // If receipts mode is on, block editing mapping because receipts get fixed category     if(useReceiptsSwitch && useReceiptsSwitch.checked){       alert('Όταν είναι επιλεγμένες οι Αποδείξεις, δεν επιτρέπεται η επεξεργασία χαρακτηρισμών — οι αποδείξεις παίρνουν μόνο την κατηγορία "αποδειξακια".');       return;     }     buildRepeatModalUI(mapping || {});     repeatModal.style.display = 'flex';   }   function closeRepeatModal(){ repeatModal.style.display = 'none'; }    // collect mapping from modal selects   function collectMappingFromModal(){     const mapping = {};     const selects = repeatModalList.querySelectorAll('select');     if(selects.length){       const first = selects[0];       if(first && first.value) mapping['__default'] = first.value;       const vatKeys = detectVatKeysFromSummary();       for(let i=1;i<selects.length;i++){         const sel = selects[i];         const vatKey = vatKeys[i-1];         if(sel && sel.value) mapping[vatKey] = sel.value;       }     }     return mapping;   }    // apply given mapping to summary JSON and submit saveSummaryForm   function applyMappingToSummaryAndSubmitUsingMapping(mapping){     if(!summaryInput || !saveSummaryForm) return false;     try {       const data = JSON.parse(summaryInput.value || '{}');       if(!Array.isArray(data.lines)) data.lines = [];       data.lines = data.lines.map(l => {         const vatKey = (l.vatCategory || l.vat_category || l.vat || '').toString().trim();         if(mapping && mapping[vatKey]) l.category = mapping[vatKey];         else if(mapping && mapping.__default) l.category = mapping.__default;         return l;       });       summaryInput.value = JSON.stringify(data);       saveSummaryForm.submit();       return true;     } catch(e){       console.warn('applyMappingToSummaryAndSubmitUsingMapping error', e);       return false;     }   }    // ---------- Initialization: load server repeat_entry config ----------   (async function initRepeatEntry(){     try {       const resp = await apiGetRepeatEntry(VAT);       if(resp && resp.ok){         const repeat = resp.repeat_entry || { enabled: false, mapping: {} };         if(resp.expense_tags && Array.isArray(resp.expense_tags) && resp.expense_tags.length){           CUSTOMER_CATEGORIES = resp.expense_tags.slice();         }         const enabled = !!repeat.enabled;         const mapping = repeat.mapping || {};          if(repeatSwitch){           repeatSwitch.checked = enabled;           // show edit button if mapping exists and receipts not selected           if(mapping && Object.keys(mapping).length && !(useReceiptsSwitch && useReceiptsSwitch.checked)) editRepeatBtn.classList.remove('hidden');           repeatSwitch.addEventListener('change', async function(){             const now = this.checked;             // if enabling and no mapping -> open modal to create mapping             if(now){               if(!mapping || Object.keys(mapping).length === 0){                 // open modal letting user create mapping (but only if receipts not selected)                 if(useReceiptsSwitch && useReceiptsSwitch.checked){                   // do not open — receipts use only αποδειξακια                   editRepeatBtn.classList.add('hidden');                 } else {                   openRepeatModalWithMapping({});                 }               } else {                 if(useReceiptsSwitch && useReceiptsSwitch.checked){                   // receipts + repeat -> hide edit button                   editRepeatBtn.classList.add('hidden');                 } else {                   editRepeatBtn.classList.remove('hidden');                 }               }             } else {               editRepeatBtn.classList.add('hidden');             }             // Persist enabled flag immediately (keep mapping as-is)             const saveResp = await apiSaveRepeatEntry(now, mapping, VAT);             if(saveResp && saveResp.ok){               showFlash('Ενημερώθηκε η ρύθμιση επαναληπτικής εισαγωγής.', 'success');               if(saveResp.expense_tags && Array.isArray(saveResp.expense_tags) && saveResp.expense_tags.length){                 CUSTOMER_CATEGORIES = saveResp.expense_tags.slice();               }             } else {               showFlash('Αποτυχία αποθήκευσης ρύθμισης.', 'error');             }           });         }          // If repeat enabled and mapping exists and modal_summary present -> auto apply mapping now         if (enabled && mapping && Object.keys(mapping).length && summaryInput) {         const receiptsOn = !!(useReceiptsSwitch && useReceiptsSwitch.checked);           if (!receiptsOn && !FORCE_EDIT) {             const did = applyMappingToSummaryAndSubmitUsingMapping(mapping);           if (did) {             const sm = document.getElementById('summaryModal');           if (sm) sm.style.display = 'none';       }     }   }          // Wire edit button         if(editRepeatBtn){           editRepeatBtn.classList.toggle('hidden', !mapping || Object.keys(mapping).length===0 || (useReceiptsSwitch && useReceiptsSwitch.checked));           editRepeatBtn.addEventListener('click', function(){             openRepeatModalWithMapping(mapping);           });         }       } else {         if(repeatSwitch) repeatSwitch.checked = false;       }     } catch(e){       console.warn('initRepeatEntry failed', e);     }   })();    // wire receipts switch to show/hide url input and to enforce mapping rule   if(useReceiptsSwitch){     useReceiptsSwitch.addEventListener('change', function(){       const on = !!this.checked;       // UI: swap inputs       if(on){         document.getElementById('markInput')?.classList.add('hidden');         urlInput?.classList.remove('hidden');         urlInput?.focus();         // when receipts are active, edit button must be hidden (even if repeat on)         if(editRepeatBtn) editRepeatBtn.classList.add('hidden');       } else {         document.getElementById('markInput')?.classList.remove('hidden');         urlInput?.classList.add('hidden');         document.getElementById('markInput')?.focus();         // restore edit button visibility based on repeatSwitch/mapping         // re-init repeat button visibility by calling initRepeatEntry lightly:         (async function(){           try {             const resp = await apiGetRepeatEntry(VAT);             if(resp && resp.ok){               const mapping = (resp.repeat_entry && resp.repeat_entry.mapping) ? resp.repeat_entry.mapping : {};               if(mapping && Object.keys(mapping).length && repeatSwitch && repeatSwitch.checked){                 editRepeatBtn.classList.remove('hidden');               } else {                 editRepeatBtn.classList.add('hidden');               }             }           } catch(e){}         })();       }     });   }    // repeat modal handlers   repeatModalCloseX?.addEventListener('click', closeRepeatModal);   repeatModalCancel?.addEventListener('click', closeRepeatModal);    repeatModalSave?.addEventListener('click', async function(){     // collect mapping     const mapping = collectMappingFromModal();     // persist to backend and enable repeat     const resp = await apiSaveRepeatEntry(true, mapping, VAT);     if (resp && resp.ok) {       if (resp.expense_tags && Array.isArray(resp.expense_tags) && resp.expense_tags.length) {         CUSTOMER_CATEGORIES = resp.expense_tags.slice();       }       if (repeatSwitch) repeatSwitch.checked = true;       // if receipts mode is on, edited mapping should not be used—hide edit button       if (useReceiptsSwitch && useReceiptsSwitch.checked) editRepeatBtn.classList.add('hidden');       else editRepeatBtn.classList.remove('hidden');        showFlash('Αποθηκεύτηκαν οι ρυθμίσεις επαναληπτικής εισαγωγής. Η σελίδα θα επαναφορτωθεί...', 'success', 800);       closeRepeatModal();       setTimeout(function(){ try { window.location.reload(); } catch(e){ console.warn('reload failed', e); } }, 600);       return;     } else {       console.warn('Failed saving repeat mapping', resp);       showFlash('Αποτυχία αποθήκευσης ρυθμίσεων επαναληπτικής εισαγωγής.', 'error');     }   });    // ---------- existing original JS (dismiss banner, force edit, summary modal wiring, etc) ----------   const forceBtn = document.getElementById('forceEditBtn');   const markInput = document.getElementById('markInput');   const existingBanner = document.getElementById('existingBanner');   const dismissBannerBtn = document.getElementById('dismissBannerBtn');    if(dismissBannerBtn){     dismissBannerBtn.addEventListener('click', function(){ if(existingBanner) existingBanner.style.display = 'none'; });   }    if (forceBtn){     forceBtn.addEventListener('click', function(){       const markValRaw = (markInput && markInput.value) ? markInput.value.trim() : '{{ mark or "" }}';       const markVal = encodeURIComponent(markValRaw || '');       if (!markVal){ alert('Δεν δόθηκε MARK για επιβεβαίωση.'); return; }       if (confirm('Θες σίγουρα να επαναχαρακτηρίσεις το MARK και να ανοίξει η φόρμα επεξεργασίας;')) {         if(existingBanner) existingBanner.style.display = 'none';         window.location = SEARCH_BASE_URL + '?mark=' + markVal + '&force_edit=1';       }     });   }    const modal = document.getElementById('summaryModal');   const modalCloseBtns = Array.from(document.querySelectorAll('#modalCloseX, #modalCloseBtn'));   modalCloseBtns.forEach(b => b?.addEventListener('click', function(){     if(modal) modal.style.display = 'none';     removeForceEditParamFromUrl();   }));    {% if modal_summary and (request.args.get('force_edit') == '1' or not allow_edit_existing) %}   setTimeout(()=>{   const m = document.getElementById('summaryModal');   if (!m) return;    // Αν είμαστε σε mode αποδείξεων ΚΑΙ είναι ενεργό το repeat, μην ανοίγεις modal   // ΕΞΑΙΡΕΣΗ: αν είναι reclassification (force_edit=1), τότε άνοιξέ το για να αλλάξουμε χαρακτηρισμούς.   const receiptsOn = !!(document.getElementById('useReceiptsSwitch') && document.getElementById('useReceiptsSwitch').checked);   const repeatOn   = !!(document.getElementById('repeatEntrySwitch') && document.getElementById('repeatEntrySwitch').checked);    // Επιπλέον έλεγχος: αν το summary είναι σαφώς Απόδειξη, αντιμετώπισέ το ως receipts flow   let isReceiptSummary = false;   try {     const raw = (document.getElementById('summaryJsonInput')?.value || '').trim();     if (raw) {       const sobj = JSON.parse(raw);       const tname = (sobj.type_name || sobj.type || '').toString().toLowerCase();       const cat   = (sobj.category || sobj.characteristic || sobj['χαρακτηρισμός'] || '').toString().toLowerCase();       isReceiptSummary = !!(sobj.is_receipt || tname.includes('απόδει') || tname.includes('receipt') || cat === 'αποδειξακια');     }   } catch(_){}     if ((receiptsOn || isReceiptSummary) && repeatOn && !FORCE_EDIT) {     // auto-flow αποδείξεων όταν είναι ενεργό το "Επαναληψιμη εισαγωγή"     try {       let raw = (document.getElementById('summaryJsonInput')?.value || '').trim();       if (!raw || raw === '{}' || raw === 'null') {         try { raw = JSON.stringify({{ modal_summary | tojson | safe }}); } catch(_) {}       }       const sobj = raw ? JSON.parse(raw) : {};       // Κανονικοποίησε σαν απόδειξη και επιβεβαίωσε μία φορά       const url = document.getElementById('scrapeUrlInput')?.value || '';       (async () => {         try {           await RC.confirmReceiptOnce(RC.normalizeReceiptSummary(sobj), url);           // κράτα το mode σε receipts και κάνε hard redirect για καθαρή κατάσταση           try { localStorage.setItem('useReceiptsSwitch','1'); } catch(_){}           const base = location.pathname + '?use_receipts=1';           location.replace(base);         } catch(e) {           console.warn('auto-confirm receipt failed', e);         }       })();     } catch(e) { console.warn('auto-flow receipts error', e); }     return;   }     // Αλλιώς, άνοιξέ το κανονικά   try {     const summaryInputEl = document.getElementById('summaryJsonInput');     if (summaryInputEl && (!summaryInputEl.value || summaryInputEl.value === '{}')) {       summaryInputEl.value = {{ modal_summary | tojson | safe }};     }     const obj = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');     renderSummaryLinesFromObject(obj);   } catch(e) { console.warn('renderSummaryLinesFromObject error', e); }    m.style.display = 'flex';   removeForceEditParamFromUrl(); }, 80); {% endif %}      {% if modal_warning %}   const afmModal = document.getElementById('afmWarningModal');   const afmModalBtn = document.getElementById('afmModalConfirm');   if (afmModal && afmModalBtn){     setTimeout(()=>{ afmModal.style.display = 'flex'; }, 50);     afmModalBtn.addEventListener('click', function(){ afmModal.style.display = 'none'; });   }   {% endif %}    // --- the rest of your existing summary wiring (no changes) ---   if (summaryInput){   try {     let summaryData = JSON.parse(summaryInput.value || '{}');     if (!Array.isArray(summaryData.lines)) summaryData.lines = [];     summaryData.lines = summaryData.lines.map(l => {       if (!l) return {id:'', description:'', amount:'', vat:'', category:'', vatCategory:''};       l.id = (l.id!==undefined)?String(l.id):(l.line_id!==undefined?String(l.line_id):'');       l.category = l.category || l.cat || l.line_category || l['κατηγορία'] || '';       return l;     });      // multi-line selects     document.querySelectorAll('#linesTableBody tr[data-line-id]').forEach(tr => {       const lid = String(tr.dataset.lineId || '');       const sel = tr.querySelector('select.expense-category');       if (!sel) return;       let existing = summaryData.lines.find(x => String(x.id) === lid);       if (!existing){         existing = {id: lid, category: ''};         summaryData.lines.push(existing);       }       sel.value = existing.category || '';       sel.addEventListener('change', function(){ existing.category = sel.value; summaryInput.value = JSON.stringify(summaryData); });     });      // single-line buttons     const singleLine = document.getElementById('singleLine');     if (singleLine){       const lid = String(singleLine.dataset.lineId || '');       let existing = summaryData.lines.find(x => String(x.id) === lid);       if (!existing){         existing = {id: lid, category: ''};         summaryData.lines.push(existing);       }       const buttons = document.querySelectorAll('#categoryButtons .category-btn');       function markActive(cat){         buttons.forEach(b => {           b.classList.toggle('bg-sky-600', b.dataset.cat === cat);           b.classList.toggle('text-white', b.dataset.cat === cat);         });       }       if (existing.category) markActive(existing.category);       buttons.forEach(btn => {         btn.addEventListener('click', function(){           const cat = this.dataset.cat;           existing.category = (existing.category === cat) ? '' : cat;           markActive(existing.category);           summaryInput.value = JSON.stringify(summaryData);         });       });       const clearBtn = document.getElementById('clearCategory');       clearBtn?.addEventListener('click', function(){         existing.category = '';         markActive('');         summaryInput.value = JSON.stringify(summaryData);       });     }     summaryInput.value = JSON.stringify(summaryData);   } catch(e){     console.warn('summary JSON parse/normalize error', e);   } }     // --- the table / datatables logic code (kept unchanged) ---   const hasTable = document.querySelector('.summary-table') !== null;   if (hasTable){     const jq = window.jQuery;     const dtAvail = jq && jq.fn && jq.fn.dataTable;     if (dtAvail){       try {         const dt = $('.summary-table').DataTable({           paging: true,           scrollY: '55vh',           scrollX: true,           scrollCollapse: true,           fixedHeader: { header: true, headerOffset: 0 },           colReorder: true,           autoWidth: false,           columnDefs: [{ orderable: false, targets: 0 }]         });         if (typeof dt.colResize === 'function') {           try { dt.colResize({ resizeMode: 'flex' }); } catch(e){ console.warn('colResize failed', e); }         }         const globalSearch = document.getElementById('globalSearch');         if (globalSearch){           globalSearch.addEventListener('input', function(){ dt.search(this.value).draw(); });         }         setTimeout(()=>{ try{ dt.columns.adjust().draw(); }catch(e){} }, 120);       } catch(e){         console.warn('DataTables init failed — falling back', e);       }     } else {       const globalSearch = document.getElementById('globalSearch');       if (globalSearch){         globalSearch.addEventListener('input', function(){           const q = this.value.toLowerCase();           document.querySelectorAll('.summary-table tbody tr').forEach(tr => {             tr.style.display = tr.textContent.toLowerCase().indexOf(q) !== -1 ? '' : 'none';           });         });       }     }      try {       const anyCheckbox = document.querySelector('input[name="delete_mark"]');       if (anyCheckbox){         const firstTh = document.querySelector('.summary-table thead th');         if (firstTh && !document.getElementById('selectAll')){           const chk = document.createElement('input');           chk.type = 'checkbox'; chk.id = 'selectAll'; chk.title = 'Επιλογή όλων';           chk.style.marginRight = '6px';           firstTh.prepend(chk);           chk.addEventListener('change', function(){ document.querySelectorAll('input[name="delete_mark"]').forEach(cb => cb.checked = this.checked); });         }         const headers = Array.from(document.querySelectorAll('.summary-table thead th')).map(h => h.innerText.trim().toLowerCase());         let markIdx = headers.findIndex(h => h.includes('mark'));         if (markIdx === -1) markIdx = headers.findIndex(h => h.includes('αφμ') || h.includes('afm'));         if (markIdx >= 0){           document.querySelectorAll('.summary-table tbody tr').forEach(row => {             const cb = row.querySelector('input[name="delete_mark"]');             if (cb){               const td = row.querySelectorAll('td')[markIdx];               if (td){                 const v = td.innerText.trim();                 if (v) cb.value = v;               }             }           });         }       }     } catch(e){ console.warn('select-all / mark mapping error', e); }   }    // --- new: restore table / reload when markInput cleared ---   (function wireRobustClearRestore(){     const mi = (typeof markInput !== 'undefined' && markInput) ? markInput : document.getElementById('markInput');     if (!mi) return;      let t = null;     let lastVal = mi.value || '';      function restoreAllRowsAndUi(){       try {         if (window.jQuery && jQuery.fn && jQuery.fn.dataTable) {           try {             const dt = $('.summary-table').DataTable();             dt.search('').columns().search('').draw();             try {               dt.rows().nodes().to$().each(function(){ this.style.display = ''; });             } catch(e){ /* ignore */ }             try { dt.columns.adjust().draw(false); } catch(e){ /* ignore */ }           } catch(e) {             console.warn('DataTables restore failed, falling back to DOM restore', e);             document.querySelectorAll('.summary-table tbody tr').forEach(tr => tr.style.display = '');           }         } else {           document.querySelectorAll('.summary-table tbody tr').forEach(tr => tr.style.display = '');         }          const selectAll = document.getElementById('selectAll') || document.querySelector('.summary-table thead input[type="checkbox"]#selectAll');         if (selectAll) selectAll.checked = false;          const evt = new Event('tableRestored');         document.querySelectorAll('.summary-table').forEach(t => t.dispatchEvent(evt));       } catch(err){         console.warn('restoreAllRowsAndUi failed', err);       }     }   document.addEventListener('DOMContentLoaded', function(){   try {     const m = document.getElementById('summaryModal');     if(m && (m.style.display === 'flex' || getComputedStyle(m).display !== 'none')){       // small timeout to let template-rendered inner HTML settle       setTimeout(()=>{ try { prefillSummaryModal(); } catch(e){ console.warn(e); } }, 40);     }   } catch(e){ /* ignore */ } });     function maybeRestore(){       clearTimeout(t);       t = setTimeout(()=>{         try {           const v = (mi.value || '').trim();           if (v === '' && (lastVal && lastVal.trim() !== '')) {             try {               if (typeof INITIAL_MARK !== 'undefined' && INITIAL_MARK && INITIAL_MARK.trim() !== '') {                 const cur = new URL(window.location.href);                 if (cur.searchParams.has('mark') || cur.searchParams.has('force_edit')) {                   window.location = SEARCH_BASE_URL;                   return;                 }               }             } catch(e){ /* ignore URL errors and fallthrough to client restore */ }              restoreAllRowsAndUi();           }           lastVal = v;         } catch(e){           console.warn(e);         }       }, 150);     }      mi.addEventListener('input', maybeRestore);     mi.addEventListener('keyup', maybeRestore);     mi.addEventListener('paste', function(){ setTimeout(maybeRestore, 50); });     mi.addEventListener('cut', function(){ setTimeout(maybeRestore, 50); });     mi.addEventListener('blur', maybeRestore);      let pollInterval = null;     try {       pollInterval = setInterval(() => {         const current = (mi.value || '').trim();         if (current !== (lastVal || '').trim()) {           maybeRestore();         }       }, 300);        window.addEventListener('beforeunload', () => {         if (pollInterval) clearInterval(pollInterval);       });     } catch(e){     }   })();    // ----- SCRAPER integration: auto call endpoint when URL provided and show modal -----   // Add a handler: when receipts switch ON and user submits form -> call /api/scrape_receipt and show modal   // ====================== RECEIPTS SCRAPE FLOW ====================== document.getElementById('markSearchForm')?.addEventListener('submit', async function (evt) {   if (useReceiptsSwitch && useReceiptsSwitch.checked) {      // --- de-dupe receipts submit (scrape) ---     // --- de-dupe receipts submit (scrape) ---   const form = evt.currentTarget;   if (form && form.dataset.receiptsSubmitting === '1') {     evt.preventDefault();     return;   }   if (form) form.dataset.receiptsSubmitting = '';   if (form) form.dataset.receiptsSubmitting = '1';  evt.preventDefault();     const url = (urlInput && urlInput.value) ? urlInput.value.trim() : '';     if (!url) {       showFlash('Εισάγετε URL για αποδείξεις.', 'error');       return;     }      try {       const res = await fetch('/api/scrape_receipt', {         method: 'POST',         credentials: 'same-origin',         headers: { 'Content-Type': 'application/json', 'X-Requested-With': 'XMLHttpRequest' },         body: JSON.stringify({ url: url })       });        const j = await res.json().catch(() => null);       if (!res.ok || !j || j.ok === false) {         const msg = j && (j.error || j.message) ? (j.error || j.message) : ('Server ' + (res.status || ''));         showFlash('Σφάλμα scraper: ' + msg, 'error', 6000);         return;       }        if (j && j.is_invoice === true) {   openReceiptWarning('Το URL φαίνεται να περιέχει Τιμολόγιο — δεν θα αποθηκευτεί ως Απόδειξη. Έλεγξε το παραστατικό.');   return; // STOP         }         // ---- Έλεγχος έτους απόδειξης vs ενεργή χρήση (modal + STOP) try {   // 1) Πάρε ενεργή χρήση από ACTIVE_YEAR ή από το backend (fallback)   const activeYear = await getActiveFiscalYear();    // 2) Εξήγαγε issueYear από την απόκριση του scraper   let issueYear = null;   if (j && j.issue_year != null && String(j.issue_year).trim() !== '') {     // δέξου είτε καθαρό έτος είτε π.χ. "2025"     const m = String(j.issue_year).match(/\b(19|20)\d{2}\b/);     issueYear = m ? m[0] : String(j.issue_year);   } else if (j) {     const anyDate = j.issue_date || j.issueDate || j.date || '';     if (typeof anyDate === 'string') {       const m = anyDate.match(/\b(19|20)\d{2}\b/);       if (m) issueYear = m[0];     }   }    // 3) Αν δεν ταιριάζουν -> δείξε modal και σταμάτα   if (activeYear && issueYear && String(issueYear) !== String(activeYear)) {     openReceiptWarning(`Προσοχή: Η απόδειξη είναι του ${issueYear}, ενώ η ενεργή χρήση είναι ${activeYear}. Η διαδικασία μπλοκάρεται.`);     return; // STOP   } } catch (_) {   /* αν αποτύχει ο έλεγχος, δεν μπλοκάρουμε σιωπηλά */ }         // Δημιουργία αυξανόμενου MARK 15 ψηφίων (από το backend)       const markRes = await fetch('/api/next_receipt_mark', { credentials: 'same-origin' });       const markData = await markRes.json().catch(() => null);       const nextMark = (markData && markData.mark) ? markData.mark : '';        // Prepare summary object για modal       const summaryObj = {         mark: nextMark,         AA: j.progressive_aa || '',         AFM_issuer: j.issuer_vat || '',         Name: j.issuer_name || '',         issueDate: j.issue_date || '',         type_name: 'ΑΠΟΔΕΙΞΗ',         totalValue: j.total_amount || '',         totalNetValue: j.total_amount || '',         totalVatAmount: (j.raw && (j.raw.totalVatAmount || j.raw.totalVat)) || '',         lines: []       ,   type: 'ΑΠΟΔΕΙΞΗ',   category: 'αποδειξακια',   is_receipt: true,   number: (j.progressive_aa || '')};        if (j.raw && Array.isArray(j.raw.lines) && j.raw.lines.length) {         j.raw.lines.forEach((l, idx) => {           summaryObj.lines.push({             id: l.id || ('r' + idx),             amount: l.amount || l.lineTotal || '',             vat: l.vat || l.vatRate || '',             vatCategory: l.vatCategory || l.vat_category || '',             description: l.description || l.desc || ''           });         });       } else {         summaryObj.lines.push({           id: 'r0',           amount: j.total_amount || '',           vat: (j.raw && (j.raw.vat || '')) || '',           vatCategory: (j.raw && (j.raw.vatCategory || '')) || '',           description: (j.raw && (j.raw.description || '')) || ''         });       }        // Populate modal inputs       const summaryInput = document.getElementById('summaryJsonInput');       if (summaryInput) summaryInput.value = JSON.stringify(summaryObj);         document.getElementById('scrapeUrlField')?.setAttribute('value', url);       const desiredCat = CUSTOMER_CATEGORIES.includes('αποδειξακια')         ? 'αποδειξακια'         : (CUSTOMER_CATEGORIES[0] || '');       document.getElementById('scrapeCategoryField')?.setAttribute('value', desiredCat);       document.getElementById('scrapeForceField')?.setAttribute('value', 'false');        // Ενημέρωση modal       const modal = document.getElementById('summaryModal');       if (modal) {         // ensure populate code runs (some populate watchers poll or listen for modal display)         // prefer calling RC_forcePopulateSummaryModal if present         if (window.RC_forcePopulateSummaryModal) {           try { window.RC_forcePopulateSummaryModal(); } catch(e){ console.warn('RC_forcePopulateSummaryModal failed', e); }         }         if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }         if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { showFlash('Λήφθηκε απόδειξη — ελέγξτε τα στοιχεία και πατήστε "Αποθήκευση στο Cache".', 'success', 5000); }       }      } catch (err) {       console.error('scrape_receipt error', err);       showFlash('Σφάλμα scraper: ' + (err.message || err), 'error', 6000);     }   } });     // Intercept "Αποθήκευση στο Cache" to perform AJAX save for scraped receipts   // intercept saveSummaryForm submit when scrapeUrlField is present // --- replace the previous payload construction + fetch with this robust version --- document.getElementById('saveSummaryForm')?.addEventListener('submit', async function(e){   const scrapeUrl = document.getElementById('scrapeUrlField')?.value || '';   if(!scrapeUrl) return; // let normal (invoice) flow proceed   e.preventDefault();    let summary = {};   try {     summary = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');   } catch(err){     console.warn('Failed parsing summaryJsonInput', err);     alert('Σφάλμα: άκυρα δεδομένα παραστατικού.');     return;   }    summary.is_receipt = true;   if (!summary.category || String(summary.category).trim() === '') summary.category = 'αποδειξακια';   if (!summary.type || String(summary.type).trim() === '') summary.type = 'ΑΠΟΔΕΙΞΗ';   if (!summary.type_name || String(summary.type_name).trim() === '') summary.type_name = 'Απόδειξη';    const aaCoalesce = summary.number || summary.AA || summary.aa || summary.progressive_aa || '';   summary.number = aaCoalesce;    if (!Array.isArray(summary.lines)) summary.lines = [];   summary.lines = summary.lines.map((l, i) => ({     id: (l && (l.id || l.line_id)) ? String(l.id || l.line_id) : ('r' + i),     description: (l && (l.description || l.desc)) || '',     amount: (l && (l.amount || l.lineTotal || l.total)) || '',     vat: (l && (l.vat || l.vatRate)) || '',     vatCategory: (l && (l.vatCategory || l.vat_category)) || '',     category: (l && l.category) || ''   }));    try {     const res = await fetch('/save_summary', {       method: 'POST',       credentials: 'same-origin',       headers: { 'Content-Type': 'application/json', 'X-Requested-With': 'XMLHttpRequest' },       body: JSON.stringify(summary)     });     if (!res.ok) {       const t = await res.text().catch(()=>'');       alert('Αποτυχία αποθήκευσης (HTTP ' + res.status + '): ' + t);       return;     }     try { document.getElementById('summaryModal').style.display = 'none'; } catch(_) {}     window.location = window.location.pathname;   } catch (err) {     console.error('save_summary AJAX error', err);     alert('Σφάλμα αποθήκευσης: ' + (err.message || err));   } });  document.getElementById('saveSummaryForm')?.addEventListener('submit', async function(e){   const scrapeUrl = document.getElementById('scrapeUrlField')?.value || '';   if(!scrapeUrl) return; // allow normal server flow for invoice flow   e.preventDefault();    // parse summary from hidden input   let summary = {};   try {     summary = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');   } catch(err){     console.warn('Failed parsing summaryJsonInput', err);     showFlash('Σφάλμα: άκυρα δεδομένα παραστατικού.', 'error');     return;   }    // robust AFM extraction (try many variants)   const afmFromSummary = (summary && (summary.AFM_issuer || summary.AFM || summary.issuer_vat || summary.issuerVat || summary.issuer_vat)) ||                          (summary && summary.raw && (summary.raw.issuer_vat || summary.raw.issuerVat || summary.raw.AFM || summary.raw.AFM_issuer));   const afmVal = (typeof VAT !== 'undefined' && VAT) ? VAT : (afmFromSummary ? String(afmFromSummary).trim() : '');    // robust year extraction: prefer ACTIVE_YEAR, then summary.year, then parse issueDate, then fallback to current year   let yearVal = null;   try {     if (typeof ACTIVE_YEAR !== 'undefined' && ACTIVE_YEAR) yearVal = String(ACTIVE_YEAR);     else if (summary && (summary.year || summary.Year)) yearVal = String(summary.year || summary.Year);     else if (summary && summary.issueDate) {       const parts = (summary.issueDate || '').split('/');       if (parts.length >= 3) yearVal = parts[2];     }     if (!yearVal) yearVal = String((new Date()).getUTCFullYear());   } catch(e){     yearVal = String((new Date()).getUTCFullYear());   }    // final mark   const markVal = summary.mark || document.getElementById('scrapeUrlField')?.dataset.mark || '';    // if afm missing -> abort with client message (server requires AFM or active session)   if (!afmVal) {     console.warn('confirm_receipt abort: missing AFM', { summary });     showFlash('Αδύνατο να αποθηκευτεί: λείπει AFM του ενεργού πελάτη. Επιλέξτε ενεργό πελάτη ή βεβαιωθείτε ότι το παραστατικό περιέχει ΑΦΜ.', 'error', 7000);     return;   }    const payload = {     url: scrapeUrl,     summary: summary,     force: (document.getElementById('scrapeForceField')?.value === 'true'),     category: 'αποδειξακια',     afm: afmVal,     year: String(yearVal),     mark: (summary.mark || markVal || '')   };    console.log('[RC-DEBUG] FETCH -> /api/confirm_receipt called', '/api/confirm_receipt', payload);    // send to backend   try {     const res = await fetch('/api/confirm_receipt', {       method: 'POST',       credentials: 'same-origin',       headers: {'Content-Type':'application/json','X-Requested-With':'XMLHttpRequest'},       body: JSON.stringify(payload)     });     const j = await res.json().catch(()=>null);     if(!res.ok || !j || !j.ok){       console.warn('confirm_receipt failed', res.status, j);       showFlash('Σφάλμα αποθήκευσης: ' + ((j && j.error) ? j.error : ('Server ' + (res.status || ''))) , 'error', 7000);       return;     }     showFlash('Αποθηκεύτηκε η απόδειξη (excel + json).', 'success');     document.getElementById('summaryModal').style.display = 'none';     // clean hidden fields     document.getElementById('scrapeUrlField').value = '';     document.getElementById('scrapeForceField').value = 'false';   } catch(err){     console.error('confirm_receipt fetch error', err);     showFlash('Σφάλμα δικτύου κατά την αποθήκευση.', 'error');   } });  // --- Fix: on page load, populate modal if summaryJsonInput already contains summary JSON --- // This replaces a missing populateSummaryModal call and uses the populate watcher (RC_forcePopulateSummaryModal) if available. // Robust startup: only show summary modal if summaryJsonInput actually contains meaningful data document.addEventListener("DOMContentLoaded", function(){   try {     const summaryEl = document.getElementById("summaryJsonInput");     const modal = document.getElementById("summaryModal");     if (!summaryEl) return;      let obj = {};     try { obj = JSON.parse(summaryEl.value || '{}'); } catch(e){ obj = {}; }      function isMeaningful(o){       if (!o || typeof o !== 'object') return false;        // quick acceptors: important single fields       const important = ['mark','MARK','AFM_issuer','AFM','totalValue','totalNetValue','total_amount','issueDate','issue_date','progressive_aa','AA'];       for (const k of important) {         if (o[k] !== undefined && o[k] !== null && String(o[k]).trim() !== '') return true;       }        // if lines array exists and has at least one line with some non-empty field -> accept       if (Array.isArray(o.lines) && o.lines.length) {         for (const ln of o.lines) {           if (!ln) continue;           if ( (ln.description && String(ln.description).trim() !== '') ||                (ln.amount && String(ln.amount).trim() !== '') ||                (ln.id && String(ln.id).trim() !== '') ) return true;         }       }        // fallback: if object has more than one non-empty key -> accept       const nonEmptyKeys = Object.keys(o).filter(k => {         try { return o[k] !== null && o[k] !== undefined && String(o[k]).trim() !== ''; } catch(e){ return false; }       });       if (nonEmptyKeys.length > 1) return true;        return false;     }      if (isMeaningful(obj)) {       // ask the populate watcher to run (if available), else run a safe local populate       if (window.RC_forcePopulateSummaryModal) {         try { window.RC_forcePopulateSummaryModal(); } catch(e){ console.warn('RC_forcePopulateSummaryModal failed', e); }       } else {         // try to populate basic fields if populate function not present         try {           if (typeof populateSummaryModal === 'function') try { populateSummaryModal(obj); } catch(_) {}         } catch(_) {}       }        if (modal) if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }     } else {       // ensure modal remains hidden on load       if (modal) modal.style.display = 'none';     }   } catch(e){     console.warn('startup populate summary failed', e);   } });      // This expects rows to have 'input[type="radio"][name="active_name"]' and row id pattern cred-row-<name>   document.querySelectorAll('tr[id^="cred-row-"]').forEach(tr=>{     tr.addEventListener('dblclick', function(e){       try {         const radio = tr.querySelector('input[type="radio"][name="active_name"]');         if(radio){           radio.checked = true;           // also give visual feedback (optional)           tr.classList.add('bg-gray-100');           setTimeout(()=>tr.classList.remove('bg-gray-100'), 600);         }       } catch(err){ console.warn('dblclick select radio failed', err); }     });   });  });  // === DEBUG SNIPPET: paste near end of your existing scripts === (function(){   function safeLog(...a){ try{ console.log('[RC-DEBUG]', ...a); }catch(e){} }    // Global JS error catcher   window.addEventListener('error', function(e){     safeLog('Window error', e.message, e.filename + ':' + e.lineno, e.error);   });   window.addEventListener('unhandledrejection', function(ev){     safeLog('Unhandled promise rejection', ev.reason);   });    // Watch important DOM elements existence   function checkDom(){     const names = [       'markSearchForm','useReceiptsSwitch','scrapeUrlInput',       'summaryModal','summaryJsonInput','saveSummaryForm',       'scrapeUrlField','scrapeCategoryField','scrapeForceField'     ];     const out = {};     names.forEach(n => out[n] = !!document.getElementById(n));     safeLog('DOM presence', out);   }   document.addEventListener('DOMContentLoaded', function(){ checkDom(); });    // Hook markSearchForm submit   const msf = document.getElementById('markSearchForm');   if(msf){     msf.addEventListener('submit', function(e){       try{         const useReceipts = !!(document.getElementById('useReceiptsSwitch') && document.getElementById('useReceiptsSwitch').checked);         safeLog('markSearchForm.submit fired', 'useReceipts=', useReceipts, 'mark=', (document.getElementById('markInput')?.value||''), 'urlInput=', (document.getElementById('scrapeUrlInput')?.value||''));       }catch(err){ safeLog('submit hook error', err); }     }, true);   } else safeLog('markSearchForm NOT FOUND');    // Hook receipts switch changes   const rs = document.getElementById('useReceiptsSwitch');   if(rs){     rs.addEventListener('change', function(e){       safeLog('useReceiptsSwitch change, checked=', rs.checked);       // show/hide created url input for visibility       const ui = document.getElementById('scrapeUrlInput');       if(ui) ui.style.outline = rs.checked ? '2px solid orange' : 'none';     });   } else safeLog('useReceiptsSwitch NOT FOUND');    // Monitor fetch to /api/scrape_receipt by wrapping fetch (only for debugging)   const origFetch = window.fetch;   window.fetch = async function(resource, init){     try{       if(typeof resource === 'string' && resource.indexOf('/api/scrape_receipt') !== -1){         safeLog('FETCH -> /api/scrape_receipt called', resource, init && init.body ? (init.body.length>100 ? init.body.slice(0,100)+'...' : init.body) : init);       }       if(typeof resource === 'string' && resource.indexOf('/api/confirm_receipt') !== -1){         safeLog('FETCH -> /api/confirm_receipt called', resource, init && init.body ? (function(){ try { return JSON.parse(init.body); } catch(e){ return init.body; } })() : init);         // Visual cue: flash border on modal         const m = document.getElementById('summaryModal');         if(m) { m.style.outline = '4px dashed lime'; setTimeout(()=>{ if(m) m.style.outline=''; }, 1200); }       }     }catch(e){ safeLog('fetch-wrap log failed', e); }     return origFetch.apply(this, arguments);   };    // Hook the saveSummaryForm submit (the interceptor should already exist in your code)   const ssf = document.getElementById('saveSummaryForm');   if(ssf){     ssf.addEventListener('submit', function(e){       try{         // show current fields         const summaryVal = (document.getElementById('summaryJsonInput')?.value) || null;         const scrapeUrl = document.getElementById('scrapeUrlField')?.value || null;         const scrapeCat = document.getElementById('scrapeCategoryField')?.value || null;         const scrapeForce = document.getElementById('scrapeForceField')?.value || null;         safeLog('saveSummaryForm.submit (intercept) summaryPresent=', !!summaryVal, 'scrapeUrl=', scrapeUrl, 'scrapeCat=', scrapeCat, 'scrapeForce=', scrapeForce);         // also pretty-print JSON if small         if(summaryVal){           try { safeLog('summary JSON', JSON.parse(summaryVal)); } catch(e){ safeLog('summary raw', summaryVal.slice(0,500)); }         }       }catch(err){ safeLog('saveSummaryForm submit hook error', err); }     }, true);   } else safeLog('saveSummaryForm NOT FOUND');    // When modal is shown/hidden, log it   const observer = new MutationObserver(function(muts){     try{       const modal = document.getElementById('summaryModal');       if(modal){         const style = window.getComputedStyle(modal);         if(style.display !== 'none'){           safeLog('summaryModal is visible');         } else {           // optional: safeLog('summaryModal is hidden');         }       }     }catch(e){ safeLog('mutation observer err', e); }   });   observer.observe(document.documentElement || document.body, { attributes: true, childList: true, subtree: true });    // Periodic sanity check: print whether modal and form are present every 2s for 6 checks   let checks = 0;   const interval = setInterval(function(){     checks++;     const present = {       modal: !!document.getElementById('summaryModal'),       summaryInput: !!document.getElementById('summaryJsonInput'),       saveForm: !!document.getElementById('saveSummaryForm'),       urlField: !!document.getElementById('scrapeUrlField')     };     safeLog('periodic-dom-check', present);     if(checks>6) clearInterval(interval);   }, 2000);    safeLog('RC-DEBUG injected'); })(); (function(){   function getSummaryData(){     const input = document.getElementById('summaryJsonInput');     if(!input) return null;     try {       const data = JSON.parse(input.value || '{}');       if(!Array.isArray(data.lines)) data.lines = [];       return { input, data };     } catch(e) {       return { input, data: { lines: [] } };     }   }    function saveSummaryData(obj){     if(!obj || !obj.input) return;     obj.input.value = JSON.stringify(obj.data);   }    // Click on category buttons (delegation)   document.addEventListener('click', function(ev){     const btn = ev.target.closest && ev.target.closest('.category-btn');     if(!btn) return;     ev.preventDefault();     // prevent other handlers (the "other modal" that opened)     try { ev.stopImmediatePropagation(); } catch(e){}     try { ev.stopPropagation(); } catch(e){}      const lid = btn.dataset.lineId || (btn.closest('[data-line-id]') && btn.closest('[data-line-id]').dataset.lineId) || '';     const cat = btn.dataset.cat || '';     if(!lid) return;      const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }      // toggle: if already set -> clear, else set     line.category = (String(line.category || '') === String(cat)) ? '' : String(cat);      // update button classes for that line     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.toggle('bg-sky-600', (b.dataset.cat === line.category));       b.classList.toggle('text-white', (b.dataset.cat === line.category));     });      // also update corresponding select if present     const sel = document.querySelector('select.expense-category[data-line-id="'+CSSescape(lid)+'"]');     if(sel) try { sel.value = line.category || ''; } catch(e){}      saveSummaryData(state);   }, true);    // change on line-selects   document.addEventListener('change', function(ev){     const sel = ev.target;     if(!sel || !sel.matches || !sel.matches('select.expense-category')) return;     const lid = sel.dataset.lineId || (sel.closest('[data-line-id]') && sel.closest('[data-line-id]').dataset.lineId) || '';     if(!lid) return;     const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }     line.category = String(sel.value || '');     // update any buttons     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.toggle('bg-sky-600', (b.dataset.cat === line.category));       b.classList.toggle('text-white', (b.dataset.cat === line.category));     });     saveSummaryData(state);   }, true);    // clear button (if exists)   document.addEventListener('click', function(ev){     const cb = ev.target.closest && ev.target.closest('#clearCategory');     if(!cb) return;     ev.preventDefault();     try { ev.stopImmediatePropagation(); } catch(e){}     const container = cb.closest('[data-line-id]') || document;     const lid = container && container.dataset && container.dataset.lineId ? container.dataset.lineId : '';     if(!lid) return;     const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }     line.category = '';     // update UI     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.remove('bg-sky-600','text-white');     });     const sel = document.querySelector('select.expense-category[data-line-id="'+CSSescape(lid)+'"]');     if(sel) sel.value = '';     saveSummaryData(state);   }, true);    // Ensure hidden input is up-to-date before normal form submit   const saveForm = document.getElementById('saveSummaryForm');   if(saveForm){     saveForm.addEventListener('submit', function(ev){       // just ensure input is stringified (handlers already update it live)       const s = getSummaryData();       if(s) saveSummaryData(s);       // allow normal submit (server-side will persist)     });   }    // small CSS.escape fallback used above   function CSSescape(s){     if(window.CSS && CSS.escape) return CSS.escape(s);     return String(s).replace(/([ #;?%&,.+*~\':"!^$[\]()=>|\/@])/g,'\\$1');   } })();  (function RC_AUTO_INJECT_SUMMARY_MODAL(){   try {     console.log('[RC-DEBUG] periodic-dom-check starting');      function exists(id){ return !!document.getElementById(id); }      const needs = {       modal: exists('summaryModal'),       summaryInput: exists('summaryJsonInput'),       saveForm: exists('saveSummaryForm'),       urlField: exists('scrapeUrlField')     };     console.log('[RC-DEBUG] DOM presence (before inject)', needs);      if (needs.modal && needs.summaryInput && needs.saveForm) {       console.log('[RC-DEBUG] All required DOM elements present, no injection needed');       return;     }      // Build modal HTML (minimal, matches server-side expected IDs)     const modalHtml = ` <div id="summaryModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">   <div class="bg-white rounded-lg shadow-lg w-full max-w-6xl p-6">     <div class="flex justify-between items-center mb-4">       <h3 class="text-lg font-semibold">Περίληψη Παραστατικού - <span id="summaryModalMark">MARK</span></h3>       <button id="modalCloseX" class="text-gray-500 text-xl font-bold">✕</button>     </div>      <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">       <div><strong>Α/Α Παραστατικού</strong><div id="summary_AA"></div></div>       <div><strong>ΑΦΜ</strong><div id="summary_AFM"></div></div>       <div><strong>Επωνυμία</strong><div id="summary_Name"></div></div>       <div><strong>Ημερομηνία</strong><div id="summary_issueDate"></div></div>       <div><strong>Τύπος Παραστατικού</strong><div id="summary_type_name"></div></div>       <div><strong>Καθαρή Αξία</strong><div id="summary_totalNetValue"></div></div>       <div><strong>ΦΠΑ</strong><div id="summary_totalVatAmount"></div></div>       <div><strong>Σύνολο</strong><div id="summary_totalValue"></div></div>     </div>      <h4 class="font-medium mt-4 mb-2">Γραμμές Παραστατικού (για χαρακτηρισμό)</h4>     <div id="summaryLinesContainer" class="overflow-auto max-h-96 border rounded p-2"></div>      <div class="mt-4 flex justify-between items-center">       <div class="text-sm text-gray-600">Σημείωση: οι κατηγορίες προέρχονται από τα settings του πελάτη.</div>       <div class="flex justify-end gap-2">         <form method="POST" action="{{ url_for('save_summary') }}" id="saveSummaryForm">           <input type="hidden" name="summary_json" id="summaryJsonInput" value='{}'>           <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση στο Cache</button>           <input type="hidden" id="scrapeUrlField" name="scrape_url" value="">           <input type="hidden" id="scrapeCategoryField" name="scrape_category" value="">           <input type="hidden" id="scrapeForceField" name="scrape_force" value="false">         </form>         <button id="modalCloseBtn" class="px-3 py-2 border rounded">Κλείσιμο</button>       </div>     </div>   </div> </div>`.trim();      // Inject into document.body     const wrapper = document.createElement('div');     wrapper.innerHTML = modalHtml;     // append at end of body so it does not break layout     document.body.appendChild(wrapper.firstChild);      // wire close buttons to hide modal (same behavior as original)     function hideModal(){       const m = document.getElementById('summaryModal');       if (m) m.style.display = 'none';       try { history.replaceState(null, '', location.pathname + (location.search || '') + location.hash); } catch(e){}     }     document.getElementById('modalCloseX')?.addEventListener('click', hideModal);     document.getElementById('modalCloseBtn')?.addEventListener('click', hideModal);      // Re-check presence     const needs_after = {       modal: exists('summaryModal'),       summaryInput: exists('summaryJsonInput'),       saveForm: exists('saveSummaryForm'),       urlField: exists('scrapeUrlField')     };     console.log('[RC-DEBUG] DOM presence (after inject)', needs_after);     console.log('[RC-DEBUG] Auto-injection done — the client flow should now find the modal and form.');    } catch (e) {     console.error('[RC-DEBUG] auto-inject error', e);   } })(); (function RC_POPULATE_SUMMARY_MODAL(){   try {     console.log('[RC-DEBUG] summary-populate init');      const summaryInput = document.getElementById('summaryJsonInput');     const modal = document.getElementById('summaryModal');     const markEl = document.getElementById('summaryModalMark');     const aaEl = document.getElementById('summary_AA');     const afmEl = document.getElementById('summary_AFM');     const nameEl = document.getElementById('summary_Name');     const issueEl = document.getElementById('summary_issueDate');     const typeEl = document.getElementById('summary_type_name');     const netEl = document.getElementById('summary_totalNetValue');     const vatEl = document.getElementById('summary_totalVatAmount');     const totEl = document.getElementById('summary_totalValue');     const linesContainer = document.getElementById('summaryLinesContainer');      if (!summaryInput) {       console.warn('[RC-DEBUG] summaryJsonInput NOT FOUND — modal will not populate');       return;     }     if (!modal) {       console.warn('[RC-DEBUG] summaryModal NOT FOUND — abort populate watcher');       return;     }      let lastVal = '';     function safeText(node, v){       if(!node) return;       node.textContent = (v === null || v === undefined) ? '' : String(v);     }      function renderLines(lines){       if(!linesContainer) return;       linesContainer.innerHTML = '';       if(!Array.isArray(lines) || lines.length === 0){         const p = document.createElement('div'); p.className = 'p-2 text-sm text-gray-600'; p.textContent = 'Δεν βρέθηκαν γραμμές.';         linesContainer.appendChild(p);         return;       }        // build a small table       const tbl = document.createElement('table');       tbl.className = 'w-full text-sm';       tbl.style.borderCollapse = 'collapse';       const thead = document.createElement('thead');       thead.innerHTML = '<tr><th class="p-1 border text-left">#</th><th class="p-1 border text-left">Περιγραφή</th><th class="p-1 border text-right">Ποσό</th><th class="p-1 border text-right">ΦΠΑ</th></tr>';       tbl.appendChild(thead);       const tbody = document.createElement('tbody');       lines.forEach((ln, idx) => {         const tr = document.createElement('tr');         tr.innerHTML = `<td class="p-1 border text-left">${idx+1}</td>                         <td class="p-1 border text-left">${(ln.description||ln.desc||'').toString().slice(0,200)}</td>                         <td class="p-1 border text-right">${ln.amount||ln.lineTotal||''}</td>                         <td class="p-1 border text-right">${ln.vat||ln.vatRate||''}</td>`;         tbody.appendChild(tr);       });       tbl.appendChild(tbody);       linesContainer.appendChild(tbl);     }      function populateOnce(){       try {         const v = (summaryInput.value || '').trim();         if (!v) {           // nothing to show           return;         }         if (v === lastVal) return;         lastVal = v;         let obj = {};         try { obj = JSON.parse(v); } catch(err){           console.warn('[RC-DEBUG] failed parsing summaryJsonInput JSON', err, v);           return;         }         console.log('[RC-DEBUG] populate modal from summary JSON', obj);          safeText(markEl, obj.mark || obj.MARK || (obj.raw && obj.raw.MARK) || '');         safeText(aaEl, obj.AA || obj.aa || obj.progressive_aa || (obj.raw && obj.raw.progressive_aa) || '');         safeText(afmEl, obj.AFM_issuer || obj.AFM || obj.issuer_vat || (obj.raw && obj.raw.issuer_vat) || '');         safeText(nameEl, obj.Name || obj.Name_issuer || obj.issuer_name || (obj.raw && obj.raw.issuer_name) || '');         safeText(issueEl, obj.issueDate || obj.issue_date || (obj.raw && obj.raw.issue_date) || '');         safeText(typeEl, obj.type_name || obj.type || (obj.raw && obj.raw.doc_type) || '');         safeText(netEl, obj.totalNetValue || obj.total_amount || obj.totalValue || (obj.raw && obj.raw.total_amount) || '');         safeText(vatEl, obj.totalVatAmount || (obj.raw && obj.raw.totalVatAmount) || '');         safeText(totEl, obj.totalValue || obj.total_amount || (obj.raw && obj.raw.total_amount) || '');          // lines         let lines = [];         if (Array.isArray(obj.lines) && obj.lines.length) lines = obj.lines;         else if (obj.raw && Array.isArray(obj.raw.lines) && obj.raw.lines.length) lines = obj.raw.lines;         else if (obj.lines && typeof obj.lines === 'object') {           // sometimes backend sends object: try to collect values           try {             lines = Object.values(obj.lines).filter(x => x);           } catch(e){}         }         renderLines(lines);          // if modal is hidden, ensure it's visible when populate invoked by scraper flow         try {           if (modal && modal.style.display === 'none') {             if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }           }         } catch(e){}        } catch(e){         console.error('[RC-DEBUG] populateOnce error', e);       }     }      // Start polling for changes to summaryJsonInput.value     const poll = setInterval(populateOnce, 250);      // Also populate when modal opens (observe style attribute)     const obs = new MutationObserver(muts => {       for(const m of muts){         if (m.type === 'attributes' && m.attributeName === 'style'){           try { if (modal.style.display !== 'none') populateOnce(); } catch(e){}         }       }     });     try { obs.observe(modal, { attributes: true, attributeFilter: ['style'] }); } catch(e){}      // expose a debug function on window to force populate     window.RC_forcePopulateSummaryModal = populateOnce;      console.log('[RC-DEBUG] summary-populate watcher started');      // Optional: stop polling after N seconds to be tidy     setTimeout(()=>{ clearInterval(poll); console.log('[RC-DEBUG] stopped summary-populate polling (timeout)'); }, 60*1000);    } catch (err) {     console.error('[RC-DEBUG] summary-populate init failed', err);   } })();  (function RC_FORCE_MODAL_GUARD(){   try {     const dbg = (...a) => { try { console.log('[RC-MODAL-GUARD]', ...a); } catch(e) {} };      function parseSummary() {       const el = document.getElementById('summaryJsonInput');       if (!el) return {};       try { return JSON.parse(el.value || '{}') || {}; } catch(e){ dbg('parseSummary JSON error', e); return {}; }     }      function hasMeaningfulSummary(obj) {       if (!obj || typeof obj !== 'object') return false;       // important single fields that guarantee modal should open       const keys = ['mark','MARK','AFM_issuer','AFM','totalValue','totalNetValue','total_amount','issueDate','issue_date','progressive_aa','AA'];       for (const k of keys) {         if (obj[k] !== undefined && obj[k] !== null && String(obj[k]).trim() !== '') return true;       }       // check raw.* fields if present       if (obj.raw && typeof obj.raw === 'object') {         for (const k of ['MARK','issuer_vat','total_amount','issue_date','progressive_aa']) {           if (obj.raw[k] !== undefined && obj.raw[k] !== null && String(obj.raw[k]).trim() !== '') return true;         }       }       // lines array with at least one non-empty line       if (Array.isArray(obj.lines) && obj.lines.length) {         for (const ln of obj.lines) {           if (!ln) continue;           if ((ln.description && String(ln.description).trim() !== '') ||               (ln.amount && String(ln.amount).trim() !== '') ||               (ln.id && String(ln.id).trim() !== '')) return true;         }       }       // fallback: object with >1 non-empty keys       const nonEmpty = Object.keys(obj).filter(k=>{         try { return obj[k] !== null && obj[k] !== undefined && String(obj[k]).trim() !== ''; } catch(e){ return false; }       });       return nonEmpty.length > 1;     }      function ensureModalHiddenUnlessMeaningful() {       const modal = document.getElementById('summaryModal');       const summaryEl = document.getElementById('summaryJsonInput');       if (!modal || !summaryEl) { dbg('no modal/summaryEl present'); return; }        // Force-hide now (neutralize server/client auto-show)       try { modal.style.display = 'none'; } catch(_) {}        // If summary becomes meaningful, show it (and populate watcher should fill fields)       const checkAndMaybeShow = () => {         const obj = parseSummary();         if (hasMeaningfulSummary(obj)) {           dbg('summary meaningful -> showing modal', obj);           try {             // try to trigger your populate logic if present             if (window.RC_forcePopulateSummaryModal) {               try { window.RC_forcePopulateSummaryModal(); } catch(e){ dbg('RC_forcePopulateSummaryModal failed', e); }             } else if (typeof populateSummaryModal === 'function') {               try { populateSummaryModal(obj); } catch(e){ dbg('populateSummaryModal failed', e); }             }             if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }           } catch(e){ dbg('show modal failed', e); }         } else {           // keep hidden           dbg('summary not meaningful -> keep modal hidden');           try { modal.style.display = 'none'; } catch(_) {}         }       };        // run immediate check after tiny delay (let other init finish)       setTimeout(checkAndMaybeShow, 60);        // observe changes to summaryJsonInput.value (detect writes by other code)       try {         let lastVal = summaryEl.value || '';         const poll = setInterval(() => {           try {             const cur = summaryEl.value || '';             if (cur !== lastVal) {               lastVal = cur;               dbg('summaryJsonInput changed -> recheck');               checkAndMaybeShow();             }           } catch(e){ dbg('poll error', e); }         }, 200);         // auto-stop polling after 60s         setTimeout(()=>clearInterval(poll), 60*1000);       } catch(e){ dbg('poll install failed', e); }        // observe modal style changes by others: if someone tries to open it while summary not meaningful, immediately hide       try {         const mo = new MutationObserver(muts => {           try {             const obj = parseSummary();             if (!hasMeaningfulSummary(obj)) {               const modalEl = document.getElementById('summaryModal');               if (modalEl) {                 const disp = window.getComputedStyle(modalEl).display;                 if (disp !== 'none') {                   dbg('modal was opened by other code while summary not meaningful -> hiding it');                   modalEl.style.display = 'none';                 }               }             }           } catch(e){ dbg('mutation observer callback error', e); }         });         const modalNode = document.getElementById('summaryModal');         if (modalNode) mo.observe(modalNode, { attributes: true, attributeFilter: ['style', 'class'] });       } catch(e){ dbg('mutation observer install failed', e); }     }      // Run after DOM ready (also run if DOM already ready)     if (document.readyState === 'loading') {       document.addEventListener('DOMContentLoaded', ensureModalHiddenUnlessMeaningful);     } else {       setTimeout(ensureModalHiddenUnlessMeaningful, 10);     }      dbg('RC_FORCE_MODAL_GUARD installed');   } catch(err) {     try { console.error('[RC-MODAL-GUARD] init failed', err); } catch(e){}   } })();  document.addEventListener('click', function(ev){   const btn = ev.target.closest('.category-btn');   if(!btn) return;    // 1) Αποτροπή bubbling για να μην ανοίγει άλλο modal   ev.preventDefault();   try { ev.stopImmediatePropagation(); } catch(e){}   try { ev.stopPropagation(); } catch(e){}    // 2) Ενημέρωση κουμπιών (UI)   const lineId = btn.dataset.lineId;   const cat = btn.dataset.cat;   const siblings = btn.parentElement.querySelectorAll('.category-btn');   siblings.forEach(s => s.classList.remove('bg-sky-600','text-white'));   btn.classList.add('bg-sky-600','text-white');    // 3) Ενημέρωση του select για compatibility   const sel = document.querySelector('select.expense-category[data-line-id="'+lineId+'"]');   if(sel) sel.value = cat;    // 4) Ενημέρωση του hidden JSON input   const input = document.getElementById('summaryJsonInput');   if(!input) return;   let data = {};   try { data = JSON.parse(input.value || '{}'); } catch(e){ data = {}; }    // Ensure lines array exists   if(!Array.isArray(data.lines)) data.lines = [];    // Update or add line   let line = data.lines.find(l => String(l.id || l.line_id || '') === lineId);   if(!line){     line = {id: lineId};     data.lines.push(line);   }   line.category = cat; // <--- εδώ γράφεται η κατηγορία    // Save back   input.value = JSON.stringify(data); });  document.querySelectorAll('.category-btn').forEach(btn=>{   btn.addEventListener('click', function(ev){     ev.preventDefault(); // δεν χρειάζεται stopPropagation      const lineId = this.dataset.lineId;     const cat = this.dataset.cat;      // Αποτύπωση UI     const siblings = this.parentElement.querySelectorAll('.category-btn');     siblings.forEach(s => s.classList.remove('bg-sky-600','text-white'));     this.classList.add('bg-sky-600','text-white');      // Ενημέρωση select για συμβατότητα     const sel = document.querySelector('select.expense-category[data-line-id="'+lineId+'"]');     if(sel) sel.value = cat;      // Ενημέρωση summaryJsonInput     const input = document.getElementById('summaryJsonInput');     if(!input) return;     let data = {};     try { data = JSON.parse(input.value || '{}'); } catch(e){ data={}; }     if(!Array.isArray(data.lines)) data.lines = [];     let line = data.lines.find(l => String(l.id||l.line_id||'')===lineId);     if(!line){       line = {id: lineId};       data.lines.push(line);     }     line.category = cat;     input.value = JSON.stringify(data);      // !!! Σημαντικό: μην καλείς stopPropagation εδώ !!!     // Άλλο modal handler θα πρέπει να φιλτράρει ποιο στοιχείο το ενεργοποιεί   }); }); document.addEventListener('click', function(ev){   // Αν το click προέρχεται από κουμπί category, αγνόησε   if(ev.target.closest('.category-btn')) return;    // άλλος κώδικας που ανοίγει modal });      // === Frontend patch: enrich delete_invoices POST + clear client-side cache === document.addEventListener('submit', function(ev){   try{     const form = ev.target;     if(!form || !form.action) return;     // Match delete_invoices endpoint (relative or absolute)     const a = document.createElement('a'); a.href = form.action;     const path = (a.pathname || '') + (a.search || '');     if(!/delete_invoices/.test(path)) return;      // 1) Ensure active_vat is posted     const existingHv = form.querySelector('input[name="active_vat"]');     if(!existingHv){       const hv = document.createElement('input');       hv.type = 'hidden';       hv.name = 'active_vat';       const activeVat = (document.querySelector('#vatSelector')?.value                       || document.querySelector('[name="vat"]')?.value                       || document.body.dataset.activeVat                       || '').toString().trim();       hv.value = activeVat;       form.appendChild(hv);     }      // 2) Collect marks to delete     let marks = Array.from(form.querySelectorAll('input[name="delete_mark"]')).map(i => (i.value||'').trim()).filter(Boolean);     if(!marks.length){       marks = Array.from(document.querySelectorAll('input[name="delete_mark"]:checked')).map(i => (i.value||'').trim()).filter(Boolean);     }      // 3) Clear client-side caches (localStorage keys that reference these MARKs)     try{       marks.forEach(mk => {         // common per-mark keys         localStorage.removeItem(`epsilon_summary_${mk}`);         localStorage.removeItem(`EPSILON:INV:${mk}`);       });       // any key containing one of the marks       for(let i=localStorage.length-1; i>=0; i--){         const k = localStorage.key(i);         if(!k) continue;         if(marks.some(mk => k.includes(mk))){           localStorage.removeItem(k);         }       }       // also clear any prefilled summary hidden input to avoid stale reopen       const sumInp = document.getElementById('summaryJsonInput');       if(sumInp) sumInp.value = '';     }catch(e){ /* ignore storage errors */ }    }catch(err){     console.warn('delete_invoices frontend patch failed', err);   } }, true); (function receiptsRepeatModalGuard(){   const once = { submitted:false };    function qs(id){ return document.getElementById(id); }    function readSummary(){     try { return JSON.parse(qs('summaryJsonInput')?.value || '{}'); }     catch(_) { return {}; }   }    function isMeaningfulSummary(o){     try{       if (!o || typeof o!=='object') return false;       const mark = String(o.mark || o.MARK || '').trim();       if (!mark || mark.length<6) return false;       const lines = Array.isArray(o.lines) ? o.lines : [];       if (lines.length===0) return false;       return lines.some(l=>{         if(!l) return false;         const desc=(l.description||l.desc||'').toString().trim();         const amt =(l.amount||l.lineTotal||l.total||'').toString().trim();         const id  =(l.id||l.line_id||'').toString().trim();         return !!(desc||amt||id);       });     }catch(_){ return false; }   }    function isReceiptSummary(o){     try{       const t = (o.type_name || o.type || '').toString().toLowerCase();       const c = (o.category || o.characteristic || o['χαρακτηρισμός'] || '').toString().toLowerCase();       return !!(o.is_receipt || t.includes('απόδει') || t.includes('receipt') || t.includes('λιαν') || c==='αποδειξακια');     }catch(_){ return false; }   }    function forceEdit(){     try { return new URLSearchParams(location.search).get('force_edit') === '1'; }     catch(_){ return false; }   }    function shouldOpenSummaryModal(obj){     const receiptsOn = !!(qs('useReceiptsSwitch') && qs('useReceiptsSwitch').checked);     const repeatOn   = !!(qs('repeatEntrySwitch') && qs('repeatEntrySwitch').checked);     // Αν είμαστε σε αποδείξεις (ή το summary είναι απόδειξη) και repeat ON και ΔΕΝ είναι reclassification -> ΜΗΝ ανοίξεις modal     if ((receiptsOn || isReceiptSummary(obj)) && repeatOn && !forceEdit()) return false;     return true;   }    function autoSubmitReceipt(obj){     if (once.submitted) return;                       // το στείλαμε ήδη σε αυτόν τον κύκλο     if (!isMeaningfulSummary(obj)) return;            // ασφαλιστική δικλείδα     const mark = (obj.mark || obj.MARK || '').toString().trim();     if (!mark) return;     const key = 'rc-auto:' + mark;     if (sessionStorage.getItem(key)) return;          // ήδη υποβλήθηκε μετά από reload      // Επέβαλε “Αποδειξάκια”     try{       if (!Array.isArray(obj.lines)) obj.lines = [];       obj.is_receipt = true;       obj.category = 'αποδειξακια';       obj.characteristic = 'αποδειξακια';       obj['χαρακτηρισμός'] = 'αποδειξακια';       qs('summaryJsonInput').value = JSON.stringify(obj);     }catch(_){}      const form = qs('saveSummaryForm');     if (!form) return;     once.submitted = true;     sessionStorage.setItem(key,'1');                 // ώστε στο επόμενο reload να ΜΗΝ ξαναστείλει     form.submit();   }    // Φρένο: ΜΗΝ υποβάλλεις την search-form χωρίς mark KAI χωρίς url   (function guardEmptySearchSubmit(){     const form = qs('markSearchForm');     if (!form) return;     form.addEventListener('submit', (e)=>{       const mark = (qs('markInput')?.value || '').trim();       const url  = (qs('scrapeUrlInput')?.value || '').trim();       if (!mark && !url) e.preventDefault();     }, true);   })();    // Παρακολούθησε το modal: αν πάει να ανοίξει ενώ ΔΕΝ πρέπει, κλείστο και κάνε auto-submit   const modal = qs('summaryModal');   if (!modal) return;    const observer = new MutationObserver(function(){     try{       const visible = modal && getComputedStyle(modal).display !== 'none';       if (!visible) return;       const obj = readSummary();       if (!shouldOpenSummaryModal(obj)) {         // Μπλόκαρε το modal και προχώρησε σε auto-submit         modal.style.display = 'none';         autoSubmitReceipt(obj);       }     }catch(_){}   });    try{     observer.observe(modal, { attributes:true, attributeFilter:['style','class'] });   }catch(_){}    // One-shot check αν τυχόν ξεκινά ήδη ανοιχτό   setTimeout(()=>{     try{       const visible = modal && getComputedStyle(modal).display !== 'none';       const obj = readSummary();       if (visible && !shouldOpenSummaryModal(obj)) {         modal.style.display = 'none';         autoSubmitReceipt(obj);       }     }catch(_){}   }, 80); })();  </script>  <style>     /* minimal styling for the toggle switch */     /* μόνο για modal */     .modal-summary-table th {         background-color: #0d6efd;         color: white;         border: 1px solid #ccc;     }      .modal-summary-table td {         border: 1px solid #e2e8f0;     }      .modal-summary-table tr:nth-child(even) {         background-color: #f9fafb;     }      .modal-summary-table tr:hover {         background-color: #e6f0ff;     }      .modal-summary-table tfoot td {         background-color: #f1f5f9;     }      /* κλείδωμα κλικ πίσω από modal */     .modal-backdrop {         position: fixed;         inset: 0;         background: rgba(0,0,0,.45);         z-index: 99998;     }      #summaryModal {         z-index: 99999;         position: fixed;         inset: 0;         display: none;         align-items: center;         justify-content: center;     }          #summaryModal.show {             display: flex;         }      body.modal-open #page-root {         pointer-events: none;     }     /* βάλε id=page-root στο κύριο wrapper της σελίδας */     body.modal-open #summaryModal,     body.modal-open #summaryModal * {         pointer-events: auto;     }      .toggle-switch {         width: 42px;         height: 24px;         -webkit-appearance: none;         appearance: none;         background: #e5e7eb;         border-radius: 999px;         position: relative;         outline: none;         cursor: pointer;         vertical-align: middle;     }          .toggle-switch:checked {             background: #0ea5a4;         }          .toggle-switch::after {             content: "";             position: absolute;             top: 3px;             left: 3px;             width: 18px;             height: 18px;             border-radius: 999px;             background: white;             transition: transform .15s ease;         }          .toggle-switch:checked::after {             transform: translateX(18px);         } </style>    <script>/* ===== Auto-submit segmented toggle + guarded auto-detect (receipts & invoices) ===== */ (function(){   try {     // Globals     window.__RC_FLAGS  = window.__RC_FLAGS  || {};     window.__RC_LOCKS  = window.__RC_LOCKS  || {};     const AUTO_KEY = 'rc:autoSubmitEnabled';      // UI refs (may be absent in some partial renders)     const form     = document.getElementById('markSearchForm');     const markEl   = document.getElementById('markInput');     const urlEl    = document.getElementById('scrapeUrlInput'); // may be dynamically created in your code     const btnOn    = document.getElementById('autoSubmitBtnOn');     const btnOff   = document.getElementById('autoSubmitBtnOff');     const receiptsSwitch = document.getElementById('useReceiptsSwitch');      // State helpers     function getAuto(){ try { return localStorage.getItem(AUTO_KEY) === '1'; } catch(_) { return false; } }     function setAuto(v){   try { localStorage.setItem(AUTO_KEY, v ? '1' : '0'); } catch(_) {}   window.__RC_FLAGS.auto_submit_enabled = !!v;   updateUi();    // reload με συγχρονισμό querystring   try {     const p = new URLSearchParams(location.search);     if (v) p.set('auto_submit','1'); else p.delete('auto_submit');     const newQS = p.toString();     const cur  = location.pathname + location.search;     const next = location.pathname + (newQS ? '?' + newQS : '');     if (next === cur) {       location.reload();          // αν δεν αλλάζει το URL, αναγκαστικό reload     } else {       location.search = newQS;    // αλλάζοντας το query κάνει reload μόνο του     }   } catch (e) {     location.reload();   } }      function updateUi(){       const on = getAuto();       if (btnOn && btnOff) {         btnOn.classList.toggle('bg-sky-600', on);         btnOn.classList.toggle('text-white', on);         btnOff.classList.toggle('bg-sky-600', !on);         btnOff.classList.toggle('text-white', !on);       }     }     updateUi();     if (btnOn)  btnOn.addEventListener('click', ()=> setAuto(true));     if (btnOff) btnOff.addEventListener('click', ()=> setAuto(false));      // Utilities     function isVisible(el){       if(!el) return false;       const cs = getComputedStyle(el);       return !(cs.display === 'none' || cs.visibility === 'hidden' || cs.opacity === '0');     }     function warningOpen(){       const ids = ['receiptWarn','afmWarningModal','receiptWarningModal','yearWarningModal'];       for (const id of ids){ const el = document.getElementById(id); if (el && isVisible(el)) return true; }       // generic: any visible dialog that is not the summary modal       const nodes = document.querySelectorAll('[role="dialog"],[aria-modal="true"],.modal,.modal-root');       for (const n of nodes){         if (!isVisible(n)) continue;         if (n.id === 'summaryModal' || n.id === 'receiptsModal') continue;         const t = (n.textContent || '').toLowerCase();         if (/\bπροειδοπ|\bπροσοχ|warning|σφάλμα|error/.test(t)) return true;       }       return false;     }      const normMark = v => (v||'').replace(/\D/g,'');     const isMark   = v => normMark(v).length === 15;     const isUrl    = v => {       const s = (v||'').trim();       return /^https?:\/\/\S+/i.test(s) || /^www\.\S+/i.test(s);     };     const extractMark = s => {       const m = String(s||'').match(/\b(\d{15})\b/);       return m ? m[1] : '';     };      function currentKey(){       const mv = (markEl && markEl.value) ? markEl.value.trim() : '';       const uv = (document.getElementById('scrapeUrlInput')?.value || '').trim(); // requery in case it was injected after       const receipts = !!(receiptsSwitch && receiptsSwitch.checked);        // For receipts: prefer a URL, but accept MARK inside URL as fallback       if (receipts) {         if (isUrl(uv)) return 'url:'+uv.replace(/\/+$/,'');         const ex = extractMark(uv); if (ex) return 'mark:'+ex;         // also allow mark typed in markInput if user didn't switch field         if (isMark(mv)) return 'mark:'+normMark(mv);         return null;       }        // For invoices: prefer MARK; but accept URL too       if (isMark(mv)) return 'mark:'+normMark(mv);       if (isUrl(mv)) return 'url:'+mv.replace(/\/+$/,'');       return null;     }      let pending = false;     const KEY_LAST = 'rc:lastSubmitKey';     const TTL_MS   = 20000;     function readLast(){       try {         const raw = sessionStorage.getItem(KEY_LAST);         if(!raw) return null;         const o = JSON.parse(raw);         if(!o || !o.ts || (Date.now()-o.ts)>TTL_MS) return null;         return o.k || null;       }catch(_){ return null; }     }     function writeLast(k){       try { sessionStorage.setItem(KEY_LAST, JSON.stringify({k, ts: Date.now()})); } catch(_) {}     }      const debounce = (fn,ms)=>{ let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a),ms); }; };      function trySubmit(){       if (!form || !getAuto()) return;       if (warningOpen()) return;       const k = currentKey();       if (!k) return;        // prevent collisions with existing receipts lock if present       if (window.__RC_LOCKS && window.__RC_LOCKS.scrape) return;        // prevent duplicate submits on same key       const last = readLast();       if (last && last === k) return;        // submit once       writeLast(k);       if (pending) return;       pending = true;       try {         if (form.requestSubmit) form.requestSubmit(); else form.submit();       } finally {         setTimeout(()=>{ pending=false; }, 500);       }     }      const onChange = debounce(trySubmit, 140);      // Wire inputs if present     if (markEl) {       markEl.addEventListener('input', onChange);       markEl.addEventListener('keyup', onChange);       markEl.addEventListener('paste', ()=>setTimeout(onChange,0));     }     // url input could be injected later; observe for appearance     let tries = 30;     const iv = setInterval(()=>{       const u = document.getElementById('scrapeUrlInput');       if (u) {         u.addEventListener('input', onChange);         u.addEventListener('keyup', onChange);         u.addEventListener('paste', ()=>setTimeout(onChange,0));         clearInterval(iv);       }       if(--tries<=0) clearInterval(iv);     }, 200);      // Initial pass (for browser autofill)     window.addEventListener('load', ()=> setTimeout(onChange, 60));      // Ensure a stub exists to avoid ReferenceError when other code calls it     if (typeof window.autoSubmitReceipt !== 'function') {       window.autoSubmitReceipt = function(){ /* stub to avoid ReferenceError; actual flow handled elsewhere */ };     }   } catch (err) {     console.warn('Auto-submit toggle patch failed', err);   } })();</script>  <script>/* === Persist Receipts/Invoices toggle across refresh === */ <script> /* === Persist Receipts/Invoices toggle across refresh (v2) === */ (function persistReceiptsToggle(){   const KEY = 'rc:useReceipts';   const sw  = document.getElementById('useReceiptsSwitch');   const markInput = document.getElementById('markInput');   function ensureUrlInput(){     let el = document.getElementById('scrapeUrlInput');     if (!el) {       // try to locate after markInput if dynamically created later by other code       el = document.createElement('input');       el.id = 'scrapeUrlInput';       el.placeholder = 'Εισάγετε URL παραστατικού (για αποδείξεις)';       el.className = 'p-2 border rounded w-2/4 hidden';       el.type = 'text';       if (markInput && markInput.parentElement) {         markInput.parentElement.insertBefore(el, markInput.nextSibling);       } else {         document.body.appendChild(el);       }     }     return el;   }   function applyUI(isReceipts){     const urlInput = ensureUrlInput();     if (isReceipts){       markInput && markInput.classList.add('hidden');       urlInput && urlInput.classList.remove('hidden');     } else {       markInput && markInput.classList.remove('hidden');       urlInput && urlInput.classList.add('hidden');     }   }    if (!sw) return;   // restore saved value   const saved = localStorage.getItem(KEY);   if (saved !== null) sw.checked = (saved === '1');   applyUI(sw.checked);    // if URL input appears later (other scripts), re-apply for a short window   let tries = 20;   const iv = setInterval(()=>{     applyUI(sw.checked);     if (--tries <= 0) clearInterval(iv);   }, 200);    sw.addEventListener('change', () => {     localStorage.setItem(KEY, sw.checked ? '1' : '0');     applyUI(sw.checked);   }); })();</script>  <script>/* === Lightweight warning detector (client/server modals) === */ (function ensureWarningOpenHelper(){   if (typeof window.__rc_warningOpen === 'function') return;   window.__rc_warningOpen = function(){     function vis(el){ if(!el) return false; const cs=getComputedStyle(el); return !(cs.display==='none'||cs.visibility==='hidden'||cs.opacity==='0'); }     const ids=['receiptWarn','afmWarningModal','receiptWarningModal','yearWarningModal'];     for (const id of ids){ const el=document.getElementById(id); if (el && vis(el)) return true; }     const nodes=document.querySelectorAll('[role="dialog"],[aria-modal="true"],.modal,.modal-root');     for (const n of nodes){       if (!vis(n)) continue;       if (n.id==='summaryModal' || n.id==='receiptsModal') continue;       const t=(n.textContent||'').toLowerCase();       if (/(προειδοπ|προσοχ|warning|σφάλμα|error)/.test(t)) return true;     }     return false;   }; })();</script>  <script> /* === RC helpers μόνο για flow Αποδείξεων === */ window.RC = window.RC || {};  RC.hasWarnings = function(){ return (typeof window.__rc_warningOpen === 'function') ? window.__rc_warningOpen() : false; };  RC.normalizeReceiptSummary = function (summaryObj) {   summaryObj.is_receipt = true;   summaryObj.type = summaryObj.type || 'ΑΠΟΔΕΙΞΗ';   summaryObj.type_name = summaryObj.type_name || 'ΑΠΟΔΕΙΞΗ';   summaryObj.category = 'αποδειξακια';   if (!Array.isArray(summaryObj.lines) || !summaryObj.lines.length) {     const tot = summaryObj.total_amount || summaryObj.totalValue || summaryObj.totalNetValue || '';     summaryObj.lines = [{ id:'r0', description:'', amount:String(tot||''), vat:'', vatCategory:'', category:'αποδειξακια' }];   } else {     summaryObj.lines = summaryObj.lines.map((l,i)=>({       id: String(l?.id || l?.line_id || ('r'+i)),       description: String(l?.description || l?.desc || ''),       amount: String(l?.amount || l?.lineTotal || l?.total || ''),       vat: String(l?.vat || l?.vatRate || ''),       vatCategory: String(l?.vatCategory || l?.vat_category || ''),       category: String(l?.category || '') || 'αποδειξακια'     }));   }   return summaryObj; };  RC.confirmReceiptOnce = async function(summaryObj, scrapeUrl){   window.__RC_LOCKS = window.__RC_LOCKS || {};   if (window.__RC_LOCKS.confirm) return { ok:false, reason:'locked' };   window.__RC_LOCKS.confirm = true;    try {     const VAT = "{{ vat or '' }}";     const afmVal = (VAT || summaryObj.AFM_issuer || summaryObj.AFM || (summaryObj.raw && summaryObj.raw.issuer_vat) || '').toString().trim();     if (!afmVal) return { ok:false, reason:'missing_afm' };      if (!/\b\d{15}\b/.test(String(summaryObj.mark||'').trim())) {       const r = await fetch('/api/next_receipt_mark', { credentials:'same-origin' });       const j = await r.json().catch(()=>null);       if (j && j.mark) summaryObj.mark = j.mark;     }      let yearVal = "{{ active_year|default('') }}";     if (!yearVal) {       try { const fy = await fetch('/get_fiscal_year', { credentials:'same-origin' }); const fyj = await fy.json(); if (fyj && fyj.exists) yearVal = String(fyj.fiscal_year); } catch(_){}     }     if (!yearVal) {       const any = summaryObj.issueDate || summaryObj.issue_date || (summaryObj.raw && summaryObj.raw.issue_date) || '';       const m = String(any).match(/\b(19|20)\d{2}\b/);       yearVal = m ? m[0] : String((new Date()).getUTCFullYear());     }      const payload = {       url: (scrapeUrl||'').trim(),       summary_json: JSON.stringify(summaryObj),       force: false,       category: 'αποδειξακια',       afm: afmVal,       year: String(yearVal),       mark: String(summaryObj.mark||'')     };      const res = await fetch('/api/confirm_receipt', {       method: 'POST',       credentials: 'same-origin',       headers: {'Content-Type':'application/json','X-Requested-With':'XMLHttpRequest'},       body: JSON.stringify(payload)     });     const jj = await res.json().catch(()=>null);     if (!res.ok || !jj || !jj.ok) return { ok:false, reason: (jj&&jj.error) || ('HTTP '+res.status) };      return { ok:true };   } finally {     window.__RC_LOCKS.confirm = false;   } };  RC.handleReceiptAfterScrape = async function(summaryObj, scrapeUrl){   try {     const repeatOn = !!document.getElementById('repeatEntrySwitch')?.checked;     const forceEdit = (typeof FORCE_EDIT !== 'undefined') ? !!FORCE_EDIT : false;     if (!repeatOn || forceEdit || RC.hasWarnings()) return false;      RC.normalizeReceiptSummary(summaryObj);     const summaryInput = document.getElementById('summaryJsonInput');     if (summaryInput) summaryInput.value = JSON.stringify(summaryObj);      const r = await RC.confirmReceiptOnce(summaryObj, scrapeUrl);     if (!r.ok) {       if (r.reason === 'missing_afm') {         window.openReceiptWarning && openReceiptWarning('Λείπει AFM ενεργού πελάτη.');       } else {         showFlash('Σφάλμα αποθήκευσης: ' + (r.reason || 'άγνωστο'), 'error', 6000);       }       return false;     }     window.__RC_FLAGS = window.__RC_FLAGS || {}; window.__RC_FLAGS.autoHandled = true;     showFlash('Αποθηκεύτηκε η απόδειξη (repeat).', 'success', 900);     try { document.getElementById('summaryModal').style.display = 'none'; } catch(_){}     try { document.getElementById('scrapeUrlInput').value = ''; } catch(_){}     try { document.getElementById('markInput').value = ''; } catch(_){}     window.location = window.location.pathname;     return true;   } catch (e) {     console.warn('handleReceiptAfterScrape failed', e);     return false;   } }; document.addEventListener('DOMContentLoaded', () => {   const params = new URLSearchParams(location.search);    const isReceipts =     (params.get('use_receipts') === '1') ||     (localStorage.getItem('pref_use_receipts') === '1');    const repeatOn =     (params.get('repeat') === '1') ||     (localStorage.getItem('pref_repeat') === '1');    const autoOn = params.has('auto_submit')     ? (params.get('auto_submit') === '1')     : (localStorage.getItem('pref_auto_submit') === '1');    if (!(isReceipts && repeatOn && autoOn)) return;    // 1) Κρύψε ό,τι modal επιβεβαίωσης υπάρχει για αποδείξεις   const hideModal = () => {     ['#receiptsModal', '#summaryModal', '[data-role="modal-warning"]', '#warningModal']       .forEach(sel => {         const el = document.querySelector(sel);         if (!el) return;         el.classList?.add('hidden');         el.style.display = 'none';       });   };   hideModal();    // 2) Βεβαιώσου ότι στο submit περνάει repeat_enabled=1   const ensureRepeatHidden = (form) => {     if (!form) return;     let h = form.querySelector('input[name="repeat_enabled"]');     if (!h) {       h = document.createElement('input');       h.type = 'hidden';       h.name = 'repeat_enabled';       form.appendChild(h);     }     h.value = '1';   };    // 3) Αυτόματο submit μόλις είναι έτοιμη η φόρμα/δεδομένα   let submitted = false;   const tryAutoSubmit = () => {     if (submitted) return;      // Βρες τη φόρμα αποθήκευσης     const form = document.querySelector('form[action$="/save_summary"]');     if (!form) return;      // Έλεγξε ότι υπάρχει payload: summary_json (input/textarea) ή τουλάχιστον το mark     const payloadEl = form.querySelector('input[name="summary_json"],textarea[name="summary_json"]');     const hasPayload = payloadEl ? String(payloadEl.value || '').trim().length > 0 : false;     const hasMark = String((form.querySelector('[name="mark"]') || {}).value || '').trim().length === 15;      if (!hasPayload && !hasMark) return;      ensureRepeatHidden(form);     submitted = true;     hideModal();     form.submit();   };    // Δοκίμασε άμεσα & με μικρό retry   tryAutoSubmit();   const i1 = setInterval(() => {     if (submitted) { clearInterval(i1); return; }     tryAutoSubmit();   }, 150);    // Παρακολούθησε DOM changes (όταν γεμίσει το modal/φόρμα από το fetch)   const mo = new MutationObserver(() => tryAutoSubmit());   mo.observe(document.body, { subtree: true, childList: true, attributes: false });    // Safety stop μετά από ~6s για να μην τρέχει για πάντα   setTimeout(() => mo.disconnect(), 6000); });  </script>  <script> /* === Receipts Repeat AutoSave (cache submit) — receipts-only, idempotent === */ (function(){   if (window.__rc_autosave_installed__) return;   window.__rc_autosave_installed__ = true;    function $id(id){ return document.getElementById(id); }   function lsGet(k,d){ try{ const v = localStorage.getItem(k); return v==null?d:v; }catch(_){ return d; } }   function lsSet(k,v){ try{ localStorage.setItem(k,v); }catch(_){ } }   function ssGet(k){ try{ return sessionStorage.getItem(k); }catch(_){ return null; } }   function ssSet(k,v){ try{ sessionStorage.setItem(k,v); }catch(_){ } }   function onceKey(mark){ return 'rc-cache:' + String(mark||'').trim(); }    function isReceipts(){ try{ var sw=$id('useReceiptsSwitch'); if (sw) return !!sw.checked; }catch(_){}                           return lsGet('UI:useReceipts','0')==='1'; }   function isRepeat(){   try{ var rsw=$id('repeatEntrySwitch'); if (rsw) return !!rsw.checked; }catch(_){}                           return lsGet('REPEAT:enabled','0')==='1'; }    function parseSummary(){     var el = $id('summaryJsonInput');     if (!el || !el.value || el.value === '{}' || el.value === 'null') return null;     try { return JSON.parse(el.value); } catch(_){ return null; }   }    function isReceiptSummary(s){     if (!s || typeof s!=='object') return false;     if (s.is_receipt === true) return true;     var t = String(s.type_name||s.type||'').toLowerCase();     if (t.includes('απόδει') || t.includes('receipt')) return true;     // fallback: when UI string shows "Λήφθηκε απόδειξη — ελέγξτε..."     var ui = String(s.ui_hint||'').toLowerCase();     if (ui.includes('λήφθηκε') && ui.includes('αποδεί')) return true;     return false;   }    function hasLines(s){ try{ return Array.isArray(s.lines) && s.lines.length>0; } catch(_){ return false; } }    function waitFor(fn, then, maxMs, step){     maxMs = maxMs || 6000; step = step || 120;     var waited = 0;     (function cycle(){       try{ if (fn()) { then(); return; } }catch(_){}       waited += step; if (waited >= maxMs) return;       setTimeout(cycle, step);     })();   }    function tryAutoSave(){     if (!isReceipts() || !isRepeat()) return;     var s = parseSummary();     if (!s || !isReceiptSummary(s) || !hasLines(s)) return;      var mark = String(s.mark || s.MARK || '').trim();     if (!mark) return;     if (ssGet(onceKey(mark))) return; // already submitted this cycle      var form = $id('saveSummaryForm');     if (!form) return;      // Normalize to αποδειξάκια before save, without touching invoices     try{       s.is_receipt = true;       s.category = s.category || 'αποδειξακια';       s.characteristic = s.characteristic || 'αποδειξακια';       if (!Array.isArray(s.lines)) s.lines = [];       s.lines = s.lines.map(function(l){ l=l||{}; l.category='αποδειξακια'; return l; });       $id('summaryJsonInput').value = JSON.stringify(s);     }catch(_){}      // Arm dedupe, keep receipts mode sticky     try { ssSet(onceKey(mark),'1'); } catch(_){}     lsSet('UI:useReceipts','1');      // Submit the cache form programmatically     try {       if (typeof form.requestSubmit === 'function') form.requestSubmit();       else form.submit();       // On navigation, allow next MARK to submit again       setTimeout(function(){ try{ ssSet(onceKey(mark), ''); }catch(_){} }, 2500);     } catch(e) {       console.warn('[RC-AUTOSAVE] submit failed', e);       try{ sessionStorage.removeItem(onceKey(mark)); }catch(_){}     }   }    document.addEventListener('DOMContentLoaded', function(){     // Reflect stored receipts state to the UI toggle early     try {       if (lsGet('UI:useReceipts','0')==='1') {         var sw = $id('useReceiptsSwitch');         if (sw && !sw.checked) { sw.checked = true; sw.dispatchEvent(new Event('change',{bubbles:true})); }       }     } catch(_){}      // Try immediately, microtask, and a short delay     tryAutoSave();     setTimeout(tryAutoSave, 0);     setTimeout(tryAutoSave, 300);      // Poll for hidden input changes produced by scraping     var el = $id('summaryJsonInput');     if (el){       var last = el.value;       setInterval(function(){         if (el.value !== last) { last = el.value; tryAutoSave(); }       }, 250);     }      // Re-run when receipts switch toggles on, or repeat toggles on     var r1 = $id('useReceiptsSwitch');     var r2 = $id('repeatEntrySwitch');     if (r1) r1.addEventListener('change', function(){ if (this.checked) setTimeout(tryAutoSave,10); });     if (r2) r2.addEventListener('change', function(){ if (this.checked) setTimeout(tryAutoSave,10); });      // When modal opens (if present), attempt again     var modal = $id('summaryModal');     if (modal && window.MutationObserver){       var mo = new MutationObserver(function(){ setTimeout(tryAutoSave, 20); });       try { mo.observe(modal, {attributes:true, childList:false, subtree:false}); } catch(_){}     }   }); })(); </script>  {% endblock %}  <!-- === BEGIN: Injected fix (v2) for receipts auto-flow & afm_epsilon cleanup === --> <script><script> /* RC-REPEAT-STATE bridge για Αποδείξεις & Τιμολόγια    - Διαβάζει το state από backend (/api/repeat_state/get) στην εκκίνηση    - Το περνάει και σε localStorage (REPEAT:enabled) & body dataset (data-repeat-enabled)    - Όταν αλλάζει ο διακόπτης repeatEntrySwitch, κάνει POST στο /api/repeat_state/set    - Στο submit της φόρμας αναζήτησης, κάνει ένα φρεσκάρισμα του state πριν τη ροή */ (function() {   const LS_KEY_REPEAT_ENABLED = 'REPEAT:enabled';    async function refreshRepeatState() {     try {       const r = await fetch('/api/repeat_state/get', { credentials: 'include' });       const j = await r.json();       const enabled = !!(j && j.ok && j.enabled);       localStorage.setItem(LS_KEY_REPEAT_ENABLED, enabled ? '1' : '0');       document.body.dataset.repeatEnabled = enabled ? '1' : '0';       window.REPEAT_ENABLED = enabled;        // συγχρόνισε και το switch αν υπάρχει       const sw = document.getElementById('repeatEntrySwitch');       if (sw) {         sw.checked = enabled;       }       console.debug('[RC-REPEAT-STATE] GET ->', { enabled });     } catch (e) {       console.warn('[RC-REPEAT-STATE] GET failed', e);     }   }    async function setRepeatEnabled(enabled) {     try {       const r = await fetch('/api/repeat_state/set', {         method: 'POST',         headers: { 'Content-Type': 'application/json' },         credentials: 'include',         body: JSON.stringify({ enabled: !!enabled })       });       const j = await r.json();       if (!j || !j.ok) throw new Error(j && j.error || 'unknown');       // persist τοπικά       localStorage.setItem(LS_KEY_REPEAT_ENABLED, enabled ? '1' : '0');       document.body.dataset.repeatEnabled = enabled ? '1' : '0';       window.REPEAT_ENABLED = !!enabled;       console.debug('[RC-REPEAT-STATE] SET ->', { enabled });     } catch (e) {       console.warn('[RC-REPEAT-STATE] SET failed', e);     }   }    // bootstrap: στην εκκίνηση   document.addEventListener('DOMContentLoaded', () => {     refreshRepeatState();     const sw = document.getElementById('repeatEntrySwitch');     if (sw) {       sw.addEventListener('change', function() {         setRepeatEnabled(this.checked);       });     }      // στο submit της αναζήτησης: κάνε ένα γρήγορο refresh για να «δει» σωστά το autosave των αποδείξεων     const form = document.getElementById('markSearchForm');     if (form) {       form.addEventListener('submit', () => {         // fire-and-forget, δεν μπλοκάρουμε το submit         refreshRepeatState();       });     }   }); })();</script>   (function(){   function isDetailed(x){     try{       if(!x || typeof x !== 'object') return false;       if (Array.isArray(x.lines) && x.lines.length) {         // any non-empty field in a line         for (const l of x.lines) {           if (l && (String(l.amount||'').trim() || String(l.description||'').trim() || String(l.vat||'').trim())) {             return true;           }         }       }       if (String(x.totalNetValue||'').trim() || String(x.totalValue||'').trim()) return true;       const t = (x.type||x.type_name||'').toString().toLowerCase();       if ((t.includes('απόδει') || t.includes('receipt')) && String(x.totalValue||'').trim()) return true;       return false;     }catch(e){ return false; }   }   function isReceipt(x){     try{       if (x && x.is_receipt) return true;       const t = (x?.type || x?.type_name || '').toString().toLowerCase();       if (t.includes('απόδει') || t.includes('receipt')) return true;       const ch = (x?.category || x?.χαρακτηρισμός || x?.characteristic || '');       return ch === 'αποδειξακια';     }catch(e){ return false; }   }   function prefer(a,b){     const da = isDetailed(a), db = isDetailed(b);     if (da && !db) return a;     if (db && !da) return b;     const la = Array.isArray(a?.lines) ? a.lines.length : 0;     const lb = Array.isArray(b?.lines) ? b.lines.length : 0;     if (lb > la) return b;     return a;   }   function sanitizeAfmEpsilon(arr){     try{       if(!Array.isArray(arr)) return arr;       const byMark = new Map();       for(const item of arr){         const m = String(item?.mark || '').trim();         if(!m) continue;         if(!byMark.has(m)) byMark.set(m, item);         else byMark.set(m, prefer(byMark.get(m), item));       }       let out = Array.from(byMark.values());       out = out.filter(isDetailed); // drop placeholders       return out;     }catch(e){       console.warn('sanitizeAfmEpsilon failed', e);       return arr;     }   }    // Clean global cache once   try { if (window.afm_epsilon) { window.afm_epsilon = sanitizeAfmEpsilon(window.afm_epsilon); } } catch(e){}    // Pick ONE receipt to submit when repeat+receipts is ON   function pickReceiptSummary(){     try{       // Priority 1: explicit modal summary if page defines it       if (window.modal_summary && isReceipt(window.modal_summary)) return window.modal_summary;       // Priority 2: data attribute on any modal container       const el = document.querySelector('[data-modal-summary]');       if (el){         try{           const obj = JSON.parse(el.getAttribute('data-modal-summary'));           if (isReceipt(obj)) return obj;         }catch(_){}       }       // Priority 3: last detailed receipt from afm_epsilon       const arr = Array.isArray(window.afm_epsilon) ? window.afm_epsilon.slice() : [];       const receipts = arr.filter(x => isReceipt(x) && isDetailed(x));       if (receipts.length) return receipts[receipts.length - 1];     }catch(e){ console.warn('pickReceiptSummary failed', e); }     return null;   }    try {     const repeatSwitch = document.getElementById('repeatEntrySwitch');     const useReceipts   = document.getElementById('useReceiptsSwitch');     const summaryInput  = document.getElementById('summaryJsonInput');     const saveForm      = document.getElementById('saveSummaryForm');     const auto = !!(useReceipts && useReceipts.checked) && !!(repeatSwitch && repeatSwitch.checked);     if (auto && summaryInput && saveForm) {       const chosen = pickReceiptSummary();       if (!chosen) {         console.warn('Auto-submit suppressed: no detailed receipt summary found.');         return;       }       // Ensure per-line category and flags       try{         if (!Array.isArray(chosen.lines)) chosen.lines = [];         if (chosen.lines.length === 0) {           // synthesize a simple line from totalValue when missing           const lid = (String(chosen.mark||'') + '_r0').replace(/^_+|_+$/g,'') || 'r0';           chosen.lines = [{             id: lid, description: "", amount: String(chosen.totalValue||""), vat: "", category: "αποδειξακια", vatCategory: ""           }];         } else {           chosen.lines = chosen.lines.map(l => (l && typeof l === 'object') ? {             ...l,             category: l.category || 'αποδειξακια'           } : l);         }         chosen.is_receipt = true;         chosen.category = chosen.category || 'αποδειξακια';         chosen.characteristic = chosen.characteristic || 'αποδειξακια';       }catch(_){}       summaryInput.value = JSON.stringify(chosen);       setTimeout(function(){         if (!saveForm.dataset._autoSubmitted) {           saveForm.dataset._autoSubmitted = '1';           saveForm.requestSubmit ? saveForm.requestSubmit() : saveForm.submit();         }       }, 30);     }   } catch(e) { console.warn('receipts auto-confirm failed', e); } })();</script> <!-- === END: Injected fix (v2) === --> <!-- RC_RECEIPT_AUTOPILOT_PATCH --> <script>(function(){'use strict';   // ====== Robust receipts repeat autopilot (no UI break) ======   window.__RC_FLAGS = window.__RC_FLAGS || {};    function lsget(key, fallback){ try{ const v=localStorage.getItem(key); if(v===null) return fallback; if(v==='1') return true; if(v==='0') return false; return v; }catch(_){     return fallback; } }    function receiptsSwitchOn(){ try{ return !!document.getElementById('useReceiptsSwitch')?.checked; }catch(_){     return !!lsget('rc:useReceipts','receipts')==='receipts'; } }    function autoSubmitOn(){ return !!lsget('rc:autoSubmitEnabled', true); }   function repeatSwitchOn(){ try{ return !!document.getElementById('repeatEntrySwitch')?.checked; }catch(_){ return !!lsget('rc:repeat_enabled', false); } }    async function serverRepeatEnabled(){     try{ const r = await fetch('/api/repeat_entry/get', { credentials:'include' });          const j = await r.json(); return !!(j && (j.enabled || j.repeat_enabled)); }     catch(_){ return repeatSwitchOn(); }   }    function hideReceiptBanner(){     const nodes = document.querySelectorAll('#existingBanner, .flash, .alert');     nodes.forEach(el => {       try{ if(/Λήφθηκε απόδειξη/i.test(el.textContent||'')) el.style.display='none'; }catch(_){}     });   }    function tryAutoSave(){     const form = document.getElementById('saveSummaryForm');     const input = document.getElementById('summaryJsonInput');     if (!form || !input) return false;     // mark flags to suppress informational toast     window.__RC_FLAGS.autoHandled = true;     hideReceiptBanner();     // Submit the server form (keeps server-side logic, excel write etc.)     // Use a microtask so any last-second JSON sync runs first     setTimeout(() => {       try { form.submit(); } catch(e) {         try { form.dispatchEvent(new Event('submit', { cancelable:false })); } catch(_){}       }     }, 30);     return true;   }    function observeModalAndAuto(){     const modal = document.getElementById('summaryModal');     if (!modal) return;     let done = false;     const doIt = () => {       if (done) return;       const visible = getComputedStyle(modal).display !== 'none';       if (!visible) return;       if (tryAutoSave()) { done = true; modal.style.display = 'none'; }     };     try { new MutationObserver(doIt).observe(modal, { attributes:true, attributeFilter:['style','class'] }); } catch(_){}     setTimeout(doIt, 80);   }    // Kickoff when DOM is ready   document.addEventListener('DOMContentLoaded', () => {     // Make search submit more reliable when auto-submit is ON     const form = document.getElementById('markSearchForm');     if (form) {       form.addEventListener('keydown', (e) => {         if (e.key === 'Enter' && autoSubmitOn()) {           const mark = (document.getElementById('markInput')?.value || '').trim();           const url  = (document.getElementById('scrapeUrlInput')?.value || document.getElementById('scrapeUrlField')?.value || '').trim();           if (!mark && !url) e.preventDefault(); // guard empty         }       }, true);     }      // Always ensure page comes back to a clean state after any save     const saveForm = document.getElementById('saveSummaryForm');     if (saveForm) {       let reloaded = false;       const reloadSoon = () => { if (!reloaded) { reloaded = true; setTimeout(() => location.reload(), 300); } };       saveForm.addEventListener('ajax:done', reloadSoon, { once:true });       saveForm.addEventListener('submit', () => setTimeout(reloadSoon, 1200), { once:true });     }      // If receipts + repeat are ON, suppress the "Λήφθηκε..." toast and auto-save     Promise.resolve(serverRepeatEnabled()).then((rep) => {       if (receiptsSwitchOn() && rep) {         window.__RC_FLAGS.repeat_enabled = true;         window.__RC_FLAGS.autoHandled = true; // prevents info message in existing code         if (!tryAutoSave()) observeModalAndAuto();       }     });   }); })();</script>   <!-- ===== Receipts repeat auto-confirm SHIM (appended) ===== --> <script>(function(){   // small utility: safe JSON parse   function parseJSON(x){ try{ return JSON.parse(x); }catch(_){ return null; } }   function getLS(k, d){ try{ const v = localStorage.getItem(k); return (v===null||v===undefined)?d:v; }catch(_){ return d; } }   function setLS(k, v){ try{ localStorage.setItem(k, v); }catch(_){ } }   function isTruthy(v){ return v === true || v === '1' || v === 1 || v === 'true'; }    // Read repeat + receipts mode from both localStorage and globals/switches   function getRepeatOn(){     const ls = getLS('REPEAT:enabled', null);     if (ls !== null) return isTruthy(ls);     if (window.REPEAT_ENABLED !== undefined) return !!window.REPEAT_ENABLED;     const sw = document.getElementById('repeatEntrySwitch');     return !!(sw && sw.checked);   }   function getReceiptsModeOn(){     const ls = getLS('UI:useReceipts', null);     if (ls !== null) return isTruthy(ls);     if (window.USE_RECEIPTS !== undefined) return !!window.USE_RECEIPTS;     const sw = document.getElementById('useReceiptsSwitch');     return !!(sw && sw.checked);   }    function isReceiptSummary(obj){     if(!obj || typeof obj !== 'object') return false;     if (obj.is_receipt === true) return true;     const t = String(obj.type_name || obj.type || '').toLowerCase();     const cat = String(obj.category || obj.characteristic || obj['χαρακτηρισμός'] || '').toLowerCase();     return (t.includes('απόδει') || t.includes('receipt') || cat === 'αποδειξακια');   }    function hasMeaningfulLines(obj){     const arr = Array.isArray(obj && obj.lines) ? obj.lines : [];     if (arr.length === 0) return false;     // any non-empty amount OR category is enough     return arr.some(l => {       const amt = String(l && (l.amount || l.total || l.lineTotal || '')).trim();       const cat = String(l && (l.category || l.cat || '')).trim();       return !!(amt || cat);     });   }    function readSummaryObject(){     const input = document.getElementById('summaryJsonInput');     if(!input) return null;     return parseJSON(input.value || '{}') || null;   }    function getScrapeUrl(){     const u = document.getElementById('scrapeUrlInput') || document.getElementById('scrapeUrlField');     return u ? (u.value || '') : '';   }    let lastMarkTried = null;   let busy = false;    async function tryAutoConfirm(){     if (busy) return;     const rep = getRepeatOn();     const inRec = getReceiptsModeOn();     if (!rep || !inRec) return;      const s = readSummaryObject();     if (!s || !isReceiptSummary(s) || !hasMeaningfulLines(s)) return;      // avoid double firing for the same mark     const mk = String(s.mark || s.MARK || '').trim();     if (!mk || mk === lastMarkTried) return;     lastMarkTried = mk;      // hide modal pre-emptively to avoid flicker     try {       const modal = document.getElementById('summaryModal');       if (modal) modal.style.display = 'none';     } catch(_){}      if (!(window.RC && RC.confirmReceiptOnce && RC.normalizeReceiptSummary)) {       // RC not yet ready; retry later       return;     }      busy = true;     try {       await RC.confirmReceiptOnce(RC.normalizeReceiptSummary(s), getScrapeUrl());       // keep receipts mode sticky on refresh       setLS('UI:useReceipts', '1');       // soft reload to clear form quickly       setTimeout(function(){         try {           const base = location.pathname + '?use_receipts=1';           location.replace(base);         } catch(_){ location.reload(); }       }, 120);     } catch(err){       console.warn('[RC-AUTOCONFIRM] failed', err);       // allow another attempt       lastMarkTried = null;     } finally {       busy = false;     }   }    // Poll for summary changes & conditions (fast but lightweight)   let pollId = null;   function startPoll(){     if (pollId) return;     pollId = setInterval(tryAutoConfirm, 200);   }   function stopPoll(){     if (pollId) { clearInterval(pollId); pollId = null; }   }    // Start ASAP   startPoll();    // Re-run when user submits the search form (so mode is immediately persisted)   document.addEventListener('submit', function(e){     const f = e.target;     if (f && f.id === 'markSearchForm') {       // persist current mode for autosave       try {         const sw = document.getElementById('useReceiptsSwitch');         if (sw) setLS('UI:useReceipts', sw.checked ? '1' : '0');       } catch(_){}       setTimeout(tryAutoConfirm, 0);     }   }, true);    // Also, when repeat switch toggles, persist immediately   document.addEventListener('change', function(e){     const sw = e.target && e.target.id === 'repeatEntrySwitch' ? e.target : null;     if (sw){       setLS('REPEAT:enabled', sw.checked ? '1' : '0');       setTimeout(tryAutoConfirm, 0);     }   }, true);    // One-time bootstrap from server state (if available via endpoint)   // This is best-effort; if it fails, user toggles or previous LS values will be used.   (async function bootstrapRepeatOnce(){     try {       const r = await fetch('/api/repeat_entry/get', { credentials: 'same-origin' });       const j = await r.json();       if (j && j.ok && j.repeat_entry) {         setLS('REPEAT:enabled', j.repeat_entry.enabled ? '1' : '0');         // leave mapping to backend; we only need the enabled bit here         setTimeout(tryAutoConfirm, 0);       }     } catch(_){}   })(); })();</script> <!-- ===== end SHIM ===== -->
2025-10-23 00:28:37+0300 INFO api_scrape_receipt: scraped url={% extends "base.html" %} {% block title %}Αναζήτηση MARK{% endblock %}  {% block content %}  <div class="bg-white rounded shadow p-6">     <h2 class="text-lg font-semibold mb-2">Αναζήτηση MARK</h2>      {% if error %}     <div class="mb-3 p-2 rounded bg-red-50 text-red-800">{{ error }}</div>     {% endif %}      <form method="post" class="flex gap-2 items-center" id="markSearchForm">         <!-- Auto-submit segmented toggle (scoped to client) -->         <div class="flex items-center gap-2 ml-4" id="autoSubmitGroup">             <span class="text-sm">Auto‑submit</span>             <div class="inline-flex rounded-md overflow-hidden border border-gray-300">                 <button type="button" id="autoSubmitBtnOff" class="px-2 py-1 text-sm focus:outline-none">Off</button>                 <button type="button" id="autoSubmitBtnOn" class="px-2 py-1 text-sm focus:outline-none">On</button>             </div>         </div>          <input name="mark" id="markInput" type="text" placeholder="15ψήφιο MARK" class="p-2 border rounded w-2/4" value="{{ mark }}">         <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αναζήτηση</button>         <div class="flex items-center gap-2 ml-4">             <label for="useReceiptsSwitch" class="text-sm">                 Τιμολόγια<label>                     <input type="checkbox" id="useReceiptsSwitch" role="switch" aria-checked="false" class="toggle-switch">                     <label for="useReceiptsSwitch" class="text-sm">Αποδείξεις</label>         </div>          <!-- Toggle επαναληψιμης εισαγωγής + edit button -->         <div class="flex items-center gap-2 ml-4">             <label for="repeatEntrySwitch" class="text-sm">Επαναληψιμη εισαγωγή</label>             <input type="checkbox" id="repeatEntrySwitch" class="toggle-switch">             <button type="button" id="editRepeatMappingBtn" class="ml-2 px-2 py-1 border rounded text-sm hidden">Επεξεργασία</button>         </div>          <!-- Toggle switch for receipts scrape -->      </form> </div>  {# ΣΗΜΕΙΩΣΗ: το στατικό confirmation modal που υπήρχε εδώ αφαιρέθηκε όπως ζήτησες. Χρησιμοποιείται πλέον το summaryModal για όλες τις περιπτώσεις. #}  {# --- Yellow box αν υπάρχει MARK ήδη στο Excel --- #} {% if allow_edit_existing and not request.args.get('force_edit') %} <div class="mt-4 p-4 bg-yellow-50 rounded border border-yellow-300 text-yellow-800" id="existingBanner">     Το MARK <strong>{{ mark }}</strong> υπάρχει ήδη στο Excel. Θέλεις να τροποποιήσεις τον χαρακτηρισμό;     <div class="mt-2 flex gap-2">         <button id="forceEditBtn" type="button" class="bg-yellow-600 text-white px-3 py-2 rounded hover:bg-yellow-700">             Επιβεβαίωση         </button>         <button id="dismissBannerBtn" type="button" onclick="this.parentElement.parentElement.style.display='none'"                 class="px-3 py-2 border rounded hover:bg-gray-50">             Άκυρο         </button>     </div> </div> {% endif %}     {% if modal_summary and (request.args.get('force_edit') == '1' or not allow_edit_existing) %} <!-- SUMMARY MODAL --> <div id="summaryModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-6xl p-6">          <!-- HEADER -->         <div class="flex justify-between items-center mb-4">             <h3 class="text-lg font-semibold">                 Περίληψη Παραστατικού - <span id="summaryModalMark">MARK</span>             </h3>             <button id="modalCloseX" class="text-gray-500 text-xl font-bold">✕</button>         </div>          <!-- SUMMARY INFO -->         <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">             <div><strong>Α/Α Παραστατικού</strong><div id="summary_AA"></div></div>             <div><strong>ΑΦΜ</strong><div id="summary_AFM"></div></div>             <div><strong>Επωνυμία</strong><div id="summary_Name"></div></div>             <div><strong>Ημερομηνία</strong><div id="summary_issueDate"></div></div>             <div><strong>Τύπος Παραστατικού</strong><div id="summary_type_name"></div></div>             <div><strong>Καθαρή Αξία</strong><div id="summary_totalNetValue"></div></div>             <div><strong>ΦΠΑ</strong><div id="summary_totalVatAmount"></div></div>             <div><strong>Σύνολο</strong><div id="summary_totalValue"></div></div>         </div>          <!-- LINES -->         <h4 class="font-medium mt-4 mb-2">Γραμμές Παραστατικού (για χαρακτηρισμό)</h4>         <div id="summaryLinesContainer" class="overflow-auto max-h-96 border rounded p-2"></div>            <!-- FOOTER -->         <div class="mt-4 flex justify-between items-center">             <div class="text-sm text-gray-600">                 Σημείωση: οι κατηγορίες προέρχονται από τα settings του πελάτη. Μπορείτε να ορίσετε/επεξεργαστείτε αυτές τις επιλογές στη σελίδα Credentials.             </div>              <div class="flex justify-end gap-2">                 <form method="POST" action="{{ url_for('save_summary') }}" id="saveSummaryForm">                     <input type="hidden" name="summary_json" id="summaryJsonInput" value='{{ modal_summary | tojson | safe if modal_summary else "{}" }}'>                     <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση στο Cache</button>                     <input type="hidden" id="scrapeUrlField" name="scrape_url" value="">                     <input type="hidden" id="scrapeCategoryField" name="scrape_category" value="">                     <input type="hidden" id="scrapeForceField" name="scrape_force" value="false">                 </form>                 <button id="modalCloseBtn" class="px-3 py-2 border rounded">Κλείσιμο</button>             </div>         </div>      </div> </div> {% endif %}   {# --- Repeat mapping modal (dynamic, populated by JS) --- #} <div id="repeatMappingModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-2xl p-6">         <div class="flex justify-between items-center mb-3">             <h3 class="text-lg font-semibold">Επαναληπτική αντιστοίχιση κατηγοριών</h3>             <button id="repeatModalCloseX" class="text-gray-500 text-xl font-bold">✕</button>         </div>          <div id="repeatModalBody" class="space-y-3">             <div class="text-sm text-gray-600">Επίλεξε για κάθε ΦΠΑ-κατηγορία ποια κατηγορία εξόδου θέλεις να χρησιμοποιείται επαναληπτικά. Μπορείς επίσης να ορίσεις <em>προεπιλογή</em>.</div>             <!-- JS θα γεμίσει εδώ -->             <div id="repeatMappingList" class="space-y-2"></div>         </div>          <div class="mt-4 flex justify-end gap-2">             <button id="repeatModalCancel" class="px-3 py-2 border rounded">Άκυρο</button>             <button id="repeatModalSave" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση</button>         </div>     </div> </div>  {% if modal_warning %} <div id="afmWarningModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-md p-6">         <div class="flex justify-between items-center mb-4">             <h3 class="text-lg font-semibold text-red-600">Προειδοποίηση</h3>         </div>         <div id="afmWarningBody" class="mb-4 text-gray-700">             {{ modal_warning }}         </div>         <div class="flex justify-end gap-2">             <button id="afmModalConfirm" class="bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700">Κατάλαβα</button>         </div>     </div> </div> {% endif %}  {# Flash container (JS will inject messages here) #} <div id="clientFlashContainer" class="fixed top-4 right-4 z-60"></div>  {% include 'list_inner.html' %}   {% endblock %}  {% block scripts %}  <script src="/static/loop_hard_guard.js"></script> <script src="{{ url_for('static', filename='repeat_flow_guard.js') }}"></script>  <script>    (function () {   const KEY = 'UI:useReceipts'; // '1' = Αποδείξεις, '0' = Τιμολόγια    function fireChange(el){     if(!el) return;     try {       el.dispatchEvent(new Event('change', { bubbles:true }));     } catch {       const evt = document.createEvent('Event');       evt.initEvent('change', true, true);       el.dispatchEvent(evt);     }   }    document.addEventListener('DOMContentLoaded', () => {     const sw = document.getElementById('useReceiptsSwitch');     if (!sw) return;      // Αν υπάρχει ?use_receipts=1/0 στο URL, γράψ’ το στο localStorage (authoritative)     try {       const q = new URLSearchParams(location.search);       if (q.has('use_receipts')) {         localStorage.setItem(KEY, q.get('use_receipts') === '1' ? '1' : '0');       }     } catch {}      // Restore από localStorage     const saved = localStorage.getItem(KEY);     if (saved !== null) sw.checked = (saved === '1');      // ΠΟΛΥ ΣΗΜΑΝΤΙΚΟ:     // Τρέξε τον υπάρχοντα change handler του switch ώστε να εμφανίσει/κρύψει     // τα σωστά inputs (MARK vs URL). Το κάνουμε 2 φορές (rAF + microtask)     // για να “πιάσει” σε DOM που φτιάχνεται δυναμικά.     requestAnimationFrame(() => {       fireChange(sw);       setTimeout(() => fireChange(sw), 0);     });      // Persist σε κάθε αλλαγή χρήστη     sw.addEventListener('change', () => {       try { localStorage.setItem(KEY, sw.checked ? '1' : '0'); } catch {}       // Προαιρετικό: κρατάμε και ένα data-mode στο body αν το θες για CSS hooks       document.body.dataset.mode = sw.checked ? 'receipts' : 'invoices';     });      // Όταν κάνεις submit/save απόδειξης, κλείδωσε το mode σε “Αποδείξεις”     // ώστε στο redirect/refresh να παραμείνει.     document.getElementById('saveSummaryForm')?.addEventListener('submit', () => {       try {         const raw = document.getElementById('summaryJsonInput')?.value || '';         const s = raw ? JSON.parse(raw) : {};         const isReceipt = s.is_receipt === true ||                           /αποδει/i.test(`${s.type_name || ''} ${s.category || s.characteristic || ''}`);         if (isReceipt) localStorage.setItem(KEY, '1');       } catch {}     });   }); })(); // --- Reclass guard (yellow box -> ?force_edit=1) --- const URL_PARAMS = (function(){ try { return new URL(window.location.href).searchParams; } catch(_) { return new URLSearchParams(''); } })(); const FORCE_EDIT = (function(){ try { return URL_PARAMS.get('force_edit') === '1'; } catch(_) { return false; } })();  const SEARCH_BASE_URL = "{{ url_for('search') }}"; const VAT = "{{ vat or '' }}"; // active vat from server const INITIAL_MARK = "{{ mark|e }}"; // αρχική τιμή mark (αν υπήρχε) const ACTIVE_YEAR = (function(){ try { return {{ active_year|default('null') }}; } catch(e){ return null; } })(); async function getActiveFiscalYear() {   // Προτίμησε την τιμή που ήρθε από server-side render (Jinja)   if (typeof ACTIVE_YEAR !== 'undefined' && ACTIVE_YEAR !== null) {     try { return String(ACTIVE_YEAR); } catch(_) { /* noop */ }   }   // Fallback: ρώτα το backend (υπάρχει route)   try {     const r = await fetch('/get_fiscal_year', {credentials:'same-origin'});     const j = await r.json();     if (j && j.exists) return String(j.fiscal_year);   } catch(_) {}   return null; }   (function(){   // Ανεξάρτητο modal μόνο για Αποδείξεις (δεν ακουμπά το afmWarningModal)   window.openReceiptWarning = function(message){     var id='receiptWarn', m=document.getElementById(id);     if(!m){       var el=document.createElement('div');       el.id=id;       el.style.cssText='position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.4);z-index:9999';       el.innerHTML =         '<div style="background:#fff;border-radius:10px;max-width:480px;width:calc(100% - 32px);padding:20px;">'         + '<h3 style="margin:0 0 10px;color:#b91c1c;font-weight:600;font-size:18px">Προειδοποίηση</h3>'         + '<div id="receiptWarnBody" style="margin-bottom:14px;color:#374151;font-size:14px"></div>'         + '<div style="text-align:right"><button id="receiptWarnOk" type="button"'         + ' style="background:#b91c1c;color:#fff;border:none;border-radius:6px;padding:8px 12px;cursor:pointer">Κατάλαβα</button></div>'         + '</div>';       document.body.appendChild(el);       el.addEventListener('click', function(e){ if(e.target===el) el.style.display='none'; });       el.querySelector('#receiptWarnOk').addEventListener('click', function(){ el.style.display='none'; });       m = el;     }     var body = m.querySelector('#receiptWarnBody');     if(body) body.textContent = message || 'Προειδοποίηση.';     m.style.display='flex';   }; })();      // Καθαρισμός ανά γραμμή (πολλαπλές γραμμές)   document.addEventListener('click', function (e) {     const btn = e.target.closest('.clear-row-btn');     if (btn) {       e.stopPropagation();       const tr = btn.closest('tr');       const sel = tr && tr.querySelector('select[name^="category["]');       if (sel) sel.value = '';     }   });    // Καθαρισμός στη single-line περίπτωση   const singleClear = document.getElementById('single-clear');   if (singleClear) {     singleClear.addEventListener('click', function (e) {       e.stopPropagation();       const sel = document.querySelector('select[name^="category["]');       if (sel) sel.value = '';     });   }    // Προληπτικά: μην ξανα-ανοίγει δεύτερο modal στο click "Αποθήκευση"   // (αν έχεις delegate listeners κάτω από το modal)   document.addEventListener('submit', function(e){     const form = e.target;     if (form && form.closest('#summaryModal')) {       const submitBtn = form.querySelector('[type="submit"]');       if (submitBtn) submitBtn.disabled = true;       e.stopPropagation(); // Μπλοκάρει bubbling που θα πυροδοτούσε κάτωθεν click handlers     }   }, true);     // initial categories passed from server as fallback; will be overridden if API returns expense_tags let CUSTOMER_CATEGORIES = (function(){ try { return {{ customer_categories | tojson | safe }} || []; } catch(e){ return []; } })();  // Helper: show transient flash (client-side) /* ====== Render summary lines into modal and wire handlers ====== */  function renderSummaryLinesFromObject(obj) {   const receiptsMode = !!(document.getElementById('useReceiptsSwitch')?.checked) || !!obj?.is_receipt;   const RECEIPT_CATEGORY = 'αποδειξακια';    const container = document.getElementById('summaryLinesContainer');   const summaryInput = document.getElementById('summaryJsonInput');   if(!container || !summaryInput) return;    container.innerHTML = '';   const lines = Array.isArray(obj.lines) ? obj.lines : [];    // helper to persist back to the hidden input     (function(){   function safeParseJson(s){     try { return JSON.parse(s || '{}'); } catch(e){ return {}; }   }    const summaryInput = document.getElementById('summaryJsonInput');   const container = document.getElementById('summaryLinesContainer');    // fallback server-side object (if Jinja rendered modal_summary)   const SERVER_MODAL_SUMMARY = (function(){     try { return {{ modal_summary | tojson | safe if modal_summary else 'null' }}; } catch(e){ return null; }   })()   try {     var __cc = document.getElementById('summaryLinesContainer');     if (__cc && __cc.dataset && __cc.dataset.phase === 'iife') {       // IIFE already rendered content -> skip second render path       if (typeof persist === 'function') try{ persist(); }catch(e){}       return;     }   } catch(e) {} ;    // helper to get current summary object (prefer hidden input, fallback server var)   function getSummaryObj(){     if(summaryInput && summaryInput.value && summaryInput.value.trim() !== ''){       const parsed = safeParseJson(summaryInput.value);       if(parsed && typeof parsed === 'object') return parsed;     }     if(SERVER_MODAL_SUMMARY) return SERVER_MODAL_SUMMARY;     return { lines: [] };   }    // ensure each line has id and normalized keys   function normalizeSummary(summary){     if(!summary) summary = {};     const lines = Array.isArray(summary.lines) ? summary.lines.slice() : [];     const norm = lines.map((l, idx) => {       const id = (l && (l.id || l.line_id)) ? String(l.id || l.line_id) : ('l' + idx);       return {         id: id,         description: l && (l.description || l.desc || '') || '',         amount: l && (l.amount || l.lineTotal || l.total || '') || '',         vat: l && (l.vat || l.vatRate || '') || '',         vatCategory: l && (l.vatCategory || l.vat_category || '') || '',         category: l && (l.category || l.cat || '') || ''       };     });     return { ...summary, lines: norm };   }    // build DOM for multiple lines (table)   function buildTableHTML(lines, categories){     const table = document.createElement('table');     table.className = 'w-full border-collapse';     const thead = document.createElement('thead');     thead.className = 'bg-gray-100 sticky top-0';     thead.innerHTML = '<tr>' +       '<th class="p-2 border text-left">#</th>' +       '<th class="p-2 border text-left">ΦΠΑ Κατηγορία</th>' +       '<th class="p-2 border text-right">Ποσό</th>' +       '<th class="p-2 border text-right">ΦΠΑ</th>' +       '<th class="p-2 border text-left">Κατηγορία Εξόδου</th>' +       '</tr>';     table.appendChild(thead);      const tbody = document.createElement('tbody');     tbody.id = 'renderedLinesTableBody';     lines.forEach((ln, idx) => {       const tr = document.createElement('tr');       tr.dataset.lineId = ln.id || ('l' + idx);       tr.dataset.vat = ln.vatCategory || ln.vat || '';        tr.innerHTML = '<td class="p-2 border text-sm text-gray-600">' + (idx+1) + '</td>' +         '<td class="p-2 border break-words">' + escapeHtml(ln.vatCategory || '') + '</td>' +         '<td class="p-2 border text-right">' + escapeHtml(String(ln.amount || '')) + '</td>' +         '<td class="p-2 border text-right">' + escapeHtml(String(ln.vat || '')) + '</td>' +         '<td class="p-2 border"></td>';        // create select       const select = document.createElement('select');       select.className = 'expense-category p-1 border rounded w-full';       select.dataset.lineId = ln.id || ('l' + idx);       const emptyOpt = document.createElement('option'); emptyOpt.value=''; emptyOpt.innerText='-- επίλεξε --';       select.appendChild(emptyOpt);       (categories || []).forEach(c => {         const o = document.createElement('option'); o.value = c; o.innerText = c;         if(c === ln.category) o.selected = true;         select.appendChild(o);       });        tr.querySelector('td:last-child').appendChild(select);       tbody.appendChild(tr);     });      table.appendChild(tbody);     return table;   }    // build single-line buttons UI   function buildSingleLineHTML(line, categories){     const wrapper = document.createElement('div');     wrapper.className = 'border rounded p-4';     wrapper.dataset.lineId = line.id || 'l0';      const grid = document.createElement('div');     grid.className = 'mb-3 grid grid-cols-1 md:grid-cols-3 gap-3';     grid.innerHTML = '<div><strong>ΦΠΑ Κατηγορία</strong><div>' + escapeHtml(line.vatCategory || '') + '</div></div>' +       '<div><strong>Ποσό</strong><div>' + escapeHtml(String(line.amount || '')) + '</div></div>' +       '<div><strong>ΦΠΑ</strong><div>' + escapeHtml(String(line.vat || '')) + '</div></div>';     wrapper.appendChild(grid);      const controls = document.createElement('div');     controls.className = 'mb-3';     const title = document.createElement('strong');     title.innerText = 'Επίλεξε Κατηγορία Εξόδου';     controls.appendChild(title);      const btnwrap = document.createElement('div');     btnwrap.id = 'renderedCategoryButtons';     btnwrap.className = 'mt-2 flex flex-wrap gap-2';     (categories || []).forEach(c => {       const btn = document.createElement('button');       btn.type = 'button';       btn.className = 'category-btn px-3 py-2 border rounded hover:bg-sky-50';       btn.dataset.cat = c;       btn.dataset.lineId = line.id || 'l0';       btn.innerText = c;       if(c === line.category){         btn.classList.add('bg-sky-600');         btn.classList.add('text-white');       }       btnwrap.appendChild(btn);     });      const clearBtn = document.createElement('button');     clearBtn.type = 'button';     clearBtn.className = 'px-3 py-2 border rounded text-sm ml-2 clear-category';     clearBtn.innerText = 'Καθαρισμός';     btnwrap.appendChild(clearBtn);      controls.appendChild(btnwrap);     wrapper.appendChild(controls);     return wrapper;   }    function escapeHtml(s){     if(!s && s !== 0) return '';     return String(s)       .replace(/&/g, '&amp;')       .replace(/</g, '&lt;')       .replace(/>/g, '&gt;')       .replace(/"/g, '&quot;')       .replace(/'/g, '&#39;');   }    // read categories from server-provided global or from a safe default   function getCategories(){     try {       const js = (function(){ try { return {{ customer_categories | tojson | safe }}; } catch(e){ return null; } })();       if(Array.isArray(js) && js.length) return js;     } catch(e){}     return window.CUSTOMER_CATEGORIES || [];   }    // render everything into the container   function renderSummaryLines(){     if(!container) return;     const summary = normalizeSummary(getSummaryObj());     const lines = summary.lines || [];     const categories = getCategories();      // clear container     container.innerHTML = '';      // Title (optional)     // const info = document.createElement('div'); info.className='mb-2 text-sm text-gray-700'; container.appendChild(info);      if(lines.length === 0){       const warn = document.createElement('div');       warn.className = 'mt-4 p-3 bg-yellow-50 rounded';       warn.innerText = 'Δεν βρέθηκαν γραμμές για αυτό το MARK.';       container.appendChild(warn);       wireInteractions();     try{ container.dataset.phase = 'iife'; }catch(e){}  // ensure handlers cleared       return;     }      if(lines.length === 1){       container.appendChild(buildSingleLineHTML(lines[0], categories));     } else {       container.appendChild(buildTableHTML(lines, categories));     }      // after building DOM, wire events     wireInteractions();   }    // update hidden input from current DOM selections/buttons    function wireInteractions(){     // remove old handlers by cloning nodes if necessary (to avoid duplicate attachments)     document.querySelectorAll('select.expense-category').forEach(sel => {       sel.addEventListener('change', function(){         updateSummaryFromDom();       });     });      // category buttons (single-line)     document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(btn => {       btn.addEventListener('click', function(){         const lineId = this.dataset.lineId || '';         // toggle this button active/inactive         document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(b => {           if(b.dataset.lineId === lineId){             b.classList.remove('bg-sky-600'); b.classList.remove('text-white');           }         });         const isActive = !(this.classList.contains('bg-sky-600'));         if(isActive){           this.classList.add('bg-sky-600'); this.classList.add('text-white');         } else {           this.classList.remove('bg-sky-600'); this.classList.remove('text-white');         }         updateSummaryFromDom();       });     });      // clear buttons     document.querySelectorAll('.clear-category').forEach(cb => {       cb.addEventListener('click', function(){         const parent = cb.closest('[data-line-id]');         if(!parent) return;         const lid = parent.dataset.lineId || '';         // clear UI         document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(b => {           if(b.dataset.lineId === lid){ b.classList.remove('bg-sky-600'); b.classList.remove('text-white'); }         });         // if there is a select for same line (unlikely in single-line view) clear it         const sel = document.querySelector('select.expense-category[data-line-id="' + lid + '"]');         if(sel) sel.value = '';         updateSummaryFromDom();       });     });   }    // watch hidden input changes (some flows set it programmatically before opening modal)   let lastSummaryValue = summaryInput ? summaryInput.value : '';   function pollSummaryInput(){     const now = summaryInput ? summaryInput.value : '';     if(now !== lastSummaryValue){       lastSummaryValue = now;       // re-render so UI matches new data       renderSummaryLines();     }   }   let pollTimer = null;   try {     pollTimer = setInterval(pollSummaryInput, 250);     window.addEventListener('beforeunload', ()=> { if(pollTimer) clearInterval(pollTimer); });   } catch(e){ /* ignore */ }    // ensure initial render on load (modal might be shown later)   try { renderSummaryLines(); } catch(e){ console.warn('initial renderSummaryLines failed', e); }    // also re-render whenever modal is shown (in case show logic sets display later)   const modal = document.getElementById('summaryModal');   if(modal){     // intercept style changes to detect show     const obs = new MutationObserver(muts => {       muts.forEach(m => {         if(m.attributeName === 'style' || m.attributeName === 'class'){           const disp = window.getComputedStyle(modal).display;           if(disp !== 'none'){             // modal visible -> render (ensure DOM inside ready)             setTimeout(renderSummaryLines, 10);           }         }       });     });     try { obs.observe(modal, { attributes: true, attributeFilter:['style','class'] }); } catch(e){ /* ignore */ }   }    // expose for debug   window._renderSummaryLines = renderSummaryLines; })();   function persist() {     summaryInput.value = JSON.stringify(obj || {});   }    if (!lines || lines.length === 0) {     container.innerHTML = '<div class="mt-4 p-3 bg-yellow-50 rounded">Δεν βρέθηκαν γραμμές για αυτό το MARK.</div>';     persist();     return;   }    if (lines.length > 1) {     // build table     const tbl = document.createElement('table');     tbl.className = 'w-full border-collapse';     tbl.innerHTML = `<thead class="bg-gray-100 sticky top-0">       <tr>         <th class="p-2 border text-left">#</th>         <th class="p-2 border text-left">ΦΠΑ Κατηγορία</th>         <th class="p-2 border text-right">Ποσό</th>         <th class="p-2 border text-right">ΦΠΑ</th>         <th class="p-2 border text-left">Κατηγορία Εξόδου</th>       </tr>     </thead>`;     const tbody = document.createElement('tbody');     lines.forEach((ln, idx) => {       const lid = (ln.id !== undefined) ? String(ln.id) : ('l' + idx);       const vat_cat = ln.vatCategory || ln.vat_category || ln.vat || '';       const amt = ln.amount || ln.lineTotal || ln.total || '';       const vatv = ln.vat || ln.vatRate || '';       const tr = document.createElement('tr');       tr.dataset.lineId = lid;       tr.dataset.vat = vat_cat;       tr.className = '';       tr.innerHTML = `         <td class="p-2 border text-sm text-gray-600">${idx+1}</td>         <td class="p-2 border break-words">${vat_cat}</td>         <td class="p-2 border text-right">${amt}</td>         <td class="p-2 border text-right">${vatv}</td>         <td class="p-2 border"></td>`;       // build select       const td = tr.querySelector('td:last-child');       const sel = document.createElement('select');       sel.className = 'expense-category p-1 border rounded w-full';       sel.dataset.lineId = lid;       const opt0 = document.createElement('option'); opt0.value = ''; opt0.innerText = '-- επίλεξε --'; sel.appendChild(opt0);       (window.CUSTOMER_CATEGORIES || []).forEach(c => {         const o = document.createElement('option'); o.value = c; o.innerText = c;         if ((ln.category || '') === c) o.selected = true;         sel.appendChild(o);       });       sel.addEventListener('change', function(){         const val = this.value;         // find line in obj and update         const found = (obj.lines || []).find(x => String(x.id || x.line_id || '') === lid);         if(found) found.category = val;         persist();       });       td.appendChild(sel);       tbody.appendChild(tr);     });     tbl.appendChild(tbody);     // wrap in container     const wrapper = document.createElement('div');     wrapper.className = 'overflow-auto max-h-96 border rounded';     wrapper.appendChild(tbl);     container.appendChild(wrapper);     persist();     return;   }    // single line case -> render buttons   const single = lines[0];   const lid = (single.id !== undefined) ? String(single.id) : (single.line_id !== undefined ? String(single.line_id) : 'l0');   const amt = single.amount || single.lineTotal || '';   const vatv = single.vat || single.vatRate || '';   const vat_cat = single.vatCategory || single.vat_category || '';   const selected_cat = single.category || '';    const singleDiv = document.createElement('div');   singleDiv.id = 'singleLine';   singleDiv.className = 'border rounded p-4';   singleDiv.dataset.lineId = lid;   singleDiv.dataset.amount = amt;   singleDiv.dataset.vat = vatv;   singleDiv.dataset.vatcat = vat_cat;    const infoHtml = document.createElement('div');   infoHtml.className = 'mb-3 grid grid-cols-1 md:grid-cols-3 gap-3';   infoHtml.innerHTML = `<div><strong>ΦΠΑ Κατηγορία</strong><div>${vat_cat}</div></div>                         <div><strong>Ποσό</strong><div>${amt}</div></div>                         <div><strong>ΦΠΑ</strong><div>${vatv}</div></div>`;   singleDiv.appendChild(infoHtml);    const chooseWrap = document.createElement('div');   chooseWrap.className = 'mb-3';   chooseWrap.innerHTML = `<strong>Επίλεξε Κατηγορία Εξόδου</strong>`;   const btnRow = document.createElement('div');   btnRow.id = 'categoryButtons';   btnRow.className = 'mt-2 flex flex-wrap gap-2';    (window.CUSTOMER_CATEGORIES || []).forEach(c => {     const b = document.createElement('button');     b.type = 'button';     b.className = 'category-btn px-3 py-2 border rounded hover:bg-sky-50';     b.dataset.cat = c;     b.dataset.lineId = lid;     b.innerText = c;     if (c === selected_cat) { b.classList.add('bg-sky-600', 'text-white'); }     b.addEventListener('click', function(){       const cat = this.dataset.cat;       // toggle selection       const currently = (obj.lines[0].category || '');       obj.lines[0].category = (currently === cat) ? '' : cat;       // reflect UI       Array.from(btnRow.querySelectorAll('button.category-btn')).forEach(bb=>{         bb.classList.toggle('bg-sky-600', bb.dataset.cat === obj.lines[0].category);         bb.classList.toggle('text-white', bb.dataset.cat === obj.lines[0].category);       });       persist();     });     btnRow.appendChild(b);   });    const clearBtn = document.createElement('button');   clearBtn.type = 'button';   clearBtn.id = 'clearCategory';   clearBtn.className = 'px-3 py-2 border rounded text-sm ml-2';   clearBtn.innerText = 'Καθαρισμός';   clearBtn.addEventListener('click', function(){     obj.lines[0].category = '';     Array.from(btnRow.querySelectorAll('button.category-btn')).forEach(bb=>{       bb.classList.remove('bg-sky-600', 'text-white');     });     persist();   });    btnRow.appendChild(clearBtn);   chooseWrap.appendChild(btnRow);   singleDiv.appendChild(chooseWrap);   container.appendChild(singleDiv);   persist(); }  /* Call this helper whenever you open the summary modal after you populated summaryJsonInput.    Examples of call sites are below (where modal.style.display='flex' is set). */   function showFlash(message, type='info', timeout=3000){   try {     const container = document.getElementById('clientFlashContainer');     if(!container) return;     const el = document.createElement('div');     el.className = 'mb-2 p-3 rounded shadow text-sm';     if(type === 'success') el.classList.add('bg-green-50', 'text-green-800');     else if(type === 'error') el.classList.add('bg-red-50', 'text-red-800');     else el.classList.add('bg-gray-50', 'text-gray-800');     el.innerText = message;     container.appendChild(el);     setTimeout(()=>{ try{ el.style.opacity='0'; setTimeout(()=>el.remove(), 300); }catch(e){} }, timeout);   } catch(e){ console.warn('showFlash failed', e); } }  // Helper API calls async function apiGetRepeatEntry(vat){   try {     const url = '/api/repeat_entry/get' + (vat ? ('?vat=' + encodeURIComponent(vat)) : '');     const res = await fetch(url, { credentials: 'same-origin' });     if (!res.ok) return { ok: false };     return await res.json();   } catch(e){     console.warn('apiGetRepeatEntry failed', e);     return { ok: false };   } } async function apiSaveRepeatEntry(enabled, mapping, vat){   try {     const res = await fetch('/api/repeat_entry/save', {       method: 'POST',       headers: {'Content-Type': 'application/json'},       credentials: 'same-origin',       body: JSON.stringify({ enabled: !!enabled, mapping: mapping || {}, vat: vat || VAT })     });     if(!res.ok) {       const txt = await res.text().catch(()=>null);       return { ok: false, status: res.status, body: txt };     }     return await res.json();   } catch(e){     console.warn('apiSaveRepeatEntry failed', e);     return { ok: false, error: String(e) };   } }  function removeForceEditParamFromUrl(){   try {     const url = new URL(window.location.href);     if (url.searchParams.has('force_edit')) {       url.searchParams.delete('force_edit');       history.replaceState(null, '', url.pathname + (url.search ? ('?' + url.searchParams.toString()) : '') + url.hash);     }   } catch(e){ console.warn('removeForceEditParamFromUrl failed', e); } }  document.addEventListener('DOMContentLoaded', function(){   // ---------- DOM references ----------   const repeatSwitch = document.getElementById('repeatEntrySwitch');   const editRepeatBtn = document.getElementById('editRepeatMappingBtn');   const repeatModal = document.getElementById('repeatMappingModal');   const repeatModalList = document.getElementById('repeatMappingList');   const repeatModalSave = document.getElementById('repeatModalSave');   const repeatModalCancel = document.getElementById('repeatModalCancel');   const repeatModalCloseX = document.getElementById('repeatModalCloseX');   const summaryInput = document.getElementById('summaryJsonInput'); // may be null   const saveSummaryForm = document.getElementById('saveSummaryForm');    // New: receipts switch + url input   // ---------- Μικρή, local επιδιόρθωση για τα κουμπιά/Select στο modal summary ---------- // ----- Prefill modal fields & categories from summaryJsonInput ----- function prefillSummaryModal(){   try {     const input = document.getElementById('summaryJsonInput');     if(!input) return;     let data = {};     try { data = JSON.parse(input.value || '{}'); } catch(e) { data = {}; }      // Header fields mapping     const map = {       mark: 'summaryModalMark',       AA: 'summary_AA',       AFM_issuer: 'summary_AFM',       AFM: 'summary_AFM',       Name: 'summary_Name',       issuer_name: 'summary_Name',       issueDate: 'summary_issueDate',       type_name: 'summary_type_name',       totalNetValue: 'summary_totalNetValue',       totalVatAmount: 'summary_totalVatAmount',       totalValue: 'summary_totalValue'     };     Object.keys(map).forEach(k => {       const el = document.getElementById(map[k]);       if(!el) return;       el.innerText = (data[k] !== undefined && data[k] !== null) ? String(data[k]) : (data[k.toUpperCase()] || '');     });      // Ensure container exists     const container = document.getElementById('summaryLinesContainer') || document;     const lines = Array.isArray(data.lines) ? data.lines : [];      // For each line, set select/button states     lines.forEach(line => {       const lid = String(line.id || line.line_id || '').trim();       if(!lid) return;        // Try to find matching element inside modal (row or singleLine)       let row = container.querySelector('[data-line-id="'+lid+'"]');       if(!row){         // fallback: global lookup         row = document.querySelector('[data-line-id="'+lid+'"]');       }       if(!row) return;        const cat = line.category || line.cat || '';       // set select if present       const sel = row.querySelector('select.expense-category[data-line-id="'+lid+'"]');       if(sel){         try { sel.value = cat || ''; } catch(e){ /* ignore */ }       }       // set button states if buttons present       const btns = row.querySelectorAll('.category-btn[data-line-id="'+lid+'"]');       if(btns && btns.length){         btns.forEach(b => b.classList.remove('bg-sky-600','text-white'));         if(cat){           // try to find exact button           const esc = (window.CSS && CSS.escape) ? CSS.escape(cat) : cat.replace(/"/g,'\\"');           const target = row.querySelector('.category-btn[data-line-id="'+lid+'"][data-cat="'+cat+'"]') ||                          row.querySelector('.category-btn[data-line-id="'+lid+'"][data-cat="'+esc+'"]');           if(target) target.classList.add('bg-sky-600','text-white');         }       }     });   } catch(err){     console.warn('prefillSummaryModal error', err);   } }  // Call prefill when modal gets shown by your existing code. // Find the places where you do: modal.style.display = 'flex' and add prefillSummaryModal().    (function(){   // helper: ασφαλής update του hidden json από το DOM   function updateSummaryFromDom(){     try {       const input = document.getElementById('summaryJsonInput');       if(!input) return;       let data = {};       try { data = JSON.parse(input.value || '{}'); } catch(e){ data = {}; }       data.lines = Array.isArray(data.lines) ? data.lines.slice() : [];        // For every element that has data-line-id inside the modal container, read category       const container = document.getElementById('summaryLinesContainer') || document;       container.querySelectorAll('[data-line-id]').forEach(el => {         const lid = String(el.dataset.lineId || '').trim();         if(!lid) return;         // prefer select.expense-category if present         let chosen = '';         const sel = el.querySelector('select.expense-category[data-line-id="'+lid+'"]');         if(sel && sel.value) chosen = sel.value;         else {           // else look for active category button in same element           const btn = el.querySelector('.category-btn.bg-sky-600');           if(btn) chosen = btn.dataset.cat || '';         }         // find or create line entry         let found = data.lines.find(x => String(x.id) === lid);         if(!found){           found = { id: lid, category: '' };           data.lines.push(found);         }         found.category = chosen || '';       });        input.value = JSON.stringify(data);     } catch(err){       console.warn('updateSummaryFromDom error', err);     }   }    // only operate inside the modal area to avoid interfering globally   const container = document.getElementById('summaryLinesContainer');   if(!container) {     // fallback: attach to document but remain minimal     console.warn('summaryLinesContainer not found — fix handlers limitedly');   }    // Event delegation: capture clicks on category buttons and selects inside modal   const targetRoot = container || document;   // Use capture true so we intercept before other handlers   targetRoot.addEventListener('click', function(e){     const btn = e.target.closest && e.target.closest('.category-btn');     if(btn && (container ? container.contains(btn) : true)){       // Prevent bubbling to other global handlers that open the receipts-modal       e.preventDefault();       e.stopPropagation();        // ensure it's not treated as a submit (defensive): set type=button if missing       try { if(btn.tagName === 'BUTTON' && !btn.hasAttribute('type')) btn.setAttribute('type','button'); } catch(_) {}        // determine line id: prefer dataset, else find closest ancestor with data-line-id       const lineEl = btn.closest('[data-line-id]');       const lineId = lineEl ? (lineEl.dataset.lineId || '') : (btn.dataset.lineId || '');        // Toggle active class for buttons of the same line only       if(lineId){         const group = (container || document).querySelectorAll('.category-btn[data-line-id="'+lineId+'"]');         group.forEach(b => { b.classList.remove('bg-sky-600','text-white'); });       } else {         // fallback: toggle only this button       }       const isActive = !btn.classList.contains('bg-sky-600');       if(isActive) btn.classList.add('bg-sky-600','text-white');       else btn.classList.remove('bg-sky-600','text-white');        // if there's a select corresponding to this line, keep it in sync       if(lineId){         const sel = (container || document).querySelector('select.expense-category[data-line-id="'+lineId+'"]');         if(sel) sel.value = isActive ? (btn.dataset.cat || '') : '';       }        // update hidden JSON immediately       updateSummaryFromDom();       return;     }      // if clicking on a select inside modal, prevent bubbling too     const sel = e.target.closest && e.target.closest('select.expense-category');     if(sel && (container ? container.contains(sel) : true)){       e.stopPropagation();       // let change event handle updating (below we also listen change)       return;     }   }, true);    // Listen change events on selects inside container and update JSON   (container || document).addEventListener('change', function(e){     const sel = e.target.closest && e.target.closest('select.expense-category');     if(sel && (container ? container.contains(sel) : true)){       e.stopPropagation();       // sync any visual button states (remove active if select chosen)       const lid = sel.dataset.lineId || (sel.closest('[data-line-id]') && sel.closest('[data-line-id]').dataset.lineId) || '';       if(lid){         // clear buttons for that line         const group = (container || document).querySelectorAll('.category-btn[data-line-id="'+lid+'"]');         group.forEach(b => b.classList.remove('bg-sky-600','text-white'));       }       updateSummaryFromDom();     }   }, true);    // Ensure Save form updates JSON right before submit (defensive)   const saveForm = document.getElementById('saveSummaryForm');   if(saveForm){     saveForm.addEventListener('submit', function(e){       try {         updateSummaryFromDom();         // small synchronous update only; let the submit continue       } catch(err){ console.warn('pre-submit update failed', err); }     });   }    // Expose helper in case other code wants to call it   window.updateSummaryFromDom = updateSummaryFromDom; })();    const useReceiptsSwitch = document.getElementById('useReceiptsSwitch');   // find or create an URL input (if not present in template we create one dynamically)   let urlInput = document.getElementById('scrapeUrlInput');   if(!urlInput){     urlInput = document.createElement('input');     urlInput.id = 'scrapeUrlInput';     urlInput.placeholder = 'Εισάγετε URL παραστατικού (για αποδείξεις)';     urlInput.className = 'p-2 border rounded w-2/4 hidden';     urlInput.type = 'text';     // insert after markInput     const mi = document.getElementById('markInput');     if(mi && mi.parentElement) mi.parentElement.insertBefore(urlInput, mi.nextSibling);   }    // --- ensure search icon behaves same as input clear/submit ---   (function wireSearchIconBehavior(){     const mi = document.getElementById('markInput');     if (!mi) return;      const possibleSelectors = [       '.icon-search', '.btn-search', '#searchIcon', '.fa-search', '.magnifier',       'button[aria-label="search"]', 'button[data-action="search"]'     ];      let found = null;     for (const sel of possibleSelectors) {       const el = document.querySelector(sel);       if (el) { found = el; break; }     }      if (!found) {       const delBtn = document.querySelector('button#deleteSelected, button.delete-selected, button[data-action="delete-selected"]');       if (delBtn && delBtn.parentElement) {         const sibling = delBtn.parentElement.querySelector('button, a, svg, i');         if (sibling && sibling !== delBtn) found = sibling;       }     }      if (!found) return;      found.addEventListener('click', function(e){       try {         mi.value = '';         mi.dispatchEvent(new Event('input', { bubbles: true }));         mi.dispatchEvent(new KeyboardEvent('keyup', { bubbles: true, key: 'Backspace' }));         if (window.jQuery && jQuery.fn && jQuery.fn.dataTable) {           try {             const dt = $('.summary-table').DataTable();             dt.search('').columns().search('').draw();           } catch(ignore){}         }       } catch(err){         console.warn('search icon handler failed', err);       }     });   })();     // detect vat keys in summary   function detectVatKeysFromSummary(){     if(summaryInput && summaryInput.value){       try {         const obj = JSON.parse(summaryInput.value || '{}');         const lines = Array.isArray(obj.lines) ? obj.lines : [];         const set = new Set();         lines.forEach(l => {           const key = (l.vatCategory || l.vat_category || l.vat || '').toString().trim();           if(key) set.add(key);         });         if(set.size) return Array.from(set);       } catch(e){ /* ignore */ }     }     return ['0%','6%','13%','24%'];   }    // Build repeat modal UI given an existing mapping (object)   function buildRepeatModalUI(existingMapping){     repeatModalList.innerHTML = '';     const vatKeys = detectVatKeysFromSummary();     const mapping = existingMapping || {};     // default row     const defaultRow = document.createElement('div');     defaultRow.className = 'flex items-center gap-3';     defaultRow.innerHTML = `<div class="w-36 text-sm font-medium">Προεπιλογή</div>`;     const defaultSelect = document.createElement('select');     defaultSelect.className = 'p-1 border rounded flex-1';     const opt0 = document.createElement('option'); opt0.value=''; opt0.innerText='-- (κανένα) --'; defaultSelect.appendChild(opt0);     CUSTOMER_CATEGORIES.forEach(c=>{       const o = document.createElement('option'); o.value = c; o.innerText = c;       if(mapping['__default'] === c) o.selected = true;       defaultSelect.appendChild(o);     });     defaultRow.appendChild(defaultSelect);     repeatModalList.appendChild(defaultRow);      vatKeys.forEach(vk=>{       const row = document.createElement('div');       row.className = 'flex items-center gap-3';       const label = document.createElement('div');       label.className = 'w-36 text-sm font-medium';       label.innerText = vk || '(άγνωστο)';       const sel = document.createElement('select');       sel.className = 'p-1 border rounded flex-1';       const oEmpty = document.createElement('option'); oEmpty.value=''; oEmpty.innerText='-- (προεπιλογή) --'; sel.appendChild(oEmpty);       CUSTOMER_CATEGORIES.forEach(c=>{         const o=document.createElement('option'); o.value=c; o.innerText=c;         if(mapping[vk] === c) o.selected = true;         sel.appendChild(o);       });       row.appendChild(label);       row.appendChild(sel);       repeatModalList.appendChild(row);     });   }    function openRepeatModalWithMapping(mapping){     // If receipts mode is on, block editing mapping because receipts get fixed category     if(useReceiptsSwitch && useReceiptsSwitch.checked){       alert('Όταν είναι επιλεγμένες οι Αποδείξεις, δεν επιτρέπεται η επεξεργασία χαρακτηρισμών — οι αποδείξεις παίρνουν μόνο την κατηγορία "αποδειξακια".');       return;     }     buildRepeatModalUI(mapping || {});     repeatModal.style.display = 'flex';   }   function closeRepeatModal(){ repeatModal.style.display = 'none'; }    // collect mapping from modal selects   function collectMappingFromModal(){     const mapping = {};     const selects = repeatModalList.querySelectorAll('select');     if(selects.length){       const first = selects[0];       if(first && first.value) mapping['__default'] = first.value;       const vatKeys = detectVatKeysFromSummary();       for(let i=1;i<selects.length;i++){         const sel = selects[i];         const vatKey = vatKeys[i-1];         if(sel && sel.value) mapping[vatKey] = sel.value;       }     }     return mapping;   }    // apply given mapping to summary JSON and submit saveSummaryForm   function applyMappingToSummaryAndSubmitUsingMapping(mapping){     if(!summaryInput || !saveSummaryForm) return false;     try {       const data = JSON.parse(summaryInput.value || '{}');       if(!Array.isArray(data.lines)) data.lines = [];       data.lines = data.lines.map(l => {         const vatKey = (l.vatCategory || l.vat_category || l.vat || '').toString().trim();         if(mapping && mapping[vatKey]) l.category = mapping[vatKey];         else if(mapping && mapping.__default) l.category = mapping.__default;         return l;       });       summaryInput.value = JSON.stringify(data);       saveSummaryForm.submit();       return true;     } catch(e){       console.warn('applyMappingToSummaryAndSubmitUsingMapping error', e);       return false;     }   }    // ---------- Initialization: load server repeat_entry config ----------   (async function initRepeatEntry(){     try {       const resp = await apiGetRepeatEntry(VAT);       if(resp && resp.ok){         const repeat = resp.repeat_entry || { enabled: false, mapping: {} };         if(resp.expense_tags && Array.isArray(resp.expense_tags) && resp.expense_tags.length){           CUSTOMER_CATEGORIES = resp.expense_tags.slice();         }         const enabled = !!repeat.enabled;         const mapping = repeat.mapping || {};          if(repeatSwitch){           repeatSwitch.checked = enabled;           // show edit button if mapping exists and receipts not selected           if(mapping && Object.keys(mapping).length && !(useReceiptsSwitch && useReceiptsSwitch.checked)) editRepeatBtn.classList.remove('hidden');           repeatSwitch.addEventListener('change', async function(){             const now = this.checked;             // if enabling and no mapping -> open modal to create mapping             if(now){               if(!mapping || Object.keys(mapping).length === 0){                 // open modal letting user create mapping (but only if receipts not selected)                 if(useReceiptsSwitch && useReceiptsSwitch.checked){                   // do not open — receipts use only αποδειξακια                   editRepeatBtn.classList.add('hidden');                 } else {                   openRepeatModalWithMapping({});                 }               } else {                 if(useReceiptsSwitch && useReceiptsSwitch.checked){                   // receipts + repeat -> hide edit button                   editRepeatBtn.classList.add('hidden');                 } else {                   editRepeatBtn.classList.remove('hidden');                 }               }             } else {               editRepeatBtn.classList.add('hidden');             }             // Persist enabled flag immediately (keep mapping as-is)             const saveResp = await apiSaveRepeatEntry(now, mapping, VAT);             if(saveResp && saveResp.ok){               showFlash('Ενημερώθηκε η ρύθμιση επαναληπτικής εισαγωγής.', 'success');               if(saveResp.expense_tags && Array.isArray(saveResp.expense_tags) && saveResp.expense_tags.length){                 CUSTOMER_CATEGORIES = saveResp.expense_tags.slice();               }             } else {               showFlash('Αποτυχία αποθήκευσης ρύθμισης.', 'error');             }           });         }          // If repeat enabled and mapping exists and modal_summary present -> auto apply mapping now         if (enabled && mapping && Object.keys(mapping).length && summaryInput) {         const receiptsOn = !!(useReceiptsSwitch && useReceiptsSwitch.checked);           if (!receiptsOn && !FORCE_EDIT) {             const did = applyMappingToSummaryAndSubmitUsingMapping(mapping);           if (did) {             const sm = document.getElementById('summaryModal');           if (sm) sm.style.display = 'none';       }     }   }          // Wire edit button         if(editRepeatBtn){           editRepeatBtn.classList.toggle('hidden', !mapping || Object.keys(mapping).length===0 || (useReceiptsSwitch && useReceiptsSwitch.checked));           editRepeatBtn.addEventListener('click', function(){             openRepeatModalWithMapping(mapping);           });         }       } else {         if(repeatSwitch) repeatSwitch.checked = false;       }     } catch(e){       console.warn('initRepeatEntry failed', e);     }   })();    // wire receipts switch to show/hide url input and to enforce mapping rule   if(useReceiptsSwitch){     useReceiptsSwitch.addEventListener('change', function(){       const on = !!this.checked;       // UI: swap inputs       if(on){         document.getElementById('markInput')?.classList.add('hidden');         urlInput?.classList.remove('hidden');         urlInput?.focus();         // when receipts are active, edit button must be hidden (even if repeat on)         if(editRepeatBtn) editRepeatBtn.classList.add('hidden');       } else {         document.getElementById('markInput')?.classList.remove('hidden');         urlInput?.classList.add('hidden');         document.getElementById('markInput')?.focus();         // restore edit button visibility based on repeatSwitch/mapping         // re-init repeat button visibility by calling initRepeatEntry lightly:         (async function(){           try {             const resp = await apiGetRepeatEntry(VAT);             if(resp && resp.ok){               const mapping = (resp.repeat_entry && resp.repeat_entry.mapping) ? resp.repeat_entry.mapping : {};               if(mapping && Object.keys(mapping).length && repeatSwitch && repeatSwitch.checked){                 editRepeatBtn.classList.remove('hidden');               } else {                 editRepeatBtn.classList.add('hidden');               }             }           } catch(e){}         })();       }     });   }    // repeat modal handlers   repeatModalCloseX?.addEventListener('click', closeRepeatModal);   repeatModalCancel?.addEventListener('click', closeRepeatModal);    repeatModalSave?.addEventListener('click', async function(){     // collect mapping     const mapping = collectMappingFromModal();     // persist to backend and enable repeat     const resp = await apiSaveRepeatEntry(true, mapping, VAT);     if (resp && resp.ok) {       if (resp.expense_tags && Array.isArray(resp.expense_tags) && resp.expense_tags.length) {         CUSTOMER_CATEGORIES = resp.expense_tags.slice();       }       if (repeatSwitch) repeatSwitch.checked = true;       // if receipts mode is on, edited mapping should not be used—hide edit button       if (useReceiptsSwitch && useReceiptsSwitch.checked) editRepeatBtn.classList.add('hidden');       else editRepeatBtn.classList.remove('hidden');        showFlash('Αποθηκεύτηκαν οι ρυθμίσεις επαναληπτικής εισαγωγής. Η σελίδα θα επαναφορτωθεί...', 'success', 800);       closeRepeatModal();       setTimeout(function(){ try { window.location.reload(); } catch(e){ console.warn('reload failed', e); } }, 600);       return;     } else {       console.warn('Failed saving repeat mapping', resp);       showFlash('Αποτυχία αποθήκευσης ρυθμίσεων επαναληπτικής εισαγωγής.', 'error');     }   });    // ---------- existing original JS (dismiss banner, force edit, summary modal wiring, etc) ----------   const forceBtn = document.getElementById('forceEditBtn');   const markInput = document.getElementById('markInput');   const existingBanner = document.getElementById('existingBanner');   const dismissBannerBtn = document.getElementById('dismissBannerBtn');    if(dismissBannerBtn){     dismissBannerBtn.addEventListener('click', function(){ if(existingBanner) existingBanner.style.display = 'none'; });   }    if (forceBtn){     forceBtn.addEventListener('click', function(){       const markValRaw = (markInput && markInput.value) ? markInput.value.trim() : '{{ mark or "" }}';       const markVal = encodeURIComponent(markValRaw || '');       if (!markVal){ alert('Δεν δόθηκε MARK για επιβεβαίωση.'); return; }       if (confirm('Θες σίγουρα να επαναχαρακτηρίσεις το MARK και να ανοίξει η φόρμα επεξεργασίας;')) {         if(existingBanner) existingBanner.style.display = 'none';         window.location = SEARCH_BASE_URL + '?mark=' + markVal + '&force_edit=1';       }     });   }    const modal = document.getElementById('summaryModal');   const modalCloseBtns = Array.from(document.querySelectorAll('#modalCloseX, #modalCloseBtn'));   modalCloseBtns.forEach(b => b?.addEventListener('click', function(){     if(modal) modal.style.display = 'none';     removeForceEditParamFromUrl();   }));    {% if modal_summary and (request.args.get('force_edit') == '1' or not allow_edit_existing) %}   setTimeout(()=>{   const m = document.getElementById('summaryModal');   if (!m) return;    // Αν είμαστε σε mode αποδείξεων ΚΑΙ είναι ενεργό το repeat, μην ανοίγεις modal   // ΕΞΑΙΡΕΣΗ: αν είναι reclassification (force_edit=1), τότε άνοιξέ το για να αλλάξουμε χαρακτηρισμούς.   const receiptsOn = !!(document.getElementById('useReceiptsSwitch') && document.getElementById('useReceiptsSwitch').checked);   const repeatOn   = !!(document.getElementById('repeatEntrySwitch') && document.getElementById('repeatEntrySwitch').checked);    // Επιπλέον έλεγχος: αν το summary είναι σαφώς Απόδειξη, αντιμετώπισέ το ως receipts flow   let isReceiptSummary = false;   try {     const raw = (document.getElementById('summaryJsonInput')?.value || '').trim();     if (raw) {       const sobj = JSON.parse(raw);       const tname = (sobj.type_name || sobj.type || '').toString().toLowerCase();       const cat   = (sobj.category || sobj.characteristic || sobj['χαρακτηρισμός'] || '').toString().toLowerCase();       isReceiptSummary = !!(sobj.is_receipt || tname.includes('απόδει') || tname.includes('receipt') || cat === 'αποδειξακια');     }   } catch(_){}     if ((receiptsOn || isReceiptSummary) && repeatOn && !FORCE_EDIT) {     // auto-flow αποδείξεων όταν είναι ενεργό το "Επαναληψιμη εισαγωγή"     try {       let raw = (document.getElementById('summaryJsonInput')?.value || '').trim();       if (!raw || raw === '{}' || raw === 'null') {         try { raw = JSON.stringify({{ modal_summary | tojson | safe }}); } catch(_) {}       }       const sobj = raw ? JSON.parse(raw) : {};       // Κανονικοποίησε σαν απόδειξη και επιβεβαίωσε μία φορά       const url = document.getElementById('scrapeUrlInput')?.value || '';       (async () => {         try {           await RC.confirmReceiptOnce(RC.normalizeReceiptSummary(sobj), url);           // κράτα το mode σε receipts και κάνε hard redirect για καθαρή κατάσταση           try { localStorage.setItem('useReceiptsSwitch','1'); } catch(_){}           const base = location.pathname + '?use_receipts=1';           location.replace(base);         } catch(e) {           console.warn('auto-confirm receipt failed', e);         }       })();     } catch(e) { console.warn('auto-flow receipts error', e); }     return;   }     // Αλλιώς, άνοιξέ το κανονικά   try {     const summaryInputEl = document.getElementById('summaryJsonInput');     if (summaryInputEl && (!summaryInputEl.value || summaryInputEl.value === '{}')) {       summaryInputEl.value = {{ modal_summary | tojson | safe }};     }     const obj = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');     renderSummaryLinesFromObject(obj);   } catch(e) { console.warn('renderSummaryLinesFromObject error', e); }    m.style.display = 'flex';   removeForceEditParamFromUrl(); }, 80); {% endif %}      {% if modal_warning %}   const afmModal = document.getElementById('afmWarningModal');   const afmModalBtn = document.getElementById('afmModalConfirm');   if (afmModal && afmModalBtn){     setTimeout(()=>{ afmModal.style.display = 'flex'; }, 50);     afmModalBtn.addEventListener('click', function(){ afmModal.style.display = 'none'; });   }   {% endif %}    // --- the rest of your existing summary wiring (no changes) ---   if (summaryInput){   try {     let summaryData = JSON.parse(summaryInput.value || '{}');     if (!Array.isArray(summaryData.lines)) summaryData.lines = [];     summaryData.lines = summaryData.lines.map(l => {       if (!l) return {id:'', description:'', amount:'', vat:'', category:'', vatCategory:''};       l.id = (l.id!==undefined)?String(l.id):(l.line_id!==undefined?String(l.line_id):'');       l.category = l.category || l.cat || l.line_category || l['κατηγορία'] || '';       return l;     });      // multi-line selects     document.querySelectorAll('#linesTableBody tr[data-line-id]').forEach(tr => {       const lid = String(tr.dataset.lineId || '');       const sel = tr.querySelector('select.expense-category');       if (!sel) return;       let existing = summaryData.lines.find(x => String(x.id) === lid);       if (!existing){         existing = {id: lid, category: ''};         summaryData.lines.push(existing);       }       sel.value = existing.category || '';       sel.addEventListener('change', function(){ existing.category = sel.value; summaryInput.value = JSON.stringify(summaryData); });     });      // single-line buttons     const singleLine = document.getElementById('singleLine');     if (singleLine){       const lid = String(singleLine.dataset.lineId || '');       let existing = summaryData.lines.find(x => String(x.id) === lid);       if (!existing){         existing = {id: lid, category: ''};         summaryData.lines.push(existing);       }       const buttons = document.querySelectorAll('#categoryButtons .category-btn');       function markActive(cat){         buttons.forEach(b => {           b.classList.toggle('bg-sky-600', b.dataset.cat === cat);           b.classList.toggle('text-white', b.dataset.cat === cat);         });       }       if (existing.category) markActive(existing.category);       buttons.forEach(btn => {         btn.addEventListener('click', function(){           const cat = this.dataset.cat;           existing.category = (existing.category === cat) ? '' : cat;           markActive(existing.category);           summaryInput.value = JSON.stringify(summaryData);         });       });       const clearBtn = document.getElementById('clearCategory');       clearBtn?.addEventListener('click', function(){         existing.category = '';         markActive('');         summaryInput.value = JSON.stringify(summaryData);       });     }     summaryInput.value = JSON.stringify(summaryData);   } catch(e){     console.warn('summary JSON parse/normalize error', e);   } }     // --- the table / datatables logic code (kept unchanged) ---   const hasTable = document.querySelector('.summary-table') !== null;   if (hasTable){     const jq = window.jQuery;     const dtAvail = jq && jq.fn && jq.fn.dataTable;     if (dtAvail){       try {         const dt = $('.summary-table').DataTable({           paging: true,           scrollY: '55vh',           scrollX: true,           scrollCollapse: true,           fixedHeader: { header: true, headerOffset: 0 },           colReorder: true,           autoWidth: false,           columnDefs: [{ orderable: false, targets: 0 }]         });         if (typeof dt.colResize === 'function') {           try { dt.colResize({ resizeMode: 'flex' }); } catch(e){ console.warn('colResize failed', e); }         }         const globalSearch = document.getElementById('globalSearch');         if (globalSearch){           globalSearch.addEventListener('input', function(){ dt.search(this.value).draw(); });         }         setTimeout(()=>{ try{ dt.columns.adjust().draw(); }catch(e){} }, 120);       } catch(e){         console.warn('DataTables init failed — falling back', e);       }     } else {       const globalSearch = document.getElementById('globalSearch');       if (globalSearch){         globalSearch.addEventListener('input', function(){           const q = this.value.toLowerCase();           document.querySelectorAll('.summary-table tbody tr').forEach(tr => {             tr.style.display = tr.textContent.toLowerCase().indexOf(q) !== -1 ? '' : 'none';           });         });       }     }      try {       const anyCheckbox = document.querySelector('input[name="delete_mark"]');       if (anyCheckbox){         const firstTh = document.querySelector('.summary-table thead th');         if (firstTh && !document.getElementById('selectAll')){           const chk = document.createElement('input');           chk.type = 'checkbox'; chk.id = 'selectAll'; chk.title = 'Επιλογή όλων';           chk.style.marginRight = '6px';           firstTh.prepend(chk);           chk.addEventListener('change', function(){ document.querySelectorAll('input[name="delete_mark"]').forEach(cb => cb.checked = this.checked); });         }         const headers = Array.from(document.querySelectorAll('.summary-table thead th')).map(h => h.innerText.trim().toLowerCase());         let markIdx = headers.findIndex(h => h.includes('mark'));         if (markIdx === -1) markIdx = headers.findIndex(h => h.includes('αφμ') || h.includes('afm'));         if (markIdx >= 0){           document.querySelectorAll('.summary-table tbody tr').forEach(row => {             const cb = row.querySelector('input[name="delete_mark"]');             if (cb){               const td = row.querySelectorAll('td')[markIdx];               if (td){                 const v = td.innerText.trim();                 if (v) cb.value = v;               }             }           });         }       }     } catch(e){ console.warn('select-all / mark mapping error', e); }   }    // --- new: restore table / reload when markInput cleared ---   (function wireRobustClearRestore(){     const mi = (typeof markInput !== 'undefined' && markInput) ? markInput : document.getElementById('markInput');     if (!mi) return;      let t = null;     let lastVal = mi.value || '';      function restoreAllRowsAndUi(){       try {         if (window.jQuery && jQuery.fn && jQuery.fn.dataTable) {           try {             const dt = $('.summary-table').DataTable();             dt.search('').columns().search('').draw();             try {               dt.rows().nodes().to$().each(function(){ this.style.display = ''; });             } catch(e){ /* ignore */ }             try { dt.columns.adjust().draw(false); } catch(e){ /* ignore */ }           } catch(e) {             console.warn('DataTables restore failed, falling back to DOM restore', e);             document.querySelectorAll('.summary-table tbody tr').forEach(tr => tr.style.display = '');           }         } else {           document.querySelectorAll('.summary-table tbody tr').forEach(tr => tr.style.display = '');         }          const selectAll = document.getElementById('selectAll') || document.querySelector('.summary-table thead input[type="checkbox"]#selectAll');         if (selectAll) selectAll.checked = false;          const evt = new Event('tableRestored');         document.querySelectorAll('.summary-table').forEach(t => t.dispatchEvent(evt));       } catch(err){         console.warn('restoreAllRowsAndUi failed', err);       }     }   document.addEventListener('DOMContentLoaded', function(){   try {     const m = document.getElementById('summaryModal');     if(m && (m.style.display === 'flex' || getComputedStyle(m).display !== 'none')){       // small timeout to let template-rendered inner HTML settle       setTimeout(()=>{ try { prefillSummaryModal(); } catch(e){ console.warn(e); } }, 40);     }   } catch(e){ /* ignore */ } });     function maybeRestore(){       clearTimeout(t);       t = setTimeout(()=>{         try {           const v = (mi.value || '').trim();           if (v === '' && (lastVal && lastVal.trim() !== '')) {             try {               if (typeof INITIAL_MARK !== 'undefined' && INITIAL_MARK && INITIAL_MARK.trim() !== '') {                 const cur = new URL(window.location.href);                 if (cur.searchParams.has('mark') || cur.searchParams.has('force_edit')) {                   window.location = SEARCH_BASE_URL;                   return;                 }               }             } catch(e){ /* ignore URL errors and fallthrough to client restore */ }              restoreAllRowsAndUi();           }           lastVal = v;         } catch(e){           console.warn(e);         }       }, 150);     }      mi.addEventListener('input', maybeRestore);     mi.addEventListener('keyup', maybeRestore);     mi.addEventListener('paste', function(){ setTimeout(maybeRestore, 50); });     mi.addEventListener('cut', function(){ setTimeout(maybeRestore, 50); });     mi.addEventListener('blur', maybeRestore);      let pollInterval = null;     try {       pollInterval = setInterval(() => {         const current = (mi.value || '').trim();         if (current !== (lastVal || '').trim()) {           maybeRestore();         }       }, 300);        window.addEventListener('beforeunload', () => {         if (pollInterval) clearInterval(pollInterval);       });     } catch(e){     }   })();    // ----- SCRAPER integration: auto call endpoint when URL provided and show modal -----   // Add a handler: when receipts switch ON and user submits form -> call /api/scrape_receipt and show modal   // ====================== RECEIPTS SCRAPE FLOW ====================== document.getElementById('markSearchForm')?.addEventListener('submit', async function (evt) {   if (useReceiptsSwitch && useReceiptsSwitch.checked) {      // --- de-dupe receipts submit (scrape) ---     // --- de-dupe receipts submit (scrape) ---   const form = evt.currentTarget;   if (form && form.dataset.receiptsSubmitting === '1') {     evt.preventDefault();     return;   }   if (form) form.dataset.receiptsSubmitting = '';   if (form) form.dataset.receiptsSubmitting = '1';  evt.preventDefault();     const url = (urlInput && urlInput.value) ? urlInput.value.trim() : '';     if (!url) {       showFlash('Εισάγετε URL για αποδείξεις.', 'error');       return;     }      try {       const res = await fetch('/api/scrape_receipt', {         method: 'POST',         credentials: 'same-origin',         headers: { 'Content-Type': 'application/json', 'X-Requested-With': 'XMLHttpRequest' },         body: JSON.stringify({ url: url })       });        const j = await res.json().catch(() => null);       if (!res.ok || !j || j.ok === false) {         const msg = j && (j.error || j.message) ? (j.error || j.message) : ('Server ' + (res.status || ''));         showFlash('Σφάλμα scraper: ' + msg, 'error', 6000);         return;       }        if (j && j.is_invoice === true) {   openReceiptWarning('Το URL φαίνεται να περιέχει Τιμολόγιο — δεν θα αποθηκευτεί ως Απόδειξη. Έλεγξε το παραστατικό.');   return; // STOP         }         // ---- Έλεγχος έτους απόδειξης vs ενεργή χρήση (modal + STOP) try {   // 1) Πάρε ενεργή χρήση από ACTIVE_YEAR ή από το backend (fallback)   const activeYear = await getActiveFiscalYear();    // 2) Εξήγαγε issueYear από την απόκριση του scraper   let issueYear = null;   if (j && j.issue_year != null && String(j.issue_year).trim() !== '') {     // δέξου είτε καθαρό έτος είτε π.χ. "2025"     const m = String(j.issue_year).match(/\b(19|20)\d{2}\b/);     issueYear = m ? m[0] : String(j.issue_year);   } else if (j) {     const anyDate = j.issue_date || j.issueDate || j.date || '';     if (typeof anyDate === 'string') {       const m = anyDate.match(/\b(19|20)\d{2}\b/);       if (m) issueYear = m[0];     }   }    // 3) Αν δεν ταιριάζουν -> δείξε modal και σταμάτα   if (activeYear && issueYear && String(issueYear) !== String(activeYear)) {     openReceiptWarning(`Προσοχή: Η απόδειξη είναι του ${issueYear}, ενώ η ενεργή χρήση είναι ${activeYear}. Η διαδικασία μπλοκάρεται.`);     return; // STOP   } } catch (_) {   /* αν αποτύχει ο έλεγχος, δεν μπλοκάρουμε σιωπηλά */ }         // Δημιουργία αυξανόμενου MARK 15 ψηφίων (από το backend)       const markRes = await fetch('/api/next_receipt_mark', { credentials: 'same-origin' });       const markData = await markRes.json().catch(() => null);       const nextMark = (markData && markData.mark) ? markData.mark : '';        // Prepare summary object για modal       const summaryObj = {         mark: nextMark,         AA: j.progressive_aa || '',         AFM_issuer: j.issuer_vat || '',         Name: j.issuer_name || '',         issueDate: j.issue_date || '',         type_name: 'ΑΠΟΔΕΙΞΗ',         totalValue: j.total_amount || '',         totalNetValue: j.total_amount || '',         totalVatAmount: (j.raw && (j.raw.totalVatAmount || j.raw.totalVat)) || '',         lines: []       ,   type: 'ΑΠΟΔΕΙΞΗ',   category: 'αποδειξακια',   is_receipt: true,   number: (j.progressive_aa || '')};        if (j.raw && Array.isArray(j.raw.lines) && j.raw.lines.length) {         j.raw.lines.forEach((l, idx) => {           summaryObj.lines.push({             id: l.id || ('r' + idx),             amount: l.amount || l.lineTotal || '',             vat: l.vat || l.vatRate || '',             vatCategory: l.vatCategory || l.vat_category || '',             description: l.description || l.desc || ''           });         });       } else {         summaryObj.lines.push({           id: 'r0',           amount: j.total_amount || '',           vat: (j.raw && (j.raw.vat || '')) || '',           vatCategory: (j.raw && (j.raw.vatCategory || '')) || '',           description: (j.raw && (j.raw.description || '')) || ''         });       }        // Populate modal inputs       const summaryInput = document.getElementById('summaryJsonInput');       if (summaryInput) summaryInput.value = JSON.stringify(summaryObj);         document.getElementById('scrapeUrlField')?.setAttribute('value', url);       const desiredCat = CUSTOMER_CATEGORIES.includes('αποδειξακια')         ? 'αποδειξακια'         : (CUSTOMER_CATEGORIES[0] || '');       document.getElementById('scrapeCategoryField')?.setAttribute('value', desiredCat);       document.getElementById('scrapeForceField')?.setAttribute('value', 'false');        // Ενημέρωση modal       const modal = document.getElementById('summaryModal');       if (modal) {         // ensure populate code runs (some populate watchers poll or listen for modal display)         // prefer calling RC_forcePopulateSummaryModal if present         if (window.RC_forcePopulateSummaryModal) {           try { window.RC_forcePopulateSummaryModal(); } catch(e){ console.warn('RC_forcePopulateSummaryModal failed', e); }         }         if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }         if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { showFlash('Λήφθηκε απόδειξη — ελέγξτε τα στοιχεία και πατήστε "Αποθήκευση στο Cache".', 'success', 5000); }       }      } catch (err) {       console.error('scrape_receipt error', err);       showFlash('Σφάλμα scraper: ' + (err.message || err), 'error', 6000);     }   } });     // Intercept "Αποθήκευση στο Cache" to perform AJAX save for scraped receipts   // intercept saveSummaryForm submit when scrapeUrlField is present // --- replace the previous payload construction + fetch with this robust version --- document.getElementById('saveSummaryForm')?.addEventListener('submit', async function(e){   const scrapeUrl = document.getElementById('scrapeUrlField')?.value || '';   if(!scrapeUrl) return; // let normal (invoice) flow proceed   e.preventDefault();    let summary = {};   try {     summary = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');   } catch(err){     console.warn('Failed parsing summaryJsonInput', err);     alert('Σφάλμα: άκυρα δεδομένα παραστατικού.');     return;   }    summary.is_receipt = true;   if (!summary.category || String(summary.category).trim() === '') summary.category = 'αποδειξακια';   if (!summary.type || String(summary.type).trim() === '') summary.type = 'ΑΠΟΔΕΙΞΗ';   if (!summary.type_name || String(summary.type_name).trim() === '') summary.type_name = 'Απόδειξη';    const aaCoalesce = summary.number || summary.AA || summary.aa || summary.progressive_aa || '';   summary.number = aaCoalesce;    if (!Array.isArray(summary.lines)) summary.lines = [];   summary.lines = summary.lines.map((l, i) => ({     id: (l && (l.id || l.line_id)) ? String(l.id || l.line_id) : ('r' + i),     description: (l && (l.description || l.desc)) || '',     amount: (l && (l.amount || l.lineTotal || l.total)) || '',     vat: (l && (l.vat || l.vatRate)) || '',     vatCategory: (l && (l.vatCategory || l.vat_category)) || '',     category: (l && l.category) || ''   }));    try {     const res = await fetch('/save_summary', {       method: 'POST',       credentials: 'same-origin',       headers: { 'Content-Type': 'application/json', 'X-Requested-With': 'XMLHttpRequest' },       body: JSON.stringify(summary)     });     if (!res.ok) {       const t = await res.text().catch(()=>'');       alert('Αποτυχία αποθήκευσης (HTTP ' + res.status + '): ' + t);       return;     }     try { document.getElementById('summaryModal').style.display = 'none'; } catch(_) {}     window.location = window.location.pathname;   } catch (err) {     console.error('save_summary AJAX error', err);     alert('Σφάλμα αποθήκευσης: ' + (err.message || err));   } });  document.getElementById('saveSummaryForm')?.addEventListener('submit', async function(e){   const scrapeUrl = document.getElementById('scrapeUrlField')?.value || '';   if(!scrapeUrl) return; // allow normal server flow for invoice flow   e.preventDefault();    // parse summary from hidden input   let summary = {};   try {     summary = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');   } catch(err){     console.warn('Failed parsing summaryJsonInput', err);     showFlash('Σφάλμα: άκυρα δεδομένα παραστατικού.', 'error');     return;   }    // robust AFM extraction (try many variants)   const afmFromSummary = (summary && (summary.AFM_issuer || summary.AFM || summary.issuer_vat || summary.issuerVat || summary.issuer_vat)) ||                          (summary && summary.raw && (summary.raw.issuer_vat || summary.raw.issuerVat || summary.raw.AFM || summary.raw.AFM_issuer));   const afmVal = (typeof VAT !== 'undefined' && VAT) ? VAT : (afmFromSummary ? String(afmFromSummary).trim() : '');    // robust year extraction: prefer ACTIVE_YEAR, then summary.year, then parse issueDate, then fallback to current year   let yearVal = null;   try {     if (typeof ACTIVE_YEAR !== 'undefined' && ACTIVE_YEAR) yearVal = String(ACTIVE_YEAR);     else if (summary && (summary.year || summary.Year)) yearVal = String(summary.year || summary.Year);     else if (summary && summary.issueDate) {       const parts = (summary.issueDate || '').split('/');       if (parts.length >= 3) yearVal = parts[2];     }     if (!yearVal) yearVal = String((new Date()).getUTCFullYear());   } catch(e){     yearVal = String((new Date()).getUTCFullYear());   }    // final mark   const markVal = summary.mark || document.getElementById('scrapeUrlField')?.dataset.mark || '';    // if afm missing -> abort with client message (server requires AFM or active session)   if (!afmVal) {     console.warn('confirm_receipt abort: missing AFM', { summary });     showFlash('Αδύνατο να αποθηκευτεί: λείπει AFM του ενεργού πελάτη. Επιλέξτε ενεργό πελάτη ή βεβαιωθείτε ότι το παραστατικό περιέχει ΑΦΜ.', 'error', 7000);     return;   }    const payload = {     url: scrapeUrl,     summary: summary,     force: (document.getElementById('scrapeForceField')?.value === 'true'),     category: 'αποδειξακια',     afm: afmVal,     year: String(yearVal),     mark: (summary.mark || markVal || '')   };    console.log('[RC-DEBUG] FETCH -> /api/confirm_receipt called', '/api/confirm_receipt', payload);    // send to backend   try {     const res = await fetch('/api/confirm_receipt', {       method: 'POST',       credentials: 'same-origin',       headers: {'Content-Type':'application/json','X-Requested-With':'XMLHttpRequest'},       body: JSON.stringify(payload)     });     const j = await res.json().catch(()=>null);     if(!res.ok || !j || !j.ok){       console.warn('confirm_receipt failed', res.status, j);       showFlash('Σφάλμα αποθήκευσης: ' + ((j && j.error) ? j.error : ('Server ' + (res.status || ''))) , 'error', 7000);       return;     }     showFlash('Αποθηκεύτηκε η απόδειξη (excel + json).', 'success');     document.getElementById('summaryModal').style.display = 'none';     // clean hidden fields     document.getElementById('scrapeUrlField').value = '';     document.getElementById('scrapeForceField').value = 'false';   } catch(err){     console.error('confirm_receipt fetch error', err);     showFlash('Σφάλμα δικτύου κατά την αποθήκευση.', 'error');   } });  // --- Fix: on page load, populate modal if summaryJsonInput already contains summary JSON --- // This replaces a missing populateSummaryModal call and uses the populate watcher (RC_forcePopulateSummaryModal) if available. // Robust startup: only show summary modal if summaryJsonInput actually contains meaningful data document.addEventListener("DOMContentLoaded", function(){   try {     const summaryEl = document.getElementById("summaryJsonInput");     const modal = document.getElementById("summaryModal");     if (!summaryEl) return;      let obj = {};     try { obj = JSON.parse(summaryEl.value || '{}'); } catch(e){ obj = {}; }      function isMeaningful(o){       if (!o || typeof o !== 'object') return false;        // quick acceptors: important single fields       const important = ['mark','MARK','AFM_issuer','AFM','totalValue','totalNetValue','total_amount','issueDate','issue_date','progressive_aa','AA'];       for (const k of important) {         if (o[k] !== undefined && o[k] !== null && String(o[k]).trim() !== '') return true;       }        // if lines array exists and has at least one line with some non-empty field -> accept       if (Array.isArray(o.lines) && o.lines.length) {         for (const ln of o.lines) {           if (!ln) continue;           if ( (ln.description && String(ln.description).trim() !== '') ||                (ln.amount && String(ln.amount).trim() !== '') ||                (ln.id && String(ln.id).trim() !== '') ) return true;         }       }        // fallback: if object has more than one non-empty key -> accept       const nonEmptyKeys = Object.keys(o).filter(k => {         try { return o[k] !== null && o[k] !== undefined && String(o[k]).trim() !== ''; } catch(e){ return false; }       });       if (nonEmptyKeys.length > 1) return true;        return false;     }      if (isMeaningful(obj)) {       // ask the populate watcher to run (if available), else run a safe local populate       if (window.RC_forcePopulateSummaryModal) {         try { window.RC_forcePopulateSummaryModal(); } catch(e){ console.warn('RC_forcePopulateSummaryModal failed', e); }       } else {         // try to populate basic fields if populate function not present         try {           if (typeof populateSummaryModal === 'function') try { populateSummaryModal(obj); } catch(_) {}         } catch(_) {}       }        if (modal) if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }     } else {       // ensure modal remains hidden on load       if (modal) modal.style.display = 'none';     }   } catch(e){     console.warn('startup populate summary failed', e);   } });      // This expects rows to have 'input[type="radio"][name="active_name"]' and row id pattern cred-row-<name>   document.querySelectorAll('tr[id^="cred-row-"]').forEach(tr=>{     tr.addEventListener('dblclick', function(e){       try {         const radio = tr.querySelector('input[type="radio"][name="active_name"]');         if(radio){           radio.checked = true;           // also give visual feedback (optional)           tr.classList.add('bg-gray-100');           setTimeout(()=>tr.classList.remove('bg-gray-100'), 600);         }       } catch(err){ console.warn('dblclick select radio failed', err); }     });   });  });  // === DEBUG SNIPPET: paste near end of your existing scripts === (function(){   function safeLog(...a){ try{ console.log('[RC-DEBUG]', ...a); }catch(e){} }    // Global JS error catcher   window.addEventListener('error', function(e){     safeLog('Window error', e.message, e.filename + ':' + e.lineno, e.error);   });   window.addEventListener('unhandledrejection', function(ev){     safeLog('Unhandled promise rejection', ev.reason);   });    // Watch important DOM elements existence   function checkDom(){     const names = [       'markSearchForm','useReceiptsSwitch','scrapeUrlInput',       'summaryModal','summaryJsonInput','saveSummaryForm',       'scrapeUrlField','scrapeCategoryField','scrapeForceField'     ];     const out = {};     names.forEach(n => out[n] = !!document.getElementById(n));     safeLog('DOM presence', out);   }   document.addEventListener('DOMContentLoaded', function(){ checkDom(); });    // Hook markSearchForm submit   const msf = document.getElementById('markSearchForm');   if(msf){     msf.addEventListener('submit', function(e){       try{         const useReceipts = !!(document.getElementById('useReceiptsSwitch') && document.getElementById('useReceiptsSwitch').checked);         safeLog('markSearchForm.submit fired', 'useReceipts=', useReceipts, 'mark=', (document.getElementById('markInput')?.value||''), 'urlInput=', (document.getElementById('scrapeUrlInput')?.value||''));       }catch(err){ safeLog('submit hook error', err); }     }, true);   } else safeLog('markSearchForm NOT FOUND');    // Hook receipts switch changes   const rs = document.getElementById('useReceiptsSwitch');   if(rs){     rs.addEventListener('change', function(e){       safeLog('useReceiptsSwitch change, checked=', rs.checked);       // show/hide created url input for visibility       const ui = document.getElementById('scrapeUrlInput');       if(ui) ui.style.outline = rs.checked ? '2px solid orange' : 'none';     });   } else safeLog('useReceiptsSwitch NOT FOUND');    // Monitor fetch to /api/scrape_receipt by wrapping fetch (only for debugging)   const origFetch = window.fetch;   window.fetch = async function(resource, init){     try{       if(typeof resource === 'string' && resource.indexOf('/api/scrape_receipt') !== -1){         safeLog('FETCH -> /api/scrape_receipt called', resource, init && init.body ? (init.body.length>100 ? init.body.slice(0,100)+'...' : init.body) : init);       }       if(typeof resource === 'string' && resource.indexOf('/api/confirm_receipt') !== -1){         safeLog('FETCH -> /api/confirm_receipt called', resource, init && init.body ? (function(){ try { return JSON.parse(init.body); } catch(e){ return init.body; } })() : init);         // Visual cue: flash border on modal         const m = document.getElementById('summaryModal');         if(m) { m.style.outline = '4px dashed lime'; setTimeout(()=>{ if(m) m.style.outline=''; }, 1200); }       }     }catch(e){ safeLog('fetch-wrap log failed', e); }     return origFetch.apply(this, arguments);   };    // Hook the saveSummaryForm submit (the interceptor should already exist in your code)   const ssf = document.getElementById('saveSummaryForm');   if(ssf){     ssf.addEventListener('submit', function(e){       try{         // show current fields         const summaryVal = (document.getElementById('summaryJsonInput')?.value) || null;         const scrapeUrl = document.getElementById('scrapeUrlField')?.value || null;         const scrapeCat = document.getElementById('scrapeCategoryField')?.value || null;         const scrapeForce = document.getElementById('scrapeForceField')?.value || null;         safeLog('saveSummaryForm.submit (intercept) summaryPresent=', !!summaryVal, 'scrapeUrl=', scrapeUrl, 'scrapeCat=', scrapeCat, 'scrapeForce=', scrapeForce);         // also pretty-print JSON if small         if(summaryVal){           try { safeLog('summary JSON', JSON.parse(summaryVal)); } catch(e){ safeLog('summary raw', summaryVal.slice(0,500)); }         }       }catch(err){ safeLog('saveSummaryForm submit hook error', err); }     }, true);   } else safeLog('saveSummaryForm NOT FOUND');    // When modal is shown/hidden, log it   const observer = new MutationObserver(function(muts){     try{       const modal = document.getElementById('summaryModal');       if(modal){         const style = window.getComputedStyle(modal);         if(style.display !== 'none'){           safeLog('summaryModal is visible');         } else {           // optional: safeLog('summaryModal is hidden');         }       }     }catch(e){ safeLog('mutation observer err', e); }   });   observer.observe(document.documentElement || document.body, { attributes: true, childList: true, subtree: true });    // Periodic sanity check: print whether modal and form are present every 2s for 6 checks   let checks = 0;   const interval = setInterval(function(){     checks++;     const present = {       modal: !!document.getElementById('summaryModal'),       summaryInput: !!document.getElementById('summaryJsonInput'),       saveForm: !!document.getElementById('saveSummaryForm'),       urlField: !!document.getElementById('scrapeUrlField')     };     safeLog('periodic-dom-check', present);     if(checks>6) clearInterval(interval);   }, 2000);    safeLog('RC-DEBUG injected'); })(); (function(){   function getSummaryData(){     const input = document.getElementById('summaryJsonInput');     if(!input) return null;     try {       const data = JSON.parse(input.value || '{}');       if(!Array.isArray(data.lines)) data.lines = [];       return { input, data };     } catch(e) {       return { input, data: { lines: [] } };     }   }    function saveSummaryData(obj){     if(!obj || !obj.input) return;     obj.input.value = JSON.stringify(obj.data);   }    // Click on category buttons (delegation)   document.addEventListener('click', function(ev){     const btn = ev.target.closest && ev.target.closest('.category-btn');     if(!btn) return;     ev.preventDefault();     // prevent other handlers (the "other modal" that opened)     try { ev.stopImmediatePropagation(); } catch(e){}     try { ev.stopPropagation(); } catch(e){}      const lid = btn.dataset.lineId || (btn.closest('[data-line-id]') && btn.closest('[data-line-id]').dataset.lineId) || '';     const cat = btn.dataset.cat || '';     if(!lid) return;      const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }      // toggle: if already set -> clear, else set     line.category = (String(line.category || '') === String(cat)) ? '' : String(cat);      // update button classes for that line     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.toggle('bg-sky-600', (b.dataset.cat === line.category));       b.classList.toggle('text-white', (b.dataset.cat === line.category));     });      // also update corresponding select if present     const sel = document.querySelector('select.expense-category[data-line-id="'+CSSescape(lid)+'"]');     if(sel) try { sel.value = line.category || ''; } catch(e){}      saveSummaryData(state);   }, true);    // change on line-selects   document.addEventListener('change', function(ev){     const sel = ev.target;     if(!sel || !sel.matches || !sel.matches('select.expense-category')) return;     const lid = sel.dataset.lineId || (sel.closest('[data-line-id]') && sel.closest('[data-line-id]').dataset.lineId) || '';     if(!lid) return;     const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }     line.category = String(sel.value || '');     // update any buttons     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.toggle('bg-sky-600', (b.dataset.cat === line.category));       b.classList.toggle('text-white', (b.dataset.cat === line.category));     });     saveSummaryData(state);   }, true);    // clear button (if exists)   document.addEventListener('click', function(ev){     const cb = ev.target.closest && ev.target.closest('#clearCategory');     if(!cb) return;     ev.preventDefault();     try { ev.stopImmediatePropagation(); } catch(e){}     const container = cb.closest('[data-line-id]') || document;     const lid = container && container.dataset && container.dataset.lineId ? container.dataset.lineId : '';     if(!lid) return;     const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }     line.category = '';     // update UI     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.remove('bg-sky-600','text-white');     });     const sel = document.querySelector('select.expense-category[data-line-id="'+CSSescape(lid)+'"]');     if(sel) sel.value = '';     saveSummaryData(state);   }, true);    // Ensure hidden input is up-to-date before normal form submit   const saveForm = document.getElementById('saveSummaryForm');   if(saveForm){     saveForm.addEventListener('submit', function(ev){       // just ensure input is stringified (handlers already update it live)       const s = getSummaryData();       if(s) saveSummaryData(s);       // allow normal submit (server-side will persist)     });   }    // small CSS.escape fallback used above   function CSSescape(s){     if(window.CSS && CSS.escape) return CSS.escape(s);     return String(s).replace(/([ #;?%&,.+*~\':"!^$[\]()=>|\/@])/g,'\\$1');   } })();  (function RC_AUTO_INJECT_SUMMARY_MODAL(){   try {     console.log('[RC-DEBUG] periodic-dom-check starting');      function exists(id){ return !!document.getElementById(id); }      const needs = {       modal: exists('summaryModal'),       summaryInput: exists('summaryJsonInput'),       saveForm: exists('saveSummaryForm'),       urlField: exists('scrapeUrlField')     };     console.log('[RC-DEBUG] DOM presence (before inject)', needs);      if (needs.modal && needs.summaryInput && needs.saveForm) {       console.log('[RC-DEBUG] All required DOM elements present, no injection needed');       return;     }      // Build modal HTML (minimal, matches server-side expected IDs)     const modalHtml = ` <div id="summaryModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">   <div class="bg-white rounded-lg shadow-lg w-full max-w-6xl p-6">     <div class="flex justify-between items-center mb-4">       <h3 class="text-lg font-semibold">Περίληψη Παραστατικού - <span id="summaryModalMark">MARK</span></h3>       <button id="modalCloseX" class="text-gray-500 text-xl font-bold">✕</button>     </div>      <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">       <div><strong>Α/Α Παραστατικού</strong><div id="summary_AA"></div></div>       <div><strong>ΑΦΜ</strong><div id="summary_AFM"></div></div>       <div><strong>Επωνυμία</strong><div id="summary_Name"></div></div>       <div><strong>Ημερομηνία</strong><div id="summary_issueDate"></div></div>       <div><strong>Τύπος Παραστατικού</strong><div id="summary_type_name"></div></div>       <div><strong>Καθαρή Αξία</strong><div id="summary_totalNetValue"></div></div>       <div><strong>ΦΠΑ</strong><div id="summary_totalVatAmount"></div></div>       <div><strong>Σύνολο</strong><div id="summary_totalValue"></div></div>     </div>      <h4 class="font-medium mt-4 mb-2">Γραμμές Παραστατικού (για χαρακτηρισμό)</h4>     <div id="summaryLinesContainer" class="overflow-auto max-h-96 border rounded p-2"></div>      <div class="mt-4 flex justify-between items-center">       <div class="text-sm text-gray-600">Σημείωση: οι κατηγορίες προέρχονται από τα settings του πελάτη.</div>       <div class="flex justify-end gap-2">         <form method="POST" action="{{ url_for('save_summary') }}" id="saveSummaryForm">           <input type="hidden" name="summary_json" id="summaryJsonInput" value='{}'>           <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση στο Cache</button>           <input type="hidden" id="scrapeUrlField" name="scrape_url" value="">           <input type="hidden" id="scrapeCategoryField" name="scrape_category" value="">           <input type="hidden" id="scrapeForceField" name="scrape_force" value="false">         </form>         <button id="modalCloseBtn" class="px-3 py-2 border rounded">Κλείσιμο</button>       </div>     </div>   </div> </div>`.trim();      // Inject into document.body     const wrapper = document.createElement('div');     wrapper.innerHTML = modalHtml;     // append at end of body so it does not break layout     document.body.appendChild(wrapper.firstChild);      // wire close buttons to hide modal (same behavior as original)     function hideModal(){       const m = document.getElementById('summaryModal');       if (m) m.style.display = 'none';       try { history.replaceState(null, '', location.pathname + (location.search || '') + location.hash); } catch(e){}     }     document.getElementById('modalCloseX')?.addEventListener('click', hideModal);     document.getElementById('modalCloseBtn')?.addEventListener('click', hideModal);      // Re-check presence     const needs_after = {       modal: exists('summaryModal'),       summaryInput: exists('summaryJsonInput'),       saveForm: exists('saveSummaryForm'),       urlField: exists('scrapeUrlField')     };     console.log('[RC-DEBUG] DOM presence (after inject)', needs_after);     console.log('[RC-DEBUG] Auto-injection done — the client flow should now find the modal and form.');    } catch (e) {     console.error('[RC-DEBUG] auto-inject error', e);   } })(); (function RC_POPULATE_SUMMARY_MODAL(){   try {     console.log('[RC-DEBUG] summary-populate init');      const summaryInput = document.getElementById('summaryJsonInput');     const modal = document.getElementById('summaryModal');     const markEl = document.getElementById('summaryModalMark');     const aaEl = document.getElementById('summary_AA');     const afmEl = document.getElementById('summary_AFM');     const nameEl = document.getElementById('summary_Name');     const issueEl = document.getElementById('summary_issueDate');     const typeEl = document.getElementById('summary_type_name');     const netEl = document.getElementById('summary_totalNetValue');     const vatEl = document.getElementById('summary_totalVatAmount');     const totEl = document.getElementById('summary_totalValue');     const linesContainer = document.getElementById('summaryLinesContainer');      if (!summaryInput) {       console.warn('[RC-DEBUG] summaryJsonInput NOT FOUND — modal will not populate');       return;     }     if (!modal) {       console.warn('[RC-DEBUG] summaryModal NOT FOUND — abort populate watcher');       return;     }      let lastVal = '';     function safeText(node, v){       if(!node) return;       node.textContent = (v === null || v === undefined) ? '' : String(v);     }      function renderLines(lines){       if(!linesContainer) return;       linesContainer.innerHTML = '';       if(!Array.isArray(lines) || lines.length === 0){         const p = document.createElement('div'); p.className = 'p-2 text-sm text-gray-600'; p.textContent = 'Δεν βρέθηκαν γραμμές.';         linesContainer.appendChild(p);         return;       }        // build a small table       const tbl = document.createElement('table');       tbl.className = 'w-full text-sm';       tbl.style.borderCollapse = 'collapse';       const thead = document.createElement('thead');       thead.innerHTML = '<tr><th class="p-1 border text-left">#</th><th class="p-1 border text-left">Περιγραφή</th><th class="p-1 border text-right">Ποσό</th><th class="p-1 border text-right">ΦΠΑ</th></tr>';       tbl.appendChild(thead);       const tbody = document.createElement('tbody');       lines.forEach((ln, idx) => {         const tr = document.createElement('tr');         tr.innerHTML = `<td class="p-1 border text-left">${idx+1}</td>                         <td class="p-1 border text-left">${(ln.description||ln.desc||'').toString().slice(0,200)}</td>                         <td class="p-1 border text-right">${ln.amount||ln.lineTotal||''}</td>                         <td class="p-1 border text-right">${ln.vat||ln.vatRate||''}</td>`;         tbody.appendChild(tr);       });       tbl.appendChild(tbody);       linesContainer.appendChild(tbl);     }      function populateOnce(){       try {         const v = (summaryInput.value || '').trim();         if (!v) {           // nothing to show           return;         }         if (v === lastVal) return;         lastVal = v;         let obj = {};         try { obj = JSON.parse(v); } catch(err){           console.warn('[RC-DEBUG] failed parsing summaryJsonInput JSON', err, v);           return;         }         console.log('[RC-DEBUG] populate modal from summary JSON', obj);          safeText(markEl, obj.mark || obj.MARK || (obj.raw && obj.raw.MARK) || '');         safeText(aaEl, obj.AA || obj.aa || obj.progressive_aa || (obj.raw && obj.raw.progressive_aa) || '');         safeText(afmEl, obj.AFM_issuer || obj.AFM || obj.issuer_vat || (obj.raw && obj.raw.issuer_vat) || '');         safeText(nameEl, obj.Name || obj.Name_issuer || obj.issuer_name || (obj.raw && obj.raw.issuer_name) || '');         safeText(issueEl, obj.issueDate || obj.issue_date || (obj.raw && obj.raw.issue_date) || '');         safeText(typeEl, obj.type_name || obj.type || (obj.raw && obj.raw.doc_type) || '');         safeText(netEl, obj.totalNetValue || obj.total_amount || obj.totalValue || (obj.raw && obj.raw.total_amount) || '');         safeText(vatEl, obj.totalVatAmount || (obj.raw && obj.raw.totalVatAmount) || '');         safeText(totEl, obj.totalValue || obj.total_amount || (obj.raw && obj.raw.total_amount) || '');          // lines         let lines = [];         if (Array.isArray(obj.lines) && obj.lines.length) lines = obj.lines;         else if (obj.raw && Array.isArray(obj.raw.lines) && obj.raw.lines.length) lines = obj.raw.lines;         else if (obj.lines && typeof obj.lines === 'object') {           // sometimes backend sends object: try to collect values           try {             lines = Object.values(obj.lines).filter(x => x);           } catch(e){}         }         renderLines(lines);          // if modal is hidden, ensure it's visible when populate invoked by scraper flow         try {           if (modal && modal.style.display === 'none') {             if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }           }         } catch(e){}        } catch(e){         console.error('[RC-DEBUG] populateOnce error', e);       }     }      // Start polling for changes to summaryJsonInput.value     const poll = setInterval(populateOnce, 250);      // Also populate when modal opens (observe style attribute)     const obs = new MutationObserver(muts => {       for(const m of muts){         if (m.type === 'attributes' && m.attributeName === 'style'){           try { if (modal.style.display !== 'none') populateOnce(); } catch(e){}         }       }     });     try { obs.observe(modal, { attributes: true, attributeFilter: ['style'] }); } catch(e){}      // expose a debug function on window to force populate     window.RC_forcePopulateSummaryModal = populateOnce;      console.log('[RC-DEBUG] summary-populate watcher started');      // Optional: stop polling after N seconds to be tidy     setTimeout(()=>{ clearInterval(poll); console.log('[RC-DEBUG] stopped summary-populate polling (timeout)'); }, 60*1000);    } catch (err) {     console.error('[RC-DEBUG] summary-populate init failed', err);   } })();  (function RC_FORCE_MODAL_GUARD(){   try {     const dbg = (...a) => { try { console.log('[RC-MODAL-GUARD]', ...a); } catch(e) {} };      function parseSummary() {       const el = document.getElementById('summaryJsonInput');       if (!el) return {};       try { return JSON.parse(el.value || '{}') || {}; } catch(e){ dbg('parseSummary JSON error', e); return {}; }     }      function hasMeaningfulSummary(obj) {       if (!obj || typeof obj !== 'object') return false;       // important single fields that guarantee modal should open       const keys = ['mark','MARK','AFM_issuer','AFM','totalValue','totalNetValue','total_amount','issueDate','issue_date','progressive_aa','AA'];       for (const k of keys) {         if (obj[k] !== undefined && obj[k] !== null && String(obj[k]).trim() !== '') return true;       }       // check raw.* fields if present       if (obj.raw && typeof obj.raw === 'object') {         for (const k of ['MARK','issuer_vat','total_amount','issue_date','progressive_aa']) {           if (obj.raw[k] !== undefined && obj.raw[k] !== null && String(obj.raw[k]).trim() !== '') return true;         }       }       // lines array with at least one non-empty line       if (Array.isArray(obj.lines) && obj.lines.length) {         for (const ln of obj.lines) {           if (!ln) continue;           if ((ln.description && String(ln.description).trim() !== '') ||               (ln.amount && String(ln.amount).trim() !== '') ||               (ln.id && String(ln.id).trim() !== '')) return true;         }       }       // fallback: object with >1 non-empty keys       const nonEmpty = Object.keys(obj).filter(k=>{         try { return obj[k] !== null && obj[k] !== undefined && String(obj[k]).trim() !== ''; } catch(e){ return false; }       });       return nonEmpty.length > 1;     }      function ensureModalHiddenUnlessMeaningful() {       const modal = document.getElementById('summaryModal');       const summaryEl = document.getElementById('summaryJsonInput');       if (!modal || !summaryEl) { dbg('no modal/summaryEl present'); return; }        // Force-hide now (neutralize server/client auto-show)       try { modal.style.display = 'none'; } catch(_) {}        // If summary becomes meaningful, show it (and populate watcher should fill fields)       const checkAndMaybeShow = () => {         const obj = parseSummary();         if (hasMeaningfulSummary(obj)) {           dbg('summary meaningful -> showing modal', obj);           try {             // try to trigger your populate logic if present             if (window.RC_forcePopulateSummaryModal) {               try { window.RC_forcePopulateSummaryModal(); } catch(e){ dbg('RC_forcePopulateSummaryModal failed', e); }             } else if (typeof populateSummaryModal === 'function') {               try { populateSummaryModal(obj); } catch(e){ dbg('populateSummaryModal failed', e); }             }             if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }           } catch(e){ dbg('show modal failed', e); }         } else {           // keep hidden           dbg('summary not meaningful -> keep modal hidden');           try { modal.style.display = 'none'; } catch(_) {}         }       };        // run immediate check after tiny delay (let other init finish)       setTimeout(checkAndMaybeShow, 60);        // observe changes to summaryJsonInput.value (detect writes by other code)       try {         let lastVal = summaryEl.value || '';         const poll = setInterval(() => {           try {             const cur = summaryEl.value || '';             if (cur !== lastVal) {               lastVal = cur;               dbg('summaryJsonInput changed -> recheck');               checkAndMaybeShow();             }           } catch(e){ dbg('poll error', e); }         }, 200);         // auto-stop polling after 60s         setTimeout(()=>clearInterval(poll), 60*1000);       } catch(e){ dbg('poll install failed', e); }        // observe modal style changes by others: if someone tries to open it while summary not meaningful, immediately hide       try {         const mo = new MutationObserver(muts => {           try {             const obj = parseSummary();             if (!hasMeaningfulSummary(obj)) {               const modalEl = document.getElementById('summaryModal');               if (modalEl) {                 const disp = window.getComputedStyle(modalEl).display;                 if (disp !== 'none') {                   dbg('modal was opened by other code while summary not meaningful -> hiding it');                   modalEl.style.display = 'none';                 }               }             }           } catch(e){ dbg('mutation observer callback error', e); }         });         const modalNode = document.getElementById('summaryModal');         if (modalNode) mo.observe(modalNode, { attributes: true, attributeFilter: ['style', 'class'] });       } catch(e){ dbg('mutation observer install failed', e); }     }      // Run after DOM ready (also run if DOM already ready)     if (document.readyState === 'loading') {       document.addEventListener('DOMContentLoaded', ensureModalHiddenUnlessMeaningful);     } else {       setTimeout(ensureModalHiddenUnlessMeaningful, 10);     }      dbg('RC_FORCE_MODAL_GUARD installed');   } catch(err) {     try { console.error('[RC-MODAL-GUARD] init failed', err); } catch(e){}   } })();  document.addEventListener('click', function(ev){   const btn = ev.target.closest('.category-btn');   if(!btn) return;    // 1) Αποτροπή bubbling για να μην ανοίγει άλλο modal   ev.preventDefault();   try { ev.stopImmediatePropagation(); } catch(e){}   try { ev.stopPropagation(); } catch(e){}    // 2) Ενημέρωση κουμπιών (UI)   const lineId = btn.dataset.lineId;   const cat = btn.dataset.cat;   const siblings = btn.parentElement.querySelectorAll('.category-btn');   siblings.forEach(s => s.classList.remove('bg-sky-600','text-white'));   btn.classList.add('bg-sky-600','text-white');    // 3) Ενημέρωση του select για compatibility   const sel = document.querySelector('select.expense-category[data-line-id="'+lineId+'"]');   if(sel) sel.value = cat;    // 4) Ενημέρωση του hidden JSON input   const input = document.getElementById('summaryJsonInput');   if(!input) return;   let data = {};   try { data = JSON.parse(input.value || '{}'); } catch(e){ data = {}; }    // Ensure lines array exists   if(!Array.isArray(data.lines)) data.lines = [];    // Update or add line   let line = data.lines.find(l => String(l.id || l.line_id || '') === lineId);   if(!line){     line = {id: lineId};     data.lines.push(line);   }   line.category = cat; // <--- εδώ γράφεται η κατηγορία    // Save back   input.value = JSON.stringify(data); });  document.querySelectorAll('.category-btn').forEach(btn=>{   btn.addEventListener('click', function(ev){     ev.preventDefault(); // δεν χρειάζεται stopPropagation      const lineId = this.dataset.lineId;     const cat = this.dataset.cat;      // Αποτύπωση UI     const siblings = this.parentElement.querySelectorAll('.category-btn');     siblings.forEach(s => s.classList.remove('bg-sky-600','text-white'));     this.classList.add('bg-sky-600','text-white');      // Ενημέρωση select για συμβατότητα     const sel = document.querySelector('select.expense-category[data-line-id="'+lineId+'"]');     if(sel) sel.value = cat;      // Ενημέρωση summaryJsonInput     const input = document.getElementById('summaryJsonInput');     if(!input) return;     let data = {};     try { data = JSON.parse(input.value || '{}'); } catch(e){ data={}; }     if(!Array.isArray(data.lines)) data.lines = [];     let line = data.lines.find(l => String(l.id||l.line_id||'')===lineId);     if(!line){       line = {id: lineId};       data.lines.push(line);     }     line.category = cat;     input.value = JSON.stringify(data);      // !!! Σημαντικό: μην καλείς stopPropagation εδώ !!!     // Άλλο modal handler θα πρέπει να φιλτράρει ποιο στοιχείο το ενεργοποιεί   }); }); document.addEventListener('click', function(ev){   // Αν το click προέρχεται από κουμπί category, αγνόησε   if(ev.target.closest('.category-btn')) return;    // άλλος κώδικας που ανοίγει modal });      // === Frontend patch: enrich delete_invoices POST + clear client-side cache === document.addEventListener('submit', function(ev){   try{     const form = ev.target;     if(!form || !form.action) return;     // Match delete_invoices endpoint (relative or absolute)     const a = document.createElement('a'); a.href = form.action;     const path = (a.pathname || '') + (a.search || '');     if(!/delete_invoices/.test(path)) return;      // 1) Ensure active_vat is posted     const existingHv = form.querySelector('input[name="active_vat"]');     if(!existingHv){       const hv = document.createElement('input');       hv.type = 'hidden';       hv.name = 'active_vat';       const activeVat = (document.querySelector('#vatSelector')?.value                       || document.querySelector('[name="vat"]')?.value                       || document.body.dataset.activeVat                       || '').toString().trim();       hv.value = activeVat;       form.appendChild(hv);     }      // 2) Collect marks to delete     let marks = Array.from(form.querySelectorAll('input[name="delete_mark"]')).map(i => (i.value||'').trim()).filter(Boolean);     if(!marks.length){       marks = Array.from(document.querySelectorAll('input[name="delete_mark"]:checked')).map(i => (i.value||'').trim()).filter(Boolean);     }      // 3) Clear client-side caches (localStorage keys that reference these MARKs)     try{       marks.forEach(mk => {         // common per-mark keys         localStorage.removeItem(`epsilon_summary_${mk}`);         localStorage.removeItem(`EPSILON:INV:${mk}`);       });       // any key containing one of the marks       for(let i=localStorage.length-1; i>=0; i--){         const k = localStorage.key(i);         if(!k) continue;         if(marks.some(mk => k.includes(mk))){           localStorage.removeItem(k);         }       }       // also clear any prefilled summary hidden input to avoid stale reopen       const sumInp = document.getElementById('summaryJsonInput');       if(sumInp) sumInp.value = '';     }catch(e){ /* ignore storage errors */ }    }catch(err){     console.warn('delete_invoices frontend patch failed', err);   } }, true); (function receiptsRepeatModalGuard(){   const once = { submitted:false };    function qs(id){ return document.getElementById(id); }    function readSummary(){     try { return JSON.parse(qs('summaryJsonInput')?.value || '{}'); }     catch(_) { return {}; }   }    function isMeaningfulSummary(o){     try{       if (!o || typeof o!=='object') return false;       const mark = String(o.mark || o.MARK || '').trim();       if (!mark || mark.length<6) return false;       const lines = Array.isArray(o.lines) ? o.lines : [];       if (lines.length===0) return false;       return lines.some(l=>{         if(!l) return false;         const desc=(l.description||l.desc||'').toString().trim();         const amt =(l.amount||l.lineTotal||l.total||'').toString().trim();         const id  =(l.id||l.line_id||'').toString().trim();         return !!(desc||amt||id);       });     }catch(_){ return false; }   }    function isReceiptSummary(o){     try{       const t = (o.type_name || o.type || '').toString().toLowerCase();       const c = (o.category || o.characteristic || o['χαρακτηρισμός'] || '').toString().toLowerCase();       return !!(o.is_receipt || t.includes('απόδει') || t.includes('receipt') || t.includes('λιαν') || c==='αποδειξακια');     }catch(_){ return false; }   }    function forceEdit(){     try { return new URLSearchParams(location.search).get('force_edit') === '1'; }     catch(_){ return false; }   }    function shouldOpenSummaryModal(obj){     const receiptsOn = !!(qs('useReceiptsSwitch') && qs('useReceiptsSwitch').checked);     const repeatOn   = !!(qs('repeatEntrySwitch') && qs('repeatEntrySwitch').checked);     // Αν είμαστε σε αποδείξεις (ή το summary είναι απόδειξη) και repeat ON και ΔΕΝ είναι reclassification -> ΜΗΝ ανοίξεις modal     if ((receiptsOn || isReceiptSummary(obj)) && repeatOn && !forceEdit()) return false;     return true;   }    function autoSubmitReceipt(obj){     if (once.submitted) return;                       // το στείλαμε ήδη σε αυτόν τον κύκλο     if (!isMeaningfulSummary(obj)) return;            // ασφαλιστική δικλείδα     const mark = (obj.mark || obj.MARK || '').toString().trim();     if (!mark) return;     const key = 'rc-auto:' + mark;     if (sessionStorage.getItem(key)) return;          // ήδη υποβλήθηκε μετά από reload      // Επέβαλε “Αποδειξάκια”     try{       if (!Array.isArray(obj.lines)) obj.lines = [];       obj.is_receipt = true;       obj.category = 'αποδειξακια';       obj.characteristic = 'αποδειξακια';       obj['χαρακτηρισμός'] = 'αποδειξακια';       qs('summaryJsonInput').value = JSON.stringify(obj);     }catch(_){}      const form = qs('saveSummaryForm');     if (!form) return;     once.submitted = true;     sessionStorage.setItem(key,'1');                 // ώστε στο επόμενο reload να ΜΗΝ ξαναστείλει     form.submit();   }    // Φρένο: ΜΗΝ υποβάλλεις την search-form χωρίς mark KAI χωρίς url   (function guardEmptySearchSubmit(){     const form = qs('markSearchForm');     if (!form) return;     form.addEventListener('submit', (e)=>{       const mark = (qs('markInput')?.value || '').trim();       const url  = (qs('scrapeUrlInput')?.value || '').trim();       if (!mark && !url) e.preventDefault();     }, true);   })();    // Παρακολούθησε το modal: αν πάει να ανοίξει ενώ ΔΕΝ πρέπει, κλείστο και κάνε auto-submit   const modal = qs('summaryModal');   if (!modal) return;    const observer = new MutationObserver(function(){     try{       const visible = modal && getComputedStyle(modal).display !== 'none';       if (!visible) return;       const obj = readSummary();       if (!shouldOpenSummaryModal(obj)) {         // Μπλόκαρε το modal και προχώρησε σε auto-submit         modal.style.display = 'none';         autoSubmitReceipt(obj);       }     }catch(_){}   });    try{     observer.observe(modal, { attributes:true, attributeFilter:['style','class'] });   }catch(_){}    // One-shot check αν τυχόν ξεκινά ήδη ανοιχτό   setTimeout(()=>{     try{       const visible = modal && getComputedStyle(modal).display !== 'none';       const obj = readSummary();       if (visible && !shouldOpenSummaryModal(obj)) {         modal.style.display = 'none';         autoSubmitReceipt(obj);       }     }catch(_){}   }, 80); })();  </script>  <style>     /* minimal styling for the toggle switch */     /* μόνο για modal */     .modal-summary-table th {         background-color: #0d6efd;         color: white;         border: 1px solid #ccc;     }      .modal-summary-table td {         border: 1px solid #e2e8f0;     }      .modal-summary-table tr:nth-child(even) {         background-color: #f9fafb;     }      .modal-summary-table tr:hover {         background-color: #e6f0ff;     }      .modal-summary-table tfoot td {         background-color: #f1f5f9;     }      /* κλείδωμα κλικ πίσω από modal */     .modal-backdrop {         position: fixed;         inset: 0;         background: rgba(0,0,0,.45);         z-index: 99998;     }      #summaryModal {         z-index: 99999;         position: fixed;         inset: 0;         display: none;         align-items: center;         justify-content: center;     }          #summaryModal.show {             display: flex;         }      body.modal-open #page-root {         pointer-events: none;     }     /* βάλε id=page-root στο κύριο wrapper της σελίδας */     body.modal-open #summaryModal,     body.modal-open #summaryModal * {         pointer-events: auto;     }      .toggle-switch {         width: 42px;         height: 24px;         -webkit-appearance: none;         appearance: none;         background: #e5e7eb;         border-radius: 999px;         position: relative;         outline: none;         cursor: pointer;         vertical-align: middle;     }          .toggle-switch:checked {             background: #0ea5a4;         }          .toggle-switch::after {             content: "";             position: absolute;             top: 3px;             left: 3px;             width: 18px;             height: 18px;             border-radius: 999px;             background: white;             transition: transform .15s ease;         }          .toggle-switch:checked::after {             transform: translateX(18px);         } </style>    <script>/* ===== Auto-submit segmented toggle + guarded auto-detect (receipts & invoices) ===== */ (function(){   try {     // Globals     window.__RC_FLAGS  = window.__RC_FLAGS  || {};     window.__RC_LOCKS  = window.__RC_LOCKS  || {};     const AUTO_KEY = 'rc:autoSubmitEnabled';      // UI refs (may be absent in some partial renders)     const form     = document.getElementById('markSearchForm');     const markEl   = document.getElementById('markInput');     const urlEl    = document.getElementById('scrapeUrlInput'); // may be dynamically created in your code     const btnOn    = document.getElementById('autoSubmitBtnOn');     const btnOff   = document.getElementById('autoSubmitBtnOff');     const receiptsSwitch = document.getElementById('useReceiptsSwitch');      // State helpers     function getAuto(){ try { return localStorage.getItem(AUTO_KEY) === '1'; } catch(_) { return false; } }     function setAuto(v){   try { localStorage.setItem(AUTO_KEY, v ? '1' : '0'); } catch(_) {}   window.__RC_FLAGS.auto_submit_enabled = !!v;   updateUi();    // reload με συγχρονισμό querystring   try {     const p = new URLSearchParams(location.search);     if (v) p.set('auto_submit','1'); else p.delete('auto_submit');     const newQS = p.toString();     const cur  = location.pathname + location.search;     const next = location.pathname + (newQS ? '?' + newQS : '');     if (next === cur) {       location.reload();          // αν δεν αλλάζει το URL, αναγκαστικό reload     } else {       location.search = newQS;    // αλλάζοντας το query κάνει reload μόνο του     }   } catch (e) {     location.reload();   } }      function updateUi(){       const on = getAuto();       if (btnOn && btnOff) {         btnOn.classList.toggle('bg-sky-600', on);         btnOn.classList.toggle('text-white', on);         btnOff.classList.toggle('bg-sky-600', !on);         btnOff.classList.toggle('text-white', !on);       }     }     updateUi();     if (btnOn)  btnOn.addEventListener('click', ()=> setAuto(true));     if (btnOff) btnOff.addEventListener('click', ()=> setAuto(false));      // Utilities     function isVisible(el){       if(!el) return false;       const cs = getComputedStyle(el);       return !(cs.display === 'none' || cs.visibility === 'hidden' || cs.opacity === '0');     }     function warningOpen(){       const ids = ['receiptWarn','afmWarningModal','receiptWarningModal','yearWarningModal'];       for (const id of ids){ const el = document.getElementById(id); if (el && isVisible(el)) return true; }       // generic: any visible dialog that is not the summary modal       const nodes = document.querySelectorAll('[role="dialog"],[aria-modal="true"],.modal,.modal-root');       for (const n of nodes){         if (!isVisible(n)) continue;         if (n.id === 'summaryModal' || n.id === 'receiptsModal') continue;         const t = (n.textContent || '').toLowerCase();         if (/\bπροειδοπ|\bπροσοχ|warning|σφάλμα|error/.test(t)) return true;       }       return false;     }      const normMark = v => (v||'').replace(/\D/g,'');     const isMark   = v => normMark(v).length === 15;     const isUrl    = v => {       const s = (v||'').trim();       return /^https?:\/\/\S+/i.test(s) || /^www\.\S+/i.test(s);     };     const extractMark = s => {       const m = String(s||'').match(/\b(\d{15})\b/);       return m ? m[1] : '';     };      function currentKey(){       const mv = (markEl && markEl.value) ? markEl.value.trim() : '';       const uv = (document.getElementById('scrapeUrlInput')?.value || '').trim(); // requery in case it was injected after       const receipts = !!(receiptsSwitch && receiptsSwitch.checked);        // For receipts: prefer a URL, but accept MARK inside URL as fallback       if (receipts) {         if (isUrl(uv)) return 'url:'+uv.replace(/\/+$/,'');         const ex = extractMark(uv); if (ex) return 'mark:'+ex;         // also allow mark typed in markInput if user didn't switch field         if (isMark(mv)) return 'mark:'+normMark(mv);         return null;       }        // For invoices: prefer MARK; but accept URL too       if (isMark(mv)) return 'mark:'+normMark(mv);       if (isUrl(mv)) return 'url:'+mv.replace(/\/+$/,'');       return null;     }      let pending = false;     const KEY_LAST = 'rc:lastSubmitKey';     const TTL_MS   = 20000;     function readLast(){       try {         const raw = sessionStorage.getItem(KEY_LAST);         if(!raw) return null;         const o = JSON.parse(raw);         if(!o || !o.ts || (Date.now()-o.ts)>TTL_MS) return null;         return o.k || null;       }catch(_){ return null; }     }     function writeLast(k){       try { sessionStorage.setItem(KEY_LAST, JSON.stringify({k, ts: Date.now()})); } catch(_) {}     }      const debounce = (fn,ms)=>{ let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a),ms); }; };      function trySubmit(){       if (!form || !getAuto()) return;       if (warningOpen()) return;       const k = currentKey();       if (!k) return;        // prevent collisions with existing receipts lock if present       if (window.__RC_LOCKS && window.__RC_LOCKS.scrape) return;        // prevent duplicate submits on same key       const last = readLast();       if (last && last === k) return;        // submit once       writeLast(k);       if (pending) return;       pending = true;       try {         if (form.requestSubmit) form.requestSubmit(); else form.submit();       } finally {         setTimeout(()=>{ pending=false; }, 500);       }     }      const onChange = debounce(trySubmit, 140);      // Wire inputs if present     if (markEl) {       markEl.addEventListener('input', onChange);       markEl.addEventListener('keyup', onChange);       markEl.addEventListener('paste', ()=>setTimeout(onChange,0));     }     // url input could be injected later; observe for appearance     let tries = 30;     const iv = setInterval(()=>{       const u = document.getElementById('scrapeUrlInput');       if (u) {         u.addEventListener('input', onChange);         u.addEventListener('keyup', onChange);         u.addEventListener('paste', ()=>setTimeout(onChange,0));         clearInterval(iv);       }       if(--tries<=0) clearInterval(iv);     }, 200);      // Initial pass (for browser autofill)     window.addEventListener('load', ()=> setTimeout(onChange, 60));      // Ensure a stub exists to avoid ReferenceError when other code calls it     if (typeof window.autoSubmitReceipt !== 'function') {       window.autoSubmitReceipt = function(){ /* stub to avoid ReferenceError; actual flow handled elsewhere */ };     }   } catch (err) {     console.warn('Auto-submit toggle patch failed', err);   } })();</script>  <script>/* === Persist Receipts/Invoices toggle across refresh === */ <script> /* === Persist Receipts/Invoices toggle across refresh (v2) === */ (function persistReceiptsToggle(){   const KEY = 'rc:useReceipts';   const sw  = document.getElementById('useReceiptsSwitch');   const markInput = document.getElementById('markInput');   function ensureUrlInput(){     let el = document.getElementById('scrapeUrlInput');     if (!el) {       // try to locate after markInput if dynamically created later by other code       el = document.createElement('input');       el.id = 'scrapeUrlInput';       el.placeholder = 'Εισάγετε URL παραστατικού (για αποδείξεις)';       el.className = 'p-2 border rounded w-2/4 hidden';       el.type = 'text';       if (markInput && markInput.parentElement) {         markInput.parentElement.insertBefore(el, markInput.nextSibling);       } else {         document.body.appendChild(el);       }     }     return el;   }   function applyUI(isReceipts){     const urlInput = ensureUrlInput();     if (isReceipts){       markInput && markInput.classList.add('hidden');       urlInput && urlInput.classList.remove('hidden');     } else {       markInput && markInput.classList.remove('hidden');       urlInput && urlInput.classList.add('hidden');     }   }    if (!sw) return;   // restore saved value   const saved = localStorage.getItem(KEY);   if (saved !== null) sw.checked = (saved === '1');   applyUI(sw.checked);    // if URL input appears later (other scripts), re-apply for a short window   let tries = 20;   const iv = setInterval(()=>{     applyUI(sw.checked);     if (--tries <= 0) clearInterval(iv);   }, 200);    sw.addEventListener('change', () => {     localStorage.setItem(KEY, sw.checked ? '1' : '0');     applyUI(sw.checked);   }); })();</script>  <script>/* === Lightweight warning detector (client/server modals) === */ (function ensureWarningOpenHelper(){   if (typeof window.__rc_warningOpen === 'function') return;   window.__rc_warningOpen = function(){     function vis(el){ if(!el) return false; const cs=getComputedStyle(el); return !(cs.display==='none'||cs.visibility==='hidden'||cs.opacity==='0'); }     const ids=['receiptWarn','afmWarningModal','receiptWarningModal','yearWarningModal'];     for (const id of ids){ const el=document.getElementById(id); if (el && vis(el)) return true; }     const nodes=document.querySelectorAll('[role="dialog"],[aria-modal="true"],.modal,.modal-root');     for (const n of nodes){       if (!vis(n)) continue;       if (n.id==='summaryModal' || n.id==='receiptsModal') continue;       const t=(n.textContent||'').toLowerCase();       if (/(προειδοπ|προσοχ|warning|σφάλμα|error)/.test(t)) return true;     }     return false;   }; })();</script>  <script> /* === RC helpers μόνο για flow Αποδείξεων === */ window.RC = window.RC || {};  RC.hasWarnings = function(){ return (typeof window.__rc_warningOpen === 'function') ? window.__rc_warningOpen() : false; };  RC.normalizeReceiptSummary = function (summaryObj) {   summaryObj.is_receipt = true;   summaryObj.type = summaryObj.type || 'ΑΠΟΔΕΙΞΗ';   summaryObj.type_name = summaryObj.type_name || 'ΑΠΟΔΕΙΞΗ';   summaryObj.category = 'αποδειξακια';   if (!Array.isArray(summaryObj.lines) || !summaryObj.lines.length) {     const tot = summaryObj.total_amount || summaryObj.totalValue || summaryObj.totalNetValue || '';     summaryObj.lines = [{ id:'r0', description:'', amount:String(tot||''), vat:'', vatCategory:'', category:'αποδειξακια' }];   } else {     summaryObj.lines = summaryObj.lines.map((l,i)=>({       id: String(l?.id || l?.line_id || ('r'+i)),       description: String(l?.description || l?.desc || ''),       amount: String(l?.amount || l?.lineTotal || l?.total || ''),       vat: String(l?.vat || l?.vatRate || ''),       vatCategory: String(l?.vatCategory || l?.vat_category || ''),       category: String(l?.category || '') || 'αποδειξακια'     }));   }   return summaryObj; };  RC.confirmReceiptOnce = async function(summaryObj, scrapeUrl){   window.__RC_LOCKS = window.__RC_LOCKS || {};   if (window.__RC_LOCKS.confirm) return { ok:false, reason:'locked' };   window.__RC_LOCKS.confirm = true;    try {     const VAT = "{{ vat or '' }}";     const afmVal = (VAT || summaryObj.AFM_issuer || summaryObj.AFM || (summaryObj.raw && summaryObj.raw.issuer_vat) || '').toString().trim();     if (!afmVal) return { ok:false, reason:'missing_afm' };      if (!/\b\d{15}\b/.test(String(summaryObj.mark||'').trim())) {       const r = await fetch('/api/next_receipt_mark', { credentials:'same-origin' });       const j = await r.json().catch(()=>null);       if (j && j.mark) summaryObj.mark = j.mark;     }      let yearVal = "{{ active_year|default('') }}";     if (!yearVal) {       try { const fy = await fetch('/get_fiscal_year', { credentials:'same-origin' }); const fyj = await fy.json(); if (fyj && fyj.exists) yearVal = String(fyj.fiscal_year); } catch(_){}     }     if (!yearVal) {       const any = summaryObj.issueDate || summaryObj.issue_date || (summaryObj.raw && summaryObj.raw.issue_date) || '';       const m = String(any).match(/\b(19|20)\d{2}\b/);       yearVal = m ? m[0] : String((new Date()).getUTCFullYear());     }      const payload = {       url: (scrapeUrl||'').trim(),       summary_json: JSON.stringify(summaryObj),       force: false,       category: 'αποδειξακια',       afm: afmVal,       year: String(yearVal),       mark: String(summaryObj.mark||'')     };      const res = await fetch('/api/confirm_receipt', {       method: 'POST',       credentials: 'same-origin',       headers: {'Content-Type':'application/json','X-Requested-With':'XMLHttpRequest'},       body: JSON.stringify(payload)     });     const jj = await res.json().catch(()=>null);     if (!res.ok || !jj || !jj.ok) return { ok:false, reason: (jj&&jj.error) || ('HTTP '+res.status) };      return { ok:true };   } finally {     window.__RC_LOCKS.confirm = false;   } };  RC.handleReceiptAfterScrape = async function(summaryObj, scrapeUrl){   try {     const repeatOn = !!document.getElementById('repeatEntrySwitch')?.checked;     const forceEdit = (typeof FORCE_EDIT !== 'undefined') ? !!FORCE_EDIT : false;     if (!repeatOn || forceEdit || RC.hasWarnings()) return false;      RC.normalizeReceiptSummary(summaryObj);     const summaryInput = document.getElementById('summaryJsonInput');     if (summaryInput) summaryInput.value = JSON.stringify(summaryObj);      const r = await RC.confirmReceiptOnce(summaryObj, scrapeUrl);     if (!r.ok) {       if (r.reason === 'missing_afm') {         window.openReceiptWarning && openReceiptWarning('Λείπει AFM ενεργού πελάτη.');       } else {         showFlash('Σφάλμα αποθήκευσης: ' + (r.reason || 'άγνωστο'), 'error', 6000);       }       return false;     }     window.__RC_FLAGS = window.__RC_FLAGS || {}; window.__RC_FLAGS.autoHandled = true;     showFlash('Αποθηκεύτηκε η απόδειξη (repeat).', 'success', 900);     try { document.getElementById('summaryModal').style.display = 'none'; } catch(_){}     try { document.getElementById('scrapeUrlInput').value = ''; } catch(_){}     try { document.getElementById('markInput').value = ''; } catch(_){}     window.location = window.location.pathname;     return true;   } catch (e) {     console.warn('handleReceiptAfterScrape failed', e);     return false;   } }; document.addEventListener('DOMContentLoaded', () => {   const params = new URLSearchParams(location.search);    const isReceipts =     (params.get('use_receipts') === '1') ||     (localStorage.getItem('pref_use_receipts') === '1');    const repeatOn =     (params.get('repeat') === '1') ||     (localStorage.getItem('pref_repeat') === '1');    const autoOn = params.has('auto_submit')     ? (params.get('auto_submit') === '1')     : (localStorage.getItem('pref_auto_submit') === '1');    if (!(isReceipts && repeatOn && autoOn)) return;    // 1) Κρύψε ό,τι modal επιβεβαίωσης υπάρχει για αποδείξεις   const hideModal = () => {     ['#receiptsModal', '#summaryModal', '[data-role="modal-warning"]', '#warningModal']       .forEach(sel => {         const el = document.querySelector(sel);         if (!el) return;         el.classList?.add('hidden');         el.style.display = 'none';       });   };   hideModal();    // 2) Βεβαιώσου ότι στο submit περνάει repeat_enabled=1   const ensureRepeatHidden = (form) => {     if (!form) return;     let h = form.querySelector('input[name="repeat_enabled"]');     if (!h) {       h = document.createElement('input');       h.type = 'hidden';       h.name = 'repeat_enabled';       form.appendChild(h);     }     h.value = '1';   };    // 3) Αυτόματο submit μόλις είναι έτοιμη η φόρμα/δεδομένα   let submitted = false;   const tryAutoSubmit = () => {     if (submitted) return;      // Βρες τη φόρμα αποθήκευσης     const form = document.querySelector('form[action$="/save_summary"]');     if (!form) return;      // Έλεγξε ότι υπάρχει payload: summary_json (input/textarea) ή τουλάχιστον το mark     const payloadEl = form.querySelector('input[name="summary_json"],textarea[name="summary_json"]');     const hasPayload = payloadEl ? String(payloadEl.value || '').trim().length > 0 : false;     const hasMark = String((form.querySelector('[name="mark"]') || {}).value || '').trim().length === 15;      if (!hasPayload && !hasMark) return;      ensureRepeatHidden(form);     submitted = true;     hideModal();     form.submit();   };    // Δοκίμασε άμεσα & με μικρό retry   tryAutoSubmit();   const i1 = setInterval(() => {     if (submitted) { clearInterval(i1); return; }     tryAutoSubmit();   }, 150);    // Παρακολούθησε DOM changes (όταν γεμίσει το modal/φόρμα από το fetch)   const mo = new MutationObserver(() => tryAutoSubmit());   mo.observe(document.body, { subtree: true, childList: true, attributes: false });    // Safety stop μετά από ~6s για να μην τρέχει για πάντα   setTimeout(() => mo.disconnect(), 6000); });  </script>  <script> /* === Receipts Repeat AutoSave (cache submit) — receipts-only, idempotent === */ (function(){   if (window.__rc_autosave_installed__) return;   window.__rc_autosave_installed__ = true;    function $id(id){ return document.getElementById(id); }   function lsGet(k,d){ try{ const v = localStorage.getItem(k); return v==null?d:v; }catch(_){ return d; } }   function lsSet(k,v){ try{ localStorage.setItem(k,v); }catch(_){ } }   function ssGet(k){ try{ return sessionStorage.getItem(k); }catch(_){ return null; } }   function ssSet(k,v){ try{ sessionStorage.setItem(k,v); }catch(_){ } }   function onceKey(mark){ return 'rc-cache:' + String(mark||'').trim(); }    function isReceipts(){ try{ var sw=$id('useReceiptsSwitch'); if (sw) return !!sw.checked; }catch(_){}                           return lsGet('UI:useReceipts','0')==='1'; }   function isRepeat(){   try{ var rsw=$id('repeatEntrySwitch'); if (rsw) return !!rsw.checked; }catch(_){}                           return lsGet('REPEAT:enabled','0')==='1'; }    function parseSummary(){     var el = $id('summaryJsonInput');     if (!el || !el.value || el.value === '{}' || el.value === 'null') return null;     try { return JSON.parse(el.value); } catch(_){ return null; }   }    function isReceiptSummary(s){     if (!s || typeof s!=='object') return false;     if (s.is_receipt === true) return true;     var t = String(s.type_name||s.type||'').toLowerCase();     if (t.includes('απόδει') || t.includes('receipt')) return true;     // fallback: when UI string shows "Λήφθηκε απόδειξη — ελέγξτε..."     var ui = String(s.ui_hint||'').toLowerCase();     if (ui.includes('λήφθηκε') && ui.includes('αποδεί')) return true;     return false;   }    function hasLines(s){ try{ return Array.isArray(s.lines) && s.lines.length>0; } catch(_){ return false; } }    function waitFor(fn, then, maxMs, step){     maxMs = maxMs || 6000; step = step || 120;     var waited = 0;     (function cycle(){       try{ if (fn()) { then(); return; } }catch(_){}       waited += step; if (waited >= maxMs) return;       setTimeout(cycle, step);     })();   }    function tryAutoSave(){     if (!isReceipts() || !isRepeat()) return;     var s = parseSummary();     if (!s || !isReceiptSummary(s) || !hasLines(s)) return;      var mark = String(s.mark || s.MARK || '').trim();     if (!mark) return;     if (ssGet(onceKey(mark))) return; // already submitted this cycle      var form = $id('saveSummaryForm');     if (!form) return;      // Normalize to αποδειξάκια before save, without touching invoices     try{       s.is_receipt = true;       s.category = s.category || 'αποδειξακια';       s.characteristic = s.characteristic || 'αποδειξακια';       if (!Array.isArray(s.lines)) s.lines = [];       s.lines = s.lines.map(function(l){ l=l||{}; l.category='αποδειξακια'; return l; });       $id('summaryJsonInput').value = JSON.stringify(s);     }catch(_){}      // Arm dedupe, keep receipts mode sticky     try { ssSet(onceKey(mark),'1'); } catch(_){}     lsSet('UI:useReceipts','1');      // Submit the cache form programmatically     try {       if (typeof form.requestSubmit === 'function') form.requestSubmit();       else form.submit();       // On navigation, allow next MARK to submit again       setTimeout(function(){ try{ ssSet(onceKey(mark), ''); }catch(_){} }, 2500);     } catch(e) {       console.warn('[RC-AUTOSAVE] submit failed', e);       try{ sessionStorage.removeItem(onceKey(mark)); }catch(_){}     }   }    document.addEventListener('DOMContentLoaded', function(){     // Reflect stored receipts state to the UI toggle early     try {       if (lsGet('UI:useReceipts','0')==='1') {         var sw = $id('useReceiptsSwitch');         if (sw && !sw.checked) { sw.checked = true; sw.dispatchEvent(new Event('change',{bubbles:true})); }       }     } catch(_){}      // Try immediately, microtask, and a short delay     tryAutoSave();     setTimeout(tryAutoSave, 0);     setTimeout(tryAutoSave, 300);      // Poll for hidden input changes produced by scraping     var el = $id('summaryJsonInput');     if (el){       var last = el.value;       setInterval(function(){         if (el.value !== last) { last = el.value; tryAutoSave(); }       }, 250);     }      // Re-run when receipts switch toggles on, or repeat toggles on     var r1 = $id('useReceiptsSwitch');     var r2 = $id('repeatEntrySwitch');     if (r1) r1.addEventListener('change', function(){ if (this.checked) setTimeout(tryAutoSave,10); });     if (r2) r2.addEventListener('change', function(){ if (this.checked) setTimeout(tryAutoSave,10); });      // When modal opens (if present), attempt again     var modal = $id('summaryModal');     if (modal && window.MutationObserver){       var mo = new MutationObserver(function(){ setTimeout(tryAutoSave, 20); });       try { mo.observe(modal, {attributes:true, childList:false, subtree:false}); } catch(_){}     }   }); })(); </script>  {% endblock %}  <!-- === BEGIN: Injected fix (v2) for receipts auto-flow & afm_epsilon cleanup === --> <script><script> /* RC-REPEAT-STATE bridge για Αποδείξεις & Τιμολόγια    - Διαβάζει το state από backend (/api/repeat_state/get) στην εκκίνηση    - Το περνάει και σε localStorage (REPEAT:enabled) & body dataset (data-repeat-enabled)    - Όταν αλλάζει ο διακόπτης repeatEntrySwitch, κάνει POST στο /api/repeat_state/set    - Στο submit της φόρμας αναζήτησης, κάνει ένα φρεσκάρισμα του state πριν τη ροή */ (function() {   const LS_KEY_REPEAT_ENABLED = 'REPEAT:enabled';    async function refreshRepeatState() {     try {       const r = await fetch('/api/repeat_state/get', { credentials: 'include' });       const j = await r.json();       const enabled = !!(j && j.ok && j.enabled);       localStorage.setItem(LS_KEY_REPEAT_ENABLED, enabled ? '1' : '0');       document.body.dataset.repeatEnabled = enabled ? '1' : '0';       window.REPEAT_ENABLED = enabled;        // συγχρόνισε και το switch αν υπάρχει       const sw = document.getElementById('repeatEntrySwitch');       if (sw) {         sw.checked = enabled;       }       console.debug('[RC-REPEAT-STATE] GET ->', { enabled });     } catch (e) {       console.warn('[RC-REPEAT-STATE] GET failed', e);     }   }    async function setRepeatEnabled(enabled) {     try {       const r = await fetch('/api/repeat_state/set', {         method: 'POST',         headers: { 'Content-Type': 'application/json' },         credentials: 'include',         body: JSON.stringify({ enabled: !!enabled })       });       const j = await r.json();       if (!j || !j.ok) throw new Error(j && j.error || 'unknown');       // persist τοπικά       localStorage.setItem(LS_KEY_REPEAT_ENABLED, enabled ? '1' : '0');       document.body.dataset.repeatEnabled = enabled ? '1' : '0';       window.REPEAT_ENABLED = !!enabled;       console.debug('[RC-REPEAT-STATE] SET ->', { enabled });     } catch (e) {       console.warn('[RC-REPEAT-STATE] SET failed', e);     }   }    // bootstrap: στην εκκίνηση   document.addEventListener('DOMContentLoaded', () => {     refreshRepeatState();     const sw = document.getElementById('repeatEntrySwitch');     if (sw) {       sw.addEventListener('change', function() {         setRepeatEnabled(this.checked);       });     }      // στο submit της αναζήτησης: κάνε ένα γρήγορο refresh για να «δει» σωστά το autosave των αποδείξεων     const form = document.getElementById('markSearchForm');     if (form) {       form.addEventListener('submit', () => {         // fire-and-forget, δεν μπλοκάρουμε το submit         refreshRepeatState();       });     }   }); })();</script>   (function(){   function isDetailed(x){     try{       if(!x || typeof x !== 'object') return false;       if (Array.isArray(x.lines) && x.lines.length) {         // any non-empty field in a line         for (const l of x.lines) {           if (l && (String(l.amount||'').trim() || String(l.description||'').trim() || String(l.vat||'').trim())) {             return true;           }         }       }       if (String(x.totalNetValue||'').trim() || String(x.totalValue||'').trim()) return true;       const t = (x.type||x.type_name||'').toString().toLowerCase();       if ((t.includes('απόδει') || t.includes('receipt')) && String(x.totalValue||'').trim()) return true;       return false;     }catch(e){ return false; }   }   function isReceipt(x){     try{       if (x && x.is_receipt) return true;       const t = (x?.type || x?.type_name || '').toString().toLowerCase();       if (t.includes('απόδει') || t.includes('receipt')) return true;       const ch = (x?.category || x?.χαρακτηρισμός || x?.characteristic || '');       return ch === 'αποδειξακια';     }catch(e){ return false; }   }   function prefer(a,b){     const da = isDetailed(a), db = isDetailed(b);     if (da && !db) return a;     if (db && !da) return b;     const la = Array.isArray(a?.lines) ? a.lines.length : 0;     const lb = Array.isArray(b?.lines) ? b.lines.length : 0;     if (lb > la) return b;     return a;   }   function sanitizeAfmEpsilon(arr){     try{       if(!Array.isArray(arr)) return arr;       const byMark = new Map();       for(const item of arr){         const m = String(item?.mark || '').trim();         if(!m) continue;         if(!byMark.has(m)) byMark.set(m, item);         else byMark.set(m, prefer(byMark.get(m), item));       }       let out = Array.from(byMark.values());       out = out.filter(isDetailed); // drop placeholders       return out;     }catch(e){       console.warn('sanitizeAfmEpsilon failed', e);       return arr;     }   }    // Clean global cache once   try { if (window.afm_epsilon) { window.afm_epsilon = sanitizeAfmEpsilon(window.afm_epsilon); } } catch(e){}    // Pick ONE receipt to submit when repeat+receipts is ON   function pickReceiptSummary(){     try{       // Priority 1: explicit modal summary if page defines it       if (window.modal_summary && isReceipt(window.modal_summary)) return window.modal_summary;       // Priority 2: data attribute on any modal container       const el = document.querySelector('[data-modal-summary]');       if (el){         try{           const obj = JSON.parse(el.getAttribute('data-modal-summary'));           if (isReceipt(obj)) return obj;         }catch(_){}       }       // Priority 3: last detailed receipt from afm_epsilon       const arr = Array.isArray(window.afm_epsilon) ? window.afm_epsilon.slice() : [];       const receipts = arr.filter(x => isReceipt(x) && isDetailed(x));       if (receipts.length) return receipts[receipts.length - 1];     }catch(e){ console.warn('pickReceiptSummary failed', e); }     return null;   }    try {     const repeatSwitch = document.getElementById('repeatEntrySwitch');     const useReceipts   = document.getElementById('useReceiptsSwitch');     const summaryInput  = document.getElementById('summaryJsonInput');     const saveForm      = document.getElementById('saveSummaryForm');     const auto = !!(useReceipts && useReceipts.checked) && !!(repeatSwitch && repeatSwitch.checked);     if (auto && summaryInput && saveForm) {       const chosen = pickReceiptSummary();       if (!chosen) {         console.warn('Auto-submit suppressed: no detailed receipt summary found.');         return;       }       // Ensure per-line category and flags       try{         if (!Array.isArray(chosen.lines)) chosen.lines = [];         if (chosen.lines.length === 0) {           // synthesize a simple line from totalValue when missing           const lid = (String(chosen.mark||'') + '_r0').replace(/^_+|_+$/g,'') || 'r0';           chosen.lines = [{             id: lid, description: "", amount: String(chosen.totalValue||""), vat: "", category: "αποδειξακια", vatCategory: ""           }];         } else {           chosen.lines = chosen.lines.map(l => (l && typeof l === 'object') ? {             ...l,             category: l.category || 'αποδειξακια'           } : l);         }         chosen.is_receipt = true;         chosen.category = chosen.category || 'αποδειξακια';         chosen.characteristic = chosen.characteristic || 'αποδειξακια';       }catch(_){}       summaryInput.value = JSON.stringify(chosen);       setTimeout(function(){         if (!saveForm.dataset._autoSubmitted) {           saveForm.dataset._autoSubmitted = '1';           saveForm.requestSubmit ? saveForm.requestSubmit() : saveForm.submit();         }       }, 30);     }   } catch(e) { console.warn('receipts auto-confirm failed', e); } })();</script> <!-- === END: Injected fix (v2) === --> <!-- RC_RECEIPT_AUTOPILOT_PATCH --> <script>(function(){'use strict';   // ====== Robust receipts repeat autopilot (no UI break) ======   window.__RC_FLAGS = window.__RC_FLAGS || {};    function lsget(key, fallback){ try{ const v=localStorage.getItem(key); if(v===null) return fallback; if(v==='1') return true; if(v==='0') return false; return v; }catch(_){     return fallback; } }    function receiptsSwitchOn(){ try{ return !!document.getElementById('useReceiptsSwitch')?.checked; }catch(_){     return !!lsget('rc:useReceipts','receipts')==='receipts'; } }    function autoSubmitOn(){ return !!lsget('rc:autoSubmitEnabled', true); }   function repeatSwitchOn(){ try{ return !!document.getElementById('repeatEntrySwitch')?.checked; }catch(_){ return !!lsget('rc:repeat_enabled', false); } }    async function serverRepeatEnabled(){     try{ const r = await fetch('/api/repeat_entry/get', { credentials:'include' });          const j = await r.json(); return !!(j && (j.enabled || j.repeat_enabled)); }     catch(_){ return repeatSwitchOn(); }   }    function hideReceiptBanner(){     const nodes = document.querySelectorAll('#existingBanner, .flash, .alert');     nodes.forEach(el => {       try{ if(/Λήφθηκε απόδειξη/i.test(el.textContent||'')) el.style.display='none'; }catch(_){}     });   }    function tryAutoSave(){     const form = document.getElementById('saveSummaryForm');     const input = document.getElementById('summaryJsonInput');     if (!form || !input) return false;     // mark flags to suppress informational toast     window.__RC_FLAGS.autoHandled = true;     hideReceiptBanner();     // Submit the server form (keeps server-side logic, excel write etc.)     // Use a microtask so any last-second JSON sync runs first     setTimeout(() => {       try { form.submit(); } catch(e) {         try { form.dispatchEvent(new Event('submit', { cancelable:false })); } catch(_){}       }     }, 30);     return true;   }    function observeModalAndAuto(){     const modal = document.getElementById('summaryModal');     if (!modal) return;     let done = false;     const doIt = () => {       if (done) return;       const visible = getComputedStyle(modal).display !== 'none';       if (!visible) return;       if (tryAutoSave()) { done = true; modal.style.display = 'none'; }     };     try { new MutationObserver(doIt).observe(modal, { attributes:true, attributeFilter:['style','class'] }); } catch(_){}     setTimeout(doIt, 80);   }    // Kickoff when DOM is ready   document.addEventListener('DOMContentLoaded', () => {     // Make search submit more reliable when auto-submit is ON     const form = document.getElementById('markSearchForm');     if (form) {       form.addEventListener('keydown', (e) => {         if (e.key === 'Enter' && autoSubmitOn()) {           const mark = (document.getElementById('markInput')?.value || '').trim();           const url  = (document.getElementById('scrapeUrlInput')?.value || document.getElementById('scrapeUrlField')?.value || '').trim();           if (!mark && !url) e.preventDefault(); // guard empty         }       }, true);     }      // Always ensure page comes back to a clean state after any save     const saveForm = document.getElementById('saveSummaryForm');     if (saveForm) {       let reloaded = false;       const reloadSoon = () => { if (!reloaded) { reloaded = true; setTimeout(() => location.reload(), 300); } };       saveForm.addEventListener('ajax:done', reloadSoon, { once:true });       saveForm.addEventListener('submit', () => setTimeout(reloadSoon, 1200), { once:true });     }      // If receipts + repeat are ON, suppress the "Λήφθηκε..." toast and auto-save     Promise.resolve(serverRepeatEnabled()).then((rep) => {       if (receiptsSwitchOn() && rep) {         window.__RC_FLAGS.repeat_enabled = true;         window.__RC_FLAGS.autoHandled = true; // prevents info message in existing code         if (!tryAutoSave()) observeModalAndAuto();       }     });   }); })();</script>   <!-- ===== Receipts repeat auto-confirm SHIM (appended) ===== --> <script>(function(){   // small utility: safe JSON parse   function parseJSON(x){ try{ return JSON.parse(x); }catch(_){ return null; } }   function getLS(k, d){ try{ const v = localStorage.getItem(k); return (v===null||v===undefined)?d:v; }catch(_){ return d; } }   function setLS(k, v){ try{ localStorage.setItem(k, v); }catch(_){ } }   function isTruthy(v){ return v === true || v === '1' || v === 1 || v === 'true'; }    // Read repeat + receipts mode from both localStorage and globals/switches   function getRepeatOn(){     const ls = getLS('REPEAT:enabled', null);     if (ls !== null) return isTruthy(ls);     if (window.REPEAT_ENABLED !== undefined) return !!window.REPEAT_ENABLED;     const sw = document.getElementById('repeatEntrySwitch');     return !!(sw && sw.checked);   }   function getReceiptsModeOn(){     const ls = getLS('UI:useReceipts', null);     if (ls !== null) return isTruthy(ls);     if (window.USE_RECEIPTS !== undefined) return !!window.USE_RECEIPTS;     const sw = document.getElementById('useReceiptsSwitch');     return !!(sw && sw.checked);   }    function isReceiptSummary(obj){     if(!obj || typeof obj !== 'object') return false;     if (obj.is_receipt === true) return true;     const t = String(obj.type_name || obj.type || '').toLowerCase();     const cat = String(obj.category || obj.characteristic || obj['χαρακτηρισμός'] || '').toLowerCase();     return (t.includes('απόδει') || t.includes('receipt') || cat === 'αποδειξακια');   }    function hasMeaningfulLines(obj){     const arr = Array.isArray(obj && obj.lines) ? obj.lines : [];     if (arr.length === 0) return false;     // any non-empty amount OR category is enough     return arr.some(l => {       const amt = String(l && (l.amount || l.total || l.lineTotal || '')).trim();       const cat = String(l && (l.category || l.cat || '')).trim();       return !!(amt || cat);     });   }    function readSummaryObject(){     const input = document.getElementById('summaryJsonInput');     if(!input) return null;     return parseJSON(input.value || '{}') || null;   }    function getScrapeUrl(){     const u = document.getElementById('scrapeUrlInput') || document.getElementById('scrapeUrlField');     return u ? (u.value || '') : '';   }    let lastMarkTried = null;   let busy = false;    async function tryAutoConfirm(){     if (busy) return;     const rep = getRepeatOn();     const inRec = getReceiptsModeOn();     if (!rep || !inRec) return;      const s = readSummaryObject();     if (!s || !isReceiptSummary(s) || !hasMeaningfulLines(s)) return;      // avoid double firing for the same mark     const mk = String(s.mark || s.MARK || '').trim();     if (!mk || mk === lastMarkTried) return;     lastMarkTried = mk;      // hide modal pre-emptively to avoid flicker     try {       const modal = document.getElementById('summaryModal');       if (modal) modal.style.display = 'none';     } catch(_){}      if (!(window.RC && RC.confirmReceiptOnce && RC.normalizeReceiptSummary)) {       // RC not yet ready; retry later       return;     }      busy = true;     try {       await RC.confirmReceiptOnce(RC.normalizeReceiptSummary(s), getScrapeUrl());       // keep receipts mode sticky on refresh       setLS('UI:useReceipts', '1');       // soft reload to clear form quickly       setTimeout(function(){         try {           const base = location.pathname + '?use_receipts=1';           location.replace(base);         } catch(_){ location.reload(); }       }, 120);     } catch(err){       console.warn('[RC-AUTOCONFIRM] failed', err);       // allow another attempt       lastMarkTried = null;     } finally {       busy = false;     }   }    // Poll for summary changes & conditions (fast but lightweight)   let pollId = null;   function startPoll(){     if (pollId) return;     pollId = setInterval(tryAutoConfirm, 200);   }   function stopPoll(){     if (pollId) { clearInterval(pollId); pollId = null; }   }    // Start ASAP   startPoll();    // Re-run when user submits the search form (so mode is immediately persisted)   document.addEventListener('submit', function(e){     const f = e.target;     if (f && f.id === 'markSearchForm') {       // persist current mode for autosave       try {         const sw = document.getElementById('useReceiptsSwitch');         if (sw) setLS('UI:useReceipts', sw.checked ? '1' : '0');       } catch(_){}       setTimeout(tryAutoConfirm, 0);     }   }, true);    // Also, when repeat switch toggles, persist immediately   document.addEventListener('change', function(e){     const sw = e.target && e.target.id === 'repeatEntrySwitch' ? e.target : null;     if (sw){       setLS('REPEAT:enabled', sw.checked ? '1' : '0');       setTimeout(tryAutoConfirm, 0);     }   }, true);    // One-time bootstrap from server state (if available via endpoint)   // This is best-effort; if it fails, user toggles or previous LS values will be used.   (async function bootstrapRepeatOnce(){     try {       const r = await fetch('/api/repeat_entry/get', { credentials: 'same-origin' });       const j = await r.json();       if (j && j.ok && j.repeat_entry) {         setLS('REPEAT:enabled', j.repeat_entry.enabled ? '1' : '0');         // leave mapping to backend; we only need the enabled bit here         setTimeout(tryAutoConfirm, 0);       }     } catch(_){}   })(); })();</script> <!-- ===== end SHIM ===== -->{% extends "base.html" %} {% block title %}Αναζήτηση MARK{% endblock %}  {% block content %}  <div class="bg-white rounded shadow p-6">     <h2 class="text-lg font-semibold mb-2">Αναζήτηση MARK</h2>      {% if error %}     <div class="mb-3 p-2 rounded bg-red-50 text-red-800">{{ error }}</div>     {% endif %}      <form method="post" class="flex gap-2 items-center" id="markSearchForm">         <!-- Auto-submit segmented toggle (scoped to client) -->         <div class="flex items-center gap-2 ml-4" id="autoSubmitGroup">             <span class="text-sm">Auto‑submit</span>             <div class="inline-flex rounded-md overflow-hidden border border-gray-300">                 <button type="button" id="autoSubmitBtnOff" class="px-2 py-1 text-sm focus:outline-none">Off</button>                 <button type="button" id="autoSubmitBtnOn" class="px-2 py-1 text-sm focus:outline-none">On</button>             </div>         </div>          <input name="mark" id="markInput" type="text" placeholder="15ψήφιο MARK" class="p-2 border rounded w-2/4" value="{{ mark }}">         <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αναζήτηση</button>         <div class="flex items-center gap-2 ml-4">             <label for="useReceiptsSwitch" class="text-sm">                 Τιμολόγια<label>                     <input type="checkbox" id="useReceiptsSwitch" role="switch" aria-checked="false" class="toggle-switch">                     <label for="useReceiptsSwitch" class="text-sm">Αποδείξεις</label>         </div>          <!-- Toggle επαναληψιμης εισαγωγής + edit button -->         <div class="flex items-center gap-2 ml-4">             <label for="repeatEntrySwitch" class="text-sm">Επαναληψιμη εισαγωγή</label>             <input type="checkbox" id="repeatEntrySwitch" class="toggle-switch">             <button type="button" id="editRepeatMappingBtn" class="ml-2 px-2 py-1 border rounded text-sm hidden">Επεξεργασία</button>         </div>          <!-- Toggle switch for receipts scrape -->      </form> </div>  {# ΣΗΜΕΙΩΣΗ: το στατικό confirmation modal που υπήρχε εδώ αφαιρέθηκε όπως ζήτησες. Χρησιμοποιείται πλέον το summaryModal για όλες τις περιπτώσεις. #}  {# --- Yellow box αν υπάρχει MARK ήδη στο Excel --- #} {% if allow_edit_existing and not request.args.get('force_edit') %} <div class="mt-4 p-4 bg-yellow-50 rounded border border-yellow-300 text-yellow-800" id="existingBanner">     Το MARK <strong>{{ mark }}</strong> υπάρχει ήδη στο Excel. Θέλεις να τροποποιήσεις τον χαρακτηρισμό;     <div class="mt-2 flex gap-2">         <button id="forceEditBtn" type="button" class="bg-yellow-600 text-white px-3 py-2 rounded hover:bg-yellow-700">             Επιβεβαίωση         </button>         <button id="dismissBannerBtn" type="button" onclick="this.parentElement.parentElement.style.display='none'"                 class="px-3 py-2 border rounded hover:bg-gray-50">             Άκυρο         </button>     </div> </div> {% endif %}     {% if modal_summary and (request.args.get('force_edit') == '1' or not allow_edit_existing) %} <!-- SUMMARY MODAL --> <div id="summaryModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-6xl p-6">          <!-- HEADER -->         <div class="flex justify-between items-center mb-4">             <h3 class="text-lg font-semibold">                 Περίληψη Παραστατικού - <span id="summaryModalMark">MARK</span>             </h3>             <button id="modalCloseX" class="text-gray-500 text-xl font-bold">✕</button>         </div>          <!-- SUMMARY INFO -->         <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">             <div><strong>Α/Α Παραστατικού</strong><div id="summary_AA"></div></div>             <div><strong>ΑΦΜ</strong><div id="summary_AFM"></div></div>             <div><strong>Επωνυμία</strong><div id="summary_Name"></div></div>             <div><strong>Ημερομηνία</strong><div id="summary_issueDate"></div></div>             <div><strong>Τύπος Παραστατικού</strong><div id="summary_type_name"></div></div>             <div><strong>Καθαρή Αξία</strong><div id="summary_totalNetValue"></div></div>             <div><strong>ΦΠΑ</strong><div id="summary_totalVatAmount"></div></div>             <div><strong>Σύνολο</strong><div id="summary_totalValue"></div></div>         </div>          <!-- LINES -->         <h4 class="font-medium mt-4 mb-2">Γραμμές Παραστατικού (για χαρακτηρισμό)</h4>         <div id="summaryLinesContainer" class="overflow-auto max-h-96 border rounded p-2"></div>            <!-- FOOTER -->         <div class="mt-4 flex justify-between items-center">             <div class="text-sm text-gray-600">                 Σημείωση: οι κατηγορίες προέρχονται από τα settings του πελάτη. Μπορείτε να ορίσετε/επεξεργαστείτε αυτές τις επιλογές στη σελίδα Credentials.             </div>              <div class="flex justify-end gap-2">                 <form method="POST" action="{{ url_for('save_summary') }}" id="saveSummaryForm">                     <input type="hidden" name="summary_json" id="summaryJsonInput" value='{{ modal_summary | tojson | safe if modal_summary else "{}" }}'>                     <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση στο Cache</button>                     <input type="hidden" id="scrapeUrlField" name="scrape_url" value="">                     <input type="hidden" id="scrapeCategoryField" name="scrape_category" value="">                     <input type="hidden" id="scrapeForceField" name="scrape_force" value="false">                 </form>                 <button id="modalCloseBtn" class="px-3 py-2 border rounded">Κλείσιμο</button>             </div>         </div>      </div> </div> {% endif %}   {# --- Repeat mapping modal (dynamic, populated by JS) --- #} <div id="repeatMappingModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-2xl p-6">         <div class="flex justify-between items-center mb-3">             <h3 class="text-lg font-semibold">Επαναληπτική αντιστοίχιση κατηγοριών</h3>             <button id="repeatModalCloseX" class="text-gray-500 text-xl font-bold">✕</button>         </div>          <div id="repeatModalBody" class="space-y-3">             <div class="text-sm text-gray-600">Επίλεξε για κάθε ΦΠΑ-κατηγορία ποια κατηγορία εξόδου θέλεις να χρησιμοποιείται επαναληπτικά. Μπορείς επίσης να ορίσεις <em>προεπιλογή</em>.</div>             <!-- JS θα γεμίσει εδώ -->             <div id="repeatMappingList" class="space-y-2"></div>         </div>          <div class="mt-4 flex justify-end gap-2">             <button id="repeatModalCancel" class="px-3 py-2 border rounded">Άκυρο</button>             <button id="repeatModalSave" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση</button>         </div>     </div> </div>  {% if modal_warning %} <div id="afmWarningModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-md p-6">         <div class="flex justify-between items-center mb-4">             <h3 class="text-lg font-semibold text-red-600">Προειδοποίηση</h3>         </div>         <div id="afmWarningBody" class="mb-4 text-gray-700">             {{ modal_warning }}         </div>         <div class="flex justify-end gap-2">             <button id="afmModalConfirm" class="bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700">Κατάλαβα</button>         </div>     </div> </div> {% endif %}  {# Flash container (JS will inject messages here) #} <div id="clientFlashContainer" class="fixed top-4 right-4 z-60"></div>  {% include 'list_inner.html' %}   {% endblock %}  {% block scripts %}  <script src="/static/loop_hard_guard.js"></script> <script src="{{ url_for('static', filename='repeat_flow_guard.js') }}"></script>  <script>    (function () {   const KEY = 'UI:useReceipts'; // '1' = Αποδείξεις, '0' = Τιμολόγια    function fireChange(el){     if(!el) return;     try {       el.dispatchEvent(new Event('change', { bubbles:true }));     } catch {       const evt = document.createEvent('Event');       evt.initEvent('change', true, true);       el.dispatchEvent(evt);     }   }    document.addEventListener('DOMContentLoaded', () => {     const sw = document.getElementById('useReceiptsSwitch');     if (!sw) return;      // Αν υπάρχει ?use_receipts=1/0 στο URL, γράψ’ το στο localStorage (authoritative)     try {       const q = new URLSearchParams(location.search);       if (q.has('use_receipts')) {         localStorage.setItem(KEY, q.get('use_receipts') === '1' ? '1' : '0');       }     } catch {}      // Restore από localStorage     const saved = localStorage.getItem(KEY);     if (saved !== null) sw.checked = (saved === '1');      // ΠΟΛΥ ΣΗΜΑΝΤΙΚΟ:     // Τρέξε τον υπάρχοντα change handler του switch ώστε να εμφανίσει/κρύψει     // τα σωστά inputs (MARK vs URL). Το κάνουμε 2 φορές (rAF + microtask)     // για να “πιάσει” σε DOM που φτιάχνεται δυναμικά.     requestAnimationFrame(() => {       fireChange(sw);       setTimeout(() => fireChange(sw), 0);     });      // Persist σε κάθε αλλαγή χρήστη     sw.addEventListener('change', () => {       try { localStorage.setItem(KEY, sw.checked ? '1' : '0'); } catch {}       // Προαιρετικό: κρατάμε και ένα data-mode στο body αν το θες για CSS hooks       document.body.dataset.mode = sw.checked ? 'receipts' : 'invoices';     });      // Όταν κάνεις submit/save απόδειξης, κλείδωσε το mode σε “Αποδείξεις”     // ώστε στο redirect/refresh να παραμείνει.     document.getElementById('saveSummaryForm')?.addEventListener('submit', () => {       try {         const raw = document.getElementById('summaryJsonInput')?.value || '';         const s = raw ? JSON.parse(raw) : {};         const isReceipt = s.is_receipt === true ||                           /αποδει/i.test(`${s.type_name || ''} ${s.category || s.characteristic || ''}`);         if (isReceipt) localStorage.setItem(KEY, '1');       } catch {}     });   }); })(); // --- Reclass guard (yellow box -> ?force_edit=1) --- const URL_PARAMS = (function(){ try { return new URL(window.location.href).searchParams; } catch(_) { return new URLSearchParams(''); } })(); const FORCE_EDIT = (function(){ try { return URL_PARAMS.get('force_edit') === '1'; } catch(_) { return false; } })();  const SEARCH_BASE_URL = "{{ url_for('search') }}"; const VAT = "{{ vat or '' }}"; // active vat from server const INITIAL_MARK = "{{ mark|e }}"; // αρχική τιμή mark (αν υπήρχε) const ACTIVE_YEAR = (function(){ try { return {{ active_year|default('null') }}; } catch(e){ return null; } })(); async function getActiveFiscalYear() {   // Προτίμησε την τιμή που ήρθε από server-side render (Jinja)   if (typeof ACTIVE_YEAR !== 'undefined' && ACTIVE_YEAR !== null) {     try { return String(ACTIVE_YEAR); } catch(_) { /* noop */ }   }   // Fallback: ρώτα το backend (υπάρχει route)   try {     const r = await fetch('/get_fiscal_year', {credentials:'same-origin'});     const j = await r.json();     if (j && j.exists) return String(j.fiscal_year);   } catch(_) {}   return null; }   (function(){   // Ανεξάρτητο modal μόνο για Αποδείξεις (δεν ακουμπά το afmWarningModal)   window.openReceiptWarning = function(message){     var id='receiptWarn', m=document.getElementById(id);     if(!m){       var el=document.createElement('div');       el.id=id;       el.style.cssText='position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.4);z-index:9999';       el.innerHTML =         '<div style="background:#fff;border-radius:10px;max-width:480px;width:calc(100% - 32px);padding:20px;">'         + '<h3 style="margin:0 0 10px;color:#b91c1c;font-weight:600;font-size:18px">Προειδοποίηση</h3>'         + '<div id="receiptWarnBody" style="margin-bottom:14px;color:#374151;font-size:14px"></div>'         + '<div style="text-align:right"><button id="receiptWarnOk" type="button"'         + ' style="background:#b91c1c;color:#fff;border:none;border-radius:6px;padding:8px 12px;cursor:pointer">Κατάλαβα</button></div>'         + '</div>';       document.body.appendChild(el);       el.addEventListener('click', function(e){ if(e.target===el) el.style.display='none'; });       el.querySelector('#receiptWarnOk').addEventListener('click', function(){ el.style.display='none'; });       m = el;     }     var body = m.querySelector('#receiptWarnBody');     if(body) body.textContent = message || 'Προειδοποίηση.';     m.style.display='flex';   }; })();      // Καθαρισμός ανά γραμμή (πολλαπλές γραμμές)   document.addEventListener('click', function (e) {     const btn = e.target.closest('.clear-row-btn');     if (btn) {       e.stopPropagation();       const tr = btn.closest('tr');       const sel = tr && tr.querySelector('select[name^="category["]');       if (sel) sel.value = '';     }   });    // Καθαρισμός στη single-line περίπτωση   const singleClear = document.getElementById('single-clear');   if (singleClear) {     singleClear.addEventListener('click', function (e) {       e.stopPropagation();       const sel = document.querySelector('select[name^="category["]');       if (sel) sel.value = '';     });   }    // Προληπτικά: μην ξανα-ανοίγει δεύτερο modal στο click "Αποθήκευση"   // (αν έχεις delegate listeners κάτω από το modal)   document.addEventListener('submit', function(e){     const form = e.target;     if (form && form.closest('#summaryModal')) {       const submitBtn = form.querySelector('[type="submit"]');       if (submitBtn) submitBtn.disabled = true;       e.stopPropagation(); // Μπλοκάρει bubbling που θα πυροδοτούσε κάτωθεν click handlers     }   }, true);     // initial categories passed from server as fallback; will be overridden if API returns expense_tags let CUSTOMER_CATEGORIES = (function(){ try { return {{ customer_categories | tojson | safe }} || []; } catch(e){ return []; } })();  // Helper: show transient flash (client-side) /* ====== Render summary lines into modal and wire handlers ====== */  function renderSummaryLinesFromObject(obj) {   const receiptsMode = !!(document.getElementById('useReceiptsSwitch')?.checked) || !!obj?.is_receipt;   const RECEIPT_CATEGORY = 'αποδειξακια';    const container = document.getElementById('summaryLinesContainer');   const summaryInput = document.getElementById('summaryJsonInput');   if(!container || !summaryInput) return;    container.innerHTML = '';   const lines = Array.isArray(obj.lines) ? obj.lines : [];    // helper to persist back to the hidden input     (function(){   function safeParseJson(s){     try { return JSON.parse(s || '{}'); } catch(e){ return {}; }   }    const summaryInput = document.getElementById('summaryJsonInput');   const container = document.getElementById('summaryLinesContainer');    // fallback server-side object (if Jinja rendered modal_summary)   const SERVER_MODAL_SUMMARY = (function(){     try { return {{ modal_summary | tojson | safe if modal_summary else 'null' }}; } catch(e){ return null; }   })()   try {     var __cc = document.getElementById('summaryLinesContainer');     if (__cc && __cc.dataset && __cc.dataset.phase === 'iife') {       // IIFE already rendered content -> skip second render path       if (typeof persist === 'function') try{ persist(); }catch(e){}       return;     }   } catch(e) {} ;    // helper to get current summary object (prefer hidden input, fallback server var)   function getSummaryObj(){     if(summaryInput && summaryInput.value && summaryInput.value.trim() !== ''){       const parsed = safeParseJson(summaryInput.value);       if(parsed && typeof parsed === 'object') return parsed;     }     if(SERVER_MODAL_SUMMARY) return SERVER_MODAL_SUMMARY;     return { lines: [] };   }    // ensure each line has id and normalized keys   function normalizeSummary(summary){     if(!summary) summary = {};     const lines = Array.isArray(summary.lines) ? summary.lines.slice() : [];     const norm = lines.map((l, idx) => {       const id = (l && (l.id || l.line_id)) ? String(l.id || l.line_id) : ('l' + idx);       return {         id: id,         description: l && (l.description || l.desc || '') || '',         amount: l && (l.amount || l.lineTotal || l.total || '') || '',         vat: l && (l.vat || l.vatRate || '') || '',         vatCategory: l && (l.vatCategory || l.vat_category || '') || '',         category: l && (l.category || l.cat || '') || ''       };     });     return { ...summary, lines: norm };   }    // build DOM for multiple lines (table)   function buildTableHTML(lines, categories){     const table = document.createElement('table');     table.className = 'w-full border-collapse';     const thead = document.createElement('thead');     thead.className = 'bg-gray-100 sticky top-0';     thead.innerHTML = '<tr>' +       '<th class="p-2 border text-left">#</th>' +       '<th class="p-2 border text-left">ΦΠΑ Κατηγορία</th>' +       '<th class="p-2 border text-right">Ποσό</th>' +       '<th class="p-2 border text-right">ΦΠΑ</th>' +       '<th class="p-2 border text-left">Κατηγορία Εξόδου</th>' +       '</tr>';     table.appendChild(thead);      const tbody = document.createElement('tbody');     tbody.id = 'renderedLinesTableBody';     lines.forEach((ln, idx) => {       const tr = document.createElement('tr');       tr.dataset.lineId = ln.id || ('l' + idx);       tr.dataset.vat = ln.vatCategory || ln.vat || '';        tr.innerHTML = '<td class="p-2 border text-sm text-gray-600">' + (idx+1) + '</td>' +         '<td class="p-2 border break-words">' + escapeHtml(ln.vatCategory || '') + '</td>' +         '<td class="p-2 border text-right">' + escapeHtml(String(ln.amount || '')) + '</td>' +         '<td class="p-2 border text-right">' + escapeHtml(String(ln.vat || '')) + '</td>' +         '<td class="p-2 border"></td>';        // create select       const select = document.createElement('select');       select.className = 'expense-category p-1 border rounded w-full';       select.dataset.lineId = ln.id || ('l' + idx);       const emptyOpt = document.createElement('option'); emptyOpt.value=''; emptyOpt.innerText='-- επίλεξε --';       select.appendChild(emptyOpt);       (categories || []).forEach(c => {         const o = document.createElement('option'); o.value = c; o.innerText = c;         if(c === ln.category) o.selected = true;         select.appendChild(o);       });        tr.querySelector('td:last-child').appendChild(select);       tbody.appendChild(tr);     });      table.appendChild(tbody);     return table;   }    // build single-line buttons UI   function buildSingleLineHTML(line, categories){     const wrapper = document.createElement('div');     wrapper.className = 'border rounded p-4';     wrapper.dataset.lineId = line.id || 'l0';      const grid = document.createElement('div');     grid.className = 'mb-3 grid grid-cols-1 md:grid-cols-3 gap-3';     grid.innerHTML = '<div><strong>ΦΠΑ Κατηγορία</strong><div>' + escapeHtml(line.vatCategory || '') + '</div></div>' +       '<div><strong>Ποσό</strong><div>' + escapeHtml(String(line.amount || '')) + '</div></div>' +       '<div><strong>ΦΠΑ</strong><div>' + escapeHtml(String(line.vat || '')) + '</div></div>';     wrapper.appendChild(grid);      const controls = document.createElement('div');     controls.className = 'mb-3';     const title = document.createElement('strong');     title.innerText = 'Επίλεξε Κατηγορία Εξόδου';     controls.appendChild(title);      const btnwrap = document.createElement('div');     btnwrap.id = 'renderedCategoryButtons';     btnwrap.className = 'mt-2 flex flex-wrap gap-2';     (categories || []).forEach(c => {       const btn = document.createElement('button');       btn.type = 'button';       btn.className = 'category-btn px-3 py-2 border rounded hover:bg-sky-50';       btn.dataset.cat = c;       btn.dataset.lineId = line.id || 'l0';       btn.innerText = c;       if(c === line.category){         btn.classList.add('bg-sky-600');         btn.classList.add('text-white');       }       btnwrap.appendChild(btn);     });      const clearBtn = document.createElement('button');     clearBtn.type = 'button';     clearBtn.className = 'px-3 py-2 border rounded text-sm ml-2 clear-category';     clearBtn.innerText = 'Καθαρισμός';     btnwrap.appendChild(clearBtn);      controls.appendChild(btnwrap);     wrapper.appendChild(controls);     return wrapper;   }    function escapeHtml(s){     if(!s && s !== 0) return '';     return String(s)       .replace(/&/g, '&amp;')       .replace(/</g, '&lt;')       .replace(/>/g, '&gt;')       .replace(/"/g, '&quot;')       .replace(/'/g, '&#39;');   }    // read categories from server-provided global or from a safe default   function getCategories(){     try {       const js = (function(){ try { return {{ customer_categories | tojson | safe }}; } catch(e){ return null; } })();       if(Array.isArray(js) && js.length) return js;     } catch(e){}     return window.CUSTOMER_CATEGORIES || [];   }    // render everything into the container   function renderSummaryLines(){     if(!container) return;     const summary = normalizeSummary(getSummaryObj());     const lines = summary.lines || [];     const categories = getCategories();      // clear container     container.innerHTML = '';      // Title (optional)     // const info = document.createElement('div'); info.className='mb-2 text-sm text-gray-700'; container.appendChild(info);      if(lines.length === 0){       const warn = document.createElement('div');       warn.className = 'mt-4 p-3 bg-yellow-50 rounded';       warn.innerText = 'Δεν βρέθηκαν γραμμές για αυτό το MARK.';       container.appendChild(warn);       wireInteractions();     try{ container.dataset.phase = 'iife'; }catch(e){}  // ensure handlers cleared       return;     }      if(lines.length === 1){       container.appendChild(buildSingleLineHTML(lines[0], categories));     } else {       container.appendChild(buildTableHTML(lines, categories));     }      // after building DOM, wire events     wireInteractions();   }    // update hidden input from current DOM selections/buttons    function wireInteractions(){     // remove old handlers by cloning nodes if necessary (to avoid duplicate attachments)     document.querySelectorAll('select.expense-category').forEach(sel => {       sel.addEventListener('change', function(){         updateSummaryFromDom();       });     });      // category buttons (single-line)     document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(btn => {       btn.addEventListener('click', function(){         const lineId = this.dataset.lineId || '';         // toggle this button active/inactive         document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(b => {           if(b.dataset.lineId === lineId){             b.classList.remove('bg-sky-600'); b.classList.remove('text-white');           }         });         const isActive = !(this.classList.contains('bg-sky-600'));         if(isActive){           this.classList.add('bg-sky-600'); this.classList.add('text-white');         } else {           this.classList.remove('bg-sky-600'); this.classList.remove('text-white');         }         updateSummaryFromDom();       });     });      // clear buttons     document.querySelectorAll('.clear-category').forEach(cb => {       cb.addEventListener('click', function(){         const parent = cb.closest('[data-line-id]');         if(!parent) return;         const lid = parent.dataset.lineId || '';         // clear UI         document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(b => {           if(b.dataset.lineId === lid){ b.classList.remove('bg-sky-600'); b.classList.remove('text-white'); }         });         // if there is a select for same line (unlikely in single-line view) clear it         const sel = document.querySelector('select.expense-category[data-line-id="' + lid + '"]');         if(sel) sel.value = '';         updateSummaryFromDom();       });     });   }    // watch hidden input changes (some flows set it programmatically before opening modal)   let lastSummaryValue = summaryInput ? summaryInput.value : '';   function pollSummaryInput(){     const now = summaryInput ? summaryInput.value : '';     if(now !== lastSummaryValue){       lastSummaryValue = now;       // re-render so UI matches new data       renderSummaryLines();     }   }   let pollTimer = null;   try {     pollTimer = setInterval(pollSummaryInput, 250);     window.addEventListener('beforeunload', ()=> { if(pollTimer) clearInterval(pollTimer); });   } catch(e){ /* ignore */ }    // ensure initial render on load (modal might be shown later)   try { renderSummaryLines(); } catch(e){ console.warn('initial renderSummaryLines failed', e); }    // also re-render whenever modal is shown (in case show logic sets display later)   const modal = document.getElementById('summaryModal');   if(modal){     // intercept style changes to detect show     const obs = new MutationObserver(muts => {       muts.forEach(m => {         if(m.attributeName === 'style' || m.attributeName === 'class'){           const disp = window.getComputedStyle(modal).display;           if(disp !== 'none'){             // modal visible -> render (ensure DOM inside ready)             setTimeout(renderSummaryLines, 10);           }         }       });     });     try { obs.observe(modal, { attributes: true, attributeFilter:['style','class'] }); } catch(e){ /* ignore */ }   }    // expose for debug   window._renderSummaryLines = renderSummaryLines; })();   function persist() {     summaryInput.value = JSON.stringify(obj || {});   }    if (!lines || lines.length === 0) {     container.innerHTML = '<div class="mt-4 p-3 bg-yellow-50 rounded">Δεν βρέθηκαν γραμμές για αυτό το MARK.</div>';     persist();     return;   }    if (lines.length > 1) {     // build table     const tbl = document.createElement('table');     tbl.className = 'w-full border-collapse';     tbl.innerHTML = `<thead class="bg-gray-100 sticky top-0">       <tr>         <th class="p-2 border text-left">#</th>         <th class="p-2 border text-left">ΦΠΑ Κατηγορία</th>         <th class="p-2 border text-right">Ποσό</th>         <th class="p-2 border text-right">ΦΠΑ</th>         <th class="p-2 border text-left">Κατηγορία Εξόδου</th>       </tr>     </thead>`;     const tbody = document.createElement('tbody');     lines.forEach((ln, idx) => {       const lid = (ln.id !== undefined) ? String(ln.id) : ('l' + idx);       const vat_cat = ln.vatCategory || ln.vat_category || ln.vat || '';       const amt = ln.amount || ln.lineTotal || ln.total || '';       const vatv = ln.vat || ln.vatRate || '';       const tr = document.createElement('tr');       tr.dataset.lineId = lid;       tr.dataset.vat = vat_cat;       tr.className = '';       tr.innerHTML = `         <td class="p-2 border text-sm text-gray-600">${idx+1}</td>         <td class="p-2 border break-words">${vat_cat}</td>         <td class="p-2 border text-right">${amt}</td>         <td class="p-2 border text-right">${vatv}</td>         <td class="p-2 border"></td>`;       // build select       const td = tr.querySelector('td:last-child');       const sel = document.createElement('select');       sel.className = 'expense-category p-1 border rounded w-full';       sel.dataset.lineId = lid;       const opt0 = document.createElement('option'); opt0.value = ''; opt0.innerText = '-- επίλεξε --'; sel.appendChild(opt0);       (window.CUSTOMER_CATEGORIES || []).forEach(c => {         const o = document.createElement('option'); o.value = c; o.innerText = c;         if ((ln.category || '') === c) o.selected = true;         sel.appendChild(o);       });       sel.addEventListener('change', function(){         const val = this.value;         // find line in obj and update         const found = (obj.lines || []).find(x => String(x.id || x.line_id || '') === lid);         if(found) found.category = val;         persist();       });       td.appendChild(sel);       tbody.appendChild(tr);     });     tbl.appendChild(tbody);     // wrap in container     const wrapper = document.createElement('div');     wrapper.className = 'overflow-auto max-h-96 border rounded';     wrapper.appendChild(tbl);     container.appendChild(wrapper);     persist();     return;   }    // single line case -> render buttons   const single = lines[0];   const lid = (single.id !== undefined) ? String(single.id) : (single.line_id !== undefined ? String(single.line_id) : 'l0');   const amt = single.amount || single.lineTotal || '';   const vatv = single.vat || single.vatRate || '';   const vat_cat = single.vatCategory || single.vat_category || '';   const selected_cat = single.category || '';    const singleDiv = document.createElement('div');   singleDiv.id = 'singleLine';   singleDiv.className = 'border rounded p-4';   singleDiv.dataset.lineId = lid;   singleDiv.dataset.amount = amt;   singleDiv.dataset.vat = vatv;   singleDiv.dataset.vatcat = vat_cat;    const infoHtml = document.createElement('div');   infoHtml.className = 'mb-3 grid grid-cols-1 md:grid-cols-3 gap-3';   infoHtml.innerHTML = `<div><strong>ΦΠΑ Κατηγορία</strong><div>${vat_cat}</div></div>                         <div><strong>Ποσό</strong><div>${amt}</div></div>                         <div><strong>ΦΠΑ</strong><div>${vatv}</div></div>`;   singleDiv.appendChild(infoHtml);    const chooseWrap = document.createElement('div');   chooseWrap.className = 'mb-3';   chooseWrap.innerHTML = `<strong>Επίλεξε Κατηγορία Εξόδου</strong>`;   const btnRow = document.createElement('div');   btnRow.id = 'categoryButtons';   btnRow.className = 'mt-2 flex flex-wrap gap-2';    (window.CUSTOMER_CATEGORIES || []).forEach(c => {     const b = document.createElement('button');     b.type = 'button';     b.className = 'category-btn px-3 py-2 border rounded hover:bg-sky-50';     b.dataset.cat = c;     b.dataset.lineId = lid;     b.innerText = c;     if (c === selected_cat) { b.classList.add('bg-sky-600', 'text-white'); }     b.addEventListener('click', function(){       const cat = this.dataset.cat;       // toggle selection       const currently = (obj.lines[0].category || '');       obj.lines[0].category = (currently === cat) ? '' : cat;       // reflect UI       Array.from(btnRow.querySelectorAll('button.category-btn')).forEach(bb=>{         bb.classList.toggle('bg-sky-600', bb.dataset.cat === obj.lines[0].category);         bb.classList.toggle('text-white', bb.dataset.cat === obj.lines[0].category);       });       persist();     });     btnRow.appendChild(b);   });    const clearBtn = document.createElement('button');   clearBtn.type = 'button';   clearBtn.id = 'clearCategory';   clearBtn.className = 'px-3 py-2 border rounded text-sm ml-2';   clearBtn.innerText = 'Καθαρισμός';   clearBtn.addEventListener('click', function(){     obj.lines[0].category = '';     Array.from(btnRow.querySelectorAll('button.category-btn')).forEach(bb=>{       bb.classList.remove('bg-sky-600', 'text-white');     });     persist();   });    btnRow.appendChild(clearBtn);   chooseWrap.appendChild(btnRow);   singleDiv.appendChild(chooseWrap);   container.appendChild(singleDiv);   persist(); }  /* Call this helper whenever you open the summary modal after you populated summaryJsonInput.    Examples of call sites are below (where modal.style.display='flex' is set). */   function showFlash(message, type='info', timeout=3000){   try {     const container = document.getElementById('clientFlashContainer');     if(!container) return;     const el = document.createElement('div');     el.className = 'mb-2 p-3 rounded shadow text-sm';     if(type === 'success') el.classList.add('bg-green-50', 'text-green-800');     else if(type === 'error') el.classList.add('bg-red-50', 'text-red-800');     else el.classList.add('bg-gray-50', 'text-gray-800');     el.innerText = message;     container.appendChild(el);     setTimeout(()=>{ try{ el.style.opacity='0'; setTimeout(()=>el.remove(), 300); }catch(e){} }, timeout);   } catch(e){ console.warn('showFlash failed', e); } }  // Helper API calls async function apiGetRepeatEntry(vat){   try {     const url = '/api/repeat_entry/get' + (vat ? ('?vat=' + encodeURIComponent(vat)) : '');     const res = await fetch(url, { credentials: 'same-origin' });     if (!res.ok) return { ok: false };     return await res.json();   } catch(e){     console.warn('apiGetRepeatEntry failed', e);     return { ok: false };   } } async function apiSaveRepeatEntry(enabled, mapping, vat){   try {     const res = await fetch('/api/repeat_entry/save', {       method: 'POST',       headers: {'Content-Type': 'application/json'},       credentials: 'same-origin',       body: JSON.stringify({ enabled: !!enabled, mapping: mapping || {}, vat: vat || VAT })     });     if(!res.ok) {       const txt = await res.text().catch(()=>null);       return { ok: false, status: res.status, body: txt };     }     return await res.json();   } catch(e){     console.warn('apiSaveRepeatEntry failed', e);     return { ok: false, error: String(e) };   } }  function removeForceEditParamFromUrl(){   try {     const url = new URL(window.location.href);     if (url.searchParams.has('force_edit')) {       url.searchParams.delete('force_edit');       history.replaceState(null, '', url.pathname + (url.search ? ('?' + url.searchParams.toString()) : '') + url.hash);     }   } catch(e){ console.warn('removeForceEditParamFromUrl failed', e); } }  document.addEventListener('DOMContentLoaded', function(){   // ---------- DOM references ----------   const repeatSwitch = document.getElementById('repeatEntrySwitch');   const editRepeatBtn = document.getElementById('editRepeatMappingBtn');   const repeatModal = document.getElementById('repeatMappingModal');   const repeatModalList = document.getElementById('repeatMappingList');   const repeatModalSave = document.getElementById('repeatModalSave');   const repeatModalCancel = document.getElementById('repeatModalCancel');   const repeatModalCloseX = document.getElementById('repeatModalCloseX');   const summaryInput = document.getElementById('summaryJsonInput'); // may be null   const saveSummaryForm = document.getElementById('saveSummaryForm');    // New: receipts switch + url input   // ---------- Μικρή, local επιδιόρθωση για τα κουμπιά/Select στο modal summary ---------- // ----- Prefill modal fields & categories from summaryJsonInput ----- function prefillSummaryModal(){   try {     const input = document.getElementById('summaryJsonInput');     if(!input) return;     let data = {};     try { data = JSON.parse(input.value || '{}'); } catch(e) { data = {}; }      // Header fields mapping     const map = {       mark: 'summaryModalMark',       AA: 'summary_AA',       AFM_issuer: 'summary_AFM',       AFM: 'summary_AFM',       Name: 'summary_Name',       issuer_name: 'summary_Name',       issueDate: 'summary_issueDate',       type_name: 'summary_type_name',       totalNetValue: 'summary_totalNetValue',       totalVatAmount: 'summary_totalVatAmount',       totalValue: 'summary_totalValue'     };     Object.keys(map).forEach(k => {       const el = document.getElementById(map[k]);       if(!el) return;       el.innerText = (data[k] !== undefined && data[k] !== null) ? String(data[k]) : (data[k.toUpperCase()] || '');     });      // Ensure container exists     const container = document.getElementById('summaryLinesContainer') || document;     const lines = Array.isArray(data.lines) ? data.lines : [];      // For each line, set select/button states     lines.forEach(line => {       const lid = String(line.id || line.line_id || '').trim();       if(!lid) return;        // Try to find matching element inside modal (row or singleLine)       let row = container.querySelector('[data-line-id="'+lid+'"]');       if(!row){         // fallback: global lookup         row = document.querySelector('[data-line-id="'+lid+'"]');       }       if(!row) return;        const cat = line.category || line.cat || '';       // set select if present       const sel = row.querySelector('select.expense-category[data-line-id="'+lid+'"]');       if(sel){         try { sel.value = cat || ''; } catch(e){ /* ignore */ }       }       // set button states if buttons present       const btns = row.querySelectorAll('.category-btn[data-line-id="'+lid+'"]');       if(btns && btns.length){         btns.forEach(b => b.classList.remove('bg-sky-600','text-white'));         if(cat){           // try to find exact button           const esc = (window.CSS && CSS.escape) ? CSS.escape(cat) : cat.replace(/"/g,'\\"');           const target = row.querySelector('.category-btn[data-line-id="'+lid+'"][data-cat="'+cat+'"]') ||                          row.querySelector('.category-btn[data-line-id="'+lid+'"][data-cat="'+esc+'"]');           if(target) target.classList.add('bg-sky-600','text-white');         }       }     });   } catch(err){     console.warn('prefillSummaryModal error', err);   } }  // Call prefill when modal gets shown by your existing code. // Find the places where you do: modal.style.display = 'flex' and add prefillSummaryModal().    (function(){   // helper: ασφαλής update του hidden json από το DOM   function updateSummaryFromDom(){     try {       const input = document.getElementById('summaryJsonInput');       if(!input) return;       let data = {};       try { data = JSON.parse(input.value || '{}'); } catch(e){ data = {}; }       data.lines = Array.isArray(data.lines) ? data.lines.slice() : [];        // For every element that has data-line-id inside the modal container, read category       const container = document.getElementById('summaryLinesContainer') || document;       container.querySelectorAll('[data-line-id]').forEach(el => {         const lid = String(el.dataset.lineId || '').trim();         if(!lid) return;         // prefer select.expense-category if present         let chosen = '';         const sel = el.querySelector('select.expense-category[data-line-id="'+lid+'"]');         if(sel && sel.value) chosen = sel.value;         else {           // else look for active category button in same element           const btn = el.querySelector('.category-btn.bg-sky-600');           if(btn) chosen = btn.dataset.cat || '';         }         // find or create line entry         let found = data.lines.find(x => String(x.id) === lid);         if(!found){           found = { id: lid, category: '' };           data.lines.push(found);         }         found.category = chosen || '';       });        input.value = JSON.stringify(data);     } catch(err){       console.warn('updateSummaryFromDom error', err);     }   }    // only operate inside the modal area to avoid interfering globally   const container = document.getElementById('summaryLinesContainer');   if(!container) {     // fallback: attach to document but remain minimal     console.warn('summaryLinesContainer not found — fix handlers limitedly');   }    // Event delegation: capture clicks on category buttons and selects inside modal   const targetRoot = container || document;   // Use capture true so we intercept before other handlers   targetRoot.addEventListener('click', function(e){     const btn = e.target.closest && e.target.closest('.category-btn');     if(btn && (container ? container.contains(btn) : true)){       // Prevent bubbling to other global handlers that open the receipts-modal       e.preventDefault();       e.stopPropagation();        // ensure it's not treated as a submit (defensive): set type=button if missing       try { if(btn.tagName === 'BUTTON' && !btn.hasAttribute('type')) btn.setAttribute('type','button'); } catch(_) {}        // determine line id: prefer dataset, else find closest ancestor with data-line-id       const lineEl = btn.closest('[data-line-id]');       const lineId = lineEl ? (lineEl.dataset.lineId || '') : (btn.dataset.lineId || '');        // Toggle active class for buttons of the same line only       if(lineId){         const group = (container || document).querySelectorAll('.category-btn[data-line-id="'+lineId+'"]');         group.forEach(b => { b.classList.remove('bg-sky-600','text-white'); });       } else {         // fallback: toggle only this button       }       const isActive = !btn.classList.contains('bg-sky-600');       if(isActive) btn.classList.add('bg-sky-600','text-white');       else btn.classList.remove('bg-sky-600','text-white');        // if there's a select corresponding to this line, keep it in sync       if(lineId){         const sel = (container || document).querySelector('select.expense-category[data-line-id="'+lineId+'"]');         if(sel) sel.value = isActive ? (btn.dataset.cat || '') : '';       }        // update hidden JSON immediately       updateSummaryFromDom();       return;     }      // if clicking on a select inside modal, prevent bubbling too     const sel = e.target.closest && e.target.closest('select.expense-category');     if(sel && (container ? container.contains(sel) : true)){       e.stopPropagation();       // let change event handle updating (below we also listen change)       return;     }   }, true);    // Listen change events on selects inside container and update JSON   (container || document).addEventListener('change', function(e){     const sel = e.target.closest && e.target.closest('select.expense-category');     if(sel && (container ? container.contains(sel) : true)){       e.stopPropagation();       // sync any visual button states (remove active if select chosen)       const lid = sel.dataset.lineId || (sel.closest('[data-line-id]') && sel.closest('[data-line-id]').dataset.lineId) || '';       if(lid){         // clear buttons for that line         const group = (container || document).querySelectorAll('.category-btn[data-line-id="'+lid+'"]');         group.forEach(b => b.classList.remove('bg-sky-600','text-white'));       }       updateSummaryFromDom();     }   }, true);    // Ensure Save form updates JSON right before submit (defensive)   const saveForm = document.getElementById('saveSummaryForm');   if(saveForm){     saveForm.addEventListener('submit', function(e){       try {         updateSummaryFromDom();         // small synchronous update only; let the submit continue       } catch(err){ console.warn('pre-submit update failed', err); }     });   }    // Expose helper in case other code wants to call it   window.updateSummaryFromDom = updateSummaryFromDom; })();    const useReceiptsSwitch = document.getElementById('useReceiptsSwitch');   // find or create an URL input (if not present in template we create one dynamically)   let urlInput = document.getElementById('scrapeUrlInput');   if(!urlInput){     urlInput = document.createElement('input');     urlInput.id = 'scrapeUrlInput';     urlInput.placeholder = 'Εισάγετε URL παραστατικού (για αποδείξεις)';     urlInput.className = 'p-2 border rounded w-2/4 hidden';     urlInput.type = 'text';     // insert after markInput     const mi = document.getElementById('markInput');     if(mi && mi.parentElement) mi.parentElement.insertBefore(urlInput, mi.nextSibling);   }    // --- ensure search icon behaves same as input clear/submit ---   (function wireSearchIconBehavior(){     const mi = document.getElementById('markInput');     if (!mi) return;      const possibleSelectors = [       '.icon-search', '.btn-search', '#searchIcon', '.fa-search', '.magnifier',       'button[aria-label="search"]', 'button[data-action="search"]'     ];      let found = null;     for (const sel of possibleSelectors) {       const el = document.querySelector(sel);       if (el) { found = el; break; }     }      if (!found) {       const delBtn = document.querySelector('button#deleteSelected, button.delete-selected, button[data-action="delete-selected"]');       if (delBtn && delBtn.parentElement) {         const sibling = delBtn.parentElement.querySelector('button, a, svg, i');         if (sibling && sibling !== delBtn) found = sibling;       }     }      if (!found) return;      found.addEventListener('click', function(e){       try {         mi.value = '';         mi.dispatchEvent(new Event('input', { bubbles: true }));         mi.dispatchEvent(new KeyboardEvent('keyup', { bubbles: true, key: 'Backspace' }));         if (window.jQuery && jQuery.fn && jQuery.fn.dataTable) {           try {             const dt = $('.summary-table').DataTable();             dt.search('').columns().search('').draw();           } catch(ignore){}         }       } catch(err){         console.warn('search icon handler failed', err);       }     });   })();     // detect vat keys in summary   function detectVatKeysFromSummary(){     if(summaryInput && summaryInput.value){       try {         const obj = JSON.parse(summaryInput.value || '{}');         const lines = Array.isArray(obj.lines) ? obj.lines : [];         const set = new Set();         lines.forEach(l => {           const key = (l.vatCategory || l.vat_category || l.vat || '').toString().trim();           if(key) set.add(key);         });         if(set.size) return Array.from(set);       } catch(e){ /* ignore */ }     }     return ['0%','6%','13%','24%'];   }    // Build repeat modal UI given an existing mapping (object)   function buildRepeatModalUI(existingMapping){     repeatModalList.innerHTML = '';     const vatKeys = detectVatKeysFromSummary();     const mapping = existingMapping || {};     // default row     const defaultRow = document.createElement('div');     defaultRow.className = 'flex items-center gap-3';     defaultRow.innerHTML = `<div class="w-36 text-sm font-medium">Προεπιλογή</div>`;     const defaultSelect = document.createElement('select');     defaultSelect.className = 'p-1 border rounded flex-1';     const opt0 = document.createElement('option'); opt0.value=''; opt0.innerText='-- (κανένα) --'; defaultSelect.appendChild(opt0);     CUSTOMER_CATEGORIES.forEach(c=>{       const o = document.createElement('option'); o.value = c; o.innerText = c;       if(mapping['__default'] === c) o.selected = true;       defaultSelect.appendChild(o);     });     defaultRow.appendChild(defaultSelect);     repeatModalList.appendChild(defaultRow);      vatKeys.forEach(vk=>{       const row = document.createElement('div');       row.className = 'flex items-center gap-3';       const label = document.createElement('div');       label.className = 'w-36 text-sm font-medium';       label.innerText = vk || '(άγνωστο)';       const sel = document.createElement('select');       sel.className = 'p-1 border rounded flex-1';       const oEmpty = document.createElement('option'); oEmpty.value=''; oEmpty.innerText='-- (προεπιλογή) --'; sel.appendChild(oEmpty);       CUSTOMER_CATEGORIES.forEach(c=>{         const o=document.createElement('option'); o.value=c; o.innerText=c;         if(mapping[vk] === c) o.selected = true;         sel.appendChild(o);       });       row.appendChild(label);       row.appendChild(sel);       repeatModalList.appendChild(row);     });   }    function openRepeatModalWithMapping(mapping){     // If receipts mode is on, block editing mapping because receipts get fixed category     if(useReceiptsSwitch && useReceiptsSwitch.checked){       alert('Όταν είναι επιλεγμένες οι Αποδείξεις, δεν επιτρέπεται η επεξεργασία χαρακτηρισμών — οι αποδείξεις παίρνουν μόνο την κατηγορία "αποδειξακια".');       return;     }     buildRepeatModalUI(mapping || {});     repeatModal.style.display = 'flex';   }   function closeRepeatModal(){ repeatModal.style.display = 'none'; }    // collect mapping from modal selects   function collectMappingFromModal(){     const mapping = {};     const selects = repeatModalList.querySelectorAll('select');     if(selects.length){       const first = selects[0];       if(first && first.value) mapping['__default'] = first.value;       const vatKeys = detectVatKeysFromSummary();       for(let i=1;i<selects.length;i++){         const sel = selects[i];         const vatKey = vatKeys[i-1];         if(sel && sel.value) mapping[vatKey] = sel.value;       }     }     return mapping;   }    // apply given mapping to summary JSON and submit saveSummaryForm   function applyMappingToSummaryAndSubmitUsingMapping(mapping){     if(!summaryInput || !saveSummaryForm) return false;     try {       const data = JSON.parse(summaryInput.value || '{}');       if(!Array.isArray(data.lines)) data.lines = [];       data.lines = data.lines.map(l => {         const vatKey = (l.vatCategory || l.vat_category || l.vat || '').toString().trim();         if(mapping && mapping[vatKey]) l.category = mapping[vatKey];         else if(mapping && mapping.__default) l.category = mapping.__default;         return l;       });       summaryInput.value = JSON.stringify(data);       saveSummaryForm.submit();       return true;     } catch(e){       console.warn('applyMappingToSummaryAndSubmitUsingMapping error', e);       return false;     }   }    // ---------- Initialization: load server repeat_entry config ----------   (async function initRepeatEntry(){     try {       const resp = await apiGetRepeatEntry(VAT);       if(resp && resp.ok){         const repeat = resp.repeat_entry || { enabled: false, mapping: {} };         if(resp.expense_tags && Array.isArray(resp.expense_tags) && resp.expense_tags.length){           CUSTOMER_CATEGORIES = resp.expense_tags.slice();         }         const enabled = !!repeat.enabled;         const mapping = repeat.mapping || {};          if(repeatSwitch){           repeatSwitch.checked = enabled;           // show edit button if mapping exists and receipts not selected           if(mapping && Object.keys(mapping).length && !(useReceiptsSwitch && useReceiptsSwitch.checked)) editRepeatBtn.classList.remove('hidden');           repeatSwitch.addEventListener('change', async function(){             const now = this.checked;             // if enabling and no mapping -> open modal to create mapping             if(now){               if(!mapping || Object.keys(mapping).length === 0){                 // open modal letting user create mapping (but only if receipts not selected)                 if(useReceiptsSwitch && useReceiptsSwitch.checked){                   // do not open — receipts use only αποδειξακια                   editRepeatBtn.classList.add('hidden');                 } else {                   openRepeatModalWithMapping({});                 }               } else {                 if(useReceiptsSwitch && useReceiptsSwitch.checked){                   // receipts + repeat -> hide edit button                   editRepeatBtn.classList.add('hidden');                 } else {                   editRepeatBtn.classList.remove('hidden');                 }               }             } else {               editRepeatBtn.classList.add('hidden');             }             // Persist enabled flag immediately (keep mapping as-is)             const saveResp = await apiSaveRepeatEntry(now, mapping, VAT);             if(saveResp && saveResp.ok){               showFlash('Ενημερώθηκε η ρύθμιση επαναληπτικής εισαγωγής.', 'success');               if(saveResp.expense_tags && Array.isArray(saveResp.expense_tags) && saveResp.expense_tags.length){                 CUSTOMER_CATEGORIES = saveResp.expense_tags.slice();               }             } else {               showFlash('Αποτυχία αποθήκευσης ρύθμισης.', 'error');             }           });         }          // If repeat enabled and mapping exists and modal_summary present -> auto apply mapping now         if (enabled && mapping && Object.keys(mapping).length && summaryInput) {         const receiptsOn = !!(useReceiptsSwitch && useReceiptsSwitch.checked);           if (!receiptsOn && !FORCE_EDIT) {             const did = applyMappingToSummaryAndSubmitUsingMapping(mapping);           if (did) {             const sm = document.getElementById('summaryModal');           if (sm) sm.style.display = 'none';       }     }   }          // Wire edit button         if(editRepeatBtn){           editRepeatBtn.classList.toggle('hidden', !mapping || Object.keys(mapping).length===0 || (useReceiptsSwitch && useReceiptsSwitch.checked));           editRepeatBtn.addEventListener('click', function(){             openRepeatModalWithMapping(mapping);           });         }       } else {         if(repeatSwitch) repeatSwitch.checked = false;       }     } catch(e){       console.warn('initRepeatEntry failed', e);     }   })();    // wire receipts switch to show/hide url input and to enforce mapping rule   if(useReceiptsSwitch){     useReceiptsSwitch.addEventListener('change', function(){       const on = !!this.checked;       // UI: swap inputs       if(on){         document.getElementById('markInput')?.classList.add('hidden');         urlInput?.classList.remove('hidden');         urlInput?.focus();         // when receipts are active, edit button must be hidden (even if repeat on)         if(editRepeatBtn) editRepeatBtn.classList.add('hidden');       } else {         document.getElementById('markInput')?.classList.remove('hidden');         urlInput?.classList.add('hidden');         document.getElementById('markInput')?.focus();         // restore edit button visibility based on repeatSwitch/mapping         // re-init repeat button visibility by calling initRepeatEntry lightly:         (async function(){           try {             const resp = await apiGetRepeatEntry(VAT);             if(resp && resp.ok){               const mapping = (resp.repeat_entry && resp.repeat_entry.mapping) ? resp.repeat_entry.mapping : {};               if(mapping && Object.keys(mapping).length && repeatSwitch && repeatSwitch.checked){                 editRepeatBtn.classList.remove('hidden');               } else {                 editRepeatBtn.classList.add('hidden');               }             }           } catch(e){}         })();       }     });   }    // repeat modal handlers   repeatModalCloseX?.addEventListener('click', closeRepeatModal);   repeatModalCancel?.addEventListener('click', closeRepeatModal);    repeatModalSave?.addEventListener('click', async function(){     // collect mapping     const mapping = collectMappingFromModal();     // persist to backend and enable repeat     const resp = await apiSaveRepeatEntry(true, mapping, VAT);     if (resp && resp.ok) {       if (resp.expense_tags && Array.isArray(resp.expense_tags) && resp.expense_tags.length) {         CUSTOMER_CATEGORIES = resp.expense_tags.slice();       }       if (repeatSwitch) repeatSwitch.checked = true;       // if receipts mode is on, edited mapping should not be used—hide edit button       if (useReceiptsSwitch && useReceiptsSwitch.checked) editRepeatBtn.classList.add('hidden');       else editRepeatBtn.classList.remove('hidden');        showFlash('Αποθηκεύτηκαν οι ρυθμίσεις επαναληπτικής εισαγωγής. Η σελίδα θα επαναφορτωθεί...', 'success', 800);       closeRepeatModal();       setTimeout(function(){ try { window.location.reload(); } catch(e){ console.warn('reload failed', e); } }, 600);       return;     } else {       console.warn('Failed saving repeat mapping', resp);       showFlash('Αποτυχία αποθήκευσης ρυθμίσεων επαναληπτικής εισαγωγής.', 'error');     }   });    // ---------- existing original JS (dismiss banner, force edit, summary modal wiring, etc) ----------   const forceBtn = document.getElementById('forceEditBtn');   const markInput = document.getElementById('markInput');   const existingBanner = document.getElementById('existingBanner');   const dismissBannerBtn = document.getElementById('dismissBannerBtn');    if(dismissBannerBtn){     dismissBannerBtn.addEventListener('click', function(){ if(existingBanner) existingBanner.style.display = 'none'; });   }    if (forceBtn){     forceBtn.addEventListener('click', function(){       const markValRaw = (markInput && markInput.value) ? markInput.value.trim() : '{{ mark or "" }}';       const markVal = encodeURIComponent(markValRaw || '');       if (!markVal){ alert('Δεν δόθηκε MARK για επιβεβαίωση.'); return; }       if (confirm('Θες σίγουρα να επαναχαρακτηρίσεις το MARK και να ανοίξει η φόρμα επεξεργασίας;')) {         if(existingBanner) existingBanner.style.display = 'none';         window.location = SEARCH_BASE_URL + '?mark=' + markVal + '&force_edit=1';       }     });   }    const modal = document.getElementById('summaryModal');   const modalCloseBtns = Array.from(document.querySelectorAll('#modalCloseX, #modalCloseBtn'));   modalCloseBtns.forEach(b => b?.addEventListener('click', function(){     if(modal) modal.style.display = 'none';     removeForceEditParamFromUrl();   }));    {% if modal_summary and (request.args.get('force_edit') == '1' or not allow_edit_existing) %}   setTimeout(()=>{   const m = document.getElementById('summaryModal');   if (!m) return;    // Αν είμαστε σε mode αποδείξεων ΚΑΙ είναι ενεργό το repeat, μην ανοίγεις modal   // ΕΞΑΙΡΕΣΗ: αν είναι reclassification (force_edit=1), τότε άνοιξέ το για να αλλάξουμε χαρακτηρισμούς.   const receiptsOn = !!(document.getElementById('useReceiptsSwitch') && document.getElementById('useReceiptsSwitch').checked);   const repeatOn   = !!(document.getElementById('repeatEntrySwitch') && document.getElementById('repeatEntrySwitch').checked);    // Επιπλέον έλεγχος: αν το summary είναι σαφώς Απόδειξη, αντιμετώπισέ το ως receipts flow   let isReceiptSummary = false;   try {     const raw = (document.getElementById('summaryJsonInput')?.value || '').trim();     if (raw) {       const sobj = JSON.parse(raw);       const tname = (sobj.type_name || sobj.type || '').toString().toLowerCase();       const cat   = (sobj.category || sobj.characteristic || sobj['χαρακτηρισμός'] || '').toString().toLowerCase();       isReceiptSummary = !!(sobj.is_receipt || tname.includes('απόδει') || tname.includes('receipt') || cat === 'αποδειξακια');     }   } catch(_){}     if ((receiptsOn || isReceiptSummary) && repeatOn && !FORCE_EDIT) {     // auto-flow αποδείξεων όταν είναι ενεργό το "Επαναληψιμη εισαγωγή"     try {       let raw = (document.getElementById('summaryJsonInput')?.value || '').trim();       if (!raw || raw === '{}' || raw === 'null') {         try { raw = JSON.stringify({{ modal_summary | tojson | safe }}); } catch(_) {}       }       const sobj = raw ? JSON.parse(raw) : {};       // Κανονικοποίησε σαν απόδειξη και επιβεβαίωσε μία φορά       const url = document.getElementById('scrapeUrlInput')?.value || '';       (async () => {         try {           await RC.confirmReceiptOnce(RC.normalizeReceiptSummary(sobj), url);           // κράτα το mode σε receipts και κάνε hard redirect για καθαρή κατάσταση           try { localStorage.setItem('useReceiptsSwitch','1'); } catch(_){}           const base = location.pathname + '?use_receipts=1';           location.replace(base);         } catch(e) {           console.warn('auto-confirm receipt failed', e);         }       })();     } catch(e) { console.warn('auto-flow receipts error', e); }     return;   }     // Αλλιώς, άνοιξέ το κανονικά   try {     const summaryInputEl = document.getElementById('summaryJsonInput');     if (summaryInputEl && (!summaryInputEl.value || summaryInputEl.value === '{}')) {       summaryInputEl.value = {{ modal_summary | tojson | safe }};     }     const obj = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');     renderSummaryLinesFromObject(obj);   } catch(e) { console.warn('renderSummaryLinesFromObject error', e); }    m.style.display = 'flex';   removeForceEditParamFromUrl(); }, 80); {% endif %}      {% if modal_warning %}   const afmModal = document.getElementById('afmWarningModal');   const afmModalBtn = document.getElementById('afmModalConfirm');   if (afmModal && afmModalBtn){     setTimeout(()=>{ afmModal.style.display = 'flex'; }, 50);     afmModalBtn.addEventListener('click', function(){ afmModal.style.display = 'none'; });   }   {% endif %}    // --- the rest of your existing summary wiring (no changes) ---   if (summaryInput){   try {     let summaryData = JSON.parse(summaryInput.value || '{}');     if (!Array.isArray(summaryData.lines)) summaryData.lines = [];     summaryData.lines = summaryData.lines.map(l => {       if (!l) return {id:'', description:'', amount:'', vat:'', category:'', vatCategory:''};       l.id = (l.id!==undefined)?String(l.id):(l.line_id!==undefined?String(l.line_id):'');       l.category = l.category || l.cat || l.line_category || l['κατηγορία'] || '';       return l;     });      // multi-line selects     document.querySelectorAll('#linesTableBody tr[data-line-id]').forEach(tr => {       const lid = String(tr.dataset.lineId || '');       const sel = tr.querySelector('select.expense-category');       if (!sel) return;       let existing = summaryData.lines.find(x => String(x.id) === lid);       if (!existing){         existing = {id: lid, category: ''};         summaryData.lines.push(existing);       }       sel.value = existing.category || '';       sel.addEventListener('change', function(){ existing.category = sel.value; summaryInput.value = JSON.stringify(summaryData); });     });      // single-line buttons     const singleLine = document.getElementById('singleLine');     if (singleLine){       const lid = String(singleLine.dataset.lineId || '');       let existing = summaryData.lines.find(x => String(x.id) === lid);       if (!existing){         existing = {id: lid, category: ''};         summaryData.lines.push(existing);       }       const buttons = document.querySelectorAll('#categoryButtons .category-btn');       function markActive(cat){         buttons.forEach(b => {           b.classList.toggle('bg-sky-600', b.dataset.cat === cat);           b.classList.toggle('text-white', b.dataset.cat === cat);         });       }       if (existing.category) markActive(existing.category);       buttons.forEach(btn => {         btn.addEventListener('click', function(){           const cat = this.dataset.cat;           existing.category = (existing.category === cat) ? '' : cat;           markActive(existing.category);           summaryInput.value = JSON.stringify(summaryData);         });       });       const clearBtn = document.getElementById('clearCategory');       clearBtn?.addEventListener('click', function(){         existing.category = '';         markActive('');         summaryInput.value = JSON.stringify(summaryData);       });     }     summaryInput.value = JSON.stringify(summaryData);   } catch(e){     console.warn('summary JSON parse/normalize error', e);   } }     // --- the table / datatables logic code (kept unchanged) ---   const hasTable = document.querySelector('.summary-table') !== null;   if (hasTable){     const jq = window.jQuery;     const dtAvail = jq && jq.fn && jq.fn.dataTable;     if (dtAvail){       try {         const dt = $('.summary-table').DataTable({           paging: true,           scrollY: '55vh',           scrollX: true,           scrollCollapse: true,           fixedHeader: { header: true, headerOffset: 0 },           colReorder: true,           autoWidth: false,           columnDefs: [{ orderable: false, targets: 0 }]         });         if (typeof dt.colResize === 'function') {           try { dt.colResize({ resizeMode: 'flex' }); } catch(e){ console.warn('colResize failed', e); }         }         const globalSearch = document.getElementById('globalSearch');         if (globalSearch){           globalSearch.addEventListener('input', function(){ dt.search(this.value).draw(); });         }         setTimeout(()=>{ try{ dt.columns.adjust().draw(); }catch(e){} }, 120);       } catch(e){         console.warn('DataTables init failed — falling back', e);       }     } else {       const globalSearch = document.getElementById('globalSearch');       if (globalSearch){         globalSearch.addEventListener('input', function(){           const q = this.value.toLowerCase();           document.querySelectorAll('.summary-table tbody tr').forEach(tr => {             tr.style.display = tr.textContent.toLowerCase().indexOf(q) !== -1 ? '' : 'none';           });         });       }     }      try {       const anyCheckbox = document.querySelector('input[name="delete_mark"]');       if (anyCheckbox){         const firstTh = document.querySelector('.summary-table thead th');         if (firstTh && !document.getElementById('selectAll')){           const chk = document.createElement('input');           chk.type = 'checkbox'; chk.id = 'selectAll'; chk.title = 'Επιλογή όλων';           chk.style.marginRight = '6px';           firstTh.prepend(chk);           chk.addEventListener('change', function(){ document.querySelectorAll('input[name="delete_mark"]').forEach(cb => cb.checked = this.checked); });         }         const headers = Array.from(document.querySelectorAll('.summary-table thead th')).map(h => h.innerText.trim().toLowerCase());         let markIdx = headers.findIndex(h => h.includes('mark'));         if (markIdx === -1) markIdx = headers.findIndex(h => h.includes('αφμ') || h.includes('afm'));         if (markIdx >= 0){           document.querySelectorAll('.summary-table tbody tr').forEach(row => {             const cb = row.querySelector('input[name="delete_mark"]');             if (cb){               const td = row.querySelectorAll('td')[markIdx];               if (td){                 const v = td.innerText.trim();                 if (v) cb.value = v;               }             }           });         }       }     } catch(e){ console.warn('select-all / mark mapping error', e); }   }    // --- new: restore table / reload when markInput cleared ---   (function wireRobustClearRestore(){     const mi = (typeof markInput !== 'undefined' && markInput) ? markInput : document.getElementById('markInput');     if (!mi) return;      let t = null;     let lastVal = mi.value || '';      function restoreAllRowsAndUi(){       try {         if (window.jQuery && jQuery.fn && jQuery.fn.dataTable) {           try {             const dt = $('.summary-table').DataTable();             dt.search('').columns().search('').draw();             try {               dt.rows().nodes().to$().each(function(){ this.style.display = ''; });             } catch(e){ /* ignore */ }             try { dt.columns.adjust().draw(false); } catch(e){ /* ignore */ }           } catch(e) {             console.warn('DataTables restore failed, falling back to DOM restore', e);             document.querySelectorAll('.summary-table tbody tr').forEach(tr => tr.style.display = '');           }         } else {           document.querySelectorAll('.summary-table tbody tr').forEach(tr => tr.style.display = '');         }          const selectAll = document.getElementById('selectAll') || document.querySelector('.summary-table thead input[type="checkbox"]#selectAll');         if (selectAll) selectAll.checked = false;          const evt = new Event('tableRestored');         document.querySelectorAll('.summary-table').forEach(t => t.dispatchEvent(evt));       } catch(err){         console.warn('restoreAllRowsAndUi failed', err);       }     }   document.addEventListener('DOMContentLoaded', function(){   try {     const m = document.getElementById('summaryModal');     if(m && (m.style.display === 'flex' || getComputedStyle(m).display !== 'none')){       // small timeout to let template-rendered inner HTML settle       setTimeout(()=>{ try { prefillSummaryModal(); } catch(e){ console.warn(e); } }, 40);     }   } catch(e){ /* ignore */ } });     function maybeRestore(){       clearTimeout(t);       t = setTimeout(()=>{         try {           const v = (mi.value || '').trim();           if (v === '' && (lastVal && lastVal.trim() !== '')) {             try {               if (typeof INITIAL_MARK !== 'undefined' && INITIAL_MARK && INITIAL_MARK.trim() !== '') {                 const cur = new URL(window.location.href);                 if (cur.searchParams.has('mark') || cur.searchParams.has('force_edit')) {                   window.location = SEARCH_BASE_URL;                   return;                 }               }             } catch(e){ /* ignore URL errors and fallthrough to client restore */ }              restoreAllRowsAndUi();           }           lastVal = v;         } catch(e){           console.warn(e);         }       }, 150);     }      mi.addEventListener('input', maybeRestore);     mi.addEventListener('keyup', maybeRestore);     mi.addEventListener('paste', function(){ setTimeout(maybeRestore, 50); });     mi.addEventListener('cut', function(){ setTimeout(maybeRestore, 50); });     mi.addEventListener('blur', maybeRestore);      let pollInterval = null;     try {       pollInterval = setInterval(() => {         const current = (mi.value || '').trim();         if (current !== (lastVal || '').trim()) {           maybeRestore();         }       }, 300);        window.addEventListener('beforeunload', () => {         if (pollInterval) clearInterval(pollInterval);       });     } catch(e){     }   })();    // ----- SCRAPER integration: auto call endpoint when URL provided and show modal -----   // Add a handler: when receipts switch ON and user submits form -> call /api/scrape_receipt and show modal   // ====================== RECEIPTS SCRAPE FLOW ====================== document.getElementById('markSearchForm')?.addEventListener('submit', async function (evt) {   if (useReceiptsSwitch && useReceiptsSwitch.checked) {      // --- de-dupe receipts submit (scrape) ---     // --- de-dupe receipts submit (scrape) ---   const form = evt.currentTarget;   if (form && form.dataset.receiptsSubmitting === '1') {     evt.preventDefault();     return;   }   if (form) form.dataset.receiptsSubmitting = '';   if (form) form.dataset.receiptsSubmitting = '1';  evt.preventDefault();     const url = (urlInput && urlInput.value) ? urlInput.value.trim() : '';     if (!url) {       showFlash('Εισάγετε URL για αποδείξεις.', 'error');       return;     }      try {       const res = await fetch('/api/scrape_receipt', {         method: 'POST',         credentials: 'same-origin',         headers: { 'Content-Type': 'application/json', 'X-Requested-With': 'XMLHttpRequest' },         body: JSON.stringify({ url: url })       });        const j = await res.json().catch(() => null);       if (!res.ok || !j || j.ok === false) {         const msg = j && (j.error || j.message) ? (j.error || j.message) : ('Server ' + (res.status || ''));         showFlash('Σφάλμα scraper: ' + msg, 'error', 6000);         return;       }        if (j && j.is_invoice === true) {   openReceiptWarning('Το URL φαίνεται να περιέχει Τιμολόγιο — δεν θα αποθηκευτεί ως Απόδειξη. Έλεγξε το παραστατικό.');   return; // STOP         }         // ---- Έλεγχος έτους απόδειξης vs ενεργή χρήση (modal + STOP) try {   // 1) Πάρε ενεργή χρήση από ACTIVE_YEAR ή από το backend (fallback)   const activeYear = await getActiveFiscalYear();    // 2) Εξήγαγε issueYear από την απόκριση του scraper   let issueYear = null;   if (j && j.issue_year != null && String(j.issue_year).trim() !== '') {     // δέξου είτε καθαρό έτος είτε π.χ. "2025"     const m = String(j.issue_year).match(/\b(19|20)\d{2}\b/);     issueYear = m ? m[0] : String(j.issue_year);   } else if (j) {     const anyDate = j.issue_date || j.issueDate || j.date || '';     if (typeof anyDate === 'string') {       const m = anyDate.match(/\b(19|20)\d{2}\b/);       if (m) issueYear = m[0];     }   }    // 3) Αν δεν ταιριάζουν -> δείξε modal και σταμάτα   if (activeYear && issueYear && String(issueYear) !== String(activeYear)) {     openReceiptWarning(`Προσοχή: Η απόδειξη είναι του ${issueYear}, ενώ η ενεργή χρήση είναι ${activeYear}. Η διαδικασία μπλοκάρεται.`);     return; // STOP   } } catch (_) {   /* αν αποτύχει ο έλεγχος, δεν μπλοκάρουμε σιωπηλά */ }         // Δημιουργία αυξανόμενου MARK 15 ψηφίων (από το backend)       const markRes = await fetch('/api/next_receipt_mark', { credentials: 'same-origin' });       const markData = await markRes.json().catch(() => null);       const nextMark = (markData && markData.mark) ? markData.mark : '';        // Prepare summary object για modal       const summaryObj = {         mark: nextMark,         AA: j.progressive_aa || '',         AFM_issuer: j.issuer_vat || '',         Name: j.issuer_name || '',         issueDate: j.issue_date || '',         type_name: 'ΑΠΟΔΕΙΞΗ',         totalValue: j.total_amount || '',         totalNetValue: j.total_amount || '',         totalVatAmount: (j.raw && (j.raw.totalVatAmount || j.raw.totalVat)) || '',         lines: []       ,   type: 'ΑΠΟΔΕΙΞΗ',   category: 'αποδειξακια',   is_receipt: true,   number: (j.progressive_aa || '')};        if (j.raw && Array.isArray(j.raw.lines) && j.raw.lines.length) {         j.raw.lines.forEach((l, idx) => {           summaryObj.lines.push({             id: l.id || ('r' + idx),             amount: l.amount || l.lineTotal || '',             vat: l.vat || l.vatRate || '',             vatCategory: l.vatCategory || l.vat_category || '',             description: l.description || l.desc || ''           });         });       } else {         summaryObj.lines.push({           id: 'r0',           amount: j.total_amount || '',           vat: (j.raw && (j.raw.vat || '')) || '',           vatCategory: (j.raw && (j.raw.vatCategory || '')) || '',           description: (j.raw && (j.raw.description || '')) || ''         });       }        // Populate modal inputs       const summaryInput = document.getElementById('summaryJsonInput');       if (summaryInput) summaryInput.value = JSON.stringify(summaryObj);         document.getElementById('scrapeUrlField')?.setAttribute('value', url);       const desiredCat = CUSTOMER_CATEGORIES.includes('αποδειξακια')         ? 'αποδειξακια'         : (CUSTOMER_CATEGORIES[0] || '');       document.getElementById('scrapeCategoryField')?.setAttribute('value', desiredCat);       document.getElementById('scrapeForceField')?.setAttribute('value', 'false');        // Ενημέρωση modal       const modal = document.getElementById('summaryModal');       if (modal) {         // ensure populate code runs (some populate watchers poll or listen for modal display)         // prefer calling RC_forcePopulateSummaryModal if present         if (window.RC_forcePopulateSummaryModal) {           try { window.RC_forcePopulateSummaryModal(); } catch(e){ console.warn('RC_forcePopulateSummaryModal failed', e); }         }         if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }         if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { showFlash('Λήφθηκε απόδειξη — ελέγξτε τα στοιχεία και πατήστε "Αποθήκευση στο Cache".', 'success', 5000); }       }      } catch (err) {       console.error('scrape_receipt error', err);       showFlash('Σφάλμα scraper: ' + (err.message || err), 'error', 6000);     }   } });     // Intercept "Αποθήκευση στο Cache" to perform AJAX save for scraped receipts   // intercept saveSummaryForm submit when scrapeUrlField is present // --- replace the previous payload construction + fetch with this robust version --- document.getElementById('saveSummaryForm')?.addEventListener('submit', async function(e){   const scrapeUrl = document.getElementById('scrapeUrlField')?.value || '';   if(!scrapeUrl) return; // let normal (invoice) flow proceed   e.preventDefault();    let summary = {};   try {     summary = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');   } catch(err){     console.warn('Failed parsing summaryJsonInput', err);     alert('Σφάλμα: άκυρα δεδομένα παραστατικού.');     return;   }    summary.is_receipt = true;   if (!summary.category || String(summary.category).trim() === '') summary.category = 'αποδειξακια';   if (!summary.type || String(summary.type).trim() === '') summary.type = 'ΑΠΟΔΕΙΞΗ';   if (!summary.type_name || String(summary.type_name).trim() === '') summary.type_name = 'Απόδειξη';    const aaCoalesce = summary.number || summary.AA || summary.aa || summary.progressive_aa || '';   summary.number = aaCoalesce;    if (!Array.isArray(summary.lines)) summary.lines = [];   summary.lines = summary.lines.map((l, i) => ({     id: (l && (l.id || l.line_id)) ? String(l.id || l.line_id) : ('r' + i),     description: (l && (l.description || l.desc)) || '',     amount: (l && (l.amount || l.lineTotal || l.total)) || '',     vat: (l && (l.vat || l.vatRate)) || '',     vatCategory: (l && (l.vatCategory || l.vat_category)) || '',     category: (l && l.category) || ''   }));    try {     const res = await fetch('/save_summary', {       method: 'POST',       credentials: 'same-origin',       headers: { 'Content-Type': 'application/json', 'X-Requested-With': 'XMLHttpRequest' },       body: JSON.stringify(summary)     });     if (!res.ok) {       const t = await res.text().catch(()=>'');       alert('Αποτυχία αποθήκευσης (HTTP ' + res.status + '): ' + t);       return;     }     try { document.getElementById('summaryModal').style.display = 'none'; } catch(_) {}     window.location = window.location.pathname;   } catch (err) {     console.error('save_summary AJAX error', err);     alert('Σφάλμα αποθήκευσης: ' + (err.message || err));   } });  document.getElementById('saveSummaryForm')?.addEventListener('submit', async function(e){   const scrapeUrl = document.getElementById('scrapeUrlField')?.value || '';   if(!scrapeUrl) return; // allow normal server flow for invoice flow   e.preventDefault();    // parse summary from hidden input   let summary = {};   try {     summary = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');   } catch(err){     console.warn('Failed parsing summaryJsonInput', err);     showFlash('Σφάλμα: άκυρα δεδομένα παραστατικού.', 'error');     return;   }    // robust AFM extraction (try many variants)   const afmFromSummary = (summary && (summary.AFM_issuer || summary.AFM || summary.issuer_vat || summary.issuerVat || summary.issuer_vat)) ||                          (summary && summary.raw && (summary.raw.issuer_vat || summary.raw.issuerVat || summary.raw.AFM || summary.raw.AFM_issuer));   const afmVal = (typeof VAT !== 'undefined' && VAT) ? VAT : (afmFromSummary ? String(afmFromSummary).trim() : '');    // robust year extraction: prefer ACTIVE_YEAR, then summary.year, then parse issueDate, then fallback to current year   let yearVal = null;   try {     if (typeof ACTIVE_YEAR !== 'undefined' && ACTIVE_YEAR) yearVal = String(ACTIVE_YEAR);     else if (summary && (summary.year || summary.Year)) yearVal = String(summary.year || summary.Year);     else if (summary && summary.issueDate) {       const parts = (summary.issueDate || '').split('/');       if (parts.length >= 3) yearVal = parts[2];     }     if (!yearVal) yearVal = String((new Date()).getUTCFullYear());   } catch(e){     yearVal = String((new Date()).getUTCFullYear());   }    // final mark   const markVal = summary.mark || document.getElementById('scrapeUrlField')?.dataset.mark || '';    // if afm missing -> abort with client message (server requires AFM or active session)   if (!afmVal) {     console.warn('confirm_receipt abort: missing AFM', { summary });     showFlash('Αδύνατο να αποθηκευτεί: λείπει AFM του ενεργού πελάτη. Επιλέξτε ενεργό πελάτη ή βεβαιωθείτε ότι το παραστατικό περιέχει ΑΦΜ.', 'error', 7000);     return;   }    const payload = {     url: scrapeUrl,     summary: summary,     force: (document.getElementById('scrapeForceField')?.value === 'true'),     category: 'αποδειξακια',     afm: afmVal,     year: String(yearVal),     mark: (summary.mark || markVal || '')   };    console.log('[RC-DEBUG] FETCH -> /api/confirm_receipt called', '/api/confirm_receipt', payload);    // send to backend   try {     const res = await fetch('/api/confirm_receipt', {       method: 'POST',       credentials: 'same-origin',       headers: {'Content-Type':'application/json','X-Requested-With':'XMLHttpRequest'},       body: JSON.stringify(payload)     });     const j = await res.json().catch(()=>null);     if(!res.ok || !j || !j.ok){       console.warn('confirm_receipt failed', res.status, j);       showFlash('Σφάλμα αποθήκευσης: ' + ((j && j.error) ? j.error : ('Server ' + (res.status || ''))) , 'error', 7000);       return;     }     showFlash('Αποθηκεύτηκε η απόδειξη (excel + json).', 'success');     document.getElementById('summaryModal').style.display = 'none';     // clean hidden fields     document.getElementById('scrapeUrlField').value = '';     document.getElementById('scrapeForceField').value = 'false';   } catch(err){     console.error('confirm_receipt fetch error', err);     showFlash('Σφάλμα δικτύου κατά την αποθήκευση.', 'error');   } });  // --- Fix: on page load, populate modal if summaryJsonInput already contains summary JSON --- // This replaces a missing populateSummaryModal call and uses the populate watcher (RC_forcePopulateSummaryModal) if available. // Robust startup: only show summary modal if summaryJsonInput actually contains meaningful data document.addEventListener("DOMContentLoaded", function(){   try {     const summaryEl = document.getElementById("summaryJsonInput");     const modal = document.getElementById("summaryModal");     if (!summaryEl) return;      let obj = {};     try { obj = JSON.parse(summaryEl.value || '{}'); } catch(e){ obj = {}; }      function isMeaningful(o){       if (!o || typeof o !== 'object') return false;        // quick acceptors: important single fields       const important = ['mark','MARK','AFM_issuer','AFM','totalValue','totalNetValue','total_amount','issueDate','issue_date','progressive_aa','AA'];       for (const k of important) {         if (o[k] !== undefined && o[k] !== null && String(o[k]).trim() !== '') return true;       }        // if lines array exists and has at least one line with some non-empty field -> accept       if (Array.isArray(o.lines) && o.lines.length) {         for (const ln of o.lines) {           if (!ln) continue;           if ( (ln.description && String(ln.description).trim() !== '') ||                (ln.amount && String(ln.amount).trim() !== '') ||                (ln.id && String(ln.id).trim() !== '') ) return true;         }       }        // fallback: if object has more than one non-empty key -> accept       const nonEmptyKeys = Object.keys(o).filter(k => {         try { return o[k] !== null && o[k] !== undefined && String(o[k]).trim() !== ''; } catch(e){ return false; }       });       if (nonEmptyKeys.length > 1) return true;        return false;     }      if (isMeaningful(obj)) {       // ask the populate watcher to run (if available), else run a safe local populate       if (window.RC_forcePopulateSummaryModal) {         try { window.RC_forcePopulateSummaryModal(); } catch(e){ console.warn('RC_forcePopulateSummaryModal failed', e); }       } else {         // try to populate basic fields if populate function not present         try {           if (typeof populateSummaryModal === 'function') try { populateSummaryModal(obj); } catch(_) {}         } catch(_) {}       }        if (modal) if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }     } else {       // ensure modal remains hidden on load       if (modal) modal.style.display = 'none';     }   } catch(e){     console.warn('startup populate summary failed', e);   } });      // This expects rows to have 'input[type="radio"][name="active_name"]' and row id pattern cred-row-<name>   document.querySelectorAll('tr[id^="cred-row-"]').forEach(tr=>{     tr.addEventListener('dblclick', function(e){       try {         const radio = tr.querySelector('input[type="radio"][name="active_name"]');         if(radio){           radio.checked = true;           // also give visual feedback (optional)           tr.classList.add('bg-gray-100');           setTimeout(()=>tr.classList.remove('bg-gray-100'), 600);         }       } catch(err){ console.warn('dblclick select radio failed', err); }     });   });  });  // === DEBUG SNIPPET: paste near end of your existing scripts === (function(){   function safeLog(...a){ try{ console.log('[RC-DEBUG]', ...a); }catch(e){} }    // Global JS error catcher   window.addEventListener('error', function(e){     safeLog('Window error', e.message, e.filename + ':' + e.lineno, e.error);   });   window.addEventListener('unhandledrejection', function(ev){     safeLog('Unhandled promise rejection', ev.reason);   });    // Watch important DOM elements existence   function checkDom(){     const names = [       'markSearchForm','useReceiptsSwitch','scrapeUrlInput',       'summaryModal','summaryJsonInput','saveSummaryForm',       'scrapeUrlField','scrapeCategoryField','scrapeForceField'     ];     const out = {};     names.forEach(n => out[n] = !!document.getElementById(n));     safeLog('DOM presence', out);   }   document.addEventListener('DOMContentLoaded', function(){ checkDom(); });    // Hook markSearchForm submit   const msf = document.getElementById('markSearchForm');   if(msf){     msf.addEventListener('submit', function(e){       try{         const useReceipts = !!(document.getElementById('useReceiptsSwitch') && document.getElementById('useReceiptsSwitch').checked);         safeLog('markSearchForm.submit fired', 'useReceipts=', useReceipts, 'mark=', (document.getElementById('markInput')?.value||''), 'urlInput=', (document.getElementById('scrapeUrlInput')?.value||''));       }catch(err){ safeLog('submit hook error', err); }     }, true);   } else safeLog('markSearchForm NOT FOUND');    // Hook receipts switch changes   const rs = document.getElementById('useReceiptsSwitch');   if(rs){     rs.addEventListener('change', function(e){       safeLog('useReceiptsSwitch change, checked=', rs.checked);       // show/hide created url input for visibility       const ui = document.getElementById('scrapeUrlInput');       if(ui) ui.style.outline = rs.checked ? '2px solid orange' : 'none';     });   } else safeLog('useReceiptsSwitch NOT FOUND');    // Monitor fetch to /api/scrape_receipt by wrapping fetch (only for debugging)   const origFetch = window.fetch;   window.fetch = async function(resource, init){     try{       if(typeof resource === 'string' && resource.indexOf('/api/scrape_receipt') !== -1){         safeLog('FETCH -> /api/scrape_receipt called', resource, init && init.body ? (init.body.length>100 ? init.body.slice(0,100)+'...' : init.body) : init);       }       if(typeof resource === 'string' && resource.indexOf('/api/confirm_receipt') !== -1){         safeLog('FETCH -> /api/confirm_receipt called', resource, init && init.body ? (function(){ try { return JSON.parse(init.body); } catch(e){ return init.body; } })() : init);         // Visual cue: flash border on modal         const m = document.getElementById('summaryModal');         if(m) { m.style.outline = '4px dashed lime'; setTimeout(()=>{ if(m) m.style.outline=''; }, 1200); }       }     }catch(e){ safeLog('fetch-wrap log failed', e); }     return origFetch.apply(this, arguments);   };    // Hook the saveSummaryForm submit (the interceptor should already exist in your code)   const ssf = document.getElementById('saveSummaryForm');   if(ssf){     ssf.addEventListener('submit', function(e){       try{         // show current fields         const summaryVal = (document.getElementById('summaryJsonInput')?.value) || null;         const scrapeUrl = document.getElementById('scrapeUrlField')?.value || null;         const scrapeCat = document.getElementById('scrapeCategoryField')?.value || null;         const scrapeForce = document.getElementById('scrapeForceField')?.value || null;         safeLog('saveSummaryForm.submit (intercept) summaryPresent=', !!summaryVal, 'scrapeUrl=', scrapeUrl, 'scrapeCat=', scrapeCat, 'scrapeForce=', scrapeForce);         // also pretty-print JSON if small         if(summaryVal){           try { safeLog('summary JSON', JSON.parse(summaryVal)); } catch(e){ safeLog('summary raw', summaryVal.slice(0,500)); }         }       }catch(err){ safeLog('saveSummaryForm submit hook error', err); }     }, true);   } else safeLog('saveSummaryForm NOT FOUND');    // When modal is shown/hidden, log it   const observer = new MutationObserver(function(muts){     try{       const modal = document.getElementById('summaryModal');       if(modal){         const style = window.getComputedStyle(modal);         if(style.display !== 'none'){           safeLog('summaryModal is visible');         } else {           // optional: safeLog('summaryModal is hidden');         }       }     }catch(e){ safeLog('mutation observer err', e); }   });   observer.observe(document.documentElement || document.body, { attributes: true, childList: true, subtree: true });    // Periodic sanity check: print whether modal and form are present every 2s for 6 checks   let checks = 0;   const interval = setInterval(function(){     checks++;     const present = {       modal: !!document.getElementById('summaryModal'),       summaryInput: !!document.getElementById('summaryJsonInput'),       saveForm: !!document.getElementById('saveSummaryForm'),       urlField: !!document.getElementById('scrapeUrlField')     };     safeLog('periodic-dom-check', present);     if(checks>6) clearInterval(interval);   }, 2000);    safeLog('RC-DEBUG injected'); })(); (function(){   function getSummaryData(){     const input = document.getElementById('summaryJsonInput');     if(!input) return null;     try {       const data = JSON.parse(input.value || '{}');       if(!Array.isArray(data.lines)) data.lines = [];       return { input, data };     } catch(e) {       return { input, data: { lines: [] } };     }   }    function saveSummaryData(obj){     if(!obj || !obj.input) return;     obj.input.value = JSON.stringify(obj.data);   }    // Click on category buttons (delegation)   document.addEventListener('click', function(ev){     const btn = ev.target.closest && ev.target.closest('.category-btn');     if(!btn) return;     ev.preventDefault();     // prevent other handlers (the "other modal" that opened)     try { ev.stopImmediatePropagation(); } catch(e){}     try { ev.stopPropagation(); } catch(e){}      const lid = btn.dataset.lineId || (btn.closest('[data-line-id]') && btn.closest('[data-line-id]').dataset.lineId) || '';     const cat = btn.dataset.cat || '';     if(!lid) return;      const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }      // toggle: if already set -> clear, else set     line.category = (String(line.category || '') === String(cat)) ? '' : String(cat);      // update button classes for that line     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.toggle('bg-sky-600', (b.dataset.cat === line.category));       b.classList.toggle('text-white', (b.dataset.cat === line.category));     });      // also update corresponding select if present     const sel = document.querySelector('select.expense-category[data-line-id="'+CSSescape(lid)+'"]');     if(sel) try { sel.value = line.category || ''; } catch(e){}      saveSummaryData(state);   }, true);    // change on line-selects   document.addEventListener('change', function(ev){     const sel = ev.target;     if(!sel || !sel.matches || !sel.matches('select.expense-category')) return;     const lid = sel.dataset.lineId || (sel.closest('[data-line-id]') && sel.closest('[data-line-id]').dataset.lineId) || '';     if(!lid) return;     const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }     line.category = String(sel.value || '');     // update any buttons     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.toggle('bg-sky-600', (b.dataset.cat === line.category));       b.classList.toggle('text-white', (b.dataset.cat === line.category));     });     saveSummaryData(state);   }, true);    // clear button (if exists)   document.addEventListener('click', function(ev){     const cb = ev.target.closest && ev.target.closest('#clearCategory');     if(!cb) return;     ev.preventDefault();     try { ev.stopImmediatePropagation(); } catch(e){}     const container = cb.closest('[data-line-id]') || document;     const lid = container && container.dataset && container.dataset.lineId ? container.dataset.lineId : '';     if(!lid) return;     const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }     line.category = '';     // update UI     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.remove('bg-sky-600','text-white');     });     const sel = document.querySelector('select.expense-category[data-line-id="'+CSSescape(lid)+'"]');     if(sel) sel.value = '';     saveSummaryData(state);   }, true);    // Ensure hidden input is up-to-date before normal form submit   const saveForm = document.getElementById('saveSummaryForm');   if(saveForm){     saveForm.addEventListener('submit', function(ev){       // just ensure input is stringified (handlers already update it live)       const s = getSummaryData();       if(s) saveSummaryData(s);       // allow normal submit (server-side will persist)     });   }    // small CSS.escape fallback used above   function CSSescape(s){     if(window.CSS && CSS.escape) return CSS.escape(s);     return String(s).replace(/([ #;?%&,.+*~\':"!^$[\]()=>|\/@])/g,'\\$1');   } })();  (function RC_AUTO_INJECT_SUMMARY_MODAL(){   try {     console.log('[RC-DEBUG] periodic-dom-check starting');      function exists(id){ return !!document.getElementById(id); }      const needs = {       modal: exists('summaryModal'),       summaryInput: exists('summaryJsonInput'),       saveForm: exists('saveSummaryForm'),       urlField: exists('scrapeUrlField')     };     console.log('[RC-DEBUG] DOM presence (before inject)', needs);      if (needs.modal && needs.summaryInput && needs.saveForm) {       console.log('[RC-DEBUG] All required DOM elements present, no injection needed');       return;     }      // Build modal HTML (minimal, matches server-side expected IDs)     const modalHtml = ` <div id="summaryModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">   <div class="bg-white rounded-lg shadow-lg w-full max-w-6xl p-6">     <div class="flex justify-between items-center mb-4">       <h3 class="text-lg font-semibold">Περίληψη Παραστατικού - <span id="summaryModalMark">MARK</span></h3>       <button id="modalCloseX" class="text-gray-500 text-xl font-bold">✕</button>     </div>      <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">       <div><strong>Α/Α Παραστατικού</strong><div id="summary_AA"></div></div>       <div><strong>ΑΦΜ</strong><div id="summary_AFM"></div></div>       <div><strong>Επωνυμία</strong><div id="summary_Name"></div></div>       <div><strong>Ημερομηνία</strong><div id="summary_issueDate"></div></div>       <div><strong>Τύπος Παραστατικού</strong><div id="summary_type_name"></div></div>       <div><strong>Καθαρή Αξία</strong><div id="summary_totalNetValue"></div></div>       <div><strong>ΦΠΑ</strong><div id="summary_totalVatAmount"></div></div>       <div><strong>Σύνολο</strong><div id="summary_totalValue"></div></div>     </div>      <h4 class="font-medium mt-4 mb-2">Γραμμές Παραστατικού (για χαρακτηρισμό)</h4>     <div id="summaryLinesContainer" class="overflow-auto max-h-96 border rounded p-2"></div>      <div class="mt-4 flex justify-between items-center">       <div class="text-sm text-gray-600">Σημείωση: οι κατηγορίες προέρχονται από τα settings του πελάτη.</div>       <div class="flex justify-end gap-2">         <form method="POST" action="{{ url_for('save_summary') }}" id="saveSummaryForm">           <input type="hidden" name="summary_json" id="summaryJsonInput" value='{}'>           <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση στο Cache</button>           <input type="hidden" id="scrapeUrlField" name="scrape_url" value="">           <input type="hidden" id="scrapeCategoryField" name="scrape_category" value="">           <input type="hidden" id="scrapeForceField" name="scrape_force" value="false">         </form>         <button id="modalCloseBtn" class="px-3 py-2 border rounded">Κλείσιμο</button>       </div>     </div>   </div> </div>`.trim();      // Inject into document.body     const wrapper = document.createElement('div');     wrapper.innerHTML = modalHtml;     // append at end of body so it does not break layout     document.body.appendChild(wrapper.firstChild);      // wire close buttons to hide modal (same behavior as original)     function hideModal(){       const m = document.getElementById('summaryModal');       if (m) m.style.display = 'none';       try { history.replaceState(null, '', location.pathname + (location.search || '') + location.hash); } catch(e){}     }     document.getElementById('modalCloseX')?.addEventListener('click', hideModal);     document.getElementById('modalCloseBtn')?.addEventListener('click', hideModal);      // Re-check presence     const needs_after = {       modal: exists('summaryModal'),       summaryInput: exists('summaryJsonInput'),       saveForm: exists('saveSummaryForm'),       urlField: exists('scrapeUrlField')     };     console.log('[RC-DEBUG] DOM presence (after inject)', needs_after);     console.log('[RC-DEBUG] Auto-injection done — the client flow should now find the modal and form.');    } catch (e) {     console.error('[RC-DEBUG] auto-inject error', e);   } })(); (function RC_POPULATE_SUMMARY_MODAL(){   try {     console.log('[RC-DEBUG] summary-populate init');      const summaryInput = document.getElementById('summaryJsonInput');     const modal = document.getElementById('summaryModal');     const markEl = document.getElementById('summaryModalMark');     const aaEl = document.getElementById('summary_AA');     const afmEl = document.getElementById('summary_AFM');     const nameEl = document.getElementById('summary_Name');     const issueEl = document.getElementById('summary_issueDate');     const typeEl = document.getElementById('summary_type_name');     const netEl = document.getElementById('summary_totalNetValue');     const vatEl = document.getElementById('summary_totalVatAmount');     const totEl = document.getElementById('summary_totalValue');     const linesContainer = document.getElementById('summaryLinesContainer');      if (!summaryInput) {       console.warn('[RC-DEBUG] summaryJsonInput NOT FOUND — modal will not populate');       return;     }     if (!modal) {       console.warn('[RC-DEBUG] summaryModal NOT FOUND — abort populate watcher');       return;     }      let lastVal = '';     function safeText(node, v){       if(!node) return;       node.textContent = (v === null || v === undefined) ? '' : String(v);     }      function renderLines(lines){       if(!linesContainer) return;       linesContainer.innerHTML = '';       if(!Array.isArray(lines) || lines.length === 0){         const p = document.createElement('div'); p.className = 'p-2 text-sm text-gray-600'; p.textContent = 'Δεν βρέθηκαν γραμμές.';         linesContainer.appendChild(p);         return;       }        // build a small table       const tbl = document.createElement('table');       tbl.className = 'w-full text-sm';       tbl.style.borderCollapse = 'collapse';       const thead = document.createElement('thead');       thead.innerHTML = '<tr><th class="p-1 border text-left">#</th><th class="p-1 border text-left">Περιγραφή</th><th class="p-1 border text-right">Ποσό</th><th class="p-1 border text-right">ΦΠΑ</th></tr>';       tbl.appendChild(thead);       const tbody = document.createElement('tbody');       lines.forEach((ln, idx) => {         const tr = document.createElement('tr');         tr.innerHTML = `<td class="p-1 border text-left">${idx+1}</td>                         <td class="p-1 border text-left">${(ln.description||ln.desc||'').toString().slice(0,200)}</td>                         <td class="p-1 border text-right">${ln.amount||ln.lineTotal||''}</td>                         <td class="p-1 border text-right">${ln.vat||ln.vatRate||''}</td>`;         tbody.appendChild(tr);       });       tbl.appendChild(tbody);       linesContainer.appendChild(tbl);     }      function populateOnce(){       try {         const v = (summaryInput.value || '').trim();         if (!v) {           // nothing to show           return;         }         if (v === lastVal) return;         lastVal = v;         let obj = {};         try { obj = JSON.parse(v); } catch(err){           console.warn('[RC-DEBUG] failed parsing summaryJsonInput JSON', err, v);           return;         }         console.log('[RC-DEBUG] populate modal from summary JSON', obj);          safeText(markEl, obj.mark || obj.MARK || (obj.raw && obj.raw.MARK) || '');         safeText(aaEl, obj.AA || obj.aa || obj.progressive_aa || (obj.raw && obj.raw.progressive_aa) || '');         safeText(afmEl, obj.AFM_issuer || obj.AFM || obj.issuer_vat || (obj.raw && obj.raw.issuer_vat) || '');         safeText(nameEl, obj.Name || obj.Name_issuer || obj.issuer_name || (obj.raw && obj.raw.issuer_name) || '');         safeText(issueEl, obj.issueDate || obj.issue_date || (obj.raw && obj.raw.issue_date) || '');         safeText(typeEl, obj.type_name || obj.type || (obj.raw && obj.raw.doc_type) || '');         safeText(netEl, obj.totalNetValue || obj.total_amount || obj.totalValue || (obj.raw && obj.raw.total_amount) || '');         safeText(vatEl, obj.totalVatAmount || (obj.raw && obj.raw.totalVatAmount) || '');         safeText(totEl, obj.totalValue || obj.total_amount || (obj.raw && obj.raw.total_amount) || '');          // lines         let lines = [];         if (Array.isArray(obj.lines) && obj.lines.length) lines = obj.lines;         else if (obj.raw && Array.isArray(obj.raw.lines) && obj.raw.lines.length) lines = obj.raw.lines;         else if (obj.lines && typeof obj.lines === 'object') {           // sometimes backend sends object: try to collect values           try {             lines = Object.values(obj.lines).filter(x => x);           } catch(e){}         }         renderLines(lines);          // if modal is hidden, ensure it's visible when populate invoked by scraper flow         try {           if (modal && modal.style.display === 'none') {             if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }           }         } catch(e){}        } catch(e){         console.error('[RC-DEBUG] populateOnce error', e);       }     }      // Start polling for changes to summaryJsonInput.value     const poll = setInterval(populateOnce, 250);      // Also populate when modal opens (observe style attribute)     const obs = new MutationObserver(muts => {       for(const m of muts){         if (m.type === 'attributes' && m.attributeName === 'style'){           try { if (modal.style.display !== 'none') populateOnce(); } catch(e){}         }       }     });     try { obs.observe(modal, { attributes: true, attributeFilter: ['style'] }); } catch(e){}      // expose a debug function on window to force populate     window.RC_forcePopulateSummaryModal = populateOnce;      console.log('[RC-DEBUG] summary-populate watcher started');      // Optional: stop polling after N seconds to be tidy     setTimeout(()=>{ clearInterval(poll); console.log('[RC-DEBUG] stopped summary-populate polling (timeout)'); }, 60*1000);    } catch (err) {     console.error('[RC-DEBUG] summary-populate init failed', err);   } })();  (function RC_FORCE_MODAL_GUARD(){   try {     const dbg = (...a) => { try { console.log('[RC-MODAL-GUARD]', ...a); } catch(e) {} };      function parseSummary() {       const el = document.getElementById('summaryJsonInput');       if (!el) return {};       try { return JSON.parse(el.value || '{}') || {}; } catch(e){ dbg('parseSummary JSON error', e); return {}; }     }      function hasMeaningfulSummary(obj) {       if (!obj || typeof obj !== 'object') return false;       // important single fields that guarantee modal should open       const keys = ['mark','MARK','AFM_issuer','AFM','totalValue','totalNetValue','total_amount','issueDate','issue_date','progressive_aa','AA'];       for (const k of keys) {         if (obj[k] !== undefined && obj[k] !== null && String(obj[k]).trim() !== '') return true;       }       // check raw.* fields if present       if (obj.raw && typeof obj.raw === 'object') {         for (const k of ['MARK','issuer_vat','total_amount','issue_date','progressive_aa']) {           if (obj.raw[k] !== undefined && obj.raw[k] !== null && String(obj.raw[k]).trim() !== '') return true;         }       }       // lines array with at least one non-empty line       if (Array.isArray(obj.lines) && obj.lines.length) {         for (const ln of obj.lines) {           if (!ln) continue;           if ((ln.description && String(ln.description).trim() !== '') ||               (ln.amount && String(ln.amount).trim() !== '') ||               (ln.id && String(ln.id).trim() !== '')) return true;         }       }       // fallback: object with >1 non-empty keys       const nonEmpty = Object.keys(obj).filter(k=>{         try { return obj[k] !== null && obj[k] !== undefined && String(obj[k]).trim() !== ''; } catch(e){ return false; }       });       return nonEmpty.length > 1;     }      function ensureModalHiddenUnlessMeaningful() {       const modal = document.getElementById('summaryModal');       const summaryEl = document.getElementById('summaryJsonInput');       if (!modal || !summaryEl) { dbg('no modal/summaryEl present'); return; }        // Force-hide now (neutralize server/client auto-show)       try { modal.style.display = 'none'; } catch(_) {}        // If summary becomes meaningful, show it (and populate watcher should fill fields)       const checkAndMaybeShow = () => {         const obj = parseSummary();         if (hasMeaningfulSummary(obj)) {           dbg('summary meaningful -> showing modal', obj);           try {             // try to trigger your populate logic if present             if (window.RC_forcePopulateSummaryModal) {               try { window.RC_forcePopulateSummaryModal(); } catch(e){ dbg('RC_forcePopulateSummaryModal failed', e); }             } else if (typeof populateSummaryModal === 'function') {               try { populateSummaryModal(obj); } catch(e){ dbg('populateSummaryModal failed', e); }             }             if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }           } catch(e){ dbg('show modal failed', e); }         } else {           // keep hidden           dbg('summary not meaningful -> keep modal hidden');           try { modal.style.display = 'none'; } catch(_) {}         }       };        // run immediate check after tiny delay (let other init finish)       setTimeout(checkAndMaybeShow, 60);        // observe changes to summaryJsonInput.value (detect writes by other code)       try {         let lastVal = summaryEl.value || '';         const poll = setInterval(() => {           try {             const cur = summaryEl.value || '';             if (cur !== lastVal) {               lastVal = cur;               dbg('summaryJsonInput changed -> recheck');               checkAndMaybeShow();             }           } catch(e){ dbg('poll error', e); }         }, 200);         // auto-stop polling after 60s         setTimeout(()=>clearInterval(poll), 60*1000);       } catch(e){ dbg('poll install failed', e); }        // observe modal style changes by others: if someone tries to open it while summary not meaningful, immediately hide       try {         const mo = new MutationObserver(muts => {           try {             const obj = parseSummary();             if (!hasMeaningfulSummary(obj)) {               const modalEl = document.getElementById('summaryModal');               if (modalEl) {                 const disp = window.getComputedStyle(modalEl).display;                 if (disp !== 'none') {                   dbg('modal was opened by other code while summary not meaningful -> hiding it');                   modalEl.style.display = 'none';                 }               }             }           } catch(e){ dbg('mutation observer callback error', e); }         });         const modalNode = document.getElementById('summaryModal');         if (modalNode) mo.observe(modalNode, { attributes: true, attributeFilter: ['style', 'class'] });       } catch(e){ dbg('mutation observer install failed', e); }     }      // Run after DOM ready (also run if DOM already ready)     if (document.readyState === 'loading') {       document.addEventListener('DOMContentLoaded', ensureModalHiddenUnlessMeaningful);     } else {       setTimeout(ensureModalHiddenUnlessMeaningful, 10);     }      dbg('RC_FORCE_MODAL_GUARD installed');   } catch(err) {     try { console.error('[RC-MODAL-GUARD] init failed', err); } catch(e){}   } })();  document.addEventListener('click', function(ev){   const btn = ev.target.closest('.category-btn');   if(!btn) return;    // 1) Αποτροπή bubbling για να μην ανοίγει άλλο modal   ev.preventDefault();   try { ev.stopImmediatePropagation(); } catch(e){}   try { ev.stopPropagation(); } catch(e){}    // 2) Ενημέρωση κουμπιών (UI)   const lineId = btn.dataset.lineId;   const cat = btn.dataset.cat;   const siblings = btn.parentElement.querySelectorAll('.category-btn');   siblings.forEach(s => s.classList.remove('bg-sky-600','text-white'));   btn.classList.add('bg-sky-600','text-white');    // 3) Ενημέρωση του select για compatibility   const sel = document.querySelector('select.expense-category[data-line-id="'+lineId+'"]');   if(sel) sel.value = cat;    // 4) Ενημέρωση του hidden JSON input   const input = document.getElementById('summaryJsonInput');   if(!input) return;   let data = {};   try { data = JSON.parse(input.value || '{}'); } catch(e){ data = {}; }    // Ensure lines array exists   if(!Array.isArray(data.lines)) data.lines = [];    // Update or add line   let line = data.lines.find(l => String(l.id || l.line_id || '') === lineId);   if(!line){     line = {id: lineId};     data.lines.push(line);   }   line.category = cat; // <--- εδώ γράφεται η κατηγορία    // Save back   input.value = JSON.stringify(data); });  document.querySelectorAll('.category-btn').forEach(btn=>{   btn.addEventListener('click', function(ev){     ev.preventDefault(); // δεν χρειάζεται stopPropagation      const lineId = this.dataset.lineId;     const cat = this.dataset.cat;      // Αποτύπωση UI     const siblings = this.parentElement.querySelectorAll('.category-btn');     siblings.forEach(s => s.classList.remove('bg-sky-600','text-white'));     this.classList.add('bg-sky-600','text-white');      // Ενημέρωση select για συμβατότητα     const sel = document.querySelector('select.expense-category[data-line-id="'+lineId+'"]');     if(sel) sel.value = cat;      // Ενημέρωση summaryJsonInput     const input = document.getElementById('summaryJsonInput');     if(!input) return;     let data = {};     try { data = JSON.parse(input.value || '{}'); } catch(e){ data={}; }     if(!Array.isArray(data.lines)) data.lines = [];     let line = data.lines.find(l => String(l.id||l.line_id||'')===lineId);     if(!line){       line = {id: lineId};       data.lines.push(line);     }     line.category = cat;     input.value = JSON.stringify(data);      // !!! Σημαντικό: μην καλείς stopPropagation εδώ !!!     // Άλλο modal handler θα πρέπει να φιλτράρει ποιο στοιχείο το ενεργοποιεί   }); }); document.addEventListener('click', function(ev){   // Αν το click προέρχεται από κουμπί category, αγνόησε   if(ev.target.closest('.category-btn')) return;    // άλλος κώδικας που ανοίγει modal });      // === Frontend patch: enrich delete_invoices POST + clear client-side cache === document.addEventListener('submit', function(ev){   try{     const form = ev.target;     if(!form || !form.action) return;     // Match delete_invoices endpoint (relative or absolute)     const a = document.createElement('a'); a.href = form.action;     const path = (a.pathname || '') + (a.search || '');     if(!/delete_invoices/.test(path)) return;      // 1) Ensure active_vat is posted     const existingHv = form.querySelector('input[name="active_vat"]');     if(!existingHv){       const hv = document.createElement('input');       hv.type = 'hidden';       hv.name = 'active_vat';       const activeVat = (document.querySelector('#vatSelector')?.value                       || document.querySelector('[name="vat"]')?.value                       || document.body.dataset.activeVat                       || '').toString().trim();       hv.value = activeVat;       form.appendChild(hv);     }      // 2) Collect marks to delete     let marks = Array.from(form.querySelectorAll('input[name="delete_mark"]')).map(i => (i.value||'').trim()).filter(Boolean);     if(!marks.length){       marks = Array.from(document.querySelectorAll('input[name="delete_mark"]:checked')).map(i => (i.value||'').trim()).filter(Boolean);     }      // 3) Clear client-side caches (localStorage keys that reference these MARKs)     try{       marks.forEach(mk => {         // common per-mark keys         localStorage.removeItem(`epsilon_summary_${mk}`);         localStorage.removeItem(`EPSILON:INV:${mk}`);       });       // any key containing one of the marks       for(let i=localStorage.length-1; i>=0; i--){         const k = localStorage.key(i);         if(!k) continue;         if(marks.some(mk => k.includes(mk))){           localStorage.removeItem(k);         }       }       // also clear any prefilled summary hidden input to avoid stale reopen       const sumInp = document.getElementById('summaryJsonInput');       if(sumInp) sumInp.value = '';     }catch(e){ /* ignore storage errors */ }    }catch(err){     console.warn('delete_invoices frontend patch failed', err);   } }, true); (function receiptsRepeatModalGuard(){   const once = { submitted:false };    function qs(id){ return document.getElementById(id); }    function readSummary(){     try { return JSON.parse(qs('summaryJsonInput')?.value || '{}'); }     catch(_) { return {}; }   }    function isMeaningfulSummary(o){     try{       if (!o || typeof o!=='object') return false;       const mark = String(o.mark || o.MARK || '').trim();       if (!mark || mark.length<6) return false;       const lines = Array.isArray(o.lines) ? o.lines : [];       if (lines.length===0) return false;       return lines.some(l=>{         if(!l) return false;         const desc=(l.description||l.desc||'').toString().trim();         const amt =(l.amount||l.lineTotal||l.total||'').toString().trim();         const id  =(l.id||l.line_id||'').toString().trim();         return !!(desc||amt||id);       });     }catch(_){ return false; }   }    function isReceiptSummary(o){     try{       const t = (o.type_name || o.type || '').toString().toLowerCase();       const c = (o.category || o.characteristic || o['χαρακτηρισμός'] || '').toString().toLowerCase();       return !!(o.is_receipt || t.includes('απόδει') || t.includes('receipt') || t.includes('λιαν') || c==='αποδειξακια');     }catch(_){ return false; }   }    function forceEdit(){     try { return new URLSearchParams(location.search).get('force_edit') === '1'; }     catch(_){ return false; }   }    function shouldOpenSummaryModal(obj){     const receiptsOn = !!(qs('useReceiptsSwitch') && qs('useReceiptsSwitch').checked);     const repeatOn   = !!(qs('repeatEntrySwitch') && qs('repeatEntrySwitch').checked);     // Αν είμαστε σε αποδείξεις (ή το summary είναι απόδειξη) και repeat ON και ΔΕΝ είναι reclassification -> ΜΗΝ ανοίξεις modal     if ((receiptsOn || isReceiptSummary(obj)) && repeatOn && !forceEdit()) return false;     return true;   }    function autoSubmitReceipt(obj){     if (once.submitted) return;                       // το στείλαμε ήδη σε αυτόν τον κύκλο     if (!isMeaningfulSummary(obj)) return;            // ασφαλιστική δικλείδα     const mark = (obj.mark || obj.MARK || '').toString().trim();     if (!mark) return;     const key = 'rc-auto:' + mark;     if (sessionStorage.getItem(key)) return;          // ήδη υποβλήθηκε μετά από reload      // Επέβαλε “Αποδειξάκια”     try{       if (!Array.isArray(obj.lines)) obj.lines = [];       obj.is_receipt = true;       obj.category = 'αποδειξακια';       obj.characteristic = 'αποδειξακια';       obj['χαρακτηρισμός'] = 'αποδειξακια';       qs('summaryJsonInput').value = JSON.stringify(obj);     }catch(_){}      const form = qs('saveSummaryForm');     if (!form) return;     once.submitted = true;     sessionStorage.setItem(key,'1');                 // ώστε στο επόμενο reload να ΜΗΝ ξαναστείλει     form.submit();   }    // Φρένο: ΜΗΝ υποβάλλεις την search-form χωρίς mark KAI χωρίς url   (function guardEmptySearchSubmit(){     const form = qs('markSearchForm');     if (!form) return;     form.addEventListener('submit', (e)=>{       const mark = (qs('markInput')?.value || '').trim();       const url  = (qs('scrapeUrlInput')?.value || '').trim();       if (!mark && !url) e.preventDefault();     }, true);   })();    // Παρακολούθησε το modal: αν πάει να ανοίξει ενώ ΔΕΝ πρέπει, κλείστο και κάνε auto-submit   const modal = qs('summaryModal');   if (!modal) return;    const observer = new MutationObserver(function(){     try{       const visible = modal && getComputedStyle(modal).display !== 'none';       if (!visible) return;       const obj = readSummary();       if (!shouldOpenSummaryModal(obj)) {         // Μπλόκαρε το modal και προχώρησε σε auto-submit         modal.style.display = 'none';         autoSubmitReceipt(obj);       }     }catch(_){}   });    try{     observer.observe(modal, { attributes:true, attributeFilter:['style','class'] });   }catch(_){}    // One-shot check αν τυχόν ξεκινά ήδη ανοιχτό   setTimeout(()=>{     try{       const visible = modal && getComputedStyle(modal).display !== 'none';       const obj = readSummary();       if (visible && !shouldOpenSummaryModal(obj)) {         modal.style.display = 'none';         autoSubmitReceipt(obj);       }     }catch(_){}   }, 80); })();  </script>  <style>     /* minimal styling for the toggle switch */     /* μόνο για modal */     .modal-summary-table th {         background-color: #0d6efd;         color: white;         border: 1px solid #ccc;     }      .modal-summary-table td {         border: 1px solid #e2e8f0;     }      .modal-summary-table tr:nth-child(even) {         background-color: #f9fafb;     }      .modal-summary-table tr:hover {         background-color: #e6f0ff;     }      .modal-summary-table tfoot td {         background-color: #f1f5f9;     }      /* κλείδωμα κλικ πίσω από modal */     .modal-backdrop {         position: fixed;         inset: 0;         background: rgba(0,0,0,.45);         z-index: 99998;     }      #summaryModal {         z-index: 99999;         position: fixed;         inset: 0;         display: none;         align-items: center;         justify-content: center;     }          #summaryModal.show {             display: flex;         }      body.modal-open #page-root {         pointer-events: none;     }     /* βάλε id=page-root στο κύριο wrapper της σελίδας */     body.modal-open #summaryModal,     body.modal-open #summaryModal * {         pointer-events: auto;     }      .toggle-switch {         width: 42px;         height: 24px;         -webkit-appearance: none;         appearance: none;         background: #e5e7eb;         border-radius: 999px;         position: relative;         outline: none;         cursor: pointer;         vertical-align: middle;     }          .toggle-switch:checked {             background: #0ea5a4;         }          .toggle-switch::after {             content: "";             position: absolute;             top: 3px;             left: 3px;             width: 18px;             height: 18px;             border-radius: 999px;             background: white;             transition: transform .15s ease;         }          .toggle-switch:checked::after {             transform: translateX(18px);         } </style>    <script>/* ===== Auto-submit segmented toggle + guarded auto-detect (receipts & invoices) ===== */ (function(){   try {     // Globals     window.__RC_FLAGS  = window.__RC_FLAGS  || {};     window.__RC_LOCKS  = window.__RC_LOCKS  || {};     const AUTO_KEY = 'rc:autoSubmitEnabled';      // UI refs (may be absent in some partial renders)     const form     = document.getElementById('markSearchForm');     const markEl   = document.getElementById('markInput');     const urlEl    = document.getElementById('scrapeUrlInput'); // may be dynamically created in your code     const btnOn    = document.getElementById('autoSubmitBtnOn');     const btnOff   = document.getElementById('autoSubmitBtnOff');     const receiptsSwitch = document.getElementById('useReceiptsSwitch');      // State helpers     function getAuto(){ try { return localStorage.getItem(AUTO_KEY) === '1'; } catch(_) { return false; } }     function setAuto(v){   try { localStorage.setItem(AUTO_KEY, v ? '1' : '0'); } catch(_) {}   window.__RC_FLAGS.auto_submit_enabled = !!v;   updateUi();    // reload με συγχρονισμό querystring   try {     const p = new URLSearchParams(location.search);     if (v) p.set('auto_submit','1'); else p.delete('auto_submit');     const newQS = p.toString();     const cur  = location.pathname + location.search;     const next = location.pathname + (newQS ? '?' + newQS : '');     if (next === cur) {       location.reload();          // αν δεν αλλάζει το URL, αναγκαστικό reload     } else {       location.search = newQS;    // αλλάζοντας το query κάνει reload μόνο του     }   } catch (e) {     location.reload();   } }      function updateUi(){       const on = getAuto();       if (btnOn && btnOff) {         btnOn.classList.toggle('bg-sky-600', on);         btnOn.classList.toggle('text-white', on);         btnOff.classList.toggle('bg-sky-600', !on);         btnOff.classList.toggle('text-white', !on);       }     }     updateUi();     if (btnOn)  btnOn.addEventListener('click', ()=> setAuto(true));     if (btnOff) btnOff.addEventListener('click', ()=> setAuto(false));      // Utilities     function isVisible(el){       if(!el) return false;       const cs = getComputedStyle(el);       return !(cs.display === 'none' || cs.visibility === 'hidden' || cs.opacity === '0');     }     function warningOpen(){       const ids = ['receiptWarn','afmWarningModal','receiptWarningModal','yearWarningModal'];       for (const id of ids){ const el = document.getElementById(id); if (el && isVisible(el)) return true; }       // generic: any visible dialog that is not the summary modal       const nodes = document.querySelectorAll('[role="dialog"],[aria-modal="true"],.modal,.modal-root');       for (const n of nodes){         if (!isVisible(n)) continue;         if (n.id === 'summaryModal' || n.id === 'receiptsModal') continue;         const t = (n.textContent || '').toLowerCase();         if (/\bπροειδοπ|\bπροσοχ|warning|σφάλμα|error/.test(t)) return true;       }       return false;     }      const normMark = v => (v||'').replace(/\D/g,'');     const isMark   = v => normMark(v).length === 15;     const isUrl    = v => {       const s = (v||'').trim();       return /^https?:\/\/\S+/i.test(s) || /^www\.\S+/i.test(s);     };     const extractMark = s => {       const m = String(s||'').match(/\b(\d{15})\b/);       return m ? m[1] : '';     };      function currentKey(){       const mv = (markEl && markEl.value) ? markEl.value.trim() : '';       const uv = (document.getElementById('scrapeUrlInput')?.value || '').trim(); // requery in case it was injected after       const receipts = !!(receiptsSwitch && receiptsSwitch.checked);        // For receipts: prefer a URL, but accept MARK inside URL as fallback       if (receipts) {         if (isUrl(uv)) return 'url:'+uv.replace(/\/+$/,'');         const ex = extractMark(uv); if (ex) return 'mark:'+ex;         // also allow mark typed in markInput if user didn't switch field         if (isMark(mv)) return 'mark:'+normMark(mv);         return null;       }        // For invoices: prefer MARK; but accept URL too       if (isMark(mv)) return 'mark:'+normMark(mv);       if (isUrl(mv)) return 'url:'+mv.replace(/\/+$/,'');       return null;     }      let pending = false;     const KEY_LAST = 'rc:lastSubmitKey';     const TTL_MS   = 20000;     function readLast(){       try {         const raw = sessionStorage.getItem(KEY_LAST);         if(!raw) return null;         const o = JSON.parse(raw);         if(!o || !o.ts || (Date.now()-o.ts)>TTL_MS) return null;         return o.k || null;       }catch(_){ return null; }     }     function writeLast(k){       try { sessionStorage.setItem(KEY_LAST, JSON.stringify({k, ts: Date.now()})); } catch(_) {}     }      const debounce = (fn,ms)=>{ let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a),ms); }; };      function trySubmit(){       if (!form || !getAuto()) return;       if (warningOpen()) return;       const k = currentKey();       if (!k) return;        // prevent collisions with existing receipts lock if present       if (window.__RC_LOCKS && window.__RC_LOCKS.scrape) return;        // prevent duplicate submits on same key       const last = readLast();       if (last && last === k) return;        // submit once       writeLast(k);       if (pending) return;       pending = true;       try {         if (form.requestSubmit) form.requestSubmit(); else form.submit();       } finally {         setTimeout(()=>{ pending=false; }, 500);       }     }      const onChange = debounce(trySubmit, 140);      // Wire inputs if present     if (markEl) {       markEl.addEventListener('input', onChange);       markEl.addEventListener('keyup', onChange);       markEl.addEventListener('paste', ()=>setTimeout(onChange,0));     }     // url input could be injected later; observe for appearance     let tries = 30;     const iv = setInterval(()=>{       const u = document.getElementById('scrapeUrlInput');       if (u) {         u.addEventListener('input', onChange);         u.addEventListener('keyup', onChange);         u.addEventListener('paste', ()=>setTimeout(onChange,0));         clearInterval(iv);       }       if(--tries<=0) clearInterval(iv);     }, 200);      // Initial pass (for browser autofill)     window.addEventListener('load', ()=> setTimeout(onChange, 60));      // Ensure a stub exists to avoid ReferenceError when other code calls it     if (typeof window.autoSubmitReceipt !== 'function') {       window.autoSubmitReceipt = function(){ /* stub to avoid ReferenceError; actual flow handled elsewhere */ };     }   } catch (err) {     console.warn('Auto-submit toggle patch failed', err);   } })();</script>  <script>/* === Persist Receipts/Invoices toggle across refresh === */ <script> /* === Persist Receipts/Invoices toggle across refresh (v2) === */ (function persistReceiptsToggle(){   const KEY = 'rc:useReceipts';   const sw  = document.getElementById('useReceiptsSwitch');   const markInput = document.getElementById('markInput');   function ensureUrlInput(){     let el = document.getElementById('scrapeUrlInput');     if (!el) {       // try to locate after markInput if dynamically created later by other code       el = document.createElement('input');       el.id = 'scrapeUrlInput';       el.placeholder = 'Εισάγετε URL παραστατικού (για αποδείξεις)';       el.className = 'p-2 border rounded w-2/4 hidden';       el.type = 'text';       if (markInput && markInput.parentElement) {         markInput.parentElement.insertBefore(el, markInput.nextSibling);       } else {         document.body.appendChild(el);       }     }     return el;   }   function applyUI(isReceipts){     const urlInput = ensureUrlInput();     if (isReceipts){       markInput && markInput.classList.add('hidden');       urlInput && urlInput.classList.remove('hidden');     } else {       markInput && markInput.classList.remove('hidden');       urlInput && urlInput.classList.add('hidden');     }   }    if (!sw) return;   // restore saved value   const saved = localStorage.getItem(KEY);   if (saved !== null) sw.checked = (saved === '1');   applyUI(sw.checked);    // if URL input appears later (other scripts), re-apply for a short window   let tries = 20;   const iv = setInterval(()=>{     applyUI(sw.checked);     if (--tries <= 0) clearInterval(iv);   }, 200);    sw.addEventListener('change', () => {     localStorage.setItem(KEY, sw.checked ? '1' : '0');     applyUI(sw.checked);   }); })();</script>  <script>/* === Lightweight warning detector (client/server modals) === */ (function ensureWarningOpenHelper(){   if (typeof window.__rc_warningOpen === 'function') return;   window.__rc_warningOpen = function(){     function vis(el){ if(!el) return false; const cs=getComputedStyle(el); return !(cs.display==='none'||cs.visibility==='hidden'||cs.opacity==='0'); }     const ids=['receiptWarn','afmWarningModal','receiptWarningModal','yearWarningModal'];     for (const id of ids){ const el=document.getElementById(id); if (el && vis(el)) return true; }     const nodes=document.querySelectorAll('[role="dialog"],[aria-modal="true"],.modal,.modal-root');     for (const n of nodes){       if (!vis(n)) continue;       if (n.id==='summaryModal' || n.id==='receiptsModal') continue;       const t=(n.textContent||'').toLowerCase();       if (/(προειδοπ|προσοχ|warning|σφάλμα|error)/.test(t)) return true;     }     return false;   }; })();</script>  <script> /* === RC helpers μόνο για flow Αποδείξεων === */ window.RC = window.RC || {};  RC.hasWarnings = function(){ return (typeof window.__rc_warningOpen === 'function') ? window.__rc_warningOpen() : false; };  RC.normalizeReceiptSummary = function (summaryObj) {   summaryObj.is_receipt = true;   summaryObj.type = summaryObj.type || 'ΑΠΟΔΕΙΞΗ';   summaryObj.type_name = summaryObj.type_name || 'ΑΠΟΔΕΙΞΗ';   summaryObj.category = 'αποδειξακια';   if (!Array.isArray(summaryObj.lines) || !summaryObj.lines.length) {     const tot = summaryObj.total_amount || summaryObj.totalValue || summaryObj.totalNetValue || '';     summaryObj.lines = [{ id:'r0', description:'', amount:String(tot||''), vat:'', vatCategory:'', category:'αποδειξακια' }];   } else {     summaryObj.lines = summaryObj.lines.map((l,i)=>({       id: String(l?.id || l?.line_id || ('r'+i)),       description: String(l?.description || l?.desc || ''),       amount: String(l?.amount || l?.lineTotal || l?.total || ''),       vat: String(l?.vat || l?.vatRate || ''),       vatCategory: String(l?.vatCategory || l?.vat_category || ''),       category: String(l?.category || '') || 'αποδειξακια'     }));   }   return summaryObj; };  RC.confirmReceiptOnce = async function(summaryObj, scrapeUrl){   window.__RC_LOCKS = window.__RC_LOCKS || {};   if (window.__RC_LOCKS.confirm) return { ok:false, reason:'locked' };   window.__RC_LOCKS.confirm = true;    try {     const VAT = "{{ vat or '' }}";     const afmVal = (VAT || summaryObj.AFM_issuer || summaryObj.AFM || (summaryObj.raw && summaryObj.raw.issuer_vat) || '').toString().trim();     if (!afmVal) return { ok:false, reason:'missing_afm' };      if (!/\b\d{15}\b/.test(String(summaryObj.mark||'').trim())) {       const r = await fetch('/api/next_receipt_mark', { credentials:'same-origin' });       const j = await r.json().catch(()=>null);       if (j && j.mark) summaryObj.mark = j.mark;     }      let yearVal = "{{ active_year|default('') }}";     if (!yearVal) {       try { const fy = await fetch('/get_fiscal_year', { credentials:'same-origin' }); const fyj = await fy.json(); if (fyj && fyj.exists) yearVal = String(fyj.fiscal_year); } catch(_){}     }     if (!yearVal) {       const any = summaryObj.issueDate || summaryObj.issue_date || (summaryObj.raw && summaryObj.raw.issue_date) || '';       const m = String(any).match(/\b(19|20)\d{2}\b/);       yearVal = m ? m[0] : String((new Date()).getUTCFullYear());     }      const payload = {       url: (scrapeUrl||'').trim(),       summary_json: JSON.stringify(summaryObj),       force: false,       category: 'αποδειξακια',       afm: afmVal,       year: String(yearVal),       mark: String(summaryObj.mark||'')     };      const res = await fetch('/api/confirm_receipt', {       method: 'POST',       credentials: 'same-origin',       headers: {'Content-Type':'application/json','X-Requested-With':'XMLHttpRequest'},       body: JSON.stringify(payload)     });     const jj = await res.json().catch(()=>null);     if (!res.ok || !jj || !jj.ok) return { ok:false, reason: (jj&&jj.error) || ('HTTP '+res.status) };      return { ok:true };   } finally {     window.__RC_LOCKS.confirm = false;   } };  RC.handleReceiptAfterScrape = async function(summaryObj, scrapeUrl){   try {     const repeatOn = !!document.getElementById('repeatEntrySwitch')?.checked;     const forceEdit = (typeof FORCE_EDIT !== 'undefined') ? !!FORCE_EDIT : false;     if (!repeatOn || forceEdit || RC.hasWarnings()) return false;      RC.normalizeReceiptSummary(summaryObj);     const summaryInput = document.getElementById('summaryJsonInput');     if (summaryInput) summaryInput.value = JSON.stringify(summaryObj);      const r = await RC.confirmReceiptOnce(summaryObj, scrapeUrl);     if (!r.ok) {       if (r.reason === 'missing_afm') {         window.openReceiptWarning && openReceiptWarning('Λείπει AFM ενεργού πελάτη.');       } else {         showFlash('Σφάλμα αποθήκευσης: ' + (r.reason || 'άγνωστο'), 'error', 6000);       }       return false;     }     window.__RC_FLAGS = window.__RC_FLAGS || {}; window.__RC_FLAGS.autoHandled = true;     showFlash('Αποθηκεύτηκε η απόδειξη (repeat).', 'success', 900);     try { document.getElementById('summaryModal').style.display = 'none'; } catch(_){}     try { document.getElementById('scrapeUrlInput').value = ''; } catch(_){}     try { document.getElementById('markInput').value = ''; } catch(_){}     window.location = window.location.pathname;     return true;   } catch (e) {     console.warn('handleReceiptAfterScrape failed', e);     return false;   } }; document.addEventListener('DOMContentLoaded', () => {   const params = new URLSearchParams(location.search);    const isReceipts =     (params.get('use_receipts') === '1') ||     (localStorage.getItem('pref_use_receipts') === '1');    const repeatOn =     (params.get('repeat') === '1') ||     (localStorage.getItem('pref_repeat') === '1');    const autoOn = params.has('auto_submit')     ? (params.get('auto_submit') === '1')     : (localStorage.getItem('pref_auto_submit') === '1');    if (!(isReceipts && repeatOn && autoOn)) return;    // 1) Κρύψε ό,τι modal επιβεβαίωσης υπάρχει για αποδείξεις   const hideModal = () => {     ['#receiptsModal', '#summaryModal', '[data-role="modal-warning"]', '#warningModal']       .forEach(sel => {         const el = document.querySelector(sel);         if (!el) return;         el.classList?.add('hidden');         el.style.display = 'none';       });   };   hideModal();    // 2) Βεβαιώσου ότι στο submit περνάει repeat_enabled=1   const ensureRepeatHidden = (form) => {     if (!form) return;     let h = form.querySelector('input[name="repeat_enabled"]');     if (!h) {       h = document.createElement('input');       h.type = 'hidden';       h.name = 'repeat_enabled';       form.appendChild(h);     }     h.value = '1';   };    // 3) Αυτόματο submit μόλις είναι έτοιμη η φόρμα/δεδομένα   let submitted = false;   const tryAutoSubmit = () => {     if (submitted) return;      // Βρες τη φόρμα αποθήκευσης     const form = document.querySelector('form[action$="/save_summary"]');     if (!form) return;      // Έλεγξε ότι υπάρχει payload: summary_json (input/textarea) ή τουλάχιστον το mark     const payloadEl = form.querySelector('input[name="summary_json"],textarea[name="summary_json"]');     const hasPayload = payloadEl ? String(payloadEl.value || '').trim().length > 0 : false;     const hasMark = String((form.querySelector('[name="mark"]') || {}).value || '').trim().length === 15;      if (!hasPayload && !hasMark) return;      ensureRepeatHidden(form);     submitted = true;     hideModal();     form.submit();   };    // Δοκίμασε άμεσα & με μικρό retry   tryAutoSubmit();   const i1 = setInterval(() => {     if (submitted) { clearInterval(i1); return; }     tryAutoSubmit();   }, 150);    // Παρακολούθησε DOM changes (όταν γεμίσει το modal/φόρμα από το fetch)   const mo = new MutationObserver(() => tryAutoSubmit());   mo.observe(document.body, { subtree: true, childList: true, attributes: false });    // Safety stop μετά από ~6s για να μην τρέχει για πάντα   setTimeout(() => mo.disconnect(), 6000); });  </script>  <script> /* === Receipts Repeat AutoSave (cache submit) — receipts-only, idempotent === */ (function(){   if (window.__rc_autosave_installed__) return;   window.__rc_autosave_installed__ = true;    function $id(id){ return document.getElementById(id); }   function lsGet(k,d){ try{ const v = localStorage.getItem(k); return v==null?d:v; }catch(_){ return d; } }   function lsSet(k,v){ try{ localStorage.setItem(k,v); }catch(_){ } }   function ssGet(k){ try{ return sessionStorage.getItem(k); }catch(_){ return null; } }   function ssSet(k,v){ try{ sessionStorage.setItem(k,v); }catch(_){ } }   function onceKey(mark){ return 'rc-cache:' + String(mark||'').trim(); }    function isReceipts(){ try{ var sw=$id('useReceiptsSwitch'); if (sw) return !!sw.checked; }catch(_){}                           return lsGet('UI:useReceipts','0')==='1'; }   function isRepeat(){   try{ var rsw=$id('repeatEntrySwitch'); if (rsw) return !!rsw.checked; }catch(_){}                           return lsGet('REPEAT:enabled','0')==='1'; }    function parseSummary(){     var el = $id('summaryJsonInput');     if (!el || !el.value || el.value === '{}' || el.value === 'null') return null;     try { return JSON.parse(el.value); } catch(_){ return null; }   }    function isReceiptSummary(s){     if (!s || typeof s!=='object') return false;     if (s.is_receipt === true) return true;     var t = String(s.type_name||s.type||'').toLowerCase();     if (t.includes('απόδει') || t.includes('receipt')) return true;     // fallback: when UI string shows "Λήφθηκε απόδειξη — ελέγξτε..."     var ui = String(s.ui_hint||'').toLowerCase();     if (ui.includes('λήφθηκε') && ui.includes('αποδεί')) return true;     return false;   }    function hasLines(s){ try{ return Array.isArray(s.lines) && s.lines.length>0; } catch(_){ return false; } }    function waitFor(fn, then, maxMs, step){     maxMs = maxMs || 6000; step = step || 120;     var waited = 0;     (function cycle(){       try{ if (fn()) { then(); return; } }catch(_){}       waited += step; if (waited >= maxMs) return;       setTimeout(cycle, step);     })();   }    function tryAutoSave(){     if (!isReceipts() || !isRepeat()) return;     var s = parseSummary();     if (!s || !isReceiptSummary(s) || !hasLines(s)) return;      var mark = String(s.mark || s.MARK || '').trim();     if (!mark) return;     if (ssGet(onceKey(mark))) return; // already submitted this cycle      var form = $id('saveSummaryForm');     if (!form) return;      // Normalize to αποδειξάκια before save, without touching invoices     try{       s.is_receipt = true;       s.category = s.category || 'αποδειξακια';       s.characteristic = s.characteristic || 'αποδειξακια';       if (!Array.isArray(s.lines)) s.lines = [];       s.lines = s.lines.map(function(l){ l=l||{}; l.category='αποδειξακια'; return l; });       $id('summaryJsonInput').value = JSON.stringify(s);     }catch(_){}      // Arm dedupe, keep receipts mode sticky     try { ssSet(onceKey(mark),'1'); } catch(_){}     lsSet('UI:useReceipts','1');      // Submit the cache form programmatically     try {       if (typeof form.requestSubmit === 'function') form.requestSubmit();       else form.submit();       // On navigation, allow next MARK to submit again       setTimeout(function(){ try{ ssSet(onceKey(mark), ''); }catch(_){} }, 2500);     } catch(e) {       console.warn('[RC-AUTOSAVE] submit failed', e);       try{ sessionStorage.removeItem(onceKey(mark)); }catch(_){}     }   }    document.addEventListener('DOMContentLoaded', function(){     // Reflect stored receipts state to the UI toggle early     try {       if (lsGet('UI:useReceipts','0')==='1') {         var sw = $id('useReceiptsSwitch');         if (sw && !sw.checked) { sw.checked = true; sw.dispatchEvent(new Event('change',{bubbles:true})); }       }     } catch(_){}      // Try immediately, microtask, and a short delay     tryAutoSave();     setTimeout(tryAutoSave, 0);     setTimeout(tryAutoSave, 300);      // Poll for hidden input changes produced by scraping     var el = $id('summaryJsonInput');     if (el){       var last = el.value;       setInterval(function(){         if (el.value !== last) { last = el.value; tryAutoSave(); }       }, 250);     }      // Re-run when receipts switch toggles on, or repeat toggles on     var r1 = $id('useReceiptsSwitch');     var r2 = $id('repeatEntrySwitch');     if (r1) r1.addEventListener('change', function(){ if (this.checked) setTimeout(tryAutoSave,10); });     if (r2) r2.addEventListener('change', function(){ if (this.checked) setTimeout(tryAutoSave,10); });      // When modal opens (if present), attempt again     var modal = $id('summaryModal');     if (modal && window.MutationObserver){       var mo = new MutationObserver(function(){ setTimeout(tryAutoSave, 20); });       try { mo.observe(modal, {attributes:true, childList:false, subtree:false}); } catch(_){}     }   }); })(); </script>  {% endblock %}  <!-- === BEGIN: Injected fix (v2) for receipts auto-flow & afm_epsilon cleanup === --> <script><script> /* RC-REPEAT-STATE bridge για Αποδείξεις & Τιμολόγια    - Διαβάζει το state από backend (/api/repeat_state/get) στην εκκίνηση    - Το περνάει και σε localStorage (REPEAT:enabled) & body dataset (data-repeat-enabled)    - Όταν αλλάζει ο διακόπτης repeatEntrySwitch, κάνει POST στο /api/repeat_state/set    - Στο submit της φόρμας αναζήτησης, κάνει ένα φρεσκάρισμα του state πριν τη ροή */ (function() {   const LS_KEY_REPEAT_ENABLED = 'REPEAT:enabled';    async function refreshRepeatState() {     try {       const r = await fetch('/api/repeat_state/get', { credentials: 'include' });       const j = await r.json();       const enabled = !!(j && j.ok && j.enabled);       localStorage.setItem(LS_KEY_REPEAT_ENABLED, enabled ? '1' : '0');       document.body.dataset.repeatEnabled = enabled ? '1' : '0';       window.REPEAT_ENABLED = enabled;        // συγχρόνισε και το switch αν υπάρχει       const sw = document.getElementById('repeatEntrySwitch');       if (sw) {         sw.checked = enabled;       }       console.debug('[RC-REPEAT-STATE] GET ->', { enabled });     } catch (e) {       console.warn('[RC-REPEAT-STATE] GET failed', e);     }   }    async function setRepeatEnabled(enabled) {     try {       const r = await fetch('/api/repeat_state/set', {         method: 'POST',         headers: { 'Content-Type': 'application/json' },         credentials: 'include',         body: JSON.stringify({ enabled: !!enabled })       });       const j = await r.json();       if (!j || !j.ok) throw new Error(j && j.error || 'unknown');       // persist τοπικά       localStorage.setItem(LS_KEY_REPEAT_ENABLED, enabled ? '1' : '0');       document.body.dataset.repeatEnabled = enabled ? '1' : '0';       window.REPEAT_ENABLED = !!enabled;       console.debug('[RC-REPEAT-STATE] SET ->', { enabled });     } catch (e) {       console.warn('[RC-REPEAT-STATE] SET failed', e);     }   }    // bootstrap: στην εκκίνηση   document.addEventListener('DOMContentLoaded', () => {     refreshRepeatState();     const sw = document.getElementById('repeatEntrySwitch');     if (sw) {       sw.addEventListener('change', function() {         setRepeatEnabled(this.checked);       });     }      // στο submit της αναζήτησης: κάνε ένα γρήγορο refresh για να «δει» σωστά το autosave των αποδείξεων     const form = document.getElementById('markSearchForm');     if (form) {       form.addEventListener('submit', () => {         // fire-and-forget, δεν μπλοκάρουμε το submit         refreshRepeatState();       });     }   }); })();</script>   (function(){   function isDetailed(x){     try{       if(!x || typeof x !== 'object') return false;       if (Array.isArray(x.lines) && x.lines.length) {         // any non-empty field in a line         for (const l of x.lines) {           if (l && (String(l.amount||'').trim() || String(l.description||'').trim() || String(l.vat||'').trim())) {             return true;           }         }       }       if (String(x.totalNetValue||'').trim() || String(x.totalValue||'').trim()) return true;       const t = (x.type||x.type_name||'').toString().toLowerCase();       if ((t.includes('απόδει') || t.includes('receipt')) && String(x.totalValue||'').trim()) return true;       return false;     }catch(e){ return false; }   }   function isReceipt(x){     try{       if (x && x.is_receipt) return true;       const t = (x?.type || x?.type_name || '').toString().toLowerCase();       if (t.includes('απόδει') || t.includes('receipt')) return true;       const ch = (x?.category || x?.χαρακτηρισμός || x?.characteristic || '');       return ch === 'αποδειξακια';     }catch(e){ return false; }   }   function prefer(a,b){     const da = isDetailed(a), db = isDetailed(b);     if (da && !db) return a;     if (db && !da) return b;     const la = Array.isArray(a?.lines) ? a.lines.length : 0;     const lb = Array.isArray(b?.lines) ? b.lines.length : 0;     if (lb > la) return b;     return a;   }   function sanitizeAfmEpsilon(arr){     try{       if(!Array.isArray(arr)) return arr;       const byMark = new Map();       for(const item of arr){         const m = String(item?.mark || '').trim();         if(!m) continue;         if(!byMark.has(m)) byMark.set(m, item);         else byMark.set(m, prefer(byMark.get(m), item));       }       let out = Array.from(byMark.values());       out = out.filter(isDetailed); // drop placeholders       return out;     }catch(e){       console.warn('sanitizeAfmEpsilon failed', e);       return arr;     }   }    // Clean global cache once   try { if (window.afm_epsilon) { window.afm_epsilon = sanitizeAfmEpsilon(window.afm_epsilon); } } catch(e){}    // Pick ONE receipt to submit when repeat+receipts is ON   function pickReceiptSummary(){     try{       // Priority 1: explicit modal summary if page defines it       if (window.modal_summary && isReceipt(window.modal_summary)) return window.modal_summary;       // Priority 2: data attribute on any modal container       const el = document.querySelector('[data-modal-summary]');       if (el){         try{           const obj = JSON.parse(el.getAttribute('data-modal-summary'));           if (isReceipt(obj)) return obj;         }catch(_){}       }       // Priority 3: last detailed receipt from afm_epsilon       const arr = Array.isArray(window.afm_epsilon) ? window.afm_epsilon.slice() : [];       const receipts = arr.filter(x => isReceipt(x) && isDetailed(x));       if (receipts.length) return receipts[receipts.length - 1];     }catch(e){ console.warn('pickReceiptSummary failed', e); }     return null;   }    try {     const repeatSwitch = document.getElementById('repeatEntrySwitch');     const useReceipts   = document.getElementById('useReceiptsSwitch');     const summaryInput  = document.getElementById('summaryJsonInput');     const saveForm      = document.getElementById('saveSummaryForm');     const auto = !!(useReceipts && useReceipts.checked) && !!(repeatSwitch && repeatSwitch.checked);     if (auto && summaryInput && saveForm) {       const chosen = pickReceiptSummary();       if (!chosen) {         console.warn('Auto-submit suppressed: no detailed receipt summary found.');         return;       }       // Ensure per-line category and flags       try{         if (!Array.isArray(chosen.lines)) chosen.lines = [];         if (chosen.lines.length === 0) {           // synthesize a simple line from totalValue when missing           const lid = (String(chosen.mark||'') + '_r0').replace(/^_+|_+$/g,'') || 'r0';           chosen.lines = [{             id: lid, description: "", amount: String(chosen.totalValue||""), vat: "", category: "αποδειξακια", vatCategory: ""           }];         } else {           chosen.lines = chosen.lines.map(l => (l && typeof l === 'object') ? {             ...l,             category: l.category || 'αποδειξακια'           } : l);         }         chosen.is_receipt = true;         chosen.category = chosen.category || 'αποδειξακια';         chosen.characteristic = chosen.characteristic || 'αποδειξακια';       }catch(_){}       summaryInput.value = JSON.stringify(chosen);       setTimeout(function(){         if (!saveForm.dataset._autoSubmitted) {           saveForm.dataset._autoSubmitted = '1';           saveForm.requestSubmit ? saveForm.requestSubmit() : saveForm.submit();         }       }, 30);     }   } catch(e) { console.warn('receipts auto-confirm failed', e); } })();</script> <!-- === END: Injected fix (v2) === --> <!-- RC_RECEIPT_AUTOPILOT_PATCH --> <script>(function(){'use strict';   // ====== Robust receipts repeat autopilot (no UI break) ======   window.__RC_FLAGS = window.__RC_FLAGS || {};    function lsget(key, fallback){ try{ const v=localStorage.getItem(key); if(v===null) return fallback; if(v==='1') return true; if(v==='0') return false; return v; }catch(_){     return fallback; } }    function receiptsSwitchOn(){ try{ return !!document.getElementById('useReceiptsSwitch')?.checked; }catch(_){     return !!lsget('rc:useReceipts','receipts')==='receipts'; } }    function autoSubmitOn(){ return !!lsget('rc:autoSubmitEnabled', true); }   function repeatSwitchOn(){ try{ return !!document.getElementById('repeatEntrySwitch')?.checked; }catch(_){ return !!lsget('rc:repeat_enabled', false); } }    async function serverRepeatEnabled(){     try{ const r = await fetch('/api/repeat_entry/get', { credentials:'include' });          const j = await r.json(); return !!(j && (j.enabled || j.repeat_enabled)); }     catch(_){ return repeatSwitchOn(); }   }    function hideReceiptBanner(){     const nodes = document.querySelectorAll('#existingBanner, .flash, .alert');     nodes.forEach(el => {       try{ if(/Λήφθηκε απόδειξη/i.test(el.textContent||'')) el.style.display='none'; }catch(_){}     });   }    function tryAutoSave(){     const form = document.getElementById('saveSummaryForm');     const input = document.getElementById('summaryJsonInput');     if (!form || !input) return false;     // mark flags to suppress informational toast     window.__RC_FLAGS.autoHandled = true;     hideReceiptBanner();     // Submit the server form (keeps server-side logic, excel write etc.)     // Use a microtask so any last-second JSON sync runs first     setTimeout(() => {       try { form.submit(); } catch(e) {         try { form.dispatchEvent(new Event('submit', { cancelable:false })); } catch(_){}       }     }, 30);     return true;   }    function observeModalAndAuto(){     const modal = document.getElementById('summaryModal');     if (!modal) return;     let done = false;     const doIt = () => {       if (done) return;       const visible = getComputedStyle(modal).display !== 'none';       if (!visible) return;       if (tryAutoSave()) { done = true; modal.style.display = 'none'; }     };     try { new MutationObserver(doIt).observe(modal, { attributes:true, attributeFilter:['style','class'] }); } catch(_){}     setTimeout(doIt, 80);   }    // Kickoff when DOM is ready   document.addEventListener('DOMContentLoaded', () => {     // Make search submit more reliable when auto-submit is ON     const form = document.getElementById('markSearchForm');     if (form) {       form.addEventListener('keydown', (e) => {         if (e.key === 'Enter' && autoSubmitOn()) {           const mark = (document.getElementById('markInput')?.value || '').trim();           const url  = (document.getElementById('scrapeUrlInput')?.value || document.getElementById('scrapeUrlField')?.value || '').trim();           if (!mark && !url) e.preventDefault(); // guard empty         }       }, true);     }      // Always ensure page comes back to a clean state after any save     const saveForm = document.getElementById('saveSummaryForm');     if (saveForm) {       let reloaded = false;       const reloadSoon = () => { if (!reloaded) { reloaded = true; setTimeout(() => location.reload(), 300); } };       saveForm.addEventListener('ajax:done', reloadSoon, { once:true });       saveForm.addEventListener('submit', () => setTimeout(reloadSoon, 1200), { once:true });     }      // If receipts + repeat are ON, suppress the "Λήφθηκε..." toast and auto-save     Promise.resolve(serverRepeatEnabled()).then((rep) => {       if (receiptsSwitchOn() && rep) {         window.__RC_FLAGS.repeat_enabled = true;         window.__RC_FLAGS.autoHandled = true; // prevents info message in existing code         if (!tryAutoSave()) observeModalAndAuto();       }     });   }); })();</script>   <!-- ===== Receipts repeat auto-confirm SHIM (appended) ===== --> <script>(function(){   // small utility: safe JSON parse   function parseJSON(x){ try{ return JSON.parse(x); }catch(_){ return null; } }   function getLS(k, d){ try{ const v = localStorage.getItem(k); return (v===null||v===undefined)?d:v; }catch(_){ return d; } }   function setLS(k, v){ try{ localStorage.setItem(k, v); }catch(_){ } }   function isTruthy(v){ return v === true || v === '1' || v === 1 || v === 'true'; }    // Read repeat + receipts mode from both localStorage and globals/switches   function getRepeatOn(){     const ls = getLS('REPEAT:enabled', null);     if (ls !== null) return isTruthy(ls);     if (window.REPEAT_ENABLED !== undefined) return !!window.REPEAT_ENABLED;     const sw = document.getElementById('repeatEntrySwitch');     return !!(sw && sw.checked);   }   function getReceiptsModeOn(){     const ls = getLS('UI:useReceipts', null);     if (ls !== null) return isTruthy(ls);     if (window.USE_RECEIPTS !== undefined) return !!window.USE_RECEIPTS;     const sw = document.getElementById('useReceiptsSwitch');     return !!(sw && sw.checked);   }    function isReceiptSummary(obj){     if(!obj || typeof obj !== 'object') return false;     if (obj.is_receipt === true) return true;     const t = String(obj.type_name || obj.type || '').toLowerCase();     const cat = String(obj.category || obj.characteristic || obj['χαρακτηρισμός'] || '').toLowerCase();     return (t.includes('απόδει') || t.includes('receipt') || cat === 'αποδειξακια');   }    function hasMeaningfulLines(obj){     const arr = Array.isArray(obj && obj.lines) ? obj.lines : [];     if (arr.length === 0) return false;     // any non-empty amount OR category is enough     return arr.some(l => {       const amt = String(l && (l.amount || l.total || l.lineTotal || '')).trim();       const cat = String(l && (l.category || l.cat || '')).trim();       return !!(amt || cat);     });   }    function readSummaryObject(){     const input = document.getElementById('summaryJsonInput');     if(!input) return null;     return parseJSON(input.value || '{}') || null;   }    function getScrapeUrl(){     const u = document.getElementById('scrapeUrlInput') || document.getElementById('scrapeUrlField');     return u ? (u.value || '') : '';   }    let lastMarkTried = null;   let busy = false;    async function tryAutoConfirm(){     if (busy) return;     const rep = getRepeatOn();     const inRec = getReceiptsModeOn();     if (!rep || !inRec) return;      const s = readSummaryObject();     if (!s || !isReceiptSummary(s) || !hasMeaningfulLines(s)) return;      // avoid double firing for the same mark     const mk = String(s.mark || s.MARK || '').trim();     if (!mk || mk === lastMarkTried) return;     lastMarkTried = mk;      // hide modal pre-emptively to avoid flicker     try {       const modal = document.getElementById('summaryModal');       if (modal) modal.style.display = 'none';     } catch(_){}      if (!(window.RC && RC.confirmReceiptOnce && RC.normalizeReceiptSummary)) {       // RC not yet ready; retry later       return;     }      busy = true;     try {       await RC.confirmReceiptOnce(RC.normalizeReceiptSummary(s), getScrapeUrl());       // keep receipts mode sticky on refresh       setLS('UI:useReceipts', '1');       // soft reload to clear form quickly       setTimeout(function(){         try {           const base = location.pathname + '?use_receipts=1';           location.replace(base);         } catch(_){ location.reload(); }       }, 120);     } catch(err){       console.warn('[RC-AUTOCONFIRM] failed', err);       // allow another attempt       lastMarkTried = null;     } finally {       busy = false;     }   }    // Poll for summary changes & conditions (fast but lightweight)   let pollId = null;   function startPoll(){     if (pollId) return;     pollId = setInterval(tryAutoConfirm, 200);   }   function stopPoll(){     if (pollId) { clearInterval(pollId); pollId = null; }   }    // Start ASAP   startPoll();    // Re-run when user submits the search form (so mode is immediately persisted)   document.addEventListener('submit', function(e){     const f = e.target;     if (f && f.id === 'markSearchForm') {       // persist current mode for autosave       try {         const sw = document.getElementById('useReceiptsSwitch');         if (sw) setLS('UI:useReceipts', sw.checked ? '1' : '0');       } catch(_){}       setTimeout(tryAutoConfirm, 0);     }   }, true);    // Also, when repeat switch toggles, persist immediately   document.addEventListener('change', function(e){     const sw = e.target && e.target.id === 'repeatEntrySwitch' ? e.target : null;     if (sw){       setLS('REPEAT:enabled', sw.checked ? '1' : '0');       setTimeout(tryAutoConfirm, 0);     }   }, true);    // One-time bootstrap from server state (if available via endpoint)   // This is best-effort; if it fails, user toggles or previous LS values will be used.   (async function bootstrapRepeatOnce(){     try {       const r = await fetch('/api/repeat_entry/get', { credentials: 'same-origin' });       const j = await r.json();       if (j && j.ok && j.repeat_entry) {         setLS('REPEAT:enabled', j.repeat_entry.enabled ? '1' : '0');         // leave mapping to backend; we only need the enabled bit here         setTimeout(tryAutoConfirm, 0);       }     } catch(_){}   })(); })();</script> <!-- ===== end SHIM ===== --> is_invoice=False mark=
2025-10-23 00:28:37+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:44+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-23 00:28:45+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:45+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:48+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:49+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:49+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:49+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:49+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:52+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:28:52+0300 INFO api_scrape_receipt: incoming url={% extends "base.html" %} {% block title %}Αναζήτηση MARK{% endblock %}  {% block content %}  <div class="bg-white rounded shadow p-6">     <h2 class="text-lg font-semibold mb-2">Αναζήτηση MARK</h2>      {% if error %}     <div class="mb-3 p-2 rounded bg-red-50 text-red-800">{{ error }}</div>     {% endif %}      <form method="post" class="flex gap-2 items-center" id="markSearchForm">         <!-- Auto-submit segmented toggle (scoped to client) -->         <div class="flex items-center gap-2 ml-4" id="autoSubmitGroup">             <span class="text-sm">Auto‑submit</span>             <div class="inline-flex rounded-md overflow-hidden border border-gray-300">                 <button type="button" id="autoSubmitBtnOff" class="px-2 py-1 text-sm focus:outline-none">Off</button>                 <button type="button" id="autoSubmitBtnOn" class="px-2 py-1 text-sm focus:outline-none">On</button>             </div>         </div>          <input name="mark" id="markInput" type="text" placeholder="15ψήφιο MARK" class="p-2 border rounded w-2/4" value="{{ mark }}">         <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αναζήτηση</button>         <div class="flex items-center gap-2 ml-4">             <label for="useReceiptsSwitch" class="text-sm">                 Τιμολόγια<label>                     <input type="checkbox" id="useReceiptsSwitch" role="switch" aria-checked="false" class="toggle-switch">                     <label for="useReceiptsSwitch" class="text-sm">Αποδείξεις</label>         </div>          <!-- Toggle επαναληψιμης εισαγωγής + edit button -->         <div class="flex items-center gap-2 ml-4">             <label for="repeatEntrySwitch" class="text-sm">Επαναληψιμη εισαγωγή</label>             <input type="checkbox" id="repeatEntrySwitch" class="toggle-switch">             <button type="button" id="editRepeatMappingBtn" class="ml-2 px-2 py-1 border rounded text-sm hidden">Επεξεργασία</button>         </div>          <!-- Toggle switch for receipts scrape -->      </form> </div>  {# ΣΗΜΕΙΩΣΗ: το στατικό confirmation modal που υπήρχε εδώ αφαιρέθηκε όπως ζήτησες. Χρησιμοποιείται πλέον το summaryModal για όλες τις περιπτώσεις. #}  {# --- Yellow box αν υπάρχει MARK ήδη στο Excel --- #} {% if allow_edit_existing and not request.args.get('force_edit') %} <div class="mt-4 p-4 bg-yellow-50 rounded border border-yellow-300 text-yellow-800" id="existingBanner">     Το MARK <strong>{{ mark }}</strong> υπάρχει ήδη στο Excel. Θέλεις να τροποποιήσεις τον χαρακτηρισμό;     <div class="mt-2 flex gap-2">         <button id="forceEditBtn" type="button" class="bg-yellow-600 text-white px-3 py-2 rounded hover:bg-yellow-700">             Επιβεβαίωση         </button>         <button id="dismissBannerBtn" type="button" onclick="this.parentElement.parentElement.style.display='none'"                 class="px-3 py-2 border rounded hover:bg-gray-50">             Άκυρο         </button>     </div> </div> {% endif %}     {% if modal_summary and (request.args.get('force_edit') == '1' or not allow_edit_existing) %} <!-- SUMMARY MODAL --> <div id="summaryModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-6xl p-6">          <!-- HEADER -->         <div class="flex justify-between items-center mb-4">             <h3 class="text-lg font-semibold">                 Περίληψη Παραστατικού - <span id="summaryModalMark">MARK</span>             </h3>             <button id="modalCloseX" class="text-gray-500 text-xl font-bold">✕</button>         </div>          <!-- SUMMARY INFO -->         <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">             <div><strong>Α/Α Παραστατικού</strong><div id="summary_AA"></div></div>             <div><strong>ΑΦΜ</strong><div id="summary_AFM"></div></div>             <div><strong>Επωνυμία</strong><div id="summary_Name"></div></div>             <div><strong>Ημερομηνία</strong><div id="summary_issueDate"></div></div>             <div><strong>Τύπος Παραστατικού</strong><div id="summary_type_name"></div></div>             <div><strong>Καθαρή Αξία</strong><div id="summary_totalNetValue"></div></div>             <div><strong>ΦΠΑ</strong><div id="summary_totalVatAmount"></div></div>             <div><strong>Σύνολο</strong><div id="summary_totalValue"></div></div>         </div>          <!-- LINES -->         <h4 class="font-medium mt-4 mb-2">Γραμμές Παραστατικού (για χαρακτηρισμό)</h4>         <div id="summaryLinesContainer" class="overflow-auto max-h-96 border rounded p-2"></div>            <!-- FOOTER -->         <div class="mt-4 flex justify-between items-center">             <div class="text-sm text-gray-600">                 Σημείωση: οι κατηγορίες προέρχονται από τα settings του πελάτη. Μπορείτε να ορίσετε/επεξεργαστείτε αυτές τις επιλογές στη σελίδα Credentials.             </div>              <div class="flex justify-end gap-2">                 <form method="POST" action="{{ url_for('save_summary') }}" id="saveSummaryForm">                     <input type="hidden" name="summary_json" id="summaryJsonInput" value='{{ modal_summary | tojson | safe if modal_summary else "{}" }}'>                     <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση στο Cache</button>                     <input type="hidden" id="scrapeUrlField" name="scrape_url" value="">                     <input type="hidden" id="scrapeCategoryField" name="scrape_category" value="">                     <input type="hidden" id="scrapeForceField" name="scrape_force" value="false">                 </form>                 <button id="modalCloseBtn" class="px-3 py-2 border rounded">Κλείσιμο</button>             </div>         </div>      </div> </div> {% endif %}   {# --- Repeat mapping modal (dynamic, populated by JS) --- #} <div id="repeatMappingModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-2xl p-6">         <div class="flex justify-between items-center mb-3">             <h3 class="text-lg font-semibold">Επαναληπτική αντιστοίχιση κατηγοριών</h3>             <button id="repeatModalCloseX" class="text-gray-500 text-xl font-bold">✕</button>         </div>          <div id="repeatModalBody" class="space-y-3">             <div class="text-sm text-gray-600">Επίλεξε για κάθε ΦΠΑ-κατηγορία ποια κατηγορία εξόδου θέλεις να χρησιμοποιείται επαναληπτικά. Μπορείς επίσης να ορίσεις <em>προεπιλογή</em>.</div>             <!-- JS θα γεμίσει εδώ -->             <div id="repeatMappingList" class="space-y-2"></div>         </div>          <div class="mt-4 flex justify-end gap-2">             <button id="repeatModalCancel" class="px-3 py-2 border rounded">Άκυρο</button>             <button id="repeatModalSave" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση</button>         </div>     </div> </div>  {% if modal_warning %} <div id="afmWarningModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-md p-6">         <div class="flex justify-between items-center mb-4">             <h3 class="text-lg font-semibold text-red-600">Προειδοποίηση</h3>         </div>         <div id="afmWarningBody" class="mb-4 text-gray-700">             {{ modal_warning }}         </div>         <div class="flex justify-end gap-2">             <button id="afmModalConfirm" class="bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700">Κατάλαβα</button>         </div>     </div> </div> {% endif %}  {# Flash container (JS will inject messages here) #} <div id="clientFlashContainer" class="fixed top-4 right-4 z-60"></div>  {% include 'list_inner.html' %}   {% endblock %}  {% block scripts %}  <script src="/static/loop_hard_guard.js"></script> <script src="{{ url_for('static', filename='repeat_flow_guard.js') }}"></script>  <script>    (function () {   const KEY = 'UI:useReceipts'; // '1' = Αποδείξεις, '0' = Τιμολόγια    function fireChange(el){     if(!el) return;     try {       el.dispatchEvent(new Event('change', { bubbles:true }));     } catch {       const evt = document.createEvent('Event');       evt.initEvent('change', true, true);       el.dispatchEvent(evt);     }   }    document.addEventListener('DOMContentLoaded', () => {     const sw = document.getElementById('useReceiptsSwitch');     if (!sw) return;      // Αν υπάρχει ?use_receipts=1/0 στο URL, γράψ’ το στο localStorage (authoritative)     try {       const q = new URLSearchParams(location.search);       if (q.has('use_receipts')) {         localStorage.setItem(KEY, q.get('use_receipts') === '1' ? '1' : '0');       }     } catch {}      // Restore από localStorage     const saved = localStorage.getItem(KEY);     if (saved !== null) sw.checked = (saved === '1');      // ΠΟΛΥ ΣΗΜΑΝΤΙΚΟ:     // Τρέξε τον υπάρχοντα change handler του switch ώστε να εμφανίσει/κρύψει     // τα σωστά inputs (MARK vs URL). Το κάνουμε 2 φορές (rAF + microtask)     // για να “πιάσει” σε DOM που φτιάχνεται δυναμικά.     requestAnimationFrame(() => {       fireChange(sw);       setTimeout(() => fireChange(sw), 0);     });      // Persist σε κάθε αλλαγή χρήστη     sw.addEventListener('change', () => {       try { localStorage.setItem(KEY, sw.checked ? '1' : '0'); } catch {}       // Προαιρετικό: κρατάμε και ένα data-mode στο body αν το θες για CSS hooks       document.body.dataset.mode = sw.checked ? 'receipts' : 'invoices';     });      // Όταν κάνεις submit/save απόδειξης, κλείδωσε το mode σε “Αποδείξεις”     // ώστε στο redirect/refresh να παραμείνει.     document.getElementById('saveSummaryForm')?.addEventListener('submit', () => {       try {         const raw = document.getElementById('summaryJsonInput')?.value || '';         const s = raw ? JSON.parse(raw) : {};         const isReceipt = s.is_receipt === true ||                           /αποδει/i.test(`${s.type_name || ''} ${s.category || s.characteristic || ''}`);         if (isReceipt) localStorage.setItem(KEY, '1');       } catch {}     });   }); })(); // --- Reclass guard (yellow box -> ?force_edit=1) --- const URL_PARAMS = (function(){ try { return new URL(window.location.href).searchParams; } catch(_) { return new URLSearchParams(''); } })(); const FORCE_EDIT = (function(){ try { return URL_PARAMS.get('force_edit') === '1'; } catch(_) { return false; } })();  const SEARCH_BASE_URL = "{{ url_for('search') }}"; const VAT = "{{ vat or '' }}"; // active vat from server const INITIAL_MARK = "{{ mark|e }}"; // αρχική τιμή mark (αν υπήρχε) const ACTIVE_YEAR = (function(){ try { return {{ active_year|default('null') }}; } catch(e){ return null; } })(); async function getActiveFiscalYear() {   // Προτίμησε την τιμή που ήρθε από server-side render (Jinja)   if (typeof ACTIVE_YEAR !== 'undefined' && ACTIVE_YEAR !== null) {     try { return String(ACTIVE_YEAR); } catch(_) { /* noop */ }   }   // Fallback: ρώτα το backend (υπάρχει route)   try {     const r = await fetch('/get_fiscal_year', {credentials:'same-origin'});     const j = await r.json();     if (j && j.exists) return String(j.fiscal_year);   } catch(_) {}   return null; }   (function(){   // Ανεξάρτητο modal μόνο για Αποδείξεις (δεν ακουμπά το afmWarningModal)   window.openReceiptWarning = function(message){     var id='receiptWarn', m=document.getElementById(id);     if(!m){       var el=document.createElement('div');       el.id=id;       el.style.cssText='position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.4);z-index:9999';       el.innerHTML =         '<div style="background:#fff;border-radius:10px;max-width:480px;width:calc(100% - 32px);padding:20px;">'         + '<h3 style="margin:0 0 10px;color:#b91c1c;font-weight:600;font-size:18px">Προειδοποίηση</h3>'         + '<div id="receiptWarnBody" style="margin-bottom:14px;color:#374151;font-size:14px"></div>'         + '<div style="text-align:right"><button id="receiptWarnOk" type="button"'         + ' style="background:#b91c1c;color:#fff;border:none;border-radius:6px;padding:8px 12px;cursor:pointer">Κατάλαβα</button></div>'         + '</div>';       document.body.appendChild(el);       el.addEventListener('click', function(e){ if(e.target===el) el.style.display='none'; });       el.querySelector('#receiptWarnOk').addEventListener('click', function(){ el.style.display='none'; });       m = el;     }     var body = m.querySelector('#receiptWarnBody');     if(body) body.textContent = message || 'Προειδοποίηση.';     m.style.display='flex';   }; })();      // Καθαρισμός ανά γραμμή (πολλαπλές γραμμές)   document.addEventListener('click', function (e) {     const btn = e.target.closest('.clear-row-btn');     if (btn) {       e.stopPropagation();       const tr = btn.closest('tr');       const sel = tr && tr.querySelector('select[name^="category["]');       if (sel) sel.value = '';     }   });    // Καθαρισμός στη single-line περίπτωση   const singleClear = document.getElementById('single-clear');   if (singleClear) {     singleClear.addEventListener('click', function (e) {       e.stopPropagation();       const sel = document.querySelector('select[name^="category["]');       if (sel) sel.value = '';     });   }    // Προληπτικά: μην ξανα-ανοίγει δεύτερο modal στο click "Αποθήκευση"   // (αν έχεις delegate listeners κάτω από το modal)   document.addEventListener('submit', function(e){     const form = e.target;     if (form && form.closest('#summaryModal')) {       const submitBtn = form.querySelector('[type="submit"]');       if (submitBtn) submitBtn.disabled = true;       e.stopPropagation(); // Μπλοκάρει bubbling που θα πυροδοτούσε κάτωθεν click handlers     }   }, true);     // initial categories passed from server as fallback; will be overridden if API returns expense_tags let CUSTOMER_CATEGORIES = (function(){ try { return {{ customer_categories | tojson | safe }} || []; } catch(e){ return []; } })();  // Helper: show transient flash (client-side) /* ====== Render summary lines into modal and wire handlers ====== */  function renderSummaryLinesFromObject(obj) {   const receiptsMode = !!(document.getElementById('useReceiptsSwitch')?.checked) || !!obj?.is_receipt;   const RECEIPT_CATEGORY = 'αποδειξακια';    const container = document.getElementById('summaryLinesContainer');   const summaryInput = document.getElementById('summaryJsonInput');   if(!container || !summaryInput) return;    container.innerHTML = '';   const lines = Array.isArray(obj.lines) ? obj.lines : [];    // helper to persist back to the hidden input     (function(){   function safeParseJson(s){     try { return JSON.parse(s || '{}'); } catch(e){ return {}; }   }    const summaryInput = document.getElementById('summaryJsonInput');   const container = document.getElementById('summaryLinesContainer');    // fallback server-side object (if Jinja rendered modal_summary)   const SERVER_MODAL_SUMMARY = (function(){     try { return {{ modal_summary | tojson | safe if modal_summary else 'null' }}; } catch(e){ return null; }   })()   try {     var __cc = document.getElementById('summaryLinesContainer');     if (__cc && __cc.dataset && __cc.dataset.phase === 'iife') {       // IIFE already rendered content -> skip second render path       if (typeof persist === 'function') try{ persist(); }catch(e){}       return;     }   } catch(e) {} ;    // helper to get current summary object (prefer hidden input, fallback server var)   function getSummaryObj(){     if(summaryInput && summaryInput.value && summaryInput.value.trim() !== ''){       const parsed = safeParseJson(summaryInput.value);       if(parsed && typeof parsed === 'object') return parsed;     }     if(SERVER_MODAL_SUMMARY) return SERVER_MODAL_SUMMARY;     return { lines: [] };   }    // ensure each line has id and normalized keys   function normalizeSummary(summary){     if(!summary) summary = {};     const lines = Array.isArray(summary.lines) ? summary.lines.slice() : [];     const norm = lines.map((l, idx) => {       const id = (l && (l.id || l.line_id)) ? String(l.id || l.line_id) : ('l' + idx);       return {         id: id,         description: l && (l.description || l.desc || '') || '',         amount: l && (l.amount || l.lineTotal || l.total || '') || '',         vat: l && (l.vat || l.vatRate || '') || '',         vatCategory: l && (l.vatCategory || l.vat_category || '') || '',         category: l && (l.category || l.cat || '') || ''       };     });     return { ...summary, lines: norm };   }    // build DOM for multiple lines (table)   function buildTableHTML(lines, categories){     const table = document.createElement('table');     table.className = 'w-full border-collapse';     const thead = document.createElement('thead');     thead.className = 'bg-gray-100 sticky top-0';     thead.innerHTML = '<tr>' +       '<th class="p-2 border text-left">#</th>' +       '<th class="p-2 border text-left">ΦΠΑ Κατηγορία</th>' +       '<th class="p-2 border text-right">Ποσό</th>' +       '<th class="p-2 border text-right">ΦΠΑ</th>' +       '<th class="p-2 border text-left">Κατηγορία Εξόδου</th>' +       '</tr>';     table.appendChild(thead);      const tbody = document.createElement('tbody');     tbody.id = 'renderedLinesTableBody';     lines.forEach((ln, idx) => {       const tr = document.createElement('tr');       tr.dataset.lineId = ln.id || ('l' + idx);       tr.dataset.vat = ln.vatCategory || ln.vat || '';        tr.innerHTML = '<td class="p-2 border text-sm text-gray-600">' + (idx+1) + '</td>' +         '<td class="p-2 border break-words">' + escapeHtml(ln.vatCategory || '') + '</td>' +         '<td class="p-2 border text-right">' + escapeHtml(String(ln.amount || '')) + '</td>' +         '<td class="p-2 border text-right">' + escapeHtml(String(ln.vat || '')) + '</td>' +         '<td class="p-2 border"></td>';        // create select       const select = document.createElement('select');       select.className = 'expense-category p-1 border rounded w-full';       select.dataset.lineId = ln.id || ('l' + idx);       const emptyOpt = document.createElement('option'); emptyOpt.value=''; emptyOpt.innerText='-- επίλεξε --';       select.appendChild(emptyOpt);       (categories || []).forEach(c => {         const o = document.createElement('option'); o.value = c; o.innerText = c;         if(c === ln.category) o.selected = true;         select.appendChild(o);       });        tr.querySelector('td:last-child').appendChild(select);       tbody.appendChild(tr);     });      table.appendChild(tbody);     return table;   }    // build single-line buttons UI   function buildSingleLineHTML(line, categories){     const wrapper = document.createElement('div');     wrapper.className = 'border rounded p-4';     wrapper.dataset.lineId = line.id || 'l0';      const grid = document.createElement('div');     grid.className = 'mb-3 grid grid-cols-1 md:grid-cols-3 gap-3';     grid.innerHTML = '<div><strong>ΦΠΑ Κατηγορία</strong><div>' + escapeHtml(line.vatCategory || '') + '</div></div>' +       '<div><strong>Ποσό</strong><div>' + escapeHtml(String(line.amount || '')) + '</div></div>' +       '<div><strong>ΦΠΑ</strong><div>' + escapeHtml(String(line.vat || '')) + '</div></div>';     wrapper.appendChild(grid);      const controls = document.createElement('div');     controls.className = 'mb-3';     const title = document.createElement('strong');     title.innerText = 'Επίλεξε Κατηγορία Εξόδου';     controls.appendChild(title);      const btnwrap = document.createElement('div');     btnwrap.id = 'renderedCategoryButtons';     btnwrap.className = 'mt-2 flex flex-wrap gap-2';     (categories || []).forEach(c => {       const btn = document.createElement('button');       btn.type = 'button';       btn.className = 'category-btn px-3 py-2 border rounded hover:bg-sky-50';       btn.dataset.cat = c;       btn.dataset.lineId = line.id || 'l0';       btn.innerText = c;       if(c === line.category){         btn.classList.add('bg-sky-600');         btn.classList.add('text-white');       }       btnwrap.appendChild(btn);     });      const clearBtn = document.createElement('button');     clearBtn.type = 'button';     clearBtn.className = 'px-3 py-2 border rounded text-sm ml-2 clear-category';     clearBtn.innerText = 'Καθαρισμός';     btnwrap.appendChild(clearBtn);      controls.appendChild(btnwrap);     wrapper.appendChild(controls);     return wrapper;   }    function escapeHtml(s){     if(!s && s !== 0) return '';     return String(s)       .replace(/&/g, '&amp;')       .replace(/</g, '&lt;')       .replace(/>/g, '&gt;')       .replace(/"/g, '&quot;')       .replace(/'/g, '&#39;');   }    // read categories from server-provided global or from a safe default   function getCategories(){     try {       const js = (function(){ try { return {{ customer_categories | tojson | safe }}; } catch(e){ return null; } })();       if(Array.isArray(js) && js.length) return js;     } catch(e){}     return window.CUSTOMER_CATEGORIES || [];   }    // render everything into the container   function renderSummaryLines(){     if(!container) return;     const summary = normalizeSummary(getSummaryObj());     const lines = summary.lines || [];     const categories = getCategories();      // clear container     container.innerHTML = '';      // Title (optional)     // const info = document.createElement('div'); info.className='mb-2 text-sm text-gray-700'; container.appendChild(info);      if(lines.length === 0){       const warn = document.createElement('div');       warn.className = 'mt-4 p-3 bg-yellow-50 rounded';       warn.innerText = 'Δεν βρέθηκαν γραμμές για αυτό το MARK.';       container.appendChild(warn);       wireInteractions();     try{ container.dataset.phase = 'iife'; }catch(e){}  // ensure handlers cleared       return;     }      if(lines.length === 1){       container.appendChild(buildSingleLineHTML(lines[0], categories));     } else {       container.appendChild(buildTableHTML(lines, categories));     }      // after building DOM, wire events     wireInteractions();   }    // update hidden input from current DOM selections/buttons    function wireInteractions(){     // remove old handlers by cloning nodes if necessary (to avoid duplicate attachments)     document.querySelectorAll('select.expense-category').forEach(sel => {       sel.addEventListener('change', function(){         updateSummaryFromDom();       });     });      // category buttons (single-line)     document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(btn => {       btn.addEventListener('click', function(){         const lineId = this.dataset.lineId || '';         // toggle this button active/inactive         document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(b => {           if(b.dataset.lineId === lineId){             b.classList.remove('bg-sky-600'); b.classList.remove('text-white');           }         });         const isActive = !(this.classList.contains('bg-sky-600'));         if(isActive){           this.classList.add('bg-sky-600'); this.classList.add('text-white');         } else {           this.classList.remove('bg-sky-600'); this.classList.remove('text-white');         }         updateSummaryFromDom();       });     });      // clear buttons     document.querySelectorAll('.clear-category').forEach(cb => {       cb.addEventListener('click', function(){         const parent = cb.closest('[data-line-id]');         if(!parent) return;         const lid = parent.dataset.lineId || '';         // clear UI         document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(b => {           if(b.dataset.lineId === lid){ b.classList.remove('bg-sky-600'); b.classList.remove('text-white'); }         });         // if there is a select for same line (unlikely in single-line view) clear it         const sel = document.querySelector('select.expense-category[data-line-id="' + lid + '"]');         if(sel) sel.value = '';         updateSummaryFromDom();       });     });   }    // watch hidden input changes (some flows set it programmatically before opening modal)   let lastSummaryValue = summaryInput ? summaryInput.value : '';   function pollSummaryInput(){     const now = summaryInput ? summaryInput.value : '';     if(now !== lastSummaryValue){       lastSummaryValue = now;       // re-render so UI matches new data       renderSummaryLines();     }   }   let pollTimer = null;   try {     pollTimer = setInterval(pollSummaryInput, 250);     window.addEventListener('beforeunload', ()=> { if(pollTimer) clearInterval(pollTimer); });   } catch(e){ /* ignore */ }    // ensure initial render on load (modal might be shown later)   try { renderSummaryLines(); } catch(e){ console.warn('initial renderSummaryLines failed', e); }    // also re-render whenever modal is shown (in case show logic sets display later)   const modal = document.getElementById('summaryModal');   if(modal){     // intercept style changes to detect show     const obs = new MutationObserver(muts => {       muts.forEach(m => {         if(m.attributeName === 'style' || m.attributeName === 'class'){           const disp = window.getComputedStyle(modal).display;           if(disp !== 'none'){             // modal visible -> render (ensure DOM inside ready)             setTimeout(renderSummaryLines, 10);           }         }       });     });     try { obs.observe(modal, { attributes: true, attributeFilter:['style','class'] }); } catch(e){ /* ignore */ }   }    // expose for debug   window._renderSummaryLines = renderSummaryLines; })();   function persist() {     summaryInput.value = JSON.stringify(obj || {});   }    if (!lines || lines.length === 0) {     container.innerHTML = '<div class="mt-4 p-3 bg-yellow-50 rounded">Δεν βρέθηκαν γραμμές για αυτό το MARK.</div>';     persist();     return;   }    if (lines.length > 1) {     // build table     const tbl = document.createElement('table');     tbl.className = 'w-full border-collapse';     tbl.innerHTML = `<thead class="bg-gray-100 sticky top-0">       <tr>         <th class="p-2 border text-left">#</th>         <th class="p-2 border text-left">ΦΠΑ Κατηγορία</th>         <th class="p-2 border text-right">Ποσό</th>         <th class="p-2 border text-right">ΦΠΑ</th>         <th class="p-2 border text-left">Κατηγορία Εξόδου</th>       </tr>     </thead>`;     const tbody = document.createElement('tbody');     lines.forEach((ln, idx) => {       const lid = (ln.id !== undefined) ? String(ln.id) : ('l' + idx);       const vat_cat = ln.vatCategory || ln.vat_category || ln.vat || '';       const amt = ln.amount || ln.lineTotal || ln.total || '';       const vatv = ln.vat || ln.vatRate || '';       const tr = document.createElement('tr');       tr.dataset.lineId = lid;       tr.dataset.vat = vat_cat;       tr.className = '';       tr.innerHTML = `         <td class="p-2 border text-sm text-gray-600">${idx+1}</td>         <td class="p-2 border break-words">${vat_cat}</td>         <td class="p-2 border text-right">${amt}</td>         <td class="p-2 border text-right">${vatv}</td>         <td class="p-2 border"></td>`;       // build select       const td = tr.querySelector('td:last-child');       const sel = document.createElement('select');       sel.className = 'expense-category p-1 border rounded w-full';       sel.dataset.lineId = lid;       const opt0 = document.createElement('option'); opt0.value = ''; opt0.innerText = '-- επίλεξε --'; sel.appendChild(opt0);       (window.CUSTOMER_CATEGORIES || []).forEach(c => {         const o = document.createElement('option'); o.value = c; o.innerText = c;         if ((ln.category || '') === c) o.selected = true;         sel.appendChild(o);       });       sel.addEventListener('change', function(){         const val = this.value;         // find line in obj and update         const found = (obj.lines || []).find(x => String(x.id || x.line_id || '') === lid);         if(found) found.category = val;         persist();       });       td.appendChild(sel);       tbody.appendChild(tr);     });     tbl.appendChild(tbody);     // wrap in container     const wrapper = document.createElement('div');     wrapper.className = 'overflow-auto max-h-96 border rounded';     wrapper.appendChild(tbl);     container.appendChild(wrapper);     persist();     return;   }    // single line case -> render buttons   const single = lines[0];   const lid = (single.id !== undefined) ? String(single.id) : (single.line_id !== undefined ? String(single.line_id) : 'l0');   const amt = single.amount || single.lineTotal || '';   const vatv = single.vat || single.vatRate || '';   const vat_cat = single.vatCategory || single.vat_category || '';   const selected_cat = single.category || '';    const singleDiv = document.createElement('div');   singleDiv.id = 'singleLine';   singleDiv.className = 'border rounded p-4';   singleDiv.dataset.lineId = lid;   singleDiv.dataset.amount = amt;   singleDiv.dataset.vat = vatv;   singleDiv.dataset.vatcat = vat_cat;    const infoHtml = document.createElement('div');   infoHtml.className = 'mb-3 grid grid-cols-1 md:grid-cols-3 gap-3';   infoHtml.innerHTML = `<div><strong>ΦΠΑ Κατηγορία</strong><div>${vat_cat}</div></div>                         <div><strong>Ποσό</strong><div>${amt}</div></div>                         <div><strong>ΦΠΑ</strong><div>${vatv}</div></div>`;   singleDiv.appendChild(infoHtml);    const chooseWrap = document.createElement('div');   chooseWrap.className = 'mb-3';   chooseWrap.innerHTML = `<strong>Επίλεξε Κατηγορία Εξόδου</strong>`;   const btnRow = document.createElement('div');   btnRow.id = 'categoryButtons';   btnRow.className = 'mt-2 flex flex-wrap gap-2';    (window.CUSTOMER_CATEGORIES || []).forEach(c => {     const b = document.createElement('button');     b.type = 'button';     b.className = 'category-btn px-3 py-2 border rounded hover:bg-sky-50';     b.dataset.cat = c;     b.dataset.lineId = lid;     b.innerText = c;     if (c === selected_cat) { b.classList.add('bg-sky-600', 'text-white'); }     b.addEventListener('click', function(){       const cat = this.dataset.cat;       // toggle selection       const currently = (obj.lines[0].category || '');       obj.lines[0].category = (currently === cat) ? '' : cat;       // reflect UI       Array.from(btnRow.querySelectorAll('button.category-btn')).forEach(bb=>{         bb.classList.toggle('bg-sky-600', bb.dataset.cat === obj.lines[0].category);         bb.classList.toggle('text-white', bb.dataset.cat === obj.lines[0].category);       });       persist();     });     btnRow.appendChild(b);   });    const clearBtn = document.createElement('button');   clearBtn.type = 'button';   clearBtn.id = 'clearCategory';   clearBtn.className = 'px-3 py-2 border rounded text-sm ml-2';   clearBtn.innerText = 'Καθαρισμός';   clearBtn.addEventListener('click', function(){     obj.lines[0].category = '';     Array.from(btnRow.querySelectorAll('button.category-btn')).forEach(bb=>{       bb.classList.remove('bg-sky-600', 'text-white');     });     persist();   });    btnRow.appendChild(clearBtn);   chooseWrap.appendChild(btnRow);   singleDiv.appendChild(chooseWrap);   container.appendChild(singleDiv);   persist(); }  /* Call this helper whenever you open the summary modal after you populated summaryJsonInput.    Examples of call sites are below (where modal.style.display='flex' is set). */   function showFlash(message, type='info', timeout=3000){   try {     const container = document.getElementById('clientFlashContainer');     if(!container) return;     const el = document.createElement('div');     el.className = 'mb-2 p-3 rounded shadow text-sm';     if(type === 'success') el.classList.add('bg-green-50', 'text-green-800');     else if(type === 'error') el.classList.add('bg-red-50', 'text-red-800');     else el.classList.add('bg-gray-50', 'text-gray-800');     el.innerText = message;     container.appendChild(el);     setTimeout(()=>{ try{ el.style.opacity='0'; setTimeout(()=>el.remove(), 300); }catch(e){} }, timeout);   } catch(e){ console.warn('showFlash failed', e); } }  // Helper API calls async function apiGetRepeatEntry(vat){   try {     const url = '/api/repeat_entry/get' + (vat ? ('?vat=' + encodeURIComponent(vat)) : '');     const res = await fetch(url, { credentials: 'same-origin' });     if (!res.ok) return { ok: false };     return await res.json();   } catch(e){     console.warn('apiGetRepeatEntry failed', e);     return { ok: false };   } } async function apiSaveRepeatEntry(enabled, mapping, vat){   try {     const res = await fetch('/api/repeat_entry/save', {       method: 'POST',       headers: {'Content-Type': 'application/json'},       credentials: 'same-origin',       body: JSON.stringify({ enabled: !!enabled, mapping: mapping || {}, vat: vat || VAT })     });     if(!res.ok) {       const txt = await res.text().catch(()=>null);       return { ok: false, status: res.status, body: txt };     }     return await res.json();   } catch(e){     console.warn('apiSaveRepeatEntry failed', e);     return { ok: false, error: String(e) };   } }  function removeForceEditParamFromUrl(){   try {     const url = new URL(window.location.href);     if (url.searchParams.has('force_edit')) {       url.searchParams.delete('force_edit');       history.replaceState(null, '', url.pathname + (url.search ? ('?' + url.searchParams.toString()) : '') + url.hash);     }   } catch(e){ console.warn('removeForceEditParamFromUrl failed', e); } }  document.addEventListener('DOMContentLoaded', function(){   // ---------- DOM references ----------   const repeatSwitch = document.getElementById('repeatEntrySwitch');   const editRepeatBtn = document.getElementById('editRepeatMappingBtn');   const repeatModal = document.getElementById('repeatMappingModal');   const repeatModalList = document.getElementById('repeatMappingList');   const repeatModalSave = document.getElementById('repeatModalSave');   const repeatModalCancel = document.getElementById('repeatModalCancel');   const repeatModalCloseX = document.getElementById('repeatModalCloseX');   const summaryInput = document.getElementById('summaryJsonInput'); // may be null   const saveSummaryForm = document.getElementById('saveSummaryForm');    // New: receipts switch + url input   // ---------- Μικρή, local επιδιόρθωση για τα κουμπιά/Select στο modal summary ---------- // ----- Prefill modal fields & categories from summaryJsonInput ----- function prefillSummaryModal(){   try {     const input = document.getElementById('summaryJsonInput');     if(!input) return;     let data = {};     try { data = JSON.parse(input.value || '{}'); } catch(e) { data = {}; }      // Header fields mapping     const map = {       mark: 'summaryModalMark',       AA: 'summary_AA',       AFM_issuer: 'summary_AFM',       AFM: 'summary_AFM',       Name: 'summary_Name',       issuer_name: 'summary_Name',       issueDate: 'summary_issueDate',       type_name: 'summary_type_name',       totalNetValue: 'summary_totalNetValue',       totalVatAmount: 'summary_totalVatAmount',       totalValue: 'summary_totalValue'     };     Object.keys(map).forEach(k => {       const el = document.getElementById(map[k]);       if(!el) return;       el.innerText = (data[k] !== undefined && data[k] !== null) ? String(data[k]) : (data[k.toUpperCase()] || '');     });      // Ensure container exists     const container = document.getElementById('summaryLinesContainer') || document;     const lines = Array.isArray(data.lines) ? data.lines : [];      // For each line, set select/button states     lines.forEach(line => {       const lid = String(line.id || line.line_id || '').trim();       if(!lid) return;        // Try to find matching element inside modal (row or singleLine)       let row = container.querySelector('[data-line-id="'+lid+'"]');       if(!row){         // fallback: global lookup         row = document.querySelector('[data-line-id="'+lid+'"]');       }       if(!row) return;        const cat = line.category || line.cat || '';       // set select if present       const sel = row.querySelector('select.expense-category[data-line-id="'+lid+'"]');       if(sel){         try { sel.value = cat || ''; } catch(e){ /* ignore */ }       }       // set button states if buttons present       const btns = row.querySelectorAll('.category-btn[data-line-id="'+lid+'"]');       if(btns && btns.length){         btns.forEach(b => b.classList.remove('bg-sky-600','text-white'));         if(cat){           // try to find exact button           const esc = (window.CSS && CSS.escape) ? CSS.escape(cat) : cat.replace(/"/g,'\\"');           const target = row.querySelector('.category-btn[data-line-id="'+lid+'"][data-cat="'+cat+'"]') ||                          row.querySelector('.category-btn[data-line-id="'+lid+'"][data-cat="'+esc+'"]');           if(target) target.classList.add('bg-sky-600','text-white');         }       }     });   } catch(err){     console.warn('prefillSummaryModal error', err);   } }  // Call prefill when modal gets shown by your existing code. // Find the places where you do: modal.style.display = 'flex' and add prefillSummaryModal().    (function(){   // helper: ασφαλής update του hidden json από το DOM   function updateSummaryFromDom(){     try {       const input = document.getElementById('summaryJsonInput');       if(!input) return;       let data = {};       try { data = JSON.parse(input.value || '{}'); } catch(e){ data = {}; }       data.lines = Array.isArray(data.lines) ? data.lines.slice() : [];        // For every element that has data-line-id inside the modal container, read category       const container = document.getElementById('summaryLinesContainer') || document;       container.querySelectorAll('[data-line-id]').forEach(el => {         const lid = String(el.dataset.lineId || '').trim();         if(!lid) return;         // prefer select.expense-category if present         let chosen = '';         const sel = el.querySelector('select.expense-category[data-line-id="'+lid+'"]');         if(sel && sel.value) chosen = sel.value;         else {           // else look for active category button in same element           const btn = el.querySelector('.category-btn.bg-sky-600');           if(btn) chosen = btn.dataset.cat || '';         }         // find or create line entry         let found = data.lines.find(x => String(x.id) === lid);         if(!found){           found = { id: lid, category: '' };           data.lines.push(found);         }         found.category = chosen || '';       });        input.value = JSON.stringify(data);     } catch(err){       console.warn('updateSummaryFromDom error', err);     }   }    // only operate inside the modal area to avoid interfering globally   const container = document.getElementById('summaryLinesContainer');   if(!container) {     // fallback: attach to document but remain minimal     console.warn('summaryLinesContainer not found — fix handlers limitedly');   }    // Event delegation: capture clicks on category buttons and selects inside modal   const targetRoot = container || document;   // Use capture true so we intercept before other handlers   targetRoot.addEventListener('click', function(e){     const btn = e.target.closest && e.target.closest('.category-btn');     if(btn && (container ? container.contains(btn) : true)){       // Prevent bubbling to other global handlers that open the receipts-modal       e.preventDefault();       e.stopPropagation();        // ensure it's not treated as a submit (defensive): set type=button if missing       try { if(btn.tagName === 'BUTTON' && !btn.hasAttribute('type')) btn.setAttribute('type','button'); } catch(_) {}        // determine line id: prefer dataset, else find closest ancestor with data-line-id       const lineEl = btn.closest('[data-line-id]');       const lineId = lineEl ? (lineEl.dataset.lineId || '') : (btn.dataset.lineId || '');        // Toggle active class for buttons of the same line only       if(lineId){         const group = (container || document).querySelectorAll('.category-btn[data-line-id="'+lineId+'"]');         group.forEach(b => { b.classList.remove('bg-sky-600','text-white'); });       } else {         // fallback: toggle only this button       }       const isActive = !btn.classList.contains('bg-sky-600');       if(isActive) btn.classList.add('bg-sky-600','text-white');       else btn.classList.remove('bg-sky-600','text-white');        // if there's a select corresponding to this line, keep it in sync       if(lineId){         const sel = (container || document).querySelector('select.expense-category[data-line-id="'+lineId+'"]');         if(sel) sel.value = isActive ? (btn.dataset.cat || '') : '';       }        // update hidden JSON immediately       updateSummaryFromDom();       return;     }      // if clicking on a select inside modal, prevent bubbling too     const sel = e.target.closest && e.target.closest('select.expense-category');     if(sel && (container ? container.contains(sel) : true)){       e.stopPropagation();       // let change event handle updating (below we also listen change)       return;     }   }, true);    // Listen change events on selects inside container and update JSON   (container || document).addEventListener('change', function(e){     const sel = e.target.closest && e.target.closest('select.expense-category');     if(sel && (container ? container.contains(sel) : true)){       e.stopPropagation();       // sync any visual button states (remove active if select chosen)       const lid = sel.dataset.lineId || (sel.closest('[data-line-id]') && sel.closest('[data-line-id]').dataset.lineId) || '';       if(lid){         // clear buttons for that line         const group = (container || document).querySelectorAll('.category-btn[data-line-id="'+lid+'"]');         group.forEach(b => b.classList.remove('bg-sky-600','text-white'));       }       updateSummaryFromDom();     }   }, true);    // Ensure Save form updates JSON right before submit (defensive)   const saveForm = document.getElementById('saveSummaryForm');   if(saveForm){     saveForm.addEventListener('submit', function(e){       try {         updateSummaryFromDom();         // small synchronous update only; let the submit continue       } catch(err){ console.warn('pre-submit update failed', err); }     });   }    // Expose helper in case other code wants to call it   window.updateSummaryFromDom = updateSummaryFromDom; })();    const useReceiptsSwitch = document.getElementById('useReceiptsSwitch');   // find or create an URL input (if not present in template we create one dynamically)   let urlInput = document.getElementById('scrapeUrlInput');   if(!urlInput){     urlInput = document.createElement('input');     urlInput.id = 'scrapeUrlInput';     urlInput.placeholder = 'Εισάγετε URL παραστατικού (για αποδείξεις)';     urlInput.className = 'p-2 border rounded w-2/4 hidden';     urlInput.type = 'text';     // insert after markInput     const mi = document.getElementById('markInput');     if(mi && mi.parentElement) mi.parentElement.insertBefore(urlInput, mi.nextSibling);   }    // --- ensure search icon behaves same as input clear/submit ---   (function wireSearchIconBehavior(){     const mi = document.getElementById('markInput');     if (!mi) return;      const possibleSelectors = [       '.icon-search', '.btn-search', '#searchIcon', '.fa-search', '.magnifier',       'button[aria-label="search"]', 'button[data-action="search"]'     ];      let found = null;     for (const sel of possibleSelectors) {       const el = document.querySelector(sel);       if (el) { found = el; break; }     }      if (!found) {       const delBtn = document.querySelector('button#deleteSelected, button.delete-selected, button[data-action="delete-selected"]');       if (delBtn && delBtn.parentElement) {         const sibling = delBtn.parentElement.querySelector('button, a, svg, i');         if (sibling && sibling !== delBtn) found = sibling;       }     }      if (!found) return;      found.addEventListener('click', function(e){       try {         mi.value = '';         mi.dispatchEvent(new Event('input', { bubbles: true }));         mi.dispatchEvent(new KeyboardEvent('keyup', { bubbles: true, key: 'Backspace' }));         if (window.jQuery && jQuery.fn && jQuery.fn.dataTable) {           try {             const dt = $('.summary-table').DataTable();             dt.search('').columns().search('').draw();           } catch(ignore){}         }       } catch(err){         console.warn('search icon handler failed', err);       }     });   })();     // detect vat keys in summary   function detectVatKeysFromSummary(){     if(summaryInput && summaryInput.value){       try {         const obj = JSON.parse(summaryInput.value || '{}');         const lines = Array.isArray(obj.lines) ? obj.lines : [];         const set = new Set();         lines.forEach(l => {           const key = (l.vatCategory || l.vat_category || l.vat || '').toString().trim();           if(key) set.add(key);         });         if(set.size) return Array.from(set);       } catch(e){ /* ignore */ }     }     return ['0%','6%','13%','24%'];   }    // Build repeat modal UI given an existing mapping (object)   function buildRepeatModalUI(existingMapping){     repeatModalList.innerHTML = '';     const vatKeys = detectVatKeysFromSummary();     const mapping = existingMapping || {};     // default row     const defaultRow = document.createElement('div');     defaultRow.className = 'flex items-center gap-3';     defaultRow.innerHTML = `<div class="w-36 text-sm font-medium">Προεπιλογή</div>`;     const defaultSelect = document.createElement('select');     defaultSelect.className = 'p-1 border rounded flex-1';     const opt0 = document.createElement('option'); opt0.value=''; opt0.innerText='-- (κανένα) --'; defaultSelect.appendChild(opt0);     CUSTOMER_CATEGORIES.forEach(c=>{       const o = document.createElement('option'); o.value = c; o.innerText = c;       if(mapping['__default'] === c) o.selected = true;       defaultSelect.appendChild(o);     });     defaultRow.appendChild(defaultSelect);     repeatModalList.appendChild(defaultRow);      vatKeys.forEach(vk=>{       const row = document.createElement('div');       row.className = 'flex items-center gap-3';       const label = document.createElement('div');       label.className = 'w-36 text-sm font-medium';       label.innerText = vk || '(άγνωστο)';       const sel = document.createElement('select');       sel.className = 'p-1 border rounded flex-1';       const oEmpty = document.createElement('option'); oEmpty.value=''; oEmpty.innerText='-- (προεπιλογή) --'; sel.appendChild(oEmpty);       CUSTOMER_CATEGORIES.forEach(c=>{         const o=document.createElement('option'); o.value=c; o.innerText=c;         if(mapping[vk] === c) o.selected = true;         sel.appendChild(o);       });       row.appendChild(label);       row.appendChild(sel);       repeatModalList.appendChild(row);     });   }    function openRepeatModalWithMapping(mapping){     // If receipts mode is on, block editing mapping because receipts get fixed category     if(useReceiptsSwitch && useReceiptsSwitch.checked){       alert('Όταν είναι επιλεγμένες οι Αποδείξεις, δεν επιτρέπεται η επεξεργασία χαρακτηρισμών — οι αποδείξεις παίρνουν μόνο την κατηγορία "αποδειξακια".');       return;     }     buildRepeatModalUI(mapping || {});     repeatModal.style.display = 'flex';   }   function closeRepeatModal(){ repeatModal.style.display = 'none'; }    // collect mapping from modal selects   function collectMappingFromModal(){     const mapping = {};     const selects = repeatModalList.querySelectorAll('select');     if(selects.length){       const first = selects[0];       if(first && first.value) mapping['__default'] = first.value;       const vatKeys = detectVatKeysFromSummary();       for(let i=1;i<selects.length;i++){         const sel = selects[i];         const vatKey = vatKeys[i-1];         if(sel && sel.value) mapping[vatKey] = sel.value;       }     }     return mapping;   }    // apply given mapping to summary JSON and submit saveSummaryForm   function applyMappingToSummaryAndSubmitUsingMapping(mapping){     if(!summaryInput || !saveSummaryForm) return false;     try {       const data = JSON.parse(summaryInput.value || '{}');       if(!Array.isArray(data.lines)) data.lines = [];       data.lines = data.lines.map(l => {         const vatKey = (l.vatCategory || l.vat_category || l.vat || '').toString().trim();         if(mapping && mapping[vatKey]) l.category = mapping[vatKey];         else if(mapping && mapping.__default) l.category = mapping.__default;         return l;       });       summaryInput.value = JSON.stringify(data);       saveSummaryForm.submit();       return true;     } catch(e){       console.warn('applyMappingToSummaryAndSubmitUsingMapping error', e);       return false;     }   }    // ---------- Initialization: load server repeat_entry config ----------   (async function initRepeatEntry(){     try {       const resp = await apiGetRepeatEntry(VAT);       if(resp && resp.ok){         const repeat = resp.repeat_entry || { enabled: false, mapping: {} };         if(resp.expense_tags && Array.isArray(resp.expense_tags) && resp.expense_tags.length){           CUSTOMER_CATEGORIES = resp.expense_tags.slice();         }         const enabled = !!repeat.enabled;         const mapping = repeat.mapping || {};          if(repeatSwitch){           repeatSwitch.checked = enabled;           // show edit button if mapping exists and receipts not selected           if(mapping && Object.keys(mapping).length && !(useReceiptsSwitch && useReceiptsSwitch.checked)) editRepeatBtn.classList.remove('hidden');           repeatSwitch.addEventListener('change', async function(){             const now = this.checked;             // if enabling and no mapping -> open modal to create mapping             if(now){               if(!mapping || Object.keys(mapping).length === 0){                 // open modal letting user create mapping (but only if receipts not selected)                 if(useReceiptsSwitch && useReceiptsSwitch.checked){                   // do not open — receipts use only αποδειξακια                   editRepeatBtn.classList.add('hidden');                 } else {                   openRepeatModalWithMapping({});                 }               } else {                 if(useReceiptsSwitch && useReceiptsSwitch.checked){                   // receipts + repeat -> hide edit button                   editRepeatBtn.classList.add('hidden');                 } else {                   editRepeatBtn.classList.remove('hidden');                 }               }             } else {               editRepeatBtn.classList.add('hidden');             }             // Persist enabled flag immediately (keep mapping as-is)             const saveResp = await apiSaveRepeatEntry(now, mapping, VAT);             if(saveResp && saveResp.ok){               showFlash('Ενημερώθηκε η ρύθμιση επαναληπτικής εισαγωγής.', 'success');               if(saveResp.expense_tags && Array.isArray(saveResp.expense_tags) && saveResp.expense_tags.length){                 CUSTOMER_CATEGORIES = saveResp.expense_tags.slice();               }             } else {               showFlash('Αποτυχία αποθήκευσης ρύθμισης.', 'error');             }           });         }          // If repeat enabled and mapping exists and modal_summary present -> auto apply mapping now         if (enabled && mapping && Object.keys(mapping).length && summaryInput) {         const receiptsOn = !!(useReceiptsSwitch && useReceiptsSwitch.checked);           if (!receiptsOn && !FORCE_EDIT) {             const did = applyMappingToSummaryAndSubmitUsingMapping(mapping);           if (did) {             const sm = document.getElementById('summaryModal');           if (sm) sm.style.display = 'none';       }     }   }          // Wire edit button         if(editRepeatBtn){           editRepeatBtn.classList.toggle('hidden', !mapping || Object.keys(mapping).length===0 || (useReceiptsSwitch && useReceiptsSwitch.checked));           editRepeatBtn.addEventListener('click', function(){             openRepeatModalWithMapping(mapping);           });         }       } else {         if(repeatSwitch) repeatSwitch.checked = false;       }     } catch(e){       console.warn('initRepeatEntry failed', e);     }   })();    // wire receipts switch to show/hide url input and to enforce mapping rule   if(useReceiptsSwitch){     useReceiptsSwitch.addEventListener('change', function(){       const on = !!this.checked;       // UI: swap inputs       if(on){         document.getElementById('markInput')?.classList.add('hidden');         urlInput?.classList.remove('hidden');         urlInput?.focus();         // when receipts are active, edit button must be hidden (even if repeat on)         if(editRepeatBtn) editRepeatBtn.classList.add('hidden');       } else {         document.getElementById('markInput')?.classList.remove('hidden');         urlInput?.classList.add('hidden');         document.getElementById('markInput')?.focus();         // restore edit button visibility based on repeatSwitch/mapping         // re-init repeat button visibility by calling initRepeatEntry lightly:         (async function(){           try {             const resp = await apiGetRepeatEntry(VAT);             if(resp && resp.ok){               const mapping = (resp.repeat_entry && resp.repeat_entry.mapping) ? resp.repeat_entry.mapping : {};               if(mapping && Object.keys(mapping).length && repeatSwitch && repeatSwitch.checked){                 editRepeatBtn.classList.remove('hidden');               } else {                 editRepeatBtn.classList.add('hidden');               }             }           } catch(e){}         })();       }     });   }    // repeat modal handlers   repeatModalCloseX?.addEventListener('click', closeRepeatModal);   repeatModalCancel?.addEventListener('click', closeRepeatModal);    repeatModalSave?.addEventListener('click', async function(){     // collect mapping     const mapping = collectMappingFromModal();     // persist to backend and enable repeat     const resp = await apiSaveRepeatEntry(true, mapping, VAT);     if (resp && resp.ok) {       if (resp.expense_tags && Array.isArray(resp.expense_tags) && resp.expense_tags.length) {         CUSTOMER_CATEGORIES = resp.expense_tags.slice();       }       if (repeatSwitch) repeatSwitch.checked = true;       // if receipts mode is on, edited mapping should not be used—hide edit button       if (useReceiptsSwitch && useReceiptsSwitch.checked) editRepeatBtn.classList.add('hidden');       else editRepeatBtn.classList.remove('hidden');        showFlash('Αποθηκεύτηκαν οι ρυθμίσεις επαναληπτικής εισαγωγής. Η σελίδα θα επαναφορτωθεί...', 'success', 800);       closeRepeatModal();       setTimeout(function(){ try { window.location.reload(); } catch(e){ console.warn('reload failed', e); } }, 600);       return;     } else {       console.warn('Failed saving repeat mapping', resp);       showFlash('Αποτυχία αποθήκευσης ρυθμίσεων επαναληπτικής εισαγωγής.', 'error');     }   });    // ---------- existing original JS (dismiss banner, force edit, summary modal wiring, etc) ----------   const forceBtn = document.getElementById('forceEditBtn');   const markInput = document.getElementById('markInput');   const existingBanner = document.getElementById('existingBanner');   const dismissBannerBtn = document.getElementById('dismissBannerBtn');    if(dismissBannerBtn){     dismissBannerBtn.addEventListener('click', function(){ if(existingBanner) existingBanner.style.display = 'none'; });   }    if (forceBtn){     forceBtn.addEventListener('click', function(){       const markValRaw = (markInput && markInput.value) ? markInput.value.trim() : '{{ mark or "" }}';       const markVal = encodeURIComponent(markValRaw || '');       if (!markVal){ alert('Δεν δόθηκε MARK για επιβεβαίωση.'); return; }       if (confirm('Θες σίγουρα να επαναχαρακτηρίσεις το MARK και να ανοίξει η φόρμα επεξεργασίας;')) {         if(existingBanner) existingBanner.style.display = 'none';         window.location = SEARCH_BASE_URL + '?mark=' + markVal + '&force_edit=1';       }     });   }    const modal = document.getElementById('summaryModal');   const modalCloseBtns = Array.from(document.querySelectorAll('#modalCloseX, #modalCloseBtn'));   modalCloseBtns.forEach(b => b?.addEventListener('click', function(){     if(modal) modal.style.display = 'none';     removeForceEditParamFromUrl();   }));    {% if modal_summary and (request.args.get('force_edit') == '1' or not allow_edit_existing) %}   setTimeout(()=>{   const m = document.getElementById('summaryModal');   if (!m) return;    // Αν είμαστε σε mode αποδείξεων ΚΑΙ είναι ενεργό το repeat, μην ανοίγεις modal   // ΕΞΑΙΡΕΣΗ: αν είναι reclassification (force_edit=1), τότε άνοιξέ το για να αλλάξουμε χαρακτηρισμούς.   const receiptsOn = !!(document.getElementById('useReceiptsSwitch') && document.getElementById('useReceiptsSwitch').checked);   const repeatOn   = !!(document.getElementById('repeatEntrySwitch') && document.getElementById('repeatEntrySwitch').checked);    // Επιπλέον έλεγχος: αν το summary είναι σαφώς Απόδειξη, αντιμετώπισέ το ως receipts flow   let isReceiptSummary = false;   try {     const raw = (document.getElementById('summaryJsonInput')?.value || '').trim();     if (raw) {       const sobj = JSON.parse(raw);       const tname = (sobj.type_name || sobj.type || '').toString().toLowerCase();       const cat   = (sobj.category || sobj.characteristic || sobj['χαρακτηρισμός'] || '').toString().toLowerCase();       isReceiptSummary = !!(sobj.is_receipt || tname.includes('απόδει') || tname.includes('receipt') || cat === 'αποδειξακια');     }   } catch(_){}     if ((receiptsOn || isReceiptSummary) && repeatOn && !FORCE_EDIT) {     // auto-flow αποδείξεων όταν είναι ενεργό το "Επαναληψιμη εισαγωγή"     try {       let raw = (document.getElementById('summaryJsonInput')?.value || '').trim();       if (!raw || raw === '{}' || raw === 'null') {         try { raw = JSON.stringify({{ modal_summary | tojson | safe }}); } catch(_) {}       }       const sobj = raw ? JSON.parse(raw) : {};       // Κανονικοποίησε σαν απόδειξη και επιβεβαίωσε μία φορά       const url = document.getElementById('scrapeUrlInput')?.value || '';       (async () => {         try {           await RC.confirmReceiptOnce(RC.normalizeReceiptSummary(sobj), url);           // κράτα το mode σε receipts και κάνε hard redirect για καθαρή κατάσταση           try { localStorage.setItem('useReceiptsSwitch','1'); } catch(_){}           const base = location.pathname + '?use_receipts=1';           location.replace(base);         } catch(e) {           console.warn('auto-confirm receipt failed', e);         }       })();     } catch(e) { console.warn('auto-flow receipts error', e); }     return;   }     // Αλλιώς, άνοιξέ το κανονικά   try {     const summaryInputEl = document.getElementById('summaryJsonInput');     if (summaryInputEl && (!summaryInputEl.value || summaryInputEl.value === '{}')) {       summaryInputEl.value = {{ modal_summary | tojson | safe }};     }     const obj = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');     renderSummaryLinesFromObject(obj);   } catch(e) { console.warn('renderSummaryLinesFromObject error', e); }    m.style.display = 'flex';   removeForceEditParamFromUrl(); }, 80); {% endif %}      {% if modal_warning %}   const afmModal = document.getElementById('afmWarningModal');   const afmModalBtn = document.getElementById('afmModalConfirm');   if (afmModal && afmModalBtn){     setTimeout(()=>{ afmModal.style.display = 'flex'; }, 50);     afmModalBtn.addEventListener('click', function(){ afmModal.style.display = 'none'; });   }   {% endif %}    // --- the rest of your existing summary wiring (no changes) ---   if (summaryInput){   try {     let summaryData = JSON.parse(summaryInput.value || '{}');     if (!Array.isArray(summaryData.lines)) summaryData.lines = [];     summaryData.lines = summaryData.lines.map(l => {       if (!l) return {id:'', description:'', amount:'', vat:'', category:'', vatCategory:''};       l.id = (l.id!==undefined)?String(l.id):(l.line_id!==undefined?String(l.line_id):'');       l.category = l.category || l.cat || l.line_category || l['κατηγορία'] || '';       return l;     });      // multi-line selects     document.querySelectorAll('#linesTableBody tr[data-line-id]').forEach(tr => {       const lid = String(tr.dataset.lineId || '');       const sel = tr.querySelector('select.expense-category');       if (!sel) return;       let existing = summaryData.lines.find(x => String(x.id) === lid);       if (!existing){         existing = {id: lid, category: ''};         summaryData.lines.push(existing);       }       sel.value = existing.category || '';       sel.addEventListener('change', function(){ existing.category = sel.value; summaryInput.value = JSON.stringify(summaryData); });     });      // single-line buttons     const singleLine = document.getElementById('singleLine');     if (singleLine){       const lid = String(singleLine.dataset.lineId || '');       let existing = summaryData.lines.find(x => String(x.id) === lid);       if (!existing){         existing = {id: lid, category: ''};         summaryData.lines.push(existing);       }       const buttons = document.querySelectorAll('#categoryButtons .category-btn');       function markActive(cat){         buttons.forEach(b => {           b.classList.toggle('bg-sky-600', b.dataset.cat === cat);           b.classList.toggle('text-white', b.dataset.cat === cat);         });       }       if (existing.category) markActive(existing.category);       buttons.forEach(btn => {         btn.addEventListener('click', function(){           const cat = this.dataset.cat;           existing.category = (existing.category === cat) ? '' : cat;           markActive(existing.category);           summaryInput.value = JSON.stringify(summaryData);         });       });       const clearBtn = document.getElementById('clearCategory');       clearBtn?.addEventListener('click', function(){         existing.category = '';         markActive('');         summaryInput.value = JSON.stringify(summaryData);       });     }     summaryInput.value = JSON.stringify(summaryData);   } catch(e){     console.warn('summary JSON parse/normalize error', e);   } }     // --- the table / datatables logic code (kept unchanged) ---   const hasTable = document.querySelector('.summary-table') !== null;   if (hasTable){     const jq = window.jQuery;     const dtAvail = jq && jq.fn && jq.fn.dataTable;     if (dtAvail){       try {         const dt = $('.summary-table').DataTable({           paging: true,           scrollY: '55vh',           scrollX: true,           scrollCollapse: true,           fixedHeader: { header: true, headerOffset: 0 },           colReorder: true,           autoWidth: false,           columnDefs: [{ orderable: false, targets: 0 }]         });         if (typeof dt.colResize === 'function') {           try { dt.colResize({ resizeMode: 'flex' }); } catch(e){ console.warn('colResize failed', e); }         }         const globalSearch = document.getElementById('globalSearch');         if (globalSearch){           globalSearch.addEventListener('input', function(){ dt.search(this.value).draw(); });         }         setTimeout(()=>{ try{ dt.columns.adjust().draw(); }catch(e){} }, 120);       } catch(e){         console.warn('DataTables init failed — falling back', e);       }     } else {       const globalSearch = document.getElementById('globalSearch');       if (globalSearch){         globalSearch.addEventListener('input', function(){           const q = this.value.toLowerCase();           document.querySelectorAll('.summary-table tbody tr').forEach(tr => {             tr.style.display = tr.textContent.toLowerCase().indexOf(q) !== -1 ? '' : 'none';           });         });       }     }      try {       const anyCheckbox = document.querySelector('input[name="delete_mark"]');       if (anyCheckbox){         const firstTh = document.querySelector('.summary-table thead th');         if (firstTh && !document.getElementById('selectAll')){           const chk = document.createElement('input');           chk.type = 'checkbox'; chk.id = 'selectAll'; chk.title = 'Επιλογή όλων';           chk.style.marginRight = '6px';           firstTh.prepend(chk);           chk.addEventListener('change', function(){ document.querySelectorAll('input[name="delete_mark"]').forEach(cb => cb.checked = this.checked); });         }         const headers = Array.from(document.querySelectorAll('.summary-table thead th')).map(h => h.innerText.trim().toLowerCase());         let markIdx = headers.findIndex(h => h.includes('mark'));         if (markIdx === -1) markIdx = headers.findIndex(h => h.includes('αφμ') || h.includes('afm'));         if (markIdx >= 0){           document.querySelectorAll('.summary-table tbody tr').forEach(row => {             const cb = row.querySelector('input[name="delete_mark"]');             if (cb){               const td = row.querySelectorAll('td')[markIdx];               if (td){                 const v = td.innerText.trim();                 if (v) cb.value = v;               }             }           });         }       }     } catch(e){ console.warn('select-all / mark mapping error', e); }   }    // --- new: restore table / reload when markInput cleared ---   (function wireRobustClearRestore(){     const mi = (typeof markInput !== 'undefined' && markInput) ? markInput : document.getElementById('markInput');     if (!mi) return;      let t = null;     let lastVal = mi.value || '';      function restoreAllRowsAndUi(){       try {         if (window.jQuery && jQuery.fn && jQuery.fn.dataTable) {           try {             const dt = $('.summary-table').DataTable();             dt.search('').columns().search('').draw();             try {               dt.rows().nodes().to$().each(function(){ this.style.display = ''; });             } catch(e){ /* ignore */ }             try { dt.columns.adjust().draw(false); } catch(e){ /* ignore */ }           } catch(e) {             console.warn('DataTables restore failed, falling back to DOM restore', e);             document.querySelectorAll('.summary-table tbody tr').forEach(tr => tr.style.display = '');           }         } else {           document.querySelectorAll('.summary-table tbody tr').forEach(tr => tr.style.display = '');         }          const selectAll = document.getElementById('selectAll') || document.querySelector('.summary-table thead input[type="checkbox"]#selectAll');         if (selectAll) selectAll.checked = false;          const evt = new Event('tableRestored');         document.querySelectorAll('.summary-table').forEach(t => t.dispatchEvent(evt));       } catch(err){         console.warn('restoreAllRowsAndUi failed', err);       }     }   document.addEventListener('DOMContentLoaded', function(){   try {     const m = document.getElementById('summaryModal');     if(m && (m.style.display === 'flex' || getComputedStyle(m).display !== 'none')){       // small timeout to let template-rendered inner HTML settle       setTimeout(()=>{ try { prefillSummaryModal(); } catch(e){ console.warn(e); } }, 40);     }   } catch(e){ /* ignore */ } });     function maybeRestore(){       clearTimeout(t);       t = setTimeout(()=>{         try {           const v = (mi.value || '').trim();           if (v === '' && (lastVal && lastVal.trim() !== '')) {             try {               if (typeof INITIAL_MARK !== 'undefined' && INITIAL_MARK && INITIAL_MARK.trim() !== '') {                 const cur = new URL(window.location.href);                 if (cur.searchParams.has('mark') || cur.searchParams.has('force_edit')) {                   window.location = SEARCH_BASE_URL;                   return;                 }               }             } catch(e){ /* ignore URL errors and fallthrough to client restore */ }              restoreAllRowsAndUi();           }           lastVal = v;         } catch(e){           console.warn(e);         }       }, 150);     }      mi.addEventListener('input', maybeRestore);     mi.addEventListener('keyup', maybeRestore);     mi.addEventListener('paste', function(){ setTimeout(maybeRestore, 50); });     mi.addEventListener('cut', function(){ setTimeout(maybeRestore, 50); });     mi.addEventListener('blur', maybeRestore);      let pollInterval = null;     try {       pollInterval = setInterval(() => {         const current = (mi.value || '').trim();         if (current !== (lastVal || '').trim()) {           maybeRestore();         }       }, 300);        window.addEventListener('beforeunload', () => {         if (pollInterval) clearInterval(pollInterval);       });     } catch(e){     }   })();    // ----- SCRAPER integration: auto call endpoint when URL provided and show modal -----   // Add a handler: when receipts switch ON and user submits form -> call /api/scrape_receipt and show modal   // ====================== RECEIPTS SCRAPE FLOW ====================== document.getElementById('markSearchForm')?.addEventListener('submit', async function (evt) {   if (useReceiptsSwitch && useReceiptsSwitch.checked) {      // --- de-dupe receipts submit (scrape) ---     // --- de-dupe receipts submit (scrape) ---   const form = evt.currentTarget;   if (form && form.dataset.receiptsSubmitting === '1') {     evt.preventDefault();     return;   }   if (form) form.dataset.receiptsSubmitting = '';   if (form) form.dataset.receiptsSubmitting = '1';  evt.preventDefault();     const url = (urlInput && urlInput.value) ? urlInput.value.trim() : '';     if (!url) {       showFlash('Εισάγετε URL για αποδείξεις.', 'error');       return;     }      try {       const res = await fetch('/api/scrape_receipt', {         method: 'POST',         credentials: 'same-origin',         headers: { 'Content-Type': 'application/json', 'X-Requested-With': 'XMLHttpRequest' },         body: JSON.stringify({ url: url })       });        const j = await res.json().catch(() => null);       if (!res.ok || !j || j.ok === false) {         const msg = j && (j.error || j.message) ? (j.error || j.message) : ('Server ' + (res.status || ''));         showFlash('Σφάλμα scraper: ' + msg, 'error', 6000);         return;       }        if (j && j.is_invoice === true) {   openReceiptWarning('Το URL φαίνεται να περιέχει Τιμολόγιο — δεν θα αποθηκευτεί ως Απόδειξη. Έλεγξε το παραστατικό.');   return; // STOP         }         // ---- Έλεγχος έτους απόδειξης vs ενεργή χρήση (modal + STOP) try {   // 1) Πάρε ενεργή χρήση από ACTIVE_YEAR ή από το backend (fallback)   const activeYear = await getActiveFiscalYear();    // 2) Εξήγαγε issueYear από την απόκριση του scraper   let issueYear = null;   if (j && j.issue_year != null && String(j.issue_year).trim() !== '') {     // δέξου είτε καθαρό έτος είτε π.χ. "2025"     const m = String(j.issue_year).match(/\b(19|20)\d{2}\b/);     issueYear = m ? m[0] : String(j.issue_year);   } else if (j) {     const anyDate = j.issue_date || j.issueDate || j.date || '';     if (typeof anyDate === 'string') {       const m = anyDate.match(/\b(19|20)\d{2}\b/);       if (m) issueYear = m[0];     }   }    // 3) Αν δεν ταιριάζουν -> δείξε modal και σταμάτα   if (activeYear && issueYear && String(issueYear) !== String(activeYear)) {     openReceiptWarning(`Προσοχή: Η απόδειξη είναι του ${issueYear}, ενώ η ενεργή χρήση είναι ${activeYear}. Η διαδικασία μπλοκάρεται.`);     return; // STOP   } } catch (_) {   /* αν αποτύχει ο έλεγχος, δεν μπλοκάρουμε σιωπηλά */ }         // Δημιουργία αυξανόμενου MARK 15 ψηφίων (από το backend)       const markRes = await fetch('/api/next_receipt_mark', { credentials: 'same-origin' });       const markData = await markRes.json().catch(() => null);       const nextMark = (markData && markData.mark) ? markData.mark : '';        // Prepare summary object για modal       const summaryObj = {         mark: nextMark,         AA: j.progressive_aa || '',         AFM_issuer: j.issuer_vat || '',         Name: j.issuer_name || '',         issueDate: j.issue_date || '',         type_name: 'ΑΠΟΔΕΙΞΗ',         totalValue: j.total_amount || '',         totalNetValue: j.total_amount || '',         totalVatAmount: (j.raw && (j.raw.totalVatAmount || j.raw.totalVat)) || '',         lines: []       ,   type: 'ΑΠΟΔΕΙΞΗ',   category: 'αποδειξακια',   is_receipt: true,   number: (j.progressive_aa || '')};        if (j.raw && Array.isArray(j.raw.lines) && j.raw.lines.length) {         j.raw.lines.forEach((l, idx) => {           summaryObj.lines.push({             id: l.id || ('r' + idx),             amount: l.amount || l.lineTotal || '',             vat: l.vat || l.vatRate || '',             vatCategory: l.vatCategory || l.vat_category || '',             description: l.description || l.desc || ''           });         });       } else {         summaryObj.lines.push({           id: 'r0',           amount: j.total_amount || '',           vat: (j.raw && (j.raw.vat || '')) || '',           vatCategory: (j.raw && (j.raw.vatCategory || '')) || '',           description: (j.raw && (j.raw.description || '')) || ''         });       }        // Populate modal inputs       const summaryInput = document.getElementById('summaryJsonInput');       if (summaryInput) summaryInput.value = JSON.stringify(summaryObj);         document.getElementById('scrapeUrlField')?.setAttribute('value', url);       const desiredCat = CUSTOMER_CATEGORIES.includes('αποδειξακια')         ? 'αποδειξακια'         : (CUSTOMER_CATEGORIES[0] || '');       document.getElementById('scrapeCategoryField')?.setAttribute('value', desiredCat);       document.getElementById('scrapeForceField')?.setAttribute('value', 'false');        // Ενημέρωση modal       const modal = document.getElementById('summaryModal');       if (modal) {         // ensure populate code runs (some populate watchers poll or listen for modal display)         // prefer calling RC_forcePopulateSummaryModal if present         if (window.RC_forcePopulateSummaryModal) {           try { window.RC_forcePopulateSummaryModal(); } catch(e){ console.warn('RC_forcePopulateSummaryModal failed', e); }         }         if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }         if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { showFlash('Λήφθηκε απόδειξη — ελέγξτε τα στοιχεία και πατήστε "Αποθήκευση στο Cache".', 'success', 5000); }       }      } catch (err) {       console.error('scrape_receipt error', err);       showFlash('Σφάλμα scraper: ' + (err.message || err), 'error', 6000);     }   } });     // Intercept "Αποθήκευση στο Cache" to perform AJAX save for scraped receipts   // intercept saveSummaryForm submit when scrapeUrlField is present // --- replace the previous payload construction + fetch with this robust version --- document.getElementById('saveSummaryForm')?.addEventListener('submit', async function(e){   const scrapeUrl = document.getElementById('scrapeUrlField')?.value || '';   if(!scrapeUrl) return; // let normal (invoice) flow proceed   e.preventDefault();    let summary = {};   try {     summary = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');   } catch(err){     console.warn('Failed parsing summaryJsonInput', err);     alert('Σφάλμα: άκυρα δεδομένα παραστατικού.');     return;   }    summary.is_receipt = true;   if (!summary.category || String(summary.category).trim() === '') summary.category = 'αποδειξακια';   if (!summary.type || String(summary.type).trim() === '') summary.type = 'ΑΠΟΔΕΙΞΗ';   if (!summary.type_name || String(summary.type_name).trim() === '') summary.type_name = 'Απόδειξη';    const aaCoalesce = summary.number || summary.AA || summary.aa || summary.progressive_aa || '';   summary.number = aaCoalesce;    if (!Array.isArray(summary.lines)) summary.lines = [];   summary.lines = summary.lines.map((l, i) => ({     id: (l && (l.id || l.line_id)) ? String(l.id || l.line_id) : ('r' + i),     description: (l && (l.description || l.desc)) || '',     amount: (l && (l.amount || l.lineTotal || l.total)) || '',     vat: (l && (l.vat || l.vatRate)) || '',     vatCategory: (l && (l.vatCategory || l.vat_category)) || '',     category: (l && l.category) || ''   }));    try {     const res = await fetch('/save_summary', {       method: 'POST',       credentials: 'same-origin',       headers: { 'Content-Type': 'application/json', 'X-Requested-With': 'XMLHttpRequest' },       body: JSON.stringify(summary)     });     if (!res.ok) {       const t = await res.text().catch(()=>'');       alert('Αποτυχία αποθήκευσης (HTTP ' + res.status + '): ' + t);       return;     }     try { document.getElementById('summaryModal').style.display = 'none'; } catch(_) {}     window.location = window.location.pathname;   } catch (err) {     console.error('save_summary AJAX error', err);     alert('Σφάλμα αποθήκευσης: ' + (err.message || err));   } });  document.getElementById('saveSummaryForm')?.addEventListener('submit', async function(e){   const scrapeUrl = document.getElementById('scrapeUrlField')?.value || '';   if(!scrapeUrl) return; // allow normal server flow for invoice flow   e.preventDefault();    // parse summary from hidden input   let summary = {};   try {     summary = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');   } catch(err){     console.warn('Failed parsing summaryJsonInput', err);     showFlash('Σφάλμα: άκυρα δεδομένα παραστατικού.', 'error');     return;   }    // robust AFM extraction (try many variants)   const afmFromSummary = (summary && (summary.AFM_issuer || summary.AFM || summary.issuer_vat || summary.issuerVat || summary.issuer_vat)) ||                          (summary && summary.raw && (summary.raw.issuer_vat || summary.raw.issuerVat || summary.raw.AFM || summary.raw.AFM_issuer));   const afmVal = (typeof VAT !== 'undefined' && VAT) ? VAT : (afmFromSummary ? String(afmFromSummary).trim() : '');    // robust year extraction: prefer ACTIVE_YEAR, then summary.year, then parse issueDate, then fallback to current year   let yearVal = null;   try {     if (typeof ACTIVE_YEAR !== 'undefined' && ACTIVE_YEAR) yearVal = String(ACTIVE_YEAR);     else if (summary && (summary.year || summary.Year)) yearVal = String(summary.year || summary.Year);     else if (summary && summary.issueDate) {       const parts = (summary.issueDate || '').split('/');       if (parts.length >= 3) yearVal = parts[2];     }     if (!yearVal) yearVal = String((new Date()).getUTCFullYear());   } catch(e){     yearVal = String((new Date()).getUTCFullYear());   }    // final mark   const markVal = summary.mark || document.getElementById('scrapeUrlField')?.dataset.mark || '';    // if afm missing -> abort with client message (server requires AFM or active session)   if (!afmVal) {     console.warn('confirm_receipt abort: missing AFM', { summary });     showFlash('Αδύνατο να αποθηκευτεί: λείπει AFM του ενεργού πελάτη. Επιλέξτε ενεργό πελάτη ή βεβαιωθείτε ότι το παραστατικό περιέχει ΑΦΜ.', 'error', 7000);     return;   }    const payload = {     url: scrapeUrl,     summary: summary,     force: (document.getElementById('scrapeForceField')?.value === 'true'),     category: 'αποδειξακια',     afm: afmVal,     year: String(yearVal),     mark: (summary.mark || markVal || '')   };    console.log('[RC-DEBUG] FETCH -> /api/confirm_receipt called', '/api/confirm_receipt', payload);    // send to backend   try {     const res = await fetch('/api/confirm_receipt', {       method: 'POST',       credentials: 'same-origin',       headers: {'Content-Type':'application/json','X-Requested-With':'XMLHttpRequest'},       body: JSON.stringify(payload)     });     const j = await res.json().catch(()=>null);     if(!res.ok || !j || !j.ok){       console.warn('confirm_receipt failed', res.status, j);       showFlash('Σφάλμα αποθήκευσης: ' + ((j && j.error) ? j.error : ('Server ' + (res.status || ''))) , 'error', 7000);       return;     }     showFlash('Αποθηκεύτηκε η απόδειξη (excel + json).', 'success');     document.getElementById('summaryModal').style.display = 'none';     // clean hidden fields     document.getElementById('scrapeUrlField').value = '';     document.getElementById('scrapeForceField').value = 'false';   } catch(err){     console.error('confirm_receipt fetch error', err);     showFlash('Σφάλμα δικτύου κατά την αποθήκευση.', 'error');   } });  // --- Fix: on page load, populate modal if summaryJsonInput already contains summary JSON --- // This replaces a missing populateSummaryModal call and uses the populate watcher (RC_forcePopulateSummaryModal) if available. // Robust startup: only show summary modal if summaryJsonInput actually contains meaningful data document.addEventListener("DOMContentLoaded", function(){   try {     const summaryEl = document.getElementById("summaryJsonInput");     const modal = document.getElementById("summaryModal");     if (!summaryEl) return;      let obj = {};     try { obj = JSON.parse(summaryEl.value || '{}'); } catch(e){ obj = {}; }      function isMeaningful(o){       if (!o || typeof o !== 'object') return false;        // quick acceptors: important single fields       const important = ['mark','MARK','AFM_issuer','AFM','totalValue','totalNetValue','total_amount','issueDate','issue_date','progressive_aa','AA'];       for (const k of important) {         if (o[k] !== undefined && o[k] !== null && String(o[k]).trim() !== '') return true;       }        // if lines array exists and has at least one line with some non-empty field -> accept       if (Array.isArray(o.lines) && o.lines.length) {         for (const ln of o.lines) {           if (!ln) continue;           if ( (ln.description && String(ln.description).trim() !== '') ||                (ln.amount && String(ln.amount).trim() !== '') ||                (ln.id && String(ln.id).trim() !== '') ) return true;         }       }        // fallback: if object has more than one non-empty key -> accept       const nonEmptyKeys = Object.keys(o).filter(k => {         try { return o[k] !== null && o[k] !== undefined && String(o[k]).trim() !== ''; } catch(e){ return false; }       });       if (nonEmptyKeys.length > 1) return true;        return false;     }      if (isMeaningful(obj)) {       // ask the populate watcher to run (if available), else run a safe local populate       if (window.RC_forcePopulateSummaryModal) {         try { window.RC_forcePopulateSummaryModal(); } catch(e){ console.warn('RC_forcePopulateSummaryModal failed', e); }       } else {         // try to populate basic fields if populate function not present         try {           if (typeof populateSummaryModal === 'function') try { populateSummaryModal(obj); } catch(_) {}         } catch(_) {}       }        if (modal) if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }     } else {       // ensure modal remains hidden on load       if (modal) modal.style.display = 'none';     }   } catch(e){     console.warn('startup populate summary failed', e);   } });      // This expects rows to have 'input[type="radio"][name="active_name"]' and row id pattern cred-row-<name>   document.querySelectorAll('tr[id^="cred-row-"]').forEach(tr=>{     tr.addEventListener('dblclick', function(e){       try {         const radio = tr.querySelector('input[type="radio"][name="active_name"]');         if(radio){           radio.checked = true;           // also give visual feedback (optional)           tr.classList.add('bg-gray-100');           setTimeout(()=>tr.classList.remove('bg-gray-100'), 600);         }       } catch(err){ console.warn('dblclick select radio failed', err); }     });   });  });  // === DEBUG SNIPPET: paste near end of your existing scripts === (function(){   function safeLog(...a){ try{ console.log('[RC-DEBUG]', ...a); }catch(e){} }    // Global JS error catcher   window.addEventListener('error', function(e){     safeLog('Window error', e.message, e.filename + ':' + e.lineno, e.error);   });   window.addEventListener('unhandledrejection', function(ev){     safeLog('Unhandled promise rejection', ev.reason);   });    // Watch important DOM elements existence   function checkDom(){     const names = [       'markSearchForm','useReceiptsSwitch','scrapeUrlInput',       'summaryModal','summaryJsonInput','saveSummaryForm',       'scrapeUrlField','scrapeCategoryField','scrapeForceField'     ];     const out = {};     names.forEach(n => out[n] = !!document.getElementById(n));     safeLog('DOM presence', out);   }   document.addEventListener('DOMContentLoaded', function(){ checkDom(); });    // Hook markSearchForm submit   const msf = document.getElementById('markSearchForm');   if(msf){     msf.addEventListener('submit', function(e){       try{         const useReceipts = !!(document.getElementById('useReceiptsSwitch') && document.getElementById('useReceiptsSwitch').checked);         safeLog('markSearchForm.submit fired', 'useReceipts=', useReceipts, 'mark=', (document.getElementById('markInput')?.value||''), 'urlInput=', (document.getElementById('scrapeUrlInput')?.value||''));       }catch(err){ safeLog('submit hook error', err); }     }, true);   } else safeLog('markSearchForm NOT FOUND');    // Hook receipts switch changes   const rs = document.getElementById('useReceiptsSwitch');   if(rs){     rs.addEventListener('change', function(e){       safeLog('useReceiptsSwitch change, checked=', rs.checked);       // show/hide created url input for visibility       const ui = document.getElementById('scrapeUrlInput');       if(ui) ui.style.outline = rs.checked ? '2px solid orange' : 'none';     });   } else safeLog('useReceiptsSwitch NOT FOUND');    // Monitor fetch to /api/scrape_receipt by wrapping fetch (only for debugging)   const origFetch = window.fetch;   window.fetch = async function(resource, init){     try{       if(typeof resource === 'string' && resource.indexOf('/api/scrape_receipt') !== -1){         safeLog('FETCH -> /api/scrape_receipt called', resource, init && init.body ? (init.body.length>100 ? init.body.slice(0,100)+'...' : init.body) : init);       }       if(typeof resource === 'string' && resource.indexOf('/api/confirm_receipt') !== -1){         safeLog('FETCH -> /api/confirm_receipt called', resource, init && init.body ? (function(){ try { return JSON.parse(init.body); } catch(e){ return init.body; } })() : init);         // Visual cue: flash border on modal         const m = document.getElementById('summaryModal');         if(m) { m.style.outline = '4px dashed lime'; setTimeout(()=>{ if(m) m.style.outline=''; }, 1200); }       }     }catch(e){ safeLog('fetch-wrap log failed', e); }     return origFetch.apply(this, arguments);   };    // Hook the saveSummaryForm submit (the interceptor should already exist in your code)   const ssf = document.getElementById('saveSummaryForm');   if(ssf){     ssf.addEventListener('submit', function(e){       try{         // show current fields         const summaryVal = (document.getElementById('summaryJsonInput')?.value) || null;         const scrapeUrl = document.getElementById('scrapeUrlField')?.value || null;         const scrapeCat = document.getElementById('scrapeCategoryField')?.value || null;         const scrapeForce = document.getElementById('scrapeForceField')?.value || null;         safeLog('saveSummaryForm.submit (intercept) summaryPresent=', !!summaryVal, 'scrapeUrl=', scrapeUrl, 'scrapeCat=', scrapeCat, 'scrapeForce=', scrapeForce);         // also pretty-print JSON if small         if(summaryVal){           try { safeLog('summary JSON', JSON.parse(summaryVal)); } catch(e){ safeLog('summary raw', summaryVal.slice(0,500)); }         }       }catch(err){ safeLog('saveSummaryForm submit hook error', err); }     }, true);   } else safeLog('saveSummaryForm NOT FOUND');    // When modal is shown/hidden, log it   const observer = new MutationObserver(function(muts){     try{       const modal = document.getElementById('summaryModal');       if(modal){         const style = window.getComputedStyle(modal);         if(style.display !== 'none'){           safeLog('summaryModal is visible');         } else {           // optional: safeLog('summaryModal is hidden');         }       }     }catch(e){ safeLog('mutation observer err', e); }   });   observer.observe(document.documentElement || document.body, { attributes: true, childList: true, subtree: true });    // Periodic sanity check: print whether modal and form are present every 2s for 6 checks   let checks = 0;   const interval = setInterval(function(){     checks++;     const present = {       modal: !!document.getElementById('summaryModal'),       summaryInput: !!document.getElementById('summaryJsonInput'),       saveForm: !!document.getElementById('saveSummaryForm'),       urlField: !!document.getElementById('scrapeUrlField')     };     safeLog('periodic-dom-check', present);     if(checks>6) clearInterval(interval);   }, 2000);    safeLog('RC-DEBUG injected'); })(); (function(){   function getSummaryData(){     const input = document.getElementById('summaryJsonInput');     if(!input) return null;     try {       const data = JSON.parse(input.value || '{}');       if(!Array.isArray(data.lines)) data.lines = [];       return { input, data };     } catch(e) {       return { input, data: { lines: [] } };     }   }    function saveSummaryData(obj){     if(!obj || !obj.input) return;     obj.input.value = JSON.stringify(obj.data);   }    // Click on category buttons (delegation)   document.addEventListener('click', function(ev){     const btn = ev.target.closest && ev.target.closest('.category-btn');     if(!btn) return;     ev.preventDefault();     // prevent other handlers (the "other modal" that opened)     try { ev.stopImmediatePropagation(); } catch(e){}     try { ev.stopPropagation(); } catch(e){}      const lid = btn.dataset.lineId || (btn.closest('[data-line-id]') && btn.closest('[data-line-id]').dataset.lineId) || '';     const cat = btn.dataset.cat || '';     if(!lid) return;      const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }      // toggle: if already set -> clear, else set     line.category = (String(line.category || '') === String(cat)) ? '' : String(cat);      // update button classes for that line     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.toggle('bg-sky-600', (b.dataset.cat === line.category));       b.classList.toggle('text-white', (b.dataset.cat === line.category));     });      // also update corresponding select if present     const sel = document.querySelector('select.expense-category[data-line-id="'+CSSescape(lid)+'"]');     if(sel) try { sel.value = line.category || ''; } catch(e){}      saveSummaryData(state);   }, true);    // change on line-selects   document.addEventListener('change', function(ev){     const sel = ev.target;     if(!sel || !sel.matches || !sel.matches('select.expense-category')) return;     const lid = sel.dataset.lineId || (sel.closest('[data-line-id]') && sel.closest('[data-line-id]').dataset.lineId) || '';     if(!lid) return;     const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }     line.category = String(sel.value || '');     // update any buttons     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.toggle('bg-sky-600', (b.dataset.cat === line.category));       b.classList.toggle('text-white', (b.dataset.cat === line.category));     });     saveSummaryData(state);   }, true);    // clear button (if exists)   document.addEventListener('click', function(ev){     const cb = ev.target.closest && ev.target.closest('#clearCategory');     if(!cb) return;     ev.preventDefault();     try { ev.stopImmediatePropagation(); } catch(e){}     const container = cb.closest('[data-line-id]') || document;     const lid = container && container.dataset && container.dataset.lineId ? container.dataset.lineId : '';     if(!lid) return;     const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }     line.category = '';     // update UI     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.remove('bg-sky-600','text-white');     });     const sel = document.querySelector('select.expense-category[data-line-id="'+CSSescape(lid)+'"]');     if(sel) sel.value = '';     saveSummaryData(state);   }, true);    // Ensure hidden input is up-to-date before normal form submit   const saveForm = document.getElementById('saveSummaryForm');   if(saveForm){     saveForm.addEventListener('submit', function(ev){       // just ensure input is stringified (handlers already update it live)       const s = getSummaryData();       if(s) saveSummaryData(s);       // allow normal submit (server-side will persist)     });   }    // small CSS.escape fallback used above   function CSSescape(s){     if(window.CSS && CSS.escape) return CSS.escape(s);     return String(s).replace(/([ #;?%&,.+*~\':"!^$[\]()=>|\/@])/g,'\\$1');   } })();  (function RC_AUTO_INJECT_SUMMARY_MODAL(){   try {     console.log('[RC-DEBUG] periodic-dom-check starting');      function exists(id){ return !!document.getElementById(id); }      const needs = {       modal: exists('summaryModal'),       summaryInput: exists('summaryJsonInput'),       saveForm: exists('saveSummaryForm'),       urlField: exists('scrapeUrlField')     };     console.log('[RC-DEBUG] DOM presence (before inject)', needs);      if (needs.modal && needs.summaryInput && needs.saveForm) {       console.log('[RC-DEBUG] All required DOM elements present, no injection needed');       return;     }      // Build modal HTML (minimal, matches server-side expected IDs)     const modalHtml = ` <div id="summaryModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">   <div class="bg-white rounded-lg shadow-lg w-full max-w-6xl p-6">     <div class="flex justify-between items-center mb-4">       <h3 class="text-lg font-semibold">Περίληψη Παραστατικού - <span id="summaryModalMark">MARK</span></h3>       <button id="modalCloseX" class="text-gray-500 text-xl font-bold">✕</button>     </div>      <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">       <div><strong>Α/Α Παραστατικού</strong><div id="summary_AA"></div></div>       <div><strong>ΑΦΜ</strong><div id="summary_AFM"></div></div>       <div><strong>Επωνυμία</strong><div id="summary_Name"></div></div>       <div><strong>Ημερομηνία</strong><div id="summary_issueDate"></div></div>       <div><strong>Τύπος Παραστατικού</strong><div id="summary_type_name"></div></div>       <div><strong>Καθαρή Αξία</strong><div id="summary_totalNetValue"></div></div>       <div><strong>ΦΠΑ</strong><div id="summary_totalVatAmount"></div></div>       <div><strong>Σύνολο</strong><div id="summary_totalValue"></div></div>     </div>      <h4 class="font-medium mt-4 mb-2">Γραμμές Παραστατικού (για χαρακτηρισμό)</h4>     <div id="summaryLinesContainer" class="overflow-auto max-h-96 border rounded p-2"></div>      <div class="mt-4 flex justify-between items-center">       <div class="text-sm text-gray-600">Σημείωση: οι κατηγορίες προέρχονται από τα settings του πελάτη.</div>       <div class="flex justify-end gap-2">         <form method="POST" action="{{ url_for('save_summary') }}" id="saveSummaryForm">           <input type="hidden" name="summary_json" id="summaryJsonInput" value='{}'>           <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση στο Cache</button>           <input type="hidden" id="scrapeUrlField" name="scrape_url" value="">           <input type="hidden" id="scrapeCategoryField" name="scrape_category" value="">           <input type="hidden" id="scrapeForceField" name="scrape_force" value="false">         </form>         <button id="modalCloseBtn" class="px-3 py-2 border rounded">Κλείσιμο</button>       </div>     </div>   </div> </div>`.trim();      // Inject into document.body     const wrapper = document.createElement('div');     wrapper.innerHTML = modalHtml;     // append at end of body so it does not break layout     document.body.appendChild(wrapper.firstChild);      // wire close buttons to hide modal (same behavior as original)     function hideModal(){       const m = document.getElementById('summaryModal');       if (m) m.style.display = 'none';       try { history.replaceState(null, '', location.pathname + (location.search || '') + location.hash); } catch(e){}     }     document.getElementById('modalCloseX')?.addEventListener('click', hideModal);     document.getElementById('modalCloseBtn')?.addEventListener('click', hideModal);      // Re-check presence     const needs_after = {       modal: exists('summaryModal'),       summaryInput: exists('summaryJsonInput'),       saveForm: exists('saveSummaryForm'),       urlField: exists('scrapeUrlField')     };     console.log('[RC-DEBUG] DOM presence (after inject)', needs_after);     console.log('[RC-DEBUG] Auto-injection done — the client flow should now find the modal and form.');    } catch (e) {     console.error('[RC-DEBUG] auto-inject error', e);   } })(); (function RC_POPULATE_SUMMARY_MODAL(){   try {     console.log('[RC-DEBUG] summary-populate init');      const summaryInput = document.getElementById('summaryJsonInput');     const modal = document.getElementById('summaryModal');     const markEl = document.getElementById('summaryModalMark');     const aaEl = document.getElementById('summary_AA');     const afmEl = document.getElementById('summary_AFM');     const nameEl = document.getElementById('summary_Name');     const issueEl = document.getElementById('summary_issueDate');     const typeEl = document.getElementById('summary_type_name');     const netEl = document.getElementById('summary_totalNetValue');     const vatEl = document.getElementById('summary_totalVatAmount');     const totEl = document.getElementById('summary_totalValue');     const linesContainer = document.getElementById('summaryLinesContainer');      if (!summaryInput) {       console.warn('[RC-DEBUG] summaryJsonInput NOT FOUND — modal will not populate');       return;     }     if (!modal) {       console.warn('[RC-DEBUG] summaryModal NOT FOUND — abort populate watcher');       return;     }      let lastVal = '';     function safeText(node, v){       if(!node) return;       node.textContent = (v === null || v === undefined) ? '' : String(v);     }      function renderLines(lines){       if(!linesContainer) return;       linesContainer.innerHTML = '';       if(!Array.isArray(lines) || lines.length === 0){         const p = document.createElement('div'); p.className = 'p-2 text-sm text-gray-600'; p.textContent = 'Δεν βρέθηκαν γραμμές.';         linesContainer.appendChild(p);         return;       }        // build a small table       const tbl = document.createElement('table');       tbl.className = 'w-full text-sm';       tbl.style.borderCollapse = 'collapse';       const thead = document.createElement('thead');       thead.innerHTML = '<tr><th class="p-1 border text-left">#</th><th class="p-1 border text-left">Περιγραφή</th><th class="p-1 border text-right">Ποσό</th><th class="p-1 border text-right">ΦΠΑ</th></tr>';       tbl.appendChild(thead);       const tbody = document.createElement('tbody');       lines.forEach((ln, idx) => {         const tr = document.createElement('tr');         tr.innerHTML = `<td class="p-1 border text-left">${idx+1}</td>                         <td class="p-1 border text-left">${(ln.description||ln.desc||'').toString().slice(0,200)}</td>                         <td class="p-1 border text-right">${ln.amount||ln.lineTotal||''}</td>                         <td class="p-1 border text-right">${ln.vat||ln.vatRate||''}</td>`;         tbody.appendChild(tr);       });       tbl.appendChild(tbody);       linesContainer.appendChild(tbl);     }      function populateOnce(){       try {         const v = (summaryInput.value || '').trim();         if (!v) {           // nothing to show           return;         }         if (v === lastVal) return;         lastVal = v;         let obj = {};         try { obj = JSON.parse(v); } catch(err){           console.warn('[RC-DEBUG] failed parsing summaryJsonInput JSON', err, v);           return;         }         console.log('[RC-DEBUG] populate modal from summary JSON', obj);          safeText(markEl, obj.mark || obj.MARK || (obj.raw && obj.raw.MARK) || '');         safeText(aaEl, obj.AA || obj.aa || obj.progressive_aa || (obj.raw && obj.raw.progressive_aa) || '');         safeText(afmEl, obj.AFM_issuer || obj.AFM || obj.issuer_vat || (obj.raw && obj.raw.issuer_vat) || '');         safeText(nameEl, obj.Name || obj.Name_issuer || obj.issuer_name || (obj.raw && obj.raw.issuer_name) || '');         safeText(issueEl, obj.issueDate || obj.issue_date || (obj.raw && obj.raw.issue_date) || '');         safeText(typeEl, obj.type_name || obj.type || (obj.raw && obj.raw.doc_type) || '');         safeText(netEl, obj.totalNetValue || obj.total_amount || obj.totalValue || (obj.raw && obj.raw.total_amount) || '');         safeText(vatEl, obj.totalVatAmount || (obj.raw && obj.raw.totalVatAmount) || '');         safeText(totEl, obj.totalValue || obj.total_amount || (obj.raw && obj.raw.total_amount) || '');          // lines         let lines = [];         if (Array.isArray(obj.lines) && obj.lines.length) lines = obj.lines;         else if (obj.raw && Array.isArray(obj.raw.lines) && obj.raw.lines.length) lines = obj.raw.lines;         else if (obj.lines && typeof obj.lines === 'object') {           // sometimes backend sends object: try to collect values           try {             lines = Object.values(obj.lines).filter(x => x);           } catch(e){}         }         renderLines(lines);          // if modal is hidden, ensure it's visible when populate invoked by scraper flow         try {           if (modal && modal.style.display === 'none') {             if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }           }         } catch(e){}        } catch(e){         console.error('[RC-DEBUG] populateOnce error', e);       }     }      // Start polling for changes to summaryJsonInput.value     const poll = setInterval(populateOnce, 250);      // Also populate when modal opens (observe style attribute)     const obs = new MutationObserver(muts => {       for(const m of muts){         if (m.type === 'attributes' && m.attributeName === 'style'){           try { if (modal.style.display !== 'none') populateOnce(); } catch(e){}         }       }     });     try { obs.observe(modal, { attributes: true, attributeFilter: ['style'] }); } catch(e){}      // expose a debug function on window to force populate     window.RC_forcePopulateSummaryModal = populateOnce;      console.log('[RC-DEBUG] summary-populate watcher started');      // Optional: stop polling after N seconds to be tidy     setTimeout(()=>{ clearInterval(poll); console.log('[RC-DEBUG] stopped summary-populate polling (timeout)'); }, 60*1000);    } catch (err) {     console.error('[RC-DEBUG] summary-populate init failed', err);   } })();  (function RC_FORCE_MODAL_GUARD(){   try {     const dbg = (...a) => { try { console.log('[RC-MODAL-GUARD]', ...a); } catch(e) {} };      function parseSummary() {       const el = document.getElementById('summaryJsonInput');       if (!el) return {};       try { return JSON.parse(el.value || '{}') || {}; } catch(e){ dbg('parseSummary JSON error', e); return {}; }     }      function hasMeaningfulSummary(obj) {       if (!obj || typeof obj !== 'object') return false;       // important single fields that guarantee modal should open       const keys = ['mark','MARK','AFM_issuer','AFM','totalValue','totalNetValue','total_amount','issueDate','issue_date','progressive_aa','AA'];       for (const k of keys) {         if (obj[k] !== undefined && obj[k] !== null && String(obj[k]).trim() !== '') return true;       }       // check raw.* fields if present       if (obj.raw && typeof obj.raw === 'object') {         for (const k of ['MARK','issuer_vat','total_amount','issue_date','progressive_aa']) {           if (obj.raw[k] !== undefined && obj.raw[k] !== null && String(obj.raw[k]).trim() !== '') return true;         }       }       // lines array with at least one non-empty line       if (Array.isArray(obj.lines) && obj.lines.length) {         for (const ln of obj.lines) {           if (!ln) continue;           if ((ln.description && String(ln.description).trim() !== '') ||               (ln.amount && String(ln.amount).trim() !== '') ||               (ln.id && String(ln.id).trim() !== '')) return true;         }       }       // fallback: object with >1 non-empty keys       const nonEmpty = Object.keys(obj).filter(k=>{         try { return obj[k] !== null && obj[k] !== undefined && String(obj[k]).trim() !== ''; } catch(e){ return false; }       });       return nonEmpty.length > 1;     }      function ensureModalHiddenUnlessMeaningful() {       const modal = document.getElementById('summaryModal');       const summaryEl = document.getElementById('summaryJsonInput');       if (!modal || !summaryEl) { dbg('no modal/summaryEl present'); return; }        // Force-hide now (neutralize server/client auto-show)       try { modal.style.display = 'none'; } catch(_) {}        // If summary becomes meaningful, show it (and populate watcher should fill fields)       const checkAndMaybeShow = () => {         const obj = parseSummary();         if (hasMeaningfulSummary(obj)) {           dbg('summary meaningful -> showing modal', obj);           try {             // try to trigger your populate logic if present             if (window.RC_forcePopulateSummaryModal) {               try { window.RC_forcePopulateSummaryModal(); } catch(e){ dbg('RC_forcePopulateSummaryModal failed', e); }             } else if (typeof populateSummaryModal === 'function') {               try { populateSummaryModal(obj); } catch(e){ dbg('populateSummaryModal failed', e); }             }             if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }           } catch(e){ dbg('show modal failed', e); }         } else {           // keep hidden           dbg('summary not meaningful -> keep modal hidden');           try { modal.style.display = 'none'; } catch(_) {}         }       };        // run immediate check after tiny delay (let other init finish)       setTimeout(checkAndMaybeShow, 60);        // observe changes to summaryJsonInput.value (detect writes by other code)       try {         let lastVal = summaryEl.value || '';         const poll = setInterval(() => {           try {             const cur = summaryEl.value || '';             if (cur !== lastVal) {               lastVal = cur;               dbg('summaryJsonInput changed -> recheck');               checkAndMaybeShow();             }           } catch(e){ dbg('poll error', e); }         }, 200);         // auto-stop polling after 60s         setTimeout(()=>clearInterval(poll), 60*1000);       } catch(e){ dbg('poll install failed', e); }        // observe modal style changes by others: if someone tries to open it while summary not meaningful, immediately hide       try {         const mo = new MutationObserver(muts => {           try {             const obj = parseSummary();             if (!hasMeaningfulSummary(obj)) {               const modalEl = document.getElementById('summaryModal');               if (modalEl) {                 const disp = window.getComputedStyle(modalEl).display;                 if (disp !== 'none') {                   dbg('modal was opened by other code while summary not meaningful -> hiding it');                   modalEl.style.display = 'none';                 }               }             }           } catch(e){ dbg('mutation observer callback error', e); }         });         const modalNode = document.getElementById('summaryModal');         if (modalNode) mo.observe(modalNode, { attributes: true, attributeFilter: ['style', 'class'] });       } catch(e){ dbg('mutation observer install failed', e); }     }      // Run after DOM ready (also run if DOM already ready)     if (document.readyState === 'loading') {       document.addEventListener('DOMContentLoaded', ensureModalHiddenUnlessMeaningful);     } else {       setTimeout(ensureModalHiddenUnlessMeaningful, 10);     }      dbg('RC_FORCE_MODAL_GUARD installed');   } catch(err) {     try { console.error('[RC-MODAL-GUARD] init failed', err); } catch(e){}   } })();  document.addEventListener('click', function(ev){   const btn = ev.target.closest('.category-btn');   if(!btn) return;    // 1) Αποτροπή bubbling για να μην ανοίγει άλλο modal   ev.preventDefault();   try { ev.stopImmediatePropagation(); } catch(e){}   try { ev.stopPropagation(); } catch(e){}    // 2) Ενημέρωση κουμπιών (UI)   const lineId = btn.dataset.lineId;   const cat = btn.dataset.cat;   const siblings = btn.parentElement.querySelectorAll('.category-btn');   siblings.forEach(s => s.classList.remove('bg-sky-600','text-white'));   btn.classList.add('bg-sky-600','text-white');    // 3) Ενημέρωση του select για compatibility   const sel = document.querySelector('select.expense-category[data-line-id="'+lineId+'"]');   if(sel) sel.value = cat;    // 4) Ενημέρωση του hidden JSON input   const input = document.getElementById('summaryJsonInput');   if(!input) return;   let data = {};   try { data = JSON.parse(input.value || '{}'); } catch(e){ data = {}; }    // Ensure lines array exists   if(!Array.isArray(data.lines)) data.lines = [];    // Update or add line   let line = data.lines.find(l => String(l.id || l.line_id || '') === lineId);   if(!line){     line = {id: lineId};     data.lines.push(line);   }   line.category = cat; // <--- εδώ γράφεται η κατηγορία    // Save back   input.value = JSON.stringify(data); });  document.querySelectorAll('.category-btn').forEach(btn=>{   btn.addEventListener('click', function(ev){     ev.preventDefault(); // δεν χρειάζεται stopPropagation      const lineId = this.dataset.lineId;     const cat = this.dataset.cat;      // Αποτύπωση UI     const siblings = this.parentElement.querySelectorAll('.category-btn');     siblings.forEach(s => s.classList.remove('bg-sky-600','text-white'));     this.classList.add('bg-sky-600','text-white');      // Ενημέρωση select για συμβατότητα     const sel = document.querySelector('select.expense-category[data-line-id="'+lineId+'"]');     if(sel) sel.value = cat;      // Ενημέρωση summaryJsonInput     const input = document.getElementById('summaryJsonInput');     if(!input) return;     let data = {};     try { data = JSON.parse(input.value || '{}'); } catch(e){ data={}; }     if(!Array.isArray(data.lines)) data.lines = [];     let line = data.lines.find(l => String(l.id||l.line_id||'')===lineId);     if(!line){       line = {id: lineId};       data.lines.push(line);     }     line.category = cat;     input.value = JSON.stringify(data);      // !!! Σημαντικό: μην καλείς stopPropagation εδώ !!!     // Άλλο modal handler θα πρέπει να φιλτράρει ποιο στοιχείο το ενεργοποιεί   }); }); document.addEventListener('click', function(ev){   // Αν το click προέρχεται από κουμπί category, αγνόησε   if(ev.target.closest('.category-btn')) return;    // άλλος κώδικας που ανοίγει modal });      // === Frontend patch: enrich delete_invoices POST + clear client-side cache === document.addEventListener('submit', function(ev){   try{     const form = ev.target;     if(!form || !form.action) return;     // Match delete_invoices endpoint (relative or absolute)     const a = document.createElement('a'); a.href = form.action;     const path = (a.pathname || '') + (a.search || '');     if(!/delete_invoices/.test(path)) return;      // 1) Ensure active_vat is posted     const existingHv = form.querySelector('input[name="active_vat"]');     if(!existingHv){       const hv = document.createElement('input');       hv.type = 'hidden';       hv.name = 'active_vat';       const activeVat = (document.querySelector('#vatSelector')?.value                       || document.querySelector('[name="vat"]')?.value                       || document.body.dataset.activeVat                       || '').toString().trim();       hv.value = activeVat;       form.appendChild(hv);     }      // 2) Collect marks to delete     let marks = Array.from(form.querySelectorAll('input[name="delete_mark"]')).map(i => (i.value||'').trim()).filter(Boolean);     if(!marks.length){       marks = Array.from(document.querySelectorAll('input[name="delete_mark"]:checked')).map(i => (i.value||'').trim()).filter(Boolean);     }      // 3) Clear client-side caches (localStorage keys that reference these MARKs)     try{       marks.forEach(mk => {         // common per-mark keys         localStorage.removeItem(`epsilon_summary_${mk}`);         localStorage.removeItem(`EPSILON:INV:${mk}`);       });       // any key containing one of the marks       for(let i=localStorage.length-1; i>=0; i--){         const k = localStorage.key(i);         if(!k) continue;         if(marks.some(mk => k.includes(mk))){           localStorage.removeItem(k);         }       }       // also clear any prefilled summary hidden input to avoid stale reopen       const sumInp = document.getElementById('summaryJsonInput');       if(sumInp) sumInp.value = '';     }catch(e){ /* ignore storage errors */ }    }catch(err){     console.warn('delete_invoices frontend patch failed', err);   } }, true); (function receiptsRepeatModalGuard(){   const once = { submitted:false };    function qs(id){ return document.getElementById(id); }    function readSummary(){     try { return JSON.parse(qs('summaryJsonInput')?.value || '{}'); }     catch(_) { return {}; }   }    function isMeaningfulSummary(o){     try{       if (!o || typeof o!=='object') return false;       const mark = String(o.mark || o.MARK || '').trim();       if (!mark || mark.length<6) return false;       const lines = Array.isArray(o.lines) ? o.lines : [];       if (lines.length===0) return false;       return lines.some(l=>{         if(!l) return false;         const desc=(l.description||l.desc||'').toString().trim();         const amt =(l.amount||l.lineTotal||l.total||'').toString().trim();         const id  =(l.id||l.line_id||'').toString().trim();         return !!(desc||amt||id);       });     }catch(_){ return false; }   }    function isReceiptSummary(o){     try{       const t = (o.type_name || o.type || '').toString().toLowerCase();       const c = (o.category || o.characteristic || o['χαρακτηρισμός'] || '').toString().toLowerCase();       return !!(o.is_receipt || t.includes('απόδει') || t.includes('receipt') || t.includes('λιαν') || c==='αποδειξακια');     }catch(_){ return false; }   }    function forceEdit(){     try { return new URLSearchParams(location.search).get('force_edit') === '1'; }     catch(_){ return false; }   }    function shouldOpenSummaryModal(obj){     const receiptsOn = !!(qs('useReceiptsSwitch') && qs('useReceiptsSwitch').checked);     const repeatOn   = !!(qs('repeatEntrySwitch') && qs('repeatEntrySwitch').checked);     // Αν είμαστε σε αποδείξεις (ή το summary είναι απόδειξη) και repeat ON και ΔΕΝ είναι reclassification -> ΜΗΝ ανοίξεις modal     if ((receiptsOn || isReceiptSummary(obj)) && repeatOn && !forceEdit()) return false;     return true;   }    function autoSubmitReceipt(obj){     if (once.submitted) return;                       // το στείλαμε ήδη σε αυτόν τον κύκλο     if (!isMeaningfulSummary(obj)) return;            // ασφαλιστική δικλείδα     const mark = (obj.mark || obj.MARK || '').toString().trim();     if (!mark) return;     const key = 'rc-auto:' + mark;     if (sessionStorage.getItem(key)) return;          // ήδη υποβλήθηκε μετά από reload      // Επέβαλε “Αποδειξάκια”     try{       if (!Array.isArray(obj.lines)) obj.lines = [];       obj.is_receipt = true;       obj.category = 'αποδειξακια';       obj.characteristic = 'αποδειξακια';       obj['χαρακτηρισμός'] = 'αποδειξακια';       qs('summaryJsonInput').value = JSON.stringify(obj);     }catch(_){}      const form = qs('saveSummaryForm');     if (!form) return;     once.submitted = true;     sessionStorage.setItem(key,'1');                 // ώστε στο επόμενο reload να ΜΗΝ ξαναστείλει     form.submit();   }    // Φρένο: ΜΗΝ υποβάλλεις την search-form χωρίς mark KAI χωρίς url   (function guardEmptySearchSubmit(){     const form = qs('markSearchForm');     if (!form) return;     form.addEventListener('submit', (e)=>{       const mark = (qs('markInput')?.value || '').trim();       const url  = (qs('scrapeUrlInput')?.value || '').trim();       if (!mark && !url) e.preventDefault();     }, true);   })();    // Παρακολούθησε το modal: αν πάει να ανοίξει ενώ ΔΕΝ πρέπει, κλείστο και κάνε auto-submit   const modal = qs('summaryModal');   if (!modal) return;    const observer = new MutationObserver(function(){     try{       const visible = modal && getComputedStyle(modal).display !== 'none';       if (!visible) return;       const obj = readSummary();       if (!shouldOpenSummaryModal(obj)) {         // Μπλόκαρε το modal και προχώρησε σε auto-submit         modal.style.display = 'none';         autoSubmitReceipt(obj);       }     }catch(_){}   });    try{     observer.observe(modal, { attributes:true, attributeFilter:['style','class'] });   }catch(_){}    // One-shot check αν τυχόν ξεκινά ήδη ανοιχτό   setTimeout(()=>{     try{       const visible = modal && getComputedStyle(modal).display !== 'none';       const obj = readSummary();       if (visible && !shouldOpenSummaryModal(obj)) {         modal.style.display = 'none';         autoSubmitReceipt(obj);       }     }catch(_){}   }, 80); })();  </script>  <style>     /* minimal styling for the toggle switch */     /* μόνο για modal */     .modal-summary-table th {         background-color: #0d6efd;         color: white;         border: 1px solid #ccc;     }      .modal-summary-table td {         border: 1px solid #e2e8f0;     }      .modal-summary-table tr:nth-child(even) {         background-color: #f9fafb;     }      .modal-summary-table tr:hover {         background-color: #e6f0ff;     }      .modal-summary-table tfoot td {         background-color: #f1f5f9;     }      /* κλείδωμα κλικ πίσω από modal */     .modal-backdrop {         position: fixed;         inset: 0;         background: rgba(0,0,0,.45);         z-index: 99998;     }      #summaryModal {         z-index: 99999;         position: fixed;         inset: 0;         display: none;         align-items: center;         justify-content: center;     }          #summaryModal.show {             display: flex;         }      body.modal-open #page-root {         pointer-events: none;     }     /* βάλε id=page-root στο κύριο wrapper της σελίδας */     body.modal-open #summaryModal,     body.modal-open #summaryModal * {         pointer-events: auto;     }      .toggle-switch {         width: 42px;         height: 24px;         -webkit-appearance: none;         appearance: none;         background: #e5e7eb;         border-radius: 999px;         position: relative;         outline: none;         cursor: pointer;         vertical-align: middle;     }          .toggle-switch:checked {             background: #0ea5a4;         }          .toggle-switch::after {             content: "";             position: absolute;             top: 3px;             left: 3px;             width: 18px;             height: 18px;             border-radius: 999px;             background: white;             transition: transform .15s ease;         }          .toggle-switch:checked::after {             transform: translateX(18px);         } </style>    <script>/* ===== Auto-submit segmented toggle + guarded auto-detect (receipts & invoices) ===== */ (function(){   try {     // Globals     window.__RC_FLAGS  = window.__RC_FLAGS  || {};     window.__RC_LOCKS  = window.__RC_LOCKS  || {};     const AUTO_KEY = 'rc:autoSubmitEnabled';      // UI refs (may be absent in some partial renders)     const form     = document.getElementById('markSearchForm');     const markEl   = document.getElementById('markInput');     const urlEl    = document.getElementById('scrapeUrlInput'); // may be dynamically created in your code     const btnOn    = document.getElementById('autoSubmitBtnOn');     const btnOff   = document.getElementById('autoSubmitBtnOff');     const receiptsSwitch = document.getElementById('useReceiptsSwitch');      // State helpers     function getAuto(){ try { return localStorage.getItem(AUTO_KEY) === '1'; } catch(_) { return false; } }     function setAuto(v){   try { localStorage.setItem(AUTO_KEY, v ? '1' : '0'); } catch(_) {}   window.__RC_FLAGS.auto_submit_enabled = !!v;   updateUi();    // reload με συγχρονισμό querystring   try {     const p = new URLSearchParams(location.search);     if (v) p.set('auto_submit','1'); else p.delete('auto_submit');     const newQS = p.toString();     const cur  = location.pathname + location.search;     const next = location.pathname + (newQS ? '?' + newQS : '');     if (next === cur) {       location.reload();          // αν δεν αλλάζει το URL, αναγκαστικό reload     } else {       location.search = newQS;    // αλλάζοντας το query κάνει reload μόνο του     }   } catch (e) {     location.reload();   } }      function updateUi(){       const on = getAuto();       if (btnOn && btnOff) {         btnOn.classList.toggle('bg-sky-600', on);         btnOn.classList.toggle('text-white', on);         btnOff.classList.toggle('bg-sky-600', !on);         btnOff.classList.toggle('text-white', !on);       }     }     updateUi();     if (btnOn)  btnOn.addEventListener('click', ()=> setAuto(true));     if (btnOff) btnOff.addEventListener('click', ()=> setAuto(false));      // Utilities     function isVisible(el){       if(!el) return false;       const cs = getComputedStyle(el);       return !(cs.display === 'none' || cs.visibility === 'hidden' || cs.opacity === '0');     }     function warningOpen(){       const ids = ['receiptWarn','afmWarningModal','receiptWarningModal','yearWarningModal'];       for (const id of ids){ const el = document.getElementById(id); if (el && isVisible(el)) return true; }       // generic: any visible dialog that is not the summary modal       const nodes = document.querySelectorAll('[role="dialog"],[aria-modal="true"],.modal,.modal-root');       for (const n of nodes){         if (!isVisible(n)) continue;         if (n.id === 'summaryModal' || n.id === 'receiptsModal') continue;         const t = (n.textContent || '').toLowerCase();         if (/\bπροειδοπ|\bπροσοχ|warning|σφάλμα|error/.test(t)) return true;       }       return false;     }      const normMark = v => (v||'').replace(/\D/g,'');     const isMark   = v => normMark(v).length === 15;     const isUrl    = v => {       const s = (v||'').trim();       return /^https?:\/\/\S+/i.test(s) || /^www\.\S+/i.test(s);     };     const extractMark = s => {       const m = String(s||'').match(/\b(\d{15})\b/);       return m ? m[1] : '';     };      function currentKey(){       const mv = (markEl && markEl.value) ? markEl.value.trim() : '';       const uv = (document.getElementById('scrapeUrlInput')?.value || '').trim(); // requery in case it was injected after       const receipts = !!(receiptsSwitch && receiptsSwitch.checked);        // For receipts: prefer a URL, but accept MARK inside URL as fallback       if (receipts) {         if (isUrl(uv)) return 'url:'+uv.replace(/\/+$/,'');         const ex = extractMark(uv); if (ex) return 'mark:'+ex;         // also allow mark typed in markInput if user didn't switch field         if (isMark(mv)) return 'mark:'+normMark(mv);         return null;       }        // For invoices: prefer MARK; but accept URL too       if (isMark(mv)) return 'mark:'+normMark(mv);       if (isUrl(mv)) return 'url:'+mv.replace(/\/+$/,'');       return null;     }      let pending = false;     const KEY_LAST = 'rc:lastSubmitKey';     const TTL_MS   = 20000;     function readLast(){       try {         const raw = sessionStorage.getItem(KEY_LAST);         if(!raw) return null;         const o = JSON.parse(raw);         if(!o || !o.ts || (Date.now()-o.ts)>TTL_MS) return null;         return o.k || null;       }catch(_){ return null; }     }     function writeLast(k){       try { sessionStorage.setItem(KEY_LAST, JSON.stringify({k, ts: Date.now()})); } catch(_) {}     }      const debounce = (fn,ms)=>{ let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a),ms); }; };      function trySubmit(){       if (!form || !getAuto()) return;       if (warningOpen()) return;       const k = currentKey();       if (!k) return;        // prevent collisions with existing receipts lock if present       if (window.__RC_LOCKS && window.__RC_LOCKS.scrape) return;        // prevent duplicate submits on same key       const last = readLast();       if (last && last === k) return;        // submit once       writeLast(k);       if (pending) return;       pending = true;       try {         if (form.requestSubmit) form.requestSubmit(); else form.submit();       } finally {         setTimeout(()=>{ pending=false; }, 500);       }     }      const onChange = debounce(trySubmit, 140);      // Wire inputs if present     if (markEl) {       markEl.addEventListener('input', onChange);       markEl.addEventListener('keyup', onChange);       markEl.addEventListener('paste', ()=>setTimeout(onChange,0));     }     // url input could be injected later; observe for appearance     let tries = 30;     const iv = setInterval(()=>{       const u = document.getElementById('scrapeUrlInput');       if (u) {         u.addEventListener('input', onChange);         u.addEventListener('keyup', onChange);         u.addEventListener('paste', ()=>setTimeout(onChange,0));         clearInterval(iv);       }       if(--tries<=0) clearInterval(iv);     }, 200);      // Initial pass (for browser autofill)     window.addEventListener('load', ()=> setTimeout(onChange, 60));      // Ensure a stub exists to avoid ReferenceError when other code calls it     if (typeof window.autoSubmitReceipt !== 'function') {       window.autoSubmitReceipt = function(){ /* stub to avoid ReferenceError; actual flow handled elsewhere */ };     }   } catch (err) {     console.warn('Auto-submit toggle patch failed', err);   } })();</script>  <script>/* === Persist Receipts/Invoices toggle across refresh === */ <script> /* === Persist Receipts/Invoices toggle across refresh (v2) === */ (function persistReceiptsToggle(){   const KEY = 'rc:useReceipts';   const sw  = document.getElementById('useReceiptsSwitch');   const markInput = document.getElementById('markInput');   function ensureUrlInput(){     let el = document.getElementById('scrapeUrlInput');     if (!el) {       // try to locate after markInput if dynamically created later by other code       el = document.createElement('input');       el.id = 'scrapeUrlInput';       el.placeholder = 'Εισάγετε URL παραστατικού (για αποδείξεις)';       el.className = 'p-2 border rounded w-2/4 hidden';       el.type = 'text';       if (markInput && markInput.parentElement) {         markInput.parentElement.insertBefore(el, markInput.nextSibling);       } else {         document.body.appendChild(el);       }     }     return el;   }   function applyUI(isReceipts){     const urlInput = ensureUrlInput();     if (isReceipts){       markInput && markInput.classList.add('hidden');       urlInput && urlInput.classList.remove('hidden');     } else {       markInput && markInput.classList.remove('hidden');       urlInput && urlInput.classList.add('hidden');     }   }    if (!sw) return;   // restore saved value   const saved = localStorage.getItem(KEY);   if (saved !== null) sw.checked = (saved === '1');   applyUI(sw.checked);    // if URL input appears later (other scripts), re-apply for a short window   let tries = 20;   const iv = setInterval(()=>{     applyUI(sw.checked);     if (--tries <= 0) clearInterval(iv);   }, 200);    sw.addEventListener('change', () => {     localStorage.setItem(KEY, sw.checked ? '1' : '0');     applyUI(sw.checked);   }); })();</script>  <script>/* === Lightweight warning detector (client/server modals) === */ (function ensureWarningOpenHelper(){   if (typeof window.__rc_warningOpen === 'function') return;   window.__rc_warningOpen = function(){     function vis(el){ if(!el) return false; const cs=getComputedStyle(el); return !(cs.display==='none'||cs.visibility==='hidden'||cs.opacity==='0'); }     const ids=['receiptWarn','afmWarningModal','receiptWarningModal','yearWarningModal'];     for (const id of ids){ const el=document.getElementById(id); if (el && vis(el)) return true; }     const nodes=document.querySelectorAll('[role="dialog"],[aria-modal="true"],.modal,.modal-root');     for (const n of nodes){       if (!vis(n)) continue;       if (n.id==='summaryModal' || n.id==='receiptsModal') continue;       const t=(n.textContent||'').toLowerCase();       if (/(προειδοπ|προσοχ|warning|σφάλμα|error)/.test(t)) return true;     }     return false;   }; })();</script>  <script> /* === RC helpers μόνο για flow Αποδείξεων === */ window.RC = window.RC || {};  RC.hasWarnings = function(){ return (typeof window.__rc_warningOpen === 'function') ? window.__rc_warningOpen() : false; };  RC.normalizeReceiptSummary = function (summaryObj) {   summaryObj.is_receipt = true;   summaryObj.type = summaryObj.type || 'ΑΠΟΔΕΙΞΗ';   summaryObj.type_name = summaryObj.type_name || 'ΑΠΟΔΕΙΞΗ';   summaryObj.category = 'αποδειξακια';   if (!Array.isArray(summaryObj.lines) || !summaryObj.lines.length) {     const tot = summaryObj.total_amount || summaryObj.totalValue || summaryObj.totalNetValue || '';     summaryObj.lines = [{ id:'r0', description:'', amount:String(tot||''), vat:'', vatCategory:'', category:'αποδειξακια' }];   } else {     summaryObj.lines = summaryObj.lines.map((l,i)=>({       id: String(l?.id || l?.line_id || ('r'+i)),       description: String(l?.description || l?.desc || ''),       amount: String(l?.amount || l?.lineTotal || l?.total || ''),       vat: String(l?.vat || l?.vatRate || ''),       vatCategory: String(l?.vatCategory || l?.vat_category || ''),       category: String(l?.category || '') || 'αποδειξακια'     }));   }   return summaryObj; };  RC.confirmReceiptOnce = async function(summaryObj, scrapeUrl){   window.__RC_LOCKS = window.__RC_LOCKS || {};   if (window.__RC_LOCKS.confirm) return { ok:false, reason:'locked' };   window.__RC_LOCKS.confirm = true;    try {     const VAT = "{{ vat or '' }}";     const afmVal = (VAT || summaryObj.AFM_issuer || summaryObj.AFM || (summaryObj.raw && summaryObj.raw.issuer_vat) || '').toString().trim();     if (!afmVal) return { ok:false, reason:'missing_afm' };      if (!/\b\d{15}\b/.test(String(summaryObj.mark||'').trim())) {       const r = await fetch('/api/next_receipt_mark', { credentials:'same-origin' });       const j = await r.json().catch(()=>null);       if (j && j.mark) summaryObj.mark = j.mark;     }      let yearVal = "{{ active_year|default('') }}";     if (!yearVal) {       try { const fy = await fetch('/get_fiscal_year', { credentials:'same-origin' }); const fyj = await fy.json(); if (fyj && fyj.exists) yearVal = String(fyj.fiscal_year); } catch(_){}     }     if (!yearVal) {       const any = summaryObj.issueDate || summaryObj.issue_date || (summaryObj.raw && summaryObj.raw.issue_date) || '';       const m = String(any).match(/\b(19|20)\d{2}\b/);       yearVal = m ? m[0] : String((new Date()).getUTCFullYear());     }      const payload = {       url: (scrapeUrl||'').trim(),       summary_json: JSON.stringify(summaryObj),       force: false,       category: 'αποδειξακια',       afm: afmVal,       year: String(yearVal),       mark: String(summaryObj.mark||'')     };      const res = await fetch('/api/confirm_receipt', {       method: 'POST',       credentials: 'same-origin',       headers: {'Content-Type':'application/json','X-Requested-With':'XMLHttpRequest'},       body: JSON.stringify(payload)     });     const jj = await res.json().catch(()=>null);     if (!res.ok || !jj || !jj.ok) return { ok:false, reason: (jj&&jj.error) || ('HTTP '+res.status) };      return { ok:true };   } finally {     window.__RC_LOCKS.confirm = false;   } };  RC.handleReceiptAfterScrape = async function(summaryObj, scrapeUrl){   try {     const repeatOn = !!document.getElementById('repeatEntrySwitch')?.checked;     const forceEdit = (typeof FORCE_EDIT !== 'undefined') ? !!FORCE_EDIT : false;     if (!repeatOn || forceEdit || RC.hasWarnings()) return false;      RC.normalizeReceiptSummary(summaryObj);     const summaryInput = document.getElementById('summaryJsonInput');     if (summaryInput) summaryInput.value = JSON.stringify(summaryObj);      const r = await RC.confirmReceiptOnce(summaryObj, scrapeUrl);     if (!r.ok) {       if (r.reason === 'missing_afm') {         window.openReceiptWarning && openReceiptWarning('Λείπει AFM ενεργού πελάτη.');       } else {         showFlash('Σφάλμα αποθήκευσης: ' + (r.reason || 'άγνωστο'), 'error', 6000);       }       return false;     }     window.__RC_FLAGS = window.__RC_FLAGS || {}; window.__RC_FLAGS.autoHandled = true;     showFlash('Αποθηκεύτηκε η απόδειξη (repeat).', 'success', 900);     try { document.getElementById('summaryModal').style.display = 'none'; } catch(_){}     try { document.getElementById('scrapeUrlInput').value = ''; } catch(_){}     try { document.getElementById('markInput').value = ''; } catch(_){}     window.location = window.location.pathname;     return true;   } catch (e) {     console.warn('handleReceiptAfterScrape failed', e);     return false;   } }; document.addEventListener('DOMContentLoaded', () => {   const params = new URLSearchParams(location.search);    const isReceipts =     (params.get('use_receipts') === '1') ||     (localStorage.getItem('pref_use_receipts') === '1');    const repeatOn =     (params.get('repeat') === '1') ||     (localStorage.getItem('pref_repeat') === '1');    const autoOn = params.has('auto_submit')     ? (params.get('auto_submit') === '1')     : (localStorage.getItem('pref_auto_submit') === '1');    if (!(isReceipts && repeatOn && autoOn)) return;    // 1) Κρύψε ό,τι modal επιβεβαίωσης υπάρχει για αποδείξεις   const hideModal = () => {     ['#receiptsModal', '#summaryModal', '[data-role="modal-warning"]', '#warningModal']       .forEach(sel => {         const el = document.querySelector(sel);         if (!el) return;         el.classList?.add('hidden');         el.style.display = 'none';       });   };   hideModal();    // 2) Βεβαιώσου ότι στο submit περνάει repeat_enabled=1   const ensureRepeatHidden = (form) => {     if (!form) return;     let h = form.querySelector('input[name="repeat_enabled"]');     if (!h) {       h = document.createElement('input');       h.type = 'hidden';       h.name = 'repeat_enabled';       form.appendChild(h);     }     h.value = '1';   };    // 3) Αυτόματο submit μόλις είναι έτοιμη η φόρμα/δεδομένα   let submitted = false;   const tryAutoSubmit = () => {     if (submitted) return;      // Βρες τη φόρμα αποθήκευσης     const form = document.querySelector('form[action$="/save_summary"]');     if (!form) return;      // Έλεγξε ότι υπάρχει payload: summary_json (input/textarea) ή τουλάχιστον το mark     const payloadEl = form.querySelector('input[name="summary_json"],textarea[name="summary_json"]');     const hasPayload = payloadEl ? String(payloadEl.value || '').trim().length > 0 : false;     const hasMark = String((form.querySelector('[name="mark"]') || {}).value || '').trim().length === 15;      if (!hasPayload && !hasMark) return;      ensureRepeatHidden(form);     submitted = true;     hideModal();     form.submit();   };    // Δοκίμασε άμεσα & με μικρό retry   tryAutoSubmit();   const i1 = setInterval(() => {     if (submitted) { clearInterval(i1); return; }     tryAutoSubmit();   }, 150);    // Παρακολούθησε DOM changes (όταν γεμίσει το modal/φόρμα από το fetch)   const mo = new MutationObserver(() => tryAutoSubmit());   mo.observe(document.body, { subtree: true, childList: true, attributes: false });    // Safety stop μετά από ~6s για να μην τρέχει για πάντα   setTimeout(() => mo.disconnect(), 6000); });  </script>  <script> /* === Receipts Repeat AutoSave (cache submit) — receipts-only, idempotent === */ (function(){   if (window.__rc_autosave_installed__) return;   window.__rc_autosave_installed__ = true;    function $id(id){ return document.getElementById(id); }   function lsGet(k,d){ try{ const v = localStorage.getItem(k); return v==null?d:v; }catch(_){ return d; } }   function lsSet(k,v){ try{ localStorage.setItem(k,v); }catch(_){ } }   function ssGet(k){ try{ return sessionStorage.getItem(k); }catch(_){ return null; } }   function ssSet(k,v){ try{ sessionStorage.setItem(k,v); }catch(_){ } }   function onceKey(mark){ return 'rc-cache:' + String(mark||'').trim(); }    function isReceipts(){ try{ var sw=$id('useReceiptsSwitch'); if (sw) return !!sw.checked; }catch(_){}                           return lsGet('UI:useReceipts','0')==='1'; }   function isRepeat(){   try{ var rsw=$id('repeatEntrySwitch'); if (rsw) return !!rsw.checked; }catch(_){}                           return lsGet('REPEAT:enabled','0')==='1'; }    function parseSummary(){     var el = $id('summaryJsonInput');     if (!el || !el.value || el.value === '{}' || el.value === 'null') return null;     try { return JSON.parse(el.value); } catch(_){ return null; }   }    function isReceiptSummary(s){     if (!s || typeof s!=='object') return false;     if (s.is_receipt === true) return true;     var t = String(s.type_name||s.type||'').toLowerCase();     if (t.includes('απόδει') || t.includes('receipt')) return true;     // fallback: when UI string shows "Λήφθηκε απόδειξη — ελέγξτε..."     var ui = String(s.ui_hint||'').toLowerCase();     if (ui.includes('λήφθηκε') && ui.includes('αποδεί')) return true;     return false;   }    function hasLines(s){ try{ return Array.isArray(s.lines) && s.lines.length>0; } catch(_){ return false; } }    function waitFor(fn, then, maxMs, step){     maxMs = maxMs || 6000; step = step || 120;     var waited = 0;     (function cycle(){       try{ if (fn()) { then(); return; } }catch(_){}       waited += step; if (waited >= maxMs) return;       setTimeout(cycle, step);     })();   }    function tryAutoSave(){     if (!isReceipts() || !isRepeat()) return;     var s = parseSummary();     if (!s || !isReceiptSummary(s) || !hasLines(s)) return;      var mark = String(s.mark || s.MARK || '').trim();     if (!mark) return;     if (ssGet(onceKey(mark))) return; // already submitted this cycle      var form = $id('saveSummaryForm');     if (!form) return;      // Normalize to αποδειξάκια before save, without touching invoices     try{       s.is_receipt = true;       s.category = s.category || 'αποδειξακια';       s.characteristic = s.characteristic || 'αποδειξακια';       if (!Array.isArray(s.lines)) s.lines = [];       s.lines = s.lines.map(function(l){ l=l||{}; l.category='αποδειξακια'; return l; });       $id('summaryJsonInput').value = JSON.stringify(s);     }catch(_){}      // Arm dedupe, keep receipts mode sticky     try { ssSet(onceKey(mark),'1'); } catch(_){}     lsSet('UI:useReceipts','1');      // Submit the cache form programmatically     try {       if (typeof form.requestSubmit === 'function') form.requestSubmit();       else form.submit();       // On navigation, allow next MARK to submit again       setTimeout(function(){ try{ ssSet(onceKey(mark), ''); }catch(_){} }, 2500);     } catch(e) {       console.warn('[RC-AUTOSAVE] submit failed', e);       try{ sessionStorage.removeItem(onceKey(mark)); }catch(_){}     }   }    document.addEventListener('DOMContentLoaded', function(){     // Reflect stored receipts state to the UI toggle early     try {       if (lsGet('UI:useReceipts','0')==='1') {         var sw = $id('useReceiptsSwitch');         if (sw && !sw.checked) { sw.checked = true; sw.dispatchEvent(new Event('change',{bubbles:true})); }       }     } catch(_){}      // Try immediately, microtask, and a short delay     tryAutoSave();     setTimeout(tryAutoSave, 0);     setTimeout(tryAutoSave, 300);      // Poll for hidden input changes produced by scraping     var el = $id('summaryJsonInput');     if (el){       var last = el.value;       setInterval(function(){         if (el.value !== last) { last = el.value; tryAutoSave(); }       }, 250);     }      // Re-run when receipts switch toggles on, or repeat toggles on     var r1 = $id('useReceiptsSwitch');     var r2 = $id('repeatEntrySwitch');     if (r1) r1.addEventListener('change', function(){ if (this.checked) setTimeout(tryAutoSave,10); });     if (r2) r2.addEventListener('change', function(){ if (this.checked) setTimeout(tryAutoSave,10); });      // When modal opens (if present), attempt again     var modal = $id('summaryModal');     if (modal && window.MutationObserver){       var mo = new MutationObserver(function(){ setTimeout(tryAutoSave, 20); });       try { mo.observe(modal, {attributes:true, childList:false, subtree:false}); } catch(_){}     }   }); })(); </script>  {% endblock %}  <!-- === BEGIN: Injected fix (v2) for receipts auto-flow & afm_epsilon cleanup === --> <script><script> /* RC-REPEAT-STATE bridge για Αποδείξεις & Τιμολόγια    - Διαβάζει το state από backend (/api/repeat_state/get) στην εκκίνηση    - Το περνάει και σε localStorage (REPEAT:enabled) & body dataset (data-repeat-enabled)    - Όταν αλλάζει ο διακόπτης repeatEntrySwitch, κάνει POST στο /api/repeat_state/set    - Στο submit της φόρμας αναζήτησης, κάνει ένα φρεσκάρισμα του state πριν τη ροή */ (function() {   const LS_KEY_REPEAT_ENABLED = 'REPEAT:enabled';    async function refreshRepeatState() {     try {       const r = await fetch('/api/repeat_state/get', { credentials: 'include' });       const j = await r.json();       const enabled = !!(j && j.ok && j.enabled);       localStorage.setItem(LS_KEY_REPEAT_ENABLED, enabled ? '1' : '0');       document.body.dataset.repeatEnabled = enabled ? '1' : '0';       window.REPEAT_ENABLED = enabled;        // συγχρόνισε και το switch αν υπάρχει       const sw = document.getElementById('repeatEntrySwitch');       if (sw) {         sw.checked = enabled;       }       console.debug('[RC-REPEAT-STATE] GET ->', { enabled });     } catch (e) {       console.warn('[RC-REPEAT-STATE] GET failed', e);     }   }    async function setRepeatEnabled(enabled) {     try {       const r = await fetch('/api/repeat_state/set', {         method: 'POST',         headers: { 'Content-Type': 'application/json' },         credentials: 'include',         body: JSON.stringify({ enabled: !!enabled })       });       const j = await r.json();       if (!j || !j.ok) throw new Error(j && j.error || 'unknown');       // persist τοπικά       localStorage.setItem(LS_KEY_REPEAT_ENABLED, enabled ? '1' : '0');       document.body.dataset.repeatEnabled = enabled ? '1' : '0';       window.REPEAT_ENABLED = !!enabled;       console.debug('[RC-REPEAT-STATE] SET ->', { enabled });     } catch (e) {       console.warn('[RC-REPEAT-STATE] SET failed', e);     }   }    // bootstrap: στην εκκίνηση   document.addEventListener('DOMContentLoaded', () => {     refreshRepeatState();     const sw = document.getElementById('repeatEntrySwitch');     if (sw) {       sw.addEventListener('change', function() {         setRepeatEnabled(this.checked);       });     }      // στο submit της αναζήτησης: κάνε ένα γρήγορο refresh για να «δει» σωστά το autosave των αποδείξεων     const form = document.getElementById('markSearchForm');     if (form) {       form.addEventListener('submit', () => {         // fire-and-forget, δεν μπλοκάρουμε το submit         refreshRepeatState();       });     }   }); })();</script>   (function(){   function isDetailed(x){     try{       if(!x || typeof x !== 'object') return false;       if (Array.isArray(x.lines) && x.lines.length) {         // any non-empty field in a line         for (const l of x.lines) {           if (l && (String(l.amount||'').trim() || String(l.description||'').trim() || String(l.vat||'').trim())) {             return true;           }         }       }       if (String(x.totalNetValue||'').trim() || String(x.totalValue||'').trim()) return true;       const t = (x.type||x.type_name||'').toString().toLowerCase();       if ((t.includes('απόδει') || t.includes('receipt')) && String(x.totalValue||'').trim()) return true;       return false;     }catch(e){ return false; }   }   function isReceipt(x){     try{       if (x && x.is_receipt) return true;       const t = (x?.type || x?.type_name || '').toString().toLowerCase();       if (t.includes('απόδει') || t.includes('receipt')) return true;       const ch = (x?.category || x?.χαρακτηρισμός || x?.characteristic || '');       return ch === 'αποδειξακια';     }catch(e){ return false; }   }   function prefer(a,b){     const da = isDetailed(a), db = isDetailed(b);     if (da && !db) return a;     if (db && !da) return b;     const la = Array.isArray(a?.lines) ? a.lines.length : 0;     const lb = Array.isArray(b?.lines) ? b.lines.length : 0;     if (lb > la) return b;     return a;   }   function sanitizeAfmEpsilon(arr){     try{       if(!Array.isArray(arr)) return arr;       const byMark = new Map();       for(const item of arr){         const m = String(item?.mark || '').trim();         if(!m) continue;         if(!byMark.has(m)) byMark.set(m, item);         else byMark.set(m, prefer(byMark.get(m), item));       }       let out = Array.from(byMark.values());       out = out.filter(isDetailed); // drop placeholders       return out;     }catch(e){       console.warn('sanitizeAfmEpsilon failed', e);       return arr;     }   }    // Clean global cache once   try { if (window.afm_epsilon) { window.afm_epsilon = sanitizeAfmEpsilon(window.afm_epsilon); } } catch(e){}    // Pick ONE receipt to submit when repeat+receipts is ON   function pickReceiptSummary(){     try{       // Priority 1: explicit modal summary if page defines it       if (window.modal_summary && isReceipt(window.modal_summary)) return window.modal_summary;       // Priority 2: data attribute on any modal container       const el = document.querySelector('[data-modal-summary]');       if (el){         try{           const obj = JSON.parse(el.getAttribute('data-modal-summary'));           if (isReceipt(obj)) return obj;         }catch(_){}       }       // Priority 3: last detailed receipt from afm_epsilon       const arr = Array.isArray(window.afm_epsilon) ? window.afm_epsilon.slice() : [];       const receipts = arr.filter(x => isReceipt(x) && isDetailed(x));       if (receipts.length) return receipts[receipts.length - 1];     }catch(e){ console.warn('pickReceiptSummary failed', e); }     return null;   }    try {     const repeatSwitch = document.getElementById('repeatEntrySwitch');     const useReceipts   = document.getElementById('useReceiptsSwitch');     const summaryInput  = document.getElementById('summaryJsonInput');     const saveForm      = document.getElementById('saveSummaryForm');     const auto = !!(useReceipts && useReceipts.checked) && !!(repeatSwitch && repeatSwitch.checked);     if (auto && summaryInput && saveForm) {       const chosen = pickReceiptSummary();       if (!chosen) {         console.warn('Auto-submit suppressed: no detailed receipt summary found.');         return;       }       // Ensure per-line category and flags       try{         if (!Array.isArray(chosen.lines)) chosen.lines = [];         if (chosen.lines.length === 0) {           // synthesize a simple line from totalValue when missing           const lid = (String(chosen.mark||'') + '_r0').replace(/^_+|_+$/g,'') || 'r0';           chosen.lines = [{             id: lid, description: "", amount: String(chosen.totalValue||""), vat: "", category: "αποδειξακια", vatCategory: ""           }];         } else {           chosen.lines = chosen.lines.map(l => (l && typeof l === 'object') ? {             ...l,             category: l.category || 'αποδειξακια'           } : l);         }         chosen.is_receipt = true;         chosen.category = chosen.category || 'αποδειξακια';         chosen.characteristic = chosen.characteristic || 'αποδειξακια';       }catch(_){}       summaryInput.value = JSON.stringify(chosen);       setTimeout(function(){         if (!saveForm.dataset._autoSubmitted) {           saveForm.dataset._autoSubmitted = '1';           saveForm.requestSubmit ? saveForm.requestSubmit() : saveForm.submit();         }       }, 30);     }   } catch(e) { console.warn('receipts auto-confirm failed', e); } })();</script> <!-- === END: Injected fix (v2) === --> <!-- RC_RECEIPT_AUTOPILOT_PATCH --> <script>(function(){'use strict';   // ====== Robust receipts repeat autopilot (no UI break) ======   window.__RC_FLAGS = window.__RC_FLAGS || {};    function lsget(key, fallback){ try{ const v=localStorage.getItem(key); if(v===null) return fallback; if(v==='1') return true; if(v==='0') return false; return v; }catch(_){     return fallback; } }    function receiptsSwitchOn(){ try{ return !!document.getElementById('useReceiptsSwitch')?.checked; }catch(_){     return !!lsget('rc:useReceipts','receipts')==='receipts'; } }    function autoSubmitOn(){ return !!lsget('rc:autoSubmitEnabled', true); }   function repeatSwitchOn(){ try{ return !!document.getElementById('repeatEntrySwitch')?.checked; }catch(_){ return !!lsget('rc:repeat_enabled', false); } }    async function serverRepeatEnabled(){     try{ const r = await fetch('/api/repeat_entry/get', { credentials:'include' });          const j = await r.json(); return !!(j && (j.enabled || j.repeat_enabled)); }     catch(_){ return repeatSwitchOn(); }   }    function hideReceiptBanner(){     const nodes = document.querySelectorAll('#existingBanner, .flash, .alert');     nodes.forEach(el => {       try{ if(/Λήφθηκε απόδειξη/i.test(el.textContent||'')) el.style.display='none'; }catch(_){}     });   }    function tryAutoSave(){     const form = document.getElementById('saveSummaryForm');     const input = document.getElementById('summaryJsonInput');     if (!form || !input) return false;     // mark flags to suppress informational toast     window.__RC_FLAGS.autoHandled = true;     hideReceiptBanner();     // Submit the server form (keeps server-side logic, excel write etc.)     // Use a microtask so any last-second JSON sync runs first     setTimeout(() => {       try { form.submit(); } catch(e) {         try { form.dispatchEvent(new Event('submit', { cancelable:false })); } catch(_){}       }     }, 30);     return true;   }    function observeModalAndAuto(){     const modal = document.getElementById('summaryModal');     if (!modal) return;     let done = false;     const doIt = () => {       if (done) return;       const visible = getComputedStyle(modal).display !== 'none';       if (!visible) return;       if (tryAutoSave()) { done = true; modal.style.display = 'none'; }     };     try { new MutationObserver(doIt).observe(modal, { attributes:true, attributeFilter:['style','class'] }); } catch(_){}     setTimeout(doIt, 80);   }    // Kickoff when DOM is ready   document.addEventListener('DOMContentLoaded', () => {     // Make search submit more reliable when auto-submit is ON     const form = document.getElementById('markSearchForm');     if (form) {       form.addEventListener('keydown', (e) => {         if (e.key === 'Enter' && autoSubmitOn()) {           const mark = (document.getElementById('markInput')?.value || '').trim();           const url  = (document.getElementById('scrapeUrlInput')?.value || document.getElementById('scrapeUrlField')?.value || '').trim();           if (!mark && !url) e.preventDefault(); // guard empty         }       }, true);     }      // Always ensure page comes back to a clean state after any save     const saveForm = document.getElementById('saveSummaryForm');     if (saveForm) {       let reloaded = false;       const reloadSoon = () => { if (!reloaded) { reloaded = true; setTimeout(() => location.reload(), 300); } };       saveForm.addEventListener('ajax:done', reloadSoon, { once:true });       saveForm.addEventListener('submit', () => setTimeout(reloadSoon, 1200), { once:true });     }      // If receipts + repeat are ON, suppress the "Λήφθηκε..." toast and auto-save     Promise.resolve(serverRepeatEnabled()).then((rep) => {       if (receiptsSwitchOn() && rep) {         window.__RC_FLAGS.repeat_enabled = true;         window.__RC_FLAGS.autoHandled = true; // prevents info message in existing code         if (!tryAutoSave()) observeModalAndAuto();       }     });   }); })();</script>   <!-- ===== Receipts repeat auto-confirm SHIM (appended) ===== --> <script>(function(){   // small utility: safe JSON parse   function parseJSON(x){ try{ return JSON.parse(x); }catch(_){ return null; } }   function getLS(k, d){ try{ const v = localStorage.getItem(k); return (v===null||v===undefined)?d:v; }catch(_){ return d; } }   function setLS(k, v){ try{ localStorage.setItem(k, v); }catch(_){ } }   function isTruthy(v){ return v === true || v === '1' || v === 1 || v === 'true'; }    // Read repeat + receipts mode from both localStorage and globals/switches   function getRepeatOn(){     const ls = getLS('REPEAT:enabled', null);     if (ls !== null) return isTruthy(ls);     if (window.REPEAT_ENABLED !== undefined) return !!window.REPEAT_ENABLED;     const sw = document.getElementById('repeatEntrySwitch');     return !!(sw && sw.checked);   }   function getReceiptsModeOn(){     const ls = getLS('UI:useReceipts', null);     if (ls !== null) return isTruthy(ls);     if (window.USE_RECEIPTS !== undefined) return !!window.USE_RECEIPTS;     const sw = document.getElementById('useReceiptsSwitch');     return !!(sw && sw.checked);   }    function isReceiptSummary(obj){     if(!obj || typeof obj !== 'object') return false;     if (obj.is_receipt === true) return true;     const t = String(obj.type_name || obj.type || '').toLowerCase();     const cat = String(obj.category || obj.characteristic || obj['χαρακτηρισμός'] || '').toLowerCase();     return (t.includes('απόδει') || t.includes('receipt') || cat === 'αποδειξακια');   }    function hasMeaningfulLines(obj){     const arr = Array.isArray(obj && obj.lines) ? obj.lines : [];     if (arr.length === 0) return false;     // any non-empty amount OR category is enough     return arr.some(l => {       const amt = String(l && (l.amount || l.total || l.lineTotal || '')).trim();       const cat = String(l && (l.category || l.cat || '')).trim();       return !!(amt || cat);     });   }    function readSummaryObject(){     const input = document.getElementById('summaryJsonInput');     if(!input) return null;     return parseJSON(input.value || '{}') || null;   }    function getScrapeUrl(){     const u = document.getElementById('scrapeUrlInput') || document.getElementById('scrapeUrlField');     return u ? (u.value || '') : '';   }    let lastMarkTried = null;   let busy = false;    async function tryAutoConfirm(){     if (busy) return;     const rep = getRepeatOn();     const inRec = getReceiptsModeOn();     if (!rep || !inRec) return;      const s = readSummaryObject();     if (!s || !isReceiptSummary(s) || !hasMeaningfulLines(s)) return;      // avoid double firing for the same mark     const mk = String(s.mark || s.MARK || '').trim();     if (!mk || mk === lastMarkTried) return;     lastMarkTried = mk;      // hide modal pre-emptively to avoid flicker     try {       const modal = document.getElementById('summaryModal');       if (modal) modal.style.display = 'none';     } catch(_){}      if (!(window.RC && RC.confirmReceiptOnce && RC.normalizeReceiptSummary)) {       // RC not yet ready; retry later       return;     }      busy = true;     try {       await RC.confirmReceiptOnce(RC.normalizeReceiptSummary(s), getScrapeUrl());       // keep receipts mode sticky on refresh       setLS('UI:useReceipts', '1');       // soft reload to clear form quickly       setTimeout(function(){         try {           const base = location.pathname + '?use_receipts=1';           location.replace(base);         } catch(_){ location.reload(); }       }, 120);     } catch(err){       console.warn('[RC-AUTOCONFIRM] failed', err);       // allow another attempt       lastMarkTried = null;     } finally {       busy = false;     }   }    // Poll for summary changes & conditions (fast but lightweight)   let pollId = null;   function startPoll(){     if (pollId) return;     pollId = setInterval(tryAutoConfirm, 200);   }   function stopPoll(){     if (pollId) { clearInterval(pollId); pollId = null; }   }    // Start ASAP   startPoll();    // Re-run when user submits the search form (so mode is immediately persisted)   document.addEventListener('submit', function(e){     const f = e.target;     if (f && f.id === 'markSearchForm') {       // persist current mode for autosave       try {         const sw = document.getElementById('useReceiptsSwitch');         if (sw) setLS('UI:useReceipts', sw.checked ? '1' : '0');       } catch(_){}       setTimeout(tryAutoConfirm, 0);     }   }, true);    // Also, when repeat switch toggles, persist immediately   document.addEventListener('change', function(e){     const sw = e.target && e.target.id === 'repeatEntrySwitch' ? e.target : null;     if (sw){       setLS('REPEAT:enabled', sw.checked ? '1' : '0');       setTimeout(tryAutoConfirm, 0);     }   }, true);    // One-time bootstrap from server state (if available via endpoint)   // This is best-effort; if it fails, user toggles or previous LS values will be used.   (async function bootstrapRepeatOnce(){     try {       const r = await fetch('/api/repeat_entry/get', { credentials: 'same-origin' });       const j = await r.json();       if (j && j.ok && j.repeat_entry) {         setLS('REPEAT:enabled', j.repeat_entry.enabled ? '1' : '0');         // leave mapping to backend; we only need the enabled bit here         setTimeout(tryAutoConfirm, 0);       }     } catch(_){}   })(); })();</script> <!-- ===== end SHIM ===== -->
2025-10-23 00:28:53+0300 INFO api_scrape_receipt: scraped url={% extends "base.html" %} {% block title %}Αναζήτηση MARK{% endblock %}  {% block content %}  <div class="bg-white rounded shadow p-6">     <h2 class="text-lg font-semibold mb-2">Αναζήτηση MARK</h2>      {% if error %}     <div class="mb-3 p-2 rounded bg-red-50 text-red-800">{{ error }}</div>     {% endif %}      <form method="post" class="flex gap-2 items-center" id="markSearchForm">         <!-- Auto-submit segmented toggle (scoped to client) -->         <div class="flex items-center gap-2 ml-4" id="autoSubmitGroup">             <span class="text-sm">Auto‑submit</span>             <div class="inline-flex rounded-md overflow-hidden border border-gray-300">                 <button type="button" id="autoSubmitBtnOff" class="px-2 py-1 text-sm focus:outline-none">Off</button>                 <button type="button" id="autoSubmitBtnOn" class="px-2 py-1 text-sm focus:outline-none">On</button>             </div>         </div>          <input name="mark" id="markInput" type="text" placeholder="15ψήφιο MARK" class="p-2 border rounded w-2/4" value="{{ mark }}">         <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αναζήτηση</button>         <div class="flex items-center gap-2 ml-4">             <label for="useReceiptsSwitch" class="text-sm">                 Τιμολόγια<label>                     <input type="checkbox" id="useReceiptsSwitch" role="switch" aria-checked="false" class="toggle-switch">                     <label for="useReceiptsSwitch" class="text-sm">Αποδείξεις</label>         </div>          <!-- Toggle επαναληψιμης εισαγωγής + edit button -->         <div class="flex items-center gap-2 ml-4">             <label for="repeatEntrySwitch" class="text-sm">Επαναληψιμη εισαγωγή</label>             <input type="checkbox" id="repeatEntrySwitch" class="toggle-switch">             <button type="button" id="editRepeatMappingBtn" class="ml-2 px-2 py-1 border rounded text-sm hidden">Επεξεργασία</button>         </div>          <!-- Toggle switch for receipts scrape -->      </form> </div>  {# ΣΗΜΕΙΩΣΗ: το στατικό confirmation modal που υπήρχε εδώ αφαιρέθηκε όπως ζήτησες. Χρησιμοποιείται πλέον το summaryModal για όλες τις περιπτώσεις. #}  {# --- Yellow box αν υπάρχει MARK ήδη στο Excel --- #} {% if allow_edit_existing and not request.args.get('force_edit') %} <div class="mt-4 p-4 bg-yellow-50 rounded border border-yellow-300 text-yellow-800" id="existingBanner">     Το MARK <strong>{{ mark }}</strong> υπάρχει ήδη στο Excel. Θέλεις να τροποποιήσεις τον χαρακτηρισμό;     <div class="mt-2 flex gap-2">         <button id="forceEditBtn" type="button" class="bg-yellow-600 text-white px-3 py-2 rounded hover:bg-yellow-700">             Επιβεβαίωση         </button>         <button id="dismissBannerBtn" type="button" onclick="this.parentElement.parentElement.style.display='none'"                 class="px-3 py-2 border rounded hover:bg-gray-50">             Άκυρο         </button>     </div> </div> {% endif %}     {% if modal_summary and (request.args.get('force_edit') == '1' or not allow_edit_existing) %} <!-- SUMMARY MODAL --> <div id="summaryModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-6xl p-6">          <!-- HEADER -->         <div class="flex justify-between items-center mb-4">             <h3 class="text-lg font-semibold">                 Περίληψη Παραστατικού - <span id="summaryModalMark">MARK</span>             </h3>             <button id="modalCloseX" class="text-gray-500 text-xl font-bold">✕</button>         </div>          <!-- SUMMARY INFO -->         <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">             <div><strong>Α/Α Παραστατικού</strong><div id="summary_AA"></div></div>             <div><strong>ΑΦΜ</strong><div id="summary_AFM"></div></div>             <div><strong>Επωνυμία</strong><div id="summary_Name"></div></div>             <div><strong>Ημερομηνία</strong><div id="summary_issueDate"></div></div>             <div><strong>Τύπος Παραστατικού</strong><div id="summary_type_name"></div></div>             <div><strong>Καθαρή Αξία</strong><div id="summary_totalNetValue"></div></div>             <div><strong>ΦΠΑ</strong><div id="summary_totalVatAmount"></div></div>             <div><strong>Σύνολο</strong><div id="summary_totalValue"></div></div>         </div>          <!-- LINES -->         <h4 class="font-medium mt-4 mb-2">Γραμμές Παραστατικού (για χαρακτηρισμό)</h4>         <div id="summaryLinesContainer" class="overflow-auto max-h-96 border rounded p-2"></div>            <!-- FOOTER -->         <div class="mt-4 flex justify-between items-center">             <div class="text-sm text-gray-600">                 Σημείωση: οι κατηγορίες προέρχονται από τα settings του πελάτη. Μπορείτε να ορίσετε/επεξεργαστείτε αυτές τις επιλογές στη σελίδα Credentials.             </div>              <div class="flex justify-end gap-2">                 <form method="POST" action="{{ url_for('save_summary') }}" id="saveSummaryForm">                     <input type="hidden" name="summary_json" id="summaryJsonInput" value='{{ modal_summary | tojson | safe if modal_summary else "{}" }}'>                     <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση στο Cache</button>                     <input type="hidden" id="scrapeUrlField" name="scrape_url" value="">                     <input type="hidden" id="scrapeCategoryField" name="scrape_category" value="">                     <input type="hidden" id="scrapeForceField" name="scrape_force" value="false">                 </form>                 <button id="modalCloseBtn" class="px-3 py-2 border rounded">Κλείσιμο</button>             </div>         </div>      </div> </div> {% endif %}   {# --- Repeat mapping modal (dynamic, populated by JS) --- #} <div id="repeatMappingModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-2xl p-6">         <div class="flex justify-between items-center mb-3">             <h3 class="text-lg font-semibold">Επαναληπτική αντιστοίχιση κατηγοριών</h3>             <button id="repeatModalCloseX" class="text-gray-500 text-xl font-bold">✕</button>         </div>          <div id="repeatModalBody" class="space-y-3">             <div class="text-sm text-gray-600">Επίλεξε για κάθε ΦΠΑ-κατηγορία ποια κατηγορία εξόδου θέλεις να χρησιμοποιείται επαναληπτικά. Μπορείς επίσης να ορίσεις <em>προεπιλογή</em>.</div>             <!-- JS θα γεμίσει εδώ -->             <div id="repeatMappingList" class="space-y-2"></div>         </div>          <div class="mt-4 flex justify-end gap-2">             <button id="repeatModalCancel" class="px-3 py-2 border rounded">Άκυρο</button>             <button id="repeatModalSave" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση</button>         </div>     </div> </div>  {% if modal_warning %} <div id="afmWarningModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">     <div class="bg-white rounded-lg shadow-lg w-full max-w-md p-6">         <div class="flex justify-between items-center mb-4">             <h3 class="text-lg font-semibold text-red-600">Προειδοποίηση</h3>         </div>         <div id="afmWarningBody" class="mb-4 text-gray-700">             {{ modal_warning }}         </div>         <div class="flex justify-end gap-2">             <button id="afmModalConfirm" class="bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700">Κατάλαβα</button>         </div>     </div> </div> {% endif %}  {# Flash container (JS will inject messages here) #} <div id="clientFlashContainer" class="fixed top-4 right-4 z-60"></div>  {% include 'list_inner.html' %}   {% endblock %}  {% block scripts %}  <script src="/static/loop_hard_guard.js"></script> <script src="{{ url_for('static', filename='repeat_flow_guard.js') }}"></script>  <script>    (function () {   const KEY = 'UI:useReceipts'; // '1' = Αποδείξεις, '0' = Τιμολόγια    function fireChange(el){     if(!el) return;     try {       el.dispatchEvent(new Event('change', { bubbles:true }));     } catch {       const evt = document.createEvent('Event');       evt.initEvent('change', true, true);       el.dispatchEvent(evt);     }   }    document.addEventListener('DOMContentLoaded', () => {     const sw = document.getElementById('useReceiptsSwitch');     if (!sw) return;      // Αν υπάρχει ?use_receipts=1/0 στο URL, γράψ’ το στο localStorage (authoritative)     try {       const q = new URLSearchParams(location.search);       if (q.has('use_receipts')) {         localStorage.setItem(KEY, q.get('use_receipts') === '1' ? '1' : '0');       }     } catch {}      // Restore από localStorage     const saved = localStorage.getItem(KEY);     if (saved !== null) sw.checked = (saved === '1');      // ΠΟΛΥ ΣΗΜΑΝΤΙΚΟ:     // Τρέξε τον υπάρχοντα change handler του switch ώστε να εμφανίσει/κρύψει     // τα σωστά inputs (MARK vs URL). Το κάνουμε 2 φορές (rAF + microtask)     // για να “πιάσει” σε DOM που φτιάχνεται δυναμικά.     requestAnimationFrame(() => {       fireChange(sw);       setTimeout(() => fireChange(sw), 0);     });      // Persist σε κάθε αλλαγή χρήστη     sw.addEventListener('change', () => {       try { localStorage.setItem(KEY, sw.checked ? '1' : '0'); } catch {}       // Προαιρετικό: κρατάμε και ένα data-mode στο body αν το θες για CSS hooks       document.body.dataset.mode = sw.checked ? 'receipts' : 'invoices';     });      // Όταν κάνεις submit/save απόδειξης, κλείδωσε το mode σε “Αποδείξεις”     // ώστε στο redirect/refresh να παραμείνει.     document.getElementById('saveSummaryForm')?.addEventListener('submit', () => {       try {         const raw = document.getElementById('summaryJsonInput')?.value || '';         const s = raw ? JSON.parse(raw) : {};         const isReceipt = s.is_receipt === true ||                           /αποδει/i.test(`${s.type_name || ''} ${s.category || s.characteristic || ''}`);         if (isReceipt) localStorage.setItem(KEY, '1');       } catch {}     });   }); })(); // --- Reclass guard (yellow box -> ?force_edit=1) --- const URL_PARAMS = (function(){ try { return new URL(window.location.href).searchParams; } catch(_) { return new URLSearchParams(''); } })(); const FORCE_EDIT = (function(){ try { return URL_PARAMS.get('force_edit') === '1'; } catch(_) { return false; } })();  const SEARCH_BASE_URL = "{{ url_for('search') }}"; const VAT = "{{ vat or '' }}"; // active vat from server const INITIAL_MARK = "{{ mark|e }}"; // αρχική τιμή mark (αν υπήρχε) const ACTIVE_YEAR = (function(){ try { return {{ active_year|default('null') }}; } catch(e){ return null; } })(); async function getActiveFiscalYear() {   // Προτίμησε την τιμή που ήρθε από server-side render (Jinja)   if (typeof ACTIVE_YEAR !== 'undefined' && ACTIVE_YEAR !== null) {     try { return String(ACTIVE_YEAR); } catch(_) { /* noop */ }   }   // Fallback: ρώτα το backend (υπάρχει route)   try {     const r = await fetch('/get_fiscal_year', {credentials:'same-origin'});     const j = await r.json();     if (j && j.exists) return String(j.fiscal_year);   } catch(_) {}   return null; }   (function(){   // Ανεξάρτητο modal μόνο για Αποδείξεις (δεν ακουμπά το afmWarningModal)   window.openReceiptWarning = function(message){     var id='receiptWarn', m=document.getElementById(id);     if(!m){       var el=document.createElement('div');       el.id=id;       el.style.cssText='position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.4);z-index:9999';       el.innerHTML =         '<div style="background:#fff;border-radius:10px;max-width:480px;width:calc(100% - 32px);padding:20px;">'         + '<h3 style="margin:0 0 10px;color:#b91c1c;font-weight:600;font-size:18px">Προειδοποίηση</h3>'         + '<div id="receiptWarnBody" style="margin-bottom:14px;color:#374151;font-size:14px"></div>'         + '<div style="text-align:right"><button id="receiptWarnOk" type="button"'         + ' style="background:#b91c1c;color:#fff;border:none;border-radius:6px;padding:8px 12px;cursor:pointer">Κατάλαβα</button></div>'         + '</div>';       document.body.appendChild(el);       el.addEventListener('click', function(e){ if(e.target===el) el.style.display='none'; });       el.querySelector('#receiptWarnOk').addEventListener('click', function(){ el.style.display='none'; });       m = el;     }     var body = m.querySelector('#receiptWarnBody');     if(body) body.textContent = message || 'Προειδοποίηση.';     m.style.display='flex';   }; })();      // Καθαρισμός ανά γραμμή (πολλαπλές γραμμές)   document.addEventListener('click', function (e) {     const btn = e.target.closest('.clear-row-btn');     if (btn) {       e.stopPropagation();       const tr = btn.closest('tr');       const sel = tr && tr.querySelector('select[name^="category["]');       if (sel) sel.value = '';     }   });    // Καθαρισμός στη single-line περίπτωση   const singleClear = document.getElementById('single-clear');   if (singleClear) {     singleClear.addEventListener('click', function (e) {       e.stopPropagation();       const sel = document.querySelector('select[name^="category["]');       if (sel) sel.value = '';     });   }    // Προληπτικά: μην ξανα-ανοίγει δεύτερο modal στο click "Αποθήκευση"   // (αν έχεις delegate listeners κάτω από το modal)   document.addEventListener('submit', function(e){     const form = e.target;     if (form && form.closest('#summaryModal')) {       const submitBtn = form.querySelector('[type="submit"]');       if (submitBtn) submitBtn.disabled = true;       e.stopPropagation(); // Μπλοκάρει bubbling που θα πυροδοτούσε κάτωθεν click handlers     }   }, true);     // initial categories passed from server as fallback; will be overridden if API returns expense_tags let CUSTOMER_CATEGORIES = (function(){ try { return {{ customer_categories | tojson | safe }} || []; } catch(e){ return []; } })();  // Helper: show transient flash (client-side) /* ====== Render summary lines into modal and wire handlers ====== */  function renderSummaryLinesFromObject(obj) {   const receiptsMode = !!(document.getElementById('useReceiptsSwitch')?.checked) || !!obj?.is_receipt;   const RECEIPT_CATEGORY = 'αποδειξακια';    const container = document.getElementById('summaryLinesContainer');   const summaryInput = document.getElementById('summaryJsonInput');   if(!container || !summaryInput) return;    container.innerHTML = '';   const lines = Array.isArray(obj.lines) ? obj.lines : [];    // helper to persist back to the hidden input     (function(){   function safeParseJson(s){     try { return JSON.parse(s || '{}'); } catch(e){ return {}; }   }    const summaryInput = document.getElementById('summaryJsonInput');   const container = document.getElementById('summaryLinesContainer');    // fallback server-side object (if Jinja rendered modal_summary)   const SERVER_MODAL_SUMMARY = (function(){     try { return {{ modal_summary | tojson | safe if modal_summary else 'null' }}; } catch(e){ return null; }   })()   try {     var __cc = document.getElementById('summaryLinesContainer');     if (__cc && __cc.dataset && __cc.dataset.phase === 'iife') {       // IIFE already rendered content -> skip second render path       if (typeof persist === 'function') try{ persist(); }catch(e){}       return;     }   } catch(e) {} ;    // helper to get current summary object (prefer hidden input, fallback server var)   function getSummaryObj(){     if(summaryInput && summaryInput.value && summaryInput.value.trim() !== ''){       const parsed = safeParseJson(summaryInput.value);       if(parsed && typeof parsed === 'object') return parsed;     }     if(SERVER_MODAL_SUMMARY) return SERVER_MODAL_SUMMARY;     return { lines: [] };   }    // ensure each line has id and normalized keys   function normalizeSummary(summary){     if(!summary) summary = {};     const lines = Array.isArray(summary.lines) ? summary.lines.slice() : [];     const norm = lines.map((l, idx) => {       const id = (l && (l.id || l.line_id)) ? String(l.id || l.line_id) : ('l' + idx);       return {         id: id,         description: l && (l.description || l.desc || '') || '',         amount: l && (l.amount || l.lineTotal || l.total || '') || '',         vat: l && (l.vat || l.vatRate || '') || '',         vatCategory: l && (l.vatCategory || l.vat_category || '') || '',         category: l && (l.category || l.cat || '') || ''       };     });     return { ...summary, lines: norm };   }    // build DOM for multiple lines (table)   function buildTableHTML(lines, categories){     const table = document.createElement('table');     table.className = 'w-full border-collapse';     const thead = document.createElement('thead');     thead.className = 'bg-gray-100 sticky top-0';     thead.innerHTML = '<tr>' +       '<th class="p-2 border text-left">#</th>' +       '<th class="p-2 border text-left">ΦΠΑ Κατηγορία</th>' +       '<th class="p-2 border text-right">Ποσό</th>' +       '<th class="p-2 border text-right">ΦΠΑ</th>' +       '<th class="p-2 border text-left">Κατηγορία Εξόδου</th>' +       '</tr>';     table.appendChild(thead);      const tbody = document.createElement('tbody');     tbody.id = 'renderedLinesTableBody';     lines.forEach((ln, idx) => {       const tr = document.createElement('tr');       tr.dataset.lineId = ln.id || ('l' + idx);       tr.dataset.vat = ln.vatCategory || ln.vat || '';        tr.innerHTML = '<td class="p-2 border text-sm text-gray-600">' + (idx+1) + '</td>' +         '<td class="p-2 border break-words">' + escapeHtml(ln.vatCategory || '') + '</td>' +         '<td class="p-2 border text-right">' + escapeHtml(String(ln.amount || '')) + '</td>' +         '<td class="p-2 border text-right">' + escapeHtml(String(ln.vat || '')) + '</td>' +         '<td class="p-2 border"></td>';        // create select       const select = document.createElement('select');       select.className = 'expense-category p-1 border rounded w-full';       select.dataset.lineId = ln.id || ('l' + idx);       const emptyOpt = document.createElement('option'); emptyOpt.value=''; emptyOpt.innerText='-- επίλεξε --';       select.appendChild(emptyOpt);       (categories || []).forEach(c => {         const o = document.createElement('option'); o.value = c; o.innerText = c;         if(c === ln.category) o.selected = true;         select.appendChild(o);       });        tr.querySelector('td:last-child').appendChild(select);       tbody.appendChild(tr);     });      table.appendChild(tbody);     return table;   }    // build single-line buttons UI   function buildSingleLineHTML(line, categories){     const wrapper = document.createElement('div');     wrapper.className = 'border rounded p-4';     wrapper.dataset.lineId = line.id || 'l0';      const grid = document.createElement('div');     grid.className = 'mb-3 grid grid-cols-1 md:grid-cols-3 gap-3';     grid.innerHTML = '<div><strong>ΦΠΑ Κατηγορία</strong><div>' + escapeHtml(line.vatCategory || '') + '</div></div>' +       '<div><strong>Ποσό</strong><div>' + escapeHtml(String(line.amount || '')) + '</div></div>' +       '<div><strong>ΦΠΑ</strong><div>' + escapeHtml(String(line.vat || '')) + '</div></div>';     wrapper.appendChild(grid);      const controls = document.createElement('div');     controls.className = 'mb-3';     const title = document.createElement('strong');     title.innerText = 'Επίλεξε Κατηγορία Εξόδου';     controls.appendChild(title);      const btnwrap = document.createElement('div');     btnwrap.id = 'renderedCategoryButtons';     btnwrap.className = 'mt-2 flex flex-wrap gap-2';     (categories || []).forEach(c => {       const btn = document.createElement('button');       btn.type = 'button';       btn.className = 'category-btn px-3 py-2 border rounded hover:bg-sky-50';       btn.dataset.cat = c;       btn.dataset.lineId = line.id || 'l0';       btn.innerText = c;       if(c === line.category){         btn.classList.add('bg-sky-600');         btn.classList.add('text-white');       }       btnwrap.appendChild(btn);     });      const clearBtn = document.createElement('button');     clearBtn.type = 'button';     clearBtn.className = 'px-3 py-2 border rounded text-sm ml-2 clear-category';     clearBtn.innerText = 'Καθαρισμός';     btnwrap.appendChild(clearBtn);      controls.appendChild(btnwrap);     wrapper.appendChild(controls);     return wrapper;   }    function escapeHtml(s){     if(!s && s !== 0) return '';     return String(s)       .replace(/&/g, '&amp;')       .replace(/</g, '&lt;')       .replace(/>/g, '&gt;')       .replace(/"/g, '&quot;')       .replace(/'/g, '&#39;');   }    // read categories from server-provided global or from a safe default   function getCategories(){     try {       const js = (function(){ try { return {{ customer_categories | tojson | safe }}; } catch(e){ return null; } })();       if(Array.isArray(js) && js.length) return js;     } catch(e){}     return window.CUSTOMER_CATEGORIES || [];   }    // render everything into the container   function renderSummaryLines(){     if(!container) return;     const summary = normalizeSummary(getSummaryObj());     const lines = summary.lines || [];     const categories = getCategories();      // clear container     container.innerHTML = '';      // Title (optional)     // const info = document.createElement('div'); info.className='mb-2 text-sm text-gray-700'; container.appendChild(info);      if(lines.length === 0){       const warn = document.createElement('div');       warn.className = 'mt-4 p-3 bg-yellow-50 rounded';       warn.innerText = 'Δεν βρέθηκαν γραμμές για αυτό το MARK.';       container.appendChild(warn);       wireInteractions();     try{ container.dataset.phase = 'iife'; }catch(e){}  // ensure handlers cleared       return;     }      if(lines.length === 1){       container.appendChild(buildSingleLineHTML(lines[0], categories));     } else {       container.appendChild(buildTableHTML(lines, categories));     }      // after building DOM, wire events     wireInteractions();   }    // update hidden input from current DOM selections/buttons    function wireInteractions(){     // remove old handlers by cloning nodes if necessary (to avoid duplicate attachments)     document.querySelectorAll('select.expense-category').forEach(sel => {       sel.addEventListener('change', function(){         updateSummaryFromDom();       });     });      // category buttons (single-line)     document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(btn => {       btn.addEventListener('click', function(){         const lineId = this.dataset.lineId || '';         // toggle this button active/inactive         document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(b => {           if(b.dataset.lineId === lineId){             b.classList.remove('bg-sky-600'); b.classList.remove('text-white');           }         });         const isActive = !(this.classList.contains('bg-sky-600'));         if(isActive){           this.classList.add('bg-sky-600'); this.classList.add('text-white');         } else {           this.classList.remove('bg-sky-600'); this.classList.remove('text-white');         }         updateSummaryFromDom();       });     });      // clear buttons     document.querySelectorAll('.clear-category').forEach(cb => {       cb.addEventListener('click', function(){         const parent = cb.closest('[data-line-id]');         if(!parent) return;         const lid = parent.dataset.lineId || '';         // clear UI         document.querySelectorAll('#renderedCategoryButtons .category-btn').forEach(b => {           if(b.dataset.lineId === lid){ b.classList.remove('bg-sky-600'); b.classList.remove('text-white'); }         });         // if there is a select for same line (unlikely in single-line view) clear it         const sel = document.querySelector('select.expense-category[data-line-id="' + lid + '"]');         if(sel) sel.value = '';         updateSummaryFromDom();       });     });   }    // watch hidden input changes (some flows set it programmatically before opening modal)   let lastSummaryValue = summaryInput ? summaryInput.value : '';   function pollSummaryInput(){     const now = summaryInput ? summaryInput.value : '';     if(now !== lastSummaryValue){       lastSummaryValue = now;       // re-render so UI matches new data       renderSummaryLines();     }   }   let pollTimer = null;   try {     pollTimer = setInterval(pollSummaryInput, 250);     window.addEventListener('beforeunload', ()=> { if(pollTimer) clearInterval(pollTimer); });   } catch(e){ /* ignore */ }    // ensure initial render on load (modal might be shown later)   try { renderSummaryLines(); } catch(e){ console.warn('initial renderSummaryLines failed', e); }    // also re-render whenever modal is shown (in case show logic sets display later)   const modal = document.getElementById('summaryModal');   if(modal){     // intercept style changes to detect show     const obs = new MutationObserver(muts => {       muts.forEach(m => {         if(m.attributeName === 'style' || m.attributeName === 'class'){           const disp = window.getComputedStyle(modal).display;           if(disp !== 'none'){             // modal visible -> render (ensure DOM inside ready)             setTimeout(renderSummaryLines, 10);           }         }       });     });     try { obs.observe(modal, { attributes: true, attributeFilter:['style','class'] }); } catch(e){ /* ignore */ }   }    // expose for debug   window._renderSummaryLines = renderSummaryLines; })();   function persist() {     summaryInput.value = JSON.stringify(obj || {});   }    if (!lines || lines.length === 0) {     container.innerHTML = '<div class="mt-4 p-3 bg-yellow-50 rounded">Δεν βρέθηκαν γραμμές για αυτό το MARK.</div>';     persist();     return;   }    if (lines.length > 1) {     // build table     const tbl = document.createElement('table');     tbl.className = 'w-full border-collapse';     tbl.innerHTML = `<thead class="bg-gray-100 sticky top-0">       <tr>         <th class="p-2 border text-left">#</th>         <th class="p-2 border text-left">ΦΠΑ Κατηγορία</th>         <th class="p-2 border text-right">Ποσό</th>         <th class="p-2 border text-right">ΦΠΑ</th>         <th class="p-2 border text-left">Κατηγορία Εξόδου</th>       </tr>     </thead>`;     const tbody = document.createElement('tbody');     lines.forEach((ln, idx) => {       const lid = (ln.id !== undefined) ? String(ln.id) : ('l' + idx);       const vat_cat = ln.vatCategory || ln.vat_category || ln.vat || '';       const amt = ln.amount || ln.lineTotal || ln.total || '';       const vatv = ln.vat || ln.vatRate || '';       const tr = document.createElement('tr');       tr.dataset.lineId = lid;       tr.dataset.vat = vat_cat;       tr.className = '';       tr.innerHTML = `         <td class="p-2 border text-sm text-gray-600">${idx+1}</td>         <td class="p-2 border break-words">${vat_cat}</td>         <td class="p-2 border text-right">${amt}</td>         <td class="p-2 border text-right">${vatv}</td>         <td class="p-2 border"></td>`;       // build select       const td = tr.querySelector('td:last-child');       const sel = document.createElement('select');       sel.className = 'expense-category p-1 border rounded w-full';       sel.dataset.lineId = lid;       const opt0 = document.createElement('option'); opt0.value = ''; opt0.innerText = '-- επίλεξε --'; sel.appendChild(opt0);       (window.CUSTOMER_CATEGORIES || []).forEach(c => {         const o = document.createElement('option'); o.value = c; o.innerText = c;         if ((ln.category || '') === c) o.selected = true;         sel.appendChild(o);       });       sel.addEventListener('change', function(){         const val = this.value;         // find line in obj and update         const found = (obj.lines || []).find(x => String(x.id || x.line_id || '') === lid);         if(found) found.category = val;         persist();       });       td.appendChild(sel);       tbody.appendChild(tr);     });     tbl.appendChild(tbody);     // wrap in container     const wrapper = document.createElement('div');     wrapper.className = 'overflow-auto max-h-96 border rounded';     wrapper.appendChild(tbl);     container.appendChild(wrapper);     persist();     return;   }    // single line case -> render buttons   const single = lines[0];   const lid = (single.id !== undefined) ? String(single.id) : (single.line_id !== undefined ? String(single.line_id) : 'l0');   const amt = single.amount || single.lineTotal || '';   const vatv = single.vat || single.vatRate || '';   const vat_cat = single.vatCategory || single.vat_category || '';   const selected_cat = single.category || '';    const singleDiv = document.createElement('div');   singleDiv.id = 'singleLine';   singleDiv.className = 'border rounded p-4';   singleDiv.dataset.lineId = lid;   singleDiv.dataset.amount = amt;   singleDiv.dataset.vat = vatv;   singleDiv.dataset.vatcat = vat_cat;    const infoHtml = document.createElement('div');   infoHtml.className = 'mb-3 grid grid-cols-1 md:grid-cols-3 gap-3';   infoHtml.innerHTML = `<div><strong>ΦΠΑ Κατηγορία</strong><div>${vat_cat}</div></div>                         <div><strong>Ποσό</strong><div>${amt}</div></div>                         <div><strong>ΦΠΑ</strong><div>${vatv}</div></div>`;   singleDiv.appendChild(infoHtml);    const chooseWrap = document.createElement('div');   chooseWrap.className = 'mb-3';   chooseWrap.innerHTML = `<strong>Επίλεξε Κατηγορία Εξόδου</strong>`;   const btnRow = document.createElement('div');   btnRow.id = 'categoryButtons';   btnRow.className = 'mt-2 flex flex-wrap gap-2';    (window.CUSTOMER_CATEGORIES || []).forEach(c => {     const b = document.createElement('button');     b.type = 'button';     b.className = 'category-btn px-3 py-2 border rounded hover:bg-sky-50';     b.dataset.cat = c;     b.dataset.lineId = lid;     b.innerText = c;     if (c === selected_cat) { b.classList.add('bg-sky-600', 'text-white'); }     b.addEventListener('click', function(){       const cat = this.dataset.cat;       // toggle selection       const currently = (obj.lines[0].category || '');       obj.lines[0].category = (currently === cat) ? '' : cat;       // reflect UI       Array.from(btnRow.querySelectorAll('button.category-btn')).forEach(bb=>{         bb.classList.toggle('bg-sky-600', bb.dataset.cat === obj.lines[0].category);         bb.classList.toggle('text-white', bb.dataset.cat === obj.lines[0].category);       });       persist();     });     btnRow.appendChild(b);   });    const clearBtn = document.createElement('button');   clearBtn.type = 'button';   clearBtn.id = 'clearCategory';   clearBtn.className = 'px-3 py-2 border rounded text-sm ml-2';   clearBtn.innerText = 'Καθαρισμός';   clearBtn.addEventListener('click', function(){     obj.lines[0].category = '';     Array.from(btnRow.querySelectorAll('button.category-btn')).forEach(bb=>{       bb.classList.remove('bg-sky-600', 'text-white');     });     persist();   });    btnRow.appendChild(clearBtn);   chooseWrap.appendChild(btnRow);   singleDiv.appendChild(chooseWrap);   container.appendChild(singleDiv);   persist(); }  /* Call this helper whenever you open the summary modal after you populated summaryJsonInput.    Examples of call sites are below (where modal.style.display='flex' is set). */   function showFlash(message, type='info', timeout=3000){   try {     const container = document.getElementById('clientFlashContainer');     if(!container) return;     const el = document.createElement('div');     el.className = 'mb-2 p-3 rounded shadow text-sm';     if(type === 'success') el.classList.add('bg-green-50', 'text-green-800');     else if(type === 'error') el.classList.add('bg-red-50', 'text-red-800');     else el.classList.add('bg-gray-50', 'text-gray-800');     el.innerText = message;     container.appendChild(el);     setTimeout(()=>{ try{ el.style.opacity='0'; setTimeout(()=>el.remove(), 300); }catch(e){} }, timeout);   } catch(e){ console.warn('showFlash failed', e); } }  // Helper API calls async function apiGetRepeatEntry(vat){   try {     const url = '/api/repeat_entry/get' + (vat ? ('?vat=' + encodeURIComponent(vat)) : '');     const res = await fetch(url, { credentials: 'same-origin' });     if (!res.ok) return { ok: false };     return await res.json();   } catch(e){     console.warn('apiGetRepeatEntry failed', e);     return { ok: false };   } } async function apiSaveRepeatEntry(enabled, mapping, vat){   try {     const res = await fetch('/api/repeat_entry/save', {       method: 'POST',       headers: {'Content-Type': 'application/json'},       credentials: 'same-origin',       body: JSON.stringify({ enabled: !!enabled, mapping: mapping || {}, vat: vat || VAT })     });     if(!res.ok) {       const txt = await res.text().catch(()=>null);       return { ok: false, status: res.status, body: txt };     }     return await res.json();   } catch(e){     console.warn('apiSaveRepeatEntry failed', e);     return { ok: false, error: String(e) };   } }  function removeForceEditParamFromUrl(){   try {     const url = new URL(window.location.href);     if (url.searchParams.has('force_edit')) {       url.searchParams.delete('force_edit');       history.replaceState(null, '', url.pathname + (url.search ? ('?' + url.searchParams.toString()) : '') + url.hash);     }   } catch(e){ console.warn('removeForceEditParamFromUrl failed', e); } }  document.addEventListener('DOMContentLoaded', function(){   // ---------- DOM references ----------   const repeatSwitch = document.getElementById('repeatEntrySwitch');   const editRepeatBtn = document.getElementById('editRepeatMappingBtn');   const repeatModal = document.getElementById('repeatMappingModal');   const repeatModalList = document.getElementById('repeatMappingList');   const repeatModalSave = document.getElementById('repeatModalSave');   const repeatModalCancel = document.getElementById('repeatModalCancel');   const repeatModalCloseX = document.getElementById('repeatModalCloseX');   const summaryInput = document.getElementById('summaryJsonInput'); // may be null   const saveSummaryForm = document.getElementById('saveSummaryForm');    // New: receipts switch + url input   // ---------- Μικρή, local επιδιόρθωση για τα κουμπιά/Select στο modal summary ---------- // ----- Prefill modal fields & categories from summaryJsonInput ----- function prefillSummaryModal(){   try {     const input = document.getElementById('summaryJsonInput');     if(!input) return;     let data = {};     try { data = JSON.parse(input.value || '{}'); } catch(e) { data = {}; }      // Header fields mapping     const map = {       mark: 'summaryModalMark',       AA: 'summary_AA',       AFM_issuer: 'summary_AFM',       AFM: 'summary_AFM',       Name: 'summary_Name',       issuer_name: 'summary_Name',       issueDate: 'summary_issueDate',       type_name: 'summary_type_name',       totalNetValue: 'summary_totalNetValue',       totalVatAmount: 'summary_totalVatAmount',       totalValue: 'summary_totalValue'     };     Object.keys(map).forEach(k => {       const el = document.getElementById(map[k]);       if(!el) return;       el.innerText = (data[k] !== undefined && data[k] !== null) ? String(data[k]) : (data[k.toUpperCase()] || '');     });      // Ensure container exists     const container = document.getElementById('summaryLinesContainer') || document;     const lines = Array.isArray(data.lines) ? data.lines : [];      // For each line, set select/button states     lines.forEach(line => {       const lid = String(line.id || line.line_id || '').trim();       if(!lid) return;        // Try to find matching element inside modal (row or singleLine)       let row = container.querySelector('[data-line-id="'+lid+'"]');       if(!row){         // fallback: global lookup         row = document.querySelector('[data-line-id="'+lid+'"]');       }       if(!row) return;        const cat = line.category || line.cat || '';       // set select if present       const sel = row.querySelector('select.expense-category[data-line-id="'+lid+'"]');       if(sel){         try { sel.value = cat || ''; } catch(e){ /* ignore */ }       }       // set button states if buttons present       const btns = row.querySelectorAll('.category-btn[data-line-id="'+lid+'"]');       if(btns && btns.length){         btns.forEach(b => b.classList.remove('bg-sky-600','text-white'));         if(cat){           // try to find exact button           const esc = (window.CSS && CSS.escape) ? CSS.escape(cat) : cat.replace(/"/g,'\\"');           const target = row.querySelector('.category-btn[data-line-id="'+lid+'"][data-cat="'+cat+'"]') ||                          row.querySelector('.category-btn[data-line-id="'+lid+'"][data-cat="'+esc+'"]');           if(target) target.classList.add('bg-sky-600','text-white');         }       }     });   } catch(err){     console.warn('prefillSummaryModal error', err);   } }  // Call prefill when modal gets shown by your existing code. // Find the places where you do: modal.style.display = 'flex' and add prefillSummaryModal().    (function(){   // helper: ασφαλής update του hidden json από το DOM   function updateSummaryFromDom(){     try {       const input = document.getElementById('summaryJsonInput');       if(!input) return;       let data = {};       try { data = JSON.parse(input.value || '{}'); } catch(e){ data = {}; }       data.lines = Array.isArray(data.lines) ? data.lines.slice() : [];        // For every element that has data-line-id inside the modal container, read category       const container = document.getElementById('summaryLinesContainer') || document;       container.querySelectorAll('[data-line-id]').forEach(el => {         const lid = String(el.dataset.lineId || '').trim();         if(!lid) return;         // prefer select.expense-category if present         let chosen = '';         const sel = el.querySelector('select.expense-category[data-line-id="'+lid+'"]');         if(sel && sel.value) chosen = sel.value;         else {           // else look for active category button in same element           const btn = el.querySelector('.category-btn.bg-sky-600');           if(btn) chosen = btn.dataset.cat || '';         }         // find or create line entry         let found = data.lines.find(x => String(x.id) === lid);         if(!found){           found = { id: lid, category: '' };           data.lines.push(found);         }         found.category = chosen || '';       });        input.value = JSON.stringify(data);     } catch(err){       console.warn('updateSummaryFromDom error', err);     }   }    // only operate inside the modal area to avoid interfering globally   const container = document.getElementById('summaryLinesContainer');   if(!container) {     // fallback: attach to document but remain minimal     console.warn('summaryLinesContainer not found — fix handlers limitedly');   }    // Event delegation: capture clicks on category buttons and selects inside modal   const targetRoot = container || document;   // Use capture true so we intercept before other handlers   targetRoot.addEventListener('click', function(e){     const btn = e.target.closest && e.target.closest('.category-btn');     if(btn && (container ? container.contains(btn) : true)){       // Prevent bubbling to other global handlers that open the receipts-modal       e.preventDefault();       e.stopPropagation();        // ensure it's not treated as a submit (defensive): set type=button if missing       try { if(btn.tagName === 'BUTTON' && !btn.hasAttribute('type')) btn.setAttribute('type','button'); } catch(_) {}        // determine line id: prefer dataset, else find closest ancestor with data-line-id       const lineEl = btn.closest('[data-line-id]');       const lineId = lineEl ? (lineEl.dataset.lineId || '') : (btn.dataset.lineId || '');        // Toggle active class for buttons of the same line only       if(lineId){         const group = (container || document).querySelectorAll('.category-btn[data-line-id="'+lineId+'"]');         group.forEach(b => { b.classList.remove('bg-sky-600','text-white'); });       } else {         // fallback: toggle only this button       }       const isActive = !btn.classList.contains('bg-sky-600');       if(isActive) btn.classList.add('bg-sky-600','text-white');       else btn.classList.remove('bg-sky-600','text-white');        // if there's a select corresponding to this line, keep it in sync       if(lineId){         const sel = (container || document).querySelector('select.expense-category[data-line-id="'+lineId+'"]');         if(sel) sel.value = isActive ? (btn.dataset.cat || '') : '';       }        // update hidden JSON immediately       updateSummaryFromDom();       return;     }      // if clicking on a select inside modal, prevent bubbling too     const sel = e.target.closest && e.target.closest('select.expense-category');     if(sel && (container ? container.contains(sel) : true)){       e.stopPropagation();       // let change event handle updating (below we also listen change)       return;     }   }, true);    // Listen change events on selects inside container and update JSON   (container || document).addEventListener('change', function(e){     const sel = e.target.closest && e.target.closest('select.expense-category');     if(sel && (container ? container.contains(sel) : true)){       e.stopPropagation();       // sync any visual button states (remove active if select chosen)       const lid = sel.dataset.lineId || (sel.closest('[data-line-id]') && sel.closest('[data-line-id]').dataset.lineId) || '';       if(lid){         // clear buttons for that line         const group = (container || document).querySelectorAll('.category-btn[data-line-id="'+lid+'"]');         group.forEach(b => b.classList.remove('bg-sky-600','text-white'));       }       updateSummaryFromDom();     }   }, true);    // Ensure Save form updates JSON right before submit (defensive)   const saveForm = document.getElementById('saveSummaryForm');   if(saveForm){     saveForm.addEventListener('submit', function(e){       try {         updateSummaryFromDom();         // small synchronous update only; let the submit continue       } catch(err){ console.warn('pre-submit update failed', err); }     });   }    // Expose helper in case other code wants to call it   window.updateSummaryFromDom = updateSummaryFromDom; })();    const useReceiptsSwitch = document.getElementById('useReceiptsSwitch');   // find or create an URL input (if not present in template we create one dynamically)   let urlInput = document.getElementById('scrapeUrlInput');   if(!urlInput){     urlInput = document.createElement('input');     urlInput.id = 'scrapeUrlInput';     urlInput.placeholder = 'Εισάγετε URL παραστατικού (για αποδείξεις)';     urlInput.className = 'p-2 border rounded w-2/4 hidden';     urlInput.type = 'text';     // insert after markInput     const mi = document.getElementById('markInput');     if(mi && mi.parentElement) mi.parentElement.insertBefore(urlInput, mi.nextSibling);   }    // --- ensure search icon behaves same as input clear/submit ---   (function wireSearchIconBehavior(){     const mi = document.getElementById('markInput');     if (!mi) return;      const possibleSelectors = [       '.icon-search', '.btn-search', '#searchIcon', '.fa-search', '.magnifier',       'button[aria-label="search"]', 'button[data-action="search"]'     ];      let found = null;     for (const sel of possibleSelectors) {       const el = document.querySelector(sel);       if (el) { found = el; break; }     }      if (!found) {       const delBtn = document.querySelector('button#deleteSelected, button.delete-selected, button[data-action="delete-selected"]');       if (delBtn && delBtn.parentElement) {         const sibling = delBtn.parentElement.querySelector('button, a, svg, i');         if (sibling && sibling !== delBtn) found = sibling;       }     }      if (!found) return;      found.addEventListener('click', function(e){       try {         mi.value = '';         mi.dispatchEvent(new Event('input', { bubbles: true }));         mi.dispatchEvent(new KeyboardEvent('keyup', { bubbles: true, key: 'Backspace' }));         if (window.jQuery && jQuery.fn && jQuery.fn.dataTable) {           try {             const dt = $('.summary-table').DataTable();             dt.search('').columns().search('').draw();           } catch(ignore){}         }       } catch(err){         console.warn('search icon handler failed', err);       }     });   })();     // detect vat keys in summary   function detectVatKeysFromSummary(){     if(summaryInput && summaryInput.value){       try {         const obj = JSON.parse(summaryInput.value || '{}');         const lines = Array.isArray(obj.lines) ? obj.lines : [];         const set = new Set();         lines.forEach(l => {           const key = (l.vatCategory || l.vat_category || l.vat || '').toString().trim();           if(key) set.add(key);         });         if(set.size) return Array.from(set);       } catch(e){ /* ignore */ }     }     return ['0%','6%','13%','24%'];   }    // Build repeat modal UI given an existing mapping (object)   function buildRepeatModalUI(existingMapping){     repeatModalList.innerHTML = '';     const vatKeys = detectVatKeysFromSummary();     const mapping = existingMapping || {};     // default row     const defaultRow = document.createElement('div');     defaultRow.className = 'flex items-center gap-3';     defaultRow.innerHTML = `<div class="w-36 text-sm font-medium">Προεπιλογή</div>`;     const defaultSelect = document.createElement('select');     defaultSelect.className = 'p-1 border rounded flex-1';     const opt0 = document.createElement('option'); opt0.value=''; opt0.innerText='-- (κανένα) --'; defaultSelect.appendChild(opt0);     CUSTOMER_CATEGORIES.forEach(c=>{       const o = document.createElement('option'); o.value = c; o.innerText = c;       if(mapping['__default'] === c) o.selected = true;       defaultSelect.appendChild(o);     });     defaultRow.appendChild(defaultSelect);     repeatModalList.appendChild(defaultRow);      vatKeys.forEach(vk=>{       const row = document.createElement('div');       row.className = 'flex items-center gap-3';       const label = document.createElement('div');       label.className = 'w-36 text-sm font-medium';       label.innerText = vk || '(άγνωστο)';       const sel = document.createElement('select');       sel.className = 'p-1 border rounded flex-1';       const oEmpty = document.createElement('option'); oEmpty.value=''; oEmpty.innerText='-- (προεπιλογή) --'; sel.appendChild(oEmpty);       CUSTOMER_CATEGORIES.forEach(c=>{         const o=document.createElement('option'); o.value=c; o.innerText=c;         if(mapping[vk] === c) o.selected = true;         sel.appendChild(o);       });       row.appendChild(label);       row.appendChild(sel);       repeatModalList.appendChild(row);     });   }    function openRepeatModalWithMapping(mapping){     // If receipts mode is on, block editing mapping because receipts get fixed category     if(useReceiptsSwitch && useReceiptsSwitch.checked){       alert('Όταν είναι επιλεγμένες οι Αποδείξεις, δεν επιτρέπεται η επεξεργασία χαρακτηρισμών — οι αποδείξεις παίρνουν μόνο την κατηγορία "αποδειξακια".');       return;     }     buildRepeatModalUI(mapping || {});     repeatModal.style.display = 'flex';   }   function closeRepeatModal(){ repeatModal.style.display = 'none'; }    // collect mapping from modal selects   function collectMappingFromModal(){     const mapping = {};     const selects = repeatModalList.querySelectorAll('select');     if(selects.length){       const first = selects[0];       if(first && first.value) mapping['__default'] = first.value;       const vatKeys = detectVatKeysFromSummary();       for(let i=1;i<selects.length;i++){         const sel = selects[i];         const vatKey = vatKeys[i-1];         if(sel && sel.value) mapping[vatKey] = sel.value;       }     }     return mapping;   }    // apply given mapping to summary JSON and submit saveSummaryForm   function applyMappingToSummaryAndSubmitUsingMapping(mapping){     if(!summaryInput || !saveSummaryForm) return false;     try {       const data = JSON.parse(summaryInput.value || '{}');       if(!Array.isArray(data.lines)) data.lines = [];       data.lines = data.lines.map(l => {         const vatKey = (l.vatCategory || l.vat_category || l.vat || '').toString().trim();         if(mapping && mapping[vatKey]) l.category = mapping[vatKey];         else if(mapping && mapping.__default) l.category = mapping.__default;         return l;       });       summaryInput.value = JSON.stringify(data);       saveSummaryForm.submit();       return true;     } catch(e){       console.warn('applyMappingToSummaryAndSubmitUsingMapping error', e);       return false;     }   }    // ---------- Initialization: load server repeat_entry config ----------   (async function initRepeatEntry(){     try {       const resp = await apiGetRepeatEntry(VAT);       if(resp && resp.ok){         const repeat = resp.repeat_entry || { enabled: false, mapping: {} };         if(resp.expense_tags && Array.isArray(resp.expense_tags) && resp.expense_tags.length){           CUSTOMER_CATEGORIES = resp.expense_tags.slice();         }         const enabled = !!repeat.enabled;         const mapping = repeat.mapping || {};          if(repeatSwitch){           repeatSwitch.checked = enabled;           // show edit button if mapping exists and receipts not selected           if(mapping && Object.keys(mapping).length && !(useReceiptsSwitch && useReceiptsSwitch.checked)) editRepeatBtn.classList.remove('hidden');           repeatSwitch.addEventListener('change', async function(){             const now = this.checked;             // if enabling and no mapping -> open modal to create mapping             if(now){               if(!mapping || Object.keys(mapping).length === 0){                 // open modal letting user create mapping (but only if receipts not selected)                 if(useReceiptsSwitch && useReceiptsSwitch.checked){                   // do not open — receipts use only αποδειξακια                   editRepeatBtn.classList.add('hidden');                 } else {                   openRepeatModalWithMapping({});                 }               } else {                 if(useReceiptsSwitch && useReceiptsSwitch.checked){                   // receipts + repeat -> hide edit button                   editRepeatBtn.classList.add('hidden');                 } else {                   editRepeatBtn.classList.remove('hidden');                 }               }             } else {               editRepeatBtn.classList.add('hidden');             }             // Persist enabled flag immediately (keep mapping as-is)             const saveResp = await apiSaveRepeatEntry(now, mapping, VAT);             if(saveResp && saveResp.ok){               showFlash('Ενημερώθηκε η ρύθμιση επαναληπτικής εισαγωγής.', 'success');               if(saveResp.expense_tags && Array.isArray(saveResp.expense_tags) && saveResp.expense_tags.length){                 CUSTOMER_CATEGORIES = saveResp.expense_tags.slice();               }             } else {               showFlash('Αποτυχία αποθήκευσης ρύθμισης.', 'error');             }           });         }          // If repeat enabled and mapping exists and modal_summary present -> auto apply mapping now         if (enabled && mapping && Object.keys(mapping).length && summaryInput) {         const receiptsOn = !!(useReceiptsSwitch && useReceiptsSwitch.checked);           if (!receiptsOn && !FORCE_EDIT) {             const did = applyMappingToSummaryAndSubmitUsingMapping(mapping);           if (did) {             const sm = document.getElementById('summaryModal');           if (sm) sm.style.display = 'none';       }     }   }          // Wire edit button         if(editRepeatBtn){           editRepeatBtn.classList.toggle('hidden', !mapping || Object.keys(mapping).length===0 || (useReceiptsSwitch && useReceiptsSwitch.checked));           editRepeatBtn.addEventListener('click', function(){             openRepeatModalWithMapping(mapping);           });         }       } else {         if(repeatSwitch) repeatSwitch.checked = false;       }     } catch(e){       console.warn('initRepeatEntry failed', e);     }   })();    // wire receipts switch to show/hide url input and to enforce mapping rule   if(useReceiptsSwitch){     useReceiptsSwitch.addEventListener('change', function(){       const on = !!this.checked;       // UI: swap inputs       if(on){         document.getElementById('markInput')?.classList.add('hidden');         urlInput?.classList.remove('hidden');         urlInput?.focus();         // when receipts are active, edit button must be hidden (even if repeat on)         if(editRepeatBtn) editRepeatBtn.classList.add('hidden');       } else {         document.getElementById('markInput')?.classList.remove('hidden');         urlInput?.classList.add('hidden');         document.getElementById('markInput')?.focus();         // restore edit button visibility based on repeatSwitch/mapping         // re-init repeat button visibility by calling initRepeatEntry lightly:         (async function(){           try {             const resp = await apiGetRepeatEntry(VAT);             if(resp && resp.ok){               const mapping = (resp.repeat_entry && resp.repeat_entry.mapping) ? resp.repeat_entry.mapping : {};               if(mapping && Object.keys(mapping).length && repeatSwitch && repeatSwitch.checked){                 editRepeatBtn.classList.remove('hidden');               } else {                 editRepeatBtn.classList.add('hidden');               }             }           } catch(e){}         })();       }     });   }    // repeat modal handlers   repeatModalCloseX?.addEventListener('click', closeRepeatModal);   repeatModalCancel?.addEventListener('click', closeRepeatModal);    repeatModalSave?.addEventListener('click', async function(){     // collect mapping     const mapping = collectMappingFromModal();     // persist to backend and enable repeat     const resp = await apiSaveRepeatEntry(true, mapping, VAT);     if (resp && resp.ok) {       if (resp.expense_tags && Array.isArray(resp.expense_tags) && resp.expense_tags.length) {         CUSTOMER_CATEGORIES = resp.expense_tags.slice();       }       if (repeatSwitch) repeatSwitch.checked = true;       // if receipts mode is on, edited mapping should not be used—hide edit button       if (useReceiptsSwitch && useReceiptsSwitch.checked) editRepeatBtn.classList.add('hidden');       else editRepeatBtn.classList.remove('hidden');        showFlash('Αποθηκεύτηκαν οι ρυθμίσεις επαναληπτικής εισαγωγής. Η σελίδα θα επαναφορτωθεί...', 'success', 800);       closeRepeatModal();       setTimeout(function(){ try { window.location.reload(); } catch(e){ console.warn('reload failed', e); } }, 600);       return;     } else {       console.warn('Failed saving repeat mapping', resp);       showFlash('Αποτυχία αποθήκευσης ρυθμίσεων επαναληπτικής εισαγωγής.', 'error');     }   });    // ---------- existing original JS (dismiss banner, force edit, summary modal wiring, etc) ----------   const forceBtn = document.getElementById('forceEditBtn');   const markInput = document.getElementById('markInput');   const existingBanner = document.getElementById('existingBanner');   const dismissBannerBtn = document.getElementById('dismissBannerBtn');    if(dismissBannerBtn){     dismissBannerBtn.addEventListener('click', function(){ if(existingBanner) existingBanner.style.display = 'none'; });   }    if (forceBtn){     forceBtn.addEventListener('click', function(){       const markValRaw = (markInput && markInput.value) ? markInput.value.trim() : '{{ mark or "" }}';       const markVal = encodeURIComponent(markValRaw || '');       if (!markVal){ alert('Δεν δόθηκε MARK για επιβεβαίωση.'); return; }       if (confirm('Θες σίγουρα να επαναχαρακτηρίσεις το MARK και να ανοίξει η φόρμα επεξεργασίας;')) {         if(existingBanner) existingBanner.style.display = 'none';         window.location = SEARCH_BASE_URL + '?mark=' + markVal + '&force_edit=1';       }     });   }    const modal = document.getElementById('summaryModal');   const modalCloseBtns = Array.from(document.querySelectorAll('#modalCloseX, #modalCloseBtn'));   modalCloseBtns.forEach(b => b?.addEventListener('click', function(){     if(modal) modal.style.display = 'none';     removeForceEditParamFromUrl();   }));    {% if modal_summary and (request.args.get('force_edit') == '1' or not allow_edit_existing) %}   setTimeout(()=>{   const m = document.getElementById('summaryModal');   if (!m) return;    // Αν είμαστε σε mode αποδείξεων ΚΑΙ είναι ενεργό το repeat, μην ανοίγεις modal   // ΕΞΑΙΡΕΣΗ: αν είναι reclassification (force_edit=1), τότε άνοιξέ το για να αλλάξουμε χαρακτηρισμούς.   const receiptsOn = !!(document.getElementById('useReceiptsSwitch') && document.getElementById('useReceiptsSwitch').checked);   const repeatOn   = !!(document.getElementById('repeatEntrySwitch') && document.getElementById('repeatEntrySwitch').checked);    // Επιπλέον έλεγχος: αν το summary είναι σαφώς Απόδειξη, αντιμετώπισέ το ως receipts flow   let isReceiptSummary = false;   try {     const raw = (document.getElementById('summaryJsonInput')?.value || '').trim();     if (raw) {       const sobj = JSON.parse(raw);       const tname = (sobj.type_name || sobj.type || '').toString().toLowerCase();       const cat   = (sobj.category || sobj.characteristic || sobj['χαρακτηρισμός'] || '').toString().toLowerCase();       isReceiptSummary = !!(sobj.is_receipt || tname.includes('απόδει') || tname.includes('receipt') || cat === 'αποδειξακια');     }   } catch(_){}     if ((receiptsOn || isReceiptSummary) && repeatOn && !FORCE_EDIT) {     // auto-flow αποδείξεων όταν είναι ενεργό το "Επαναληψιμη εισαγωγή"     try {       let raw = (document.getElementById('summaryJsonInput')?.value || '').trim();       if (!raw || raw === '{}' || raw === 'null') {         try { raw = JSON.stringify({{ modal_summary | tojson | safe }}); } catch(_) {}       }       const sobj = raw ? JSON.parse(raw) : {};       // Κανονικοποίησε σαν απόδειξη και επιβεβαίωσε μία φορά       const url = document.getElementById('scrapeUrlInput')?.value || '';       (async () => {         try {           await RC.confirmReceiptOnce(RC.normalizeReceiptSummary(sobj), url);           // κράτα το mode σε receipts και κάνε hard redirect για καθαρή κατάσταση           try { localStorage.setItem('useReceiptsSwitch','1'); } catch(_){}           const base = location.pathname + '?use_receipts=1';           location.replace(base);         } catch(e) {           console.warn('auto-confirm receipt failed', e);         }       })();     } catch(e) { console.warn('auto-flow receipts error', e); }     return;   }     // Αλλιώς, άνοιξέ το κανονικά   try {     const summaryInputEl = document.getElementById('summaryJsonInput');     if (summaryInputEl && (!summaryInputEl.value || summaryInputEl.value === '{}')) {       summaryInputEl.value = {{ modal_summary | tojson | safe }};     }     const obj = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');     renderSummaryLinesFromObject(obj);   } catch(e) { console.warn('renderSummaryLinesFromObject error', e); }    m.style.display = 'flex';   removeForceEditParamFromUrl(); }, 80); {% endif %}      {% if modal_warning %}   const afmModal = document.getElementById('afmWarningModal');   const afmModalBtn = document.getElementById('afmModalConfirm');   if (afmModal && afmModalBtn){     setTimeout(()=>{ afmModal.style.display = 'flex'; }, 50);     afmModalBtn.addEventListener('click', function(){ afmModal.style.display = 'none'; });   }   {% endif %}    // --- the rest of your existing summary wiring (no changes) ---   if (summaryInput){   try {     let summaryData = JSON.parse(summaryInput.value || '{}');     if (!Array.isArray(summaryData.lines)) summaryData.lines = [];     summaryData.lines = summaryData.lines.map(l => {       if (!l) return {id:'', description:'', amount:'', vat:'', category:'', vatCategory:''};       l.id = (l.id!==undefined)?String(l.id):(l.line_id!==undefined?String(l.line_id):'');       l.category = l.category || l.cat || l.line_category || l['κατηγορία'] || '';       return l;     });      // multi-line selects     document.querySelectorAll('#linesTableBody tr[data-line-id]').forEach(tr => {       const lid = String(tr.dataset.lineId || '');       const sel = tr.querySelector('select.expense-category');       if (!sel) return;       let existing = summaryData.lines.find(x => String(x.id) === lid);       if (!existing){         existing = {id: lid, category: ''};         summaryData.lines.push(existing);       }       sel.value = existing.category || '';       sel.addEventListener('change', function(){ existing.category = sel.value; summaryInput.value = JSON.stringify(summaryData); });     });      // single-line buttons     const singleLine = document.getElementById('singleLine');     if (singleLine){       const lid = String(singleLine.dataset.lineId || '');       let existing = summaryData.lines.find(x => String(x.id) === lid);       if (!existing){         existing = {id: lid, category: ''};         summaryData.lines.push(existing);       }       const buttons = document.querySelectorAll('#categoryButtons .category-btn');       function markActive(cat){         buttons.forEach(b => {           b.classList.toggle('bg-sky-600', b.dataset.cat === cat);           b.classList.toggle('text-white', b.dataset.cat === cat);         });       }       if (existing.category) markActive(existing.category);       buttons.forEach(btn => {         btn.addEventListener('click', function(){           const cat = this.dataset.cat;           existing.category = (existing.category === cat) ? '' : cat;           markActive(existing.category);           summaryInput.value = JSON.stringify(summaryData);         });       });       const clearBtn = document.getElementById('clearCategory');       clearBtn?.addEventListener('click', function(){         existing.category = '';         markActive('');         summaryInput.value = JSON.stringify(summaryData);       });     }     summaryInput.value = JSON.stringify(summaryData);   } catch(e){     console.warn('summary JSON parse/normalize error', e);   } }     // --- the table / datatables logic code (kept unchanged) ---   const hasTable = document.querySelector('.summary-table') !== null;   if (hasTable){     const jq = window.jQuery;     const dtAvail = jq && jq.fn && jq.fn.dataTable;     if (dtAvail){       try {         const dt = $('.summary-table').DataTable({           paging: true,           scrollY: '55vh',           scrollX: true,           scrollCollapse: true,           fixedHeader: { header: true, headerOffset: 0 },           colReorder: true,           autoWidth: false,           columnDefs: [{ orderable: false, targets: 0 }]         });         if (typeof dt.colResize === 'function') {           try { dt.colResize({ resizeMode: 'flex' }); } catch(e){ console.warn('colResize failed', e); }         }         const globalSearch = document.getElementById('globalSearch');         if (globalSearch){           globalSearch.addEventListener('input', function(){ dt.search(this.value).draw(); });         }         setTimeout(()=>{ try{ dt.columns.adjust().draw(); }catch(e){} }, 120);       } catch(e){         console.warn('DataTables init failed — falling back', e);       }     } else {       const globalSearch = document.getElementById('globalSearch');       if (globalSearch){         globalSearch.addEventListener('input', function(){           const q = this.value.toLowerCase();           document.querySelectorAll('.summary-table tbody tr').forEach(tr => {             tr.style.display = tr.textContent.toLowerCase().indexOf(q) !== -1 ? '' : 'none';           });         });       }     }      try {       const anyCheckbox = document.querySelector('input[name="delete_mark"]');       if (anyCheckbox){         const firstTh = document.querySelector('.summary-table thead th');         if (firstTh && !document.getElementById('selectAll')){           const chk = document.createElement('input');           chk.type = 'checkbox'; chk.id = 'selectAll'; chk.title = 'Επιλογή όλων';           chk.style.marginRight = '6px';           firstTh.prepend(chk);           chk.addEventListener('change', function(){ document.querySelectorAll('input[name="delete_mark"]').forEach(cb => cb.checked = this.checked); });         }         const headers = Array.from(document.querySelectorAll('.summary-table thead th')).map(h => h.innerText.trim().toLowerCase());         let markIdx = headers.findIndex(h => h.includes('mark'));         if (markIdx === -1) markIdx = headers.findIndex(h => h.includes('αφμ') || h.includes('afm'));         if (markIdx >= 0){           document.querySelectorAll('.summary-table tbody tr').forEach(row => {             const cb = row.querySelector('input[name="delete_mark"]');             if (cb){               const td = row.querySelectorAll('td')[markIdx];               if (td){                 const v = td.innerText.trim();                 if (v) cb.value = v;               }             }           });         }       }     } catch(e){ console.warn('select-all / mark mapping error', e); }   }    // --- new: restore table / reload when markInput cleared ---   (function wireRobustClearRestore(){     const mi = (typeof markInput !== 'undefined' && markInput) ? markInput : document.getElementById('markInput');     if (!mi) return;      let t = null;     let lastVal = mi.value || '';      function restoreAllRowsAndUi(){       try {         if (window.jQuery && jQuery.fn && jQuery.fn.dataTable) {           try {             const dt = $('.summary-table').DataTable();             dt.search('').columns().search('').draw();             try {               dt.rows().nodes().to$().each(function(){ this.style.display = ''; });             } catch(e){ /* ignore */ }             try { dt.columns.adjust().draw(false); } catch(e){ /* ignore */ }           } catch(e) {             console.warn('DataTables restore failed, falling back to DOM restore', e);             document.querySelectorAll('.summary-table tbody tr').forEach(tr => tr.style.display = '');           }         } else {           document.querySelectorAll('.summary-table tbody tr').forEach(tr => tr.style.display = '');         }          const selectAll = document.getElementById('selectAll') || document.querySelector('.summary-table thead input[type="checkbox"]#selectAll');         if (selectAll) selectAll.checked = false;          const evt = new Event('tableRestored');         document.querySelectorAll('.summary-table').forEach(t => t.dispatchEvent(evt));       } catch(err){         console.warn('restoreAllRowsAndUi failed', err);       }     }   document.addEventListener('DOMContentLoaded', function(){   try {     const m = document.getElementById('summaryModal');     if(m && (m.style.display === 'flex' || getComputedStyle(m).display !== 'none')){       // small timeout to let template-rendered inner HTML settle       setTimeout(()=>{ try { prefillSummaryModal(); } catch(e){ console.warn(e); } }, 40);     }   } catch(e){ /* ignore */ } });     function maybeRestore(){       clearTimeout(t);       t = setTimeout(()=>{         try {           const v = (mi.value || '').trim();           if (v === '' && (lastVal && lastVal.trim() !== '')) {             try {               if (typeof INITIAL_MARK !== 'undefined' && INITIAL_MARK && INITIAL_MARK.trim() !== '') {                 const cur = new URL(window.location.href);                 if (cur.searchParams.has('mark') || cur.searchParams.has('force_edit')) {                   window.location = SEARCH_BASE_URL;                   return;                 }               }             } catch(e){ /* ignore URL errors and fallthrough to client restore */ }              restoreAllRowsAndUi();           }           lastVal = v;         } catch(e){           console.warn(e);         }       }, 150);     }      mi.addEventListener('input', maybeRestore);     mi.addEventListener('keyup', maybeRestore);     mi.addEventListener('paste', function(){ setTimeout(maybeRestore, 50); });     mi.addEventListener('cut', function(){ setTimeout(maybeRestore, 50); });     mi.addEventListener('blur', maybeRestore);      let pollInterval = null;     try {       pollInterval = setInterval(() => {         const current = (mi.value || '').trim();         if (current !== (lastVal || '').trim()) {           maybeRestore();         }       }, 300);        window.addEventListener('beforeunload', () => {         if (pollInterval) clearInterval(pollInterval);       });     } catch(e){     }   })();    // ----- SCRAPER integration: auto call endpoint when URL provided and show modal -----   // Add a handler: when receipts switch ON and user submits form -> call /api/scrape_receipt and show modal   // ====================== RECEIPTS SCRAPE FLOW ====================== document.getElementById('markSearchForm')?.addEventListener('submit', async function (evt) {   if (useReceiptsSwitch && useReceiptsSwitch.checked) {      // --- de-dupe receipts submit (scrape) ---     // --- de-dupe receipts submit (scrape) ---   const form = evt.currentTarget;   if (form && form.dataset.receiptsSubmitting === '1') {     evt.preventDefault();     return;   }   if (form) form.dataset.receiptsSubmitting = '';   if (form) form.dataset.receiptsSubmitting = '1';  evt.preventDefault();     const url = (urlInput && urlInput.value) ? urlInput.value.trim() : '';     if (!url) {       showFlash('Εισάγετε URL για αποδείξεις.', 'error');       return;     }      try {       const res = await fetch('/api/scrape_receipt', {         method: 'POST',         credentials: 'same-origin',         headers: { 'Content-Type': 'application/json', 'X-Requested-With': 'XMLHttpRequest' },         body: JSON.stringify({ url: url })       });        const j = await res.json().catch(() => null);       if (!res.ok || !j || j.ok === false) {         const msg = j && (j.error || j.message) ? (j.error || j.message) : ('Server ' + (res.status || ''));         showFlash('Σφάλμα scraper: ' + msg, 'error', 6000);         return;       }        if (j && j.is_invoice === true) {   openReceiptWarning('Το URL φαίνεται να περιέχει Τιμολόγιο — δεν θα αποθηκευτεί ως Απόδειξη. Έλεγξε το παραστατικό.');   return; // STOP         }         // ---- Έλεγχος έτους απόδειξης vs ενεργή χρήση (modal + STOP) try {   // 1) Πάρε ενεργή χρήση από ACTIVE_YEAR ή από το backend (fallback)   const activeYear = await getActiveFiscalYear();    // 2) Εξήγαγε issueYear από την απόκριση του scraper   let issueYear = null;   if (j && j.issue_year != null && String(j.issue_year).trim() !== '') {     // δέξου είτε καθαρό έτος είτε π.χ. "2025"     const m = String(j.issue_year).match(/\b(19|20)\d{2}\b/);     issueYear = m ? m[0] : String(j.issue_year);   } else if (j) {     const anyDate = j.issue_date || j.issueDate || j.date || '';     if (typeof anyDate === 'string') {       const m = anyDate.match(/\b(19|20)\d{2}\b/);       if (m) issueYear = m[0];     }   }    // 3) Αν δεν ταιριάζουν -> δείξε modal και σταμάτα   if (activeYear && issueYear && String(issueYear) !== String(activeYear)) {     openReceiptWarning(`Προσοχή: Η απόδειξη είναι του ${issueYear}, ενώ η ενεργή χρήση είναι ${activeYear}. Η διαδικασία μπλοκάρεται.`);     return; // STOP   } } catch (_) {   /* αν αποτύχει ο έλεγχος, δεν μπλοκάρουμε σιωπηλά */ }         // Δημιουργία αυξανόμενου MARK 15 ψηφίων (από το backend)       const markRes = await fetch('/api/next_receipt_mark', { credentials: 'same-origin' });       const markData = await markRes.json().catch(() => null);       const nextMark = (markData && markData.mark) ? markData.mark : '';        // Prepare summary object για modal       const summaryObj = {         mark: nextMark,         AA: j.progressive_aa || '',         AFM_issuer: j.issuer_vat || '',         Name: j.issuer_name || '',         issueDate: j.issue_date || '',         type_name: 'ΑΠΟΔΕΙΞΗ',         totalValue: j.total_amount || '',         totalNetValue: j.total_amount || '',         totalVatAmount: (j.raw && (j.raw.totalVatAmount || j.raw.totalVat)) || '',         lines: []       ,   type: 'ΑΠΟΔΕΙΞΗ',   category: 'αποδειξακια',   is_receipt: true,   number: (j.progressive_aa || '')};        if (j.raw && Array.isArray(j.raw.lines) && j.raw.lines.length) {         j.raw.lines.forEach((l, idx) => {           summaryObj.lines.push({             id: l.id || ('r' + idx),             amount: l.amount || l.lineTotal || '',             vat: l.vat || l.vatRate || '',             vatCategory: l.vatCategory || l.vat_category || '',             description: l.description || l.desc || ''           });         });       } else {         summaryObj.lines.push({           id: 'r0',           amount: j.total_amount || '',           vat: (j.raw && (j.raw.vat || '')) || '',           vatCategory: (j.raw && (j.raw.vatCategory || '')) || '',           description: (j.raw && (j.raw.description || '')) || ''         });       }        // Populate modal inputs       const summaryInput = document.getElementById('summaryJsonInput');       if (summaryInput) summaryInput.value = JSON.stringify(summaryObj);         document.getElementById('scrapeUrlField')?.setAttribute('value', url);       const desiredCat = CUSTOMER_CATEGORIES.includes('αποδειξακια')         ? 'αποδειξακια'         : (CUSTOMER_CATEGORIES[0] || '');       document.getElementById('scrapeCategoryField')?.setAttribute('value', desiredCat);       document.getElementById('scrapeForceField')?.setAttribute('value', 'false');        // Ενημέρωση modal       const modal = document.getElementById('summaryModal');       if (modal) {         // ensure populate code runs (some populate watchers poll or listen for modal display)         // prefer calling RC_forcePopulateSummaryModal if present         if (window.RC_forcePopulateSummaryModal) {           try { window.RC_forcePopulateSummaryModal(); } catch(e){ console.warn('RC_forcePopulateSummaryModal failed', e); }         }         if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }         if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { showFlash('Λήφθηκε απόδειξη — ελέγξτε τα στοιχεία και πατήστε "Αποθήκευση στο Cache".', 'success', 5000); }       }      } catch (err) {       console.error('scrape_receipt error', err);       showFlash('Σφάλμα scraper: ' + (err.message || err), 'error', 6000);     }   } });     // Intercept "Αποθήκευση στο Cache" to perform AJAX save for scraped receipts   // intercept saveSummaryForm submit when scrapeUrlField is present // --- replace the previous payload construction + fetch with this robust version --- document.getElementById('saveSummaryForm')?.addEventListener('submit', async function(e){   const scrapeUrl = document.getElementById('scrapeUrlField')?.value || '';   if(!scrapeUrl) return; // let normal (invoice) flow proceed   e.preventDefault();    let summary = {};   try {     summary = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');   } catch(err){     console.warn('Failed parsing summaryJsonInput', err);     alert('Σφάλμα: άκυρα δεδομένα παραστατικού.');     return;   }    summary.is_receipt = true;   if (!summary.category || String(summary.category).trim() === '') summary.category = 'αποδειξακια';   if (!summary.type || String(summary.type).trim() === '') summary.type = 'ΑΠΟΔΕΙΞΗ';   if (!summary.type_name || String(summary.type_name).trim() === '') summary.type_name = 'Απόδειξη';    const aaCoalesce = summary.number || summary.AA || summary.aa || summary.progressive_aa || '';   summary.number = aaCoalesce;    if (!Array.isArray(summary.lines)) summary.lines = [];   summary.lines = summary.lines.map((l, i) => ({     id: (l && (l.id || l.line_id)) ? String(l.id || l.line_id) : ('r' + i),     description: (l && (l.description || l.desc)) || '',     amount: (l && (l.amount || l.lineTotal || l.total)) || '',     vat: (l && (l.vat || l.vatRate)) || '',     vatCategory: (l && (l.vatCategory || l.vat_category)) || '',     category: (l && l.category) || ''   }));    try {     const res = await fetch('/save_summary', {       method: 'POST',       credentials: 'same-origin',       headers: { 'Content-Type': 'application/json', 'X-Requested-With': 'XMLHttpRequest' },       body: JSON.stringify(summary)     });     if (!res.ok) {       const t = await res.text().catch(()=>'');       alert('Αποτυχία αποθήκευσης (HTTP ' + res.status + '): ' + t);       return;     }     try { document.getElementById('summaryModal').style.display = 'none'; } catch(_) {}     window.location = window.location.pathname;   } catch (err) {     console.error('save_summary AJAX error', err);     alert('Σφάλμα αποθήκευσης: ' + (err.message || err));   } });  document.getElementById('saveSummaryForm')?.addEventListener('submit', async function(e){   const scrapeUrl = document.getElementById('scrapeUrlField')?.value || '';   if(!scrapeUrl) return; // allow normal server flow for invoice flow   e.preventDefault();    // parse summary from hidden input   let summary = {};   try {     summary = JSON.parse(document.getElementById('summaryJsonInput').value || '{}');   } catch(err){     console.warn('Failed parsing summaryJsonInput', err);     showFlash('Σφάλμα: άκυρα δεδομένα παραστατικού.', 'error');     return;   }    // robust AFM extraction (try many variants)   const afmFromSummary = (summary && (summary.AFM_issuer || summary.AFM || summary.issuer_vat || summary.issuerVat || summary.issuer_vat)) ||                          (summary && summary.raw && (summary.raw.issuer_vat || summary.raw.issuerVat || summary.raw.AFM || summary.raw.AFM_issuer));   const afmVal = (typeof VAT !== 'undefined' && VAT) ? VAT : (afmFromSummary ? String(afmFromSummary).trim() : '');    // robust year extraction: prefer ACTIVE_YEAR, then summary.year, then parse issueDate, then fallback to current year   let yearVal = null;   try {     if (typeof ACTIVE_YEAR !== 'undefined' && ACTIVE_YEAR) yearVal = String(ACTIVE_YEAR);     else if (summary && (summary.year || summary.Year)) yearVal = String(summary.year || summary.Year);     else if (summary && summary.issueDate) {       const parts = (summary.issueDate || '').split('/');       if (parts.length >= 3) yearVal = parts[2];     }     if (!yearVal) yearVal = String((new Date()).getUTCFullYear());   } catch(e){     yearVal = String((new Date()).getUTCFullYear());   }    // final mark   const markVal = summary.mark || document.getElementById('scrapeUrlField')?.dataset.mark || '';    // if afm missing -> abort with client message (server requires AFM or active session)   if (!afmVal) {     console.warn('confirm_receipt abort: missing AFM', { summary });     showFlash('Αδύνατο να αποθηκευτεί: λείπει AFM του ενεργού πελάτη. Επιλέξτε ενεργό πελάτη ή βεβαιωθείτε ότι το παραστατικό περιέχει ΑΦΜ.', 'error', 7000);     return;   }    const payload = {     url: scrapeUrl,     summary: summary,     force: (document.getElementById('scrapeForceField')?.value === 'true'),     category: 'αποδειξακια',     afm: afmVal,     year: String(yearVal),     mark: (summary.mark || markVal || '')   };    console.log('[RC-DEBUG] FETCH -> /api/confirm_receipt called', '/api/confirm_receipt', payload);    // send to backend   try {     const res = await fetch('/api/confirm_receipt', {       method: 'POST',       credentials: 'same-origin',       headers: {'Content-Type':'application/json','X-Requested-With':'XMLHttpRequest'},       body: JSON.stringify(payload)     });     const j = await res.json().catch(()=>null);     if(!res.ok || !j || !j.ok){       console.warn('confirm_receipt failed', res.status, j);       showFlash('Σφάλμα αποθήκευσης: ' + ((j && j.error) ? j.error : ('Server ' + (res.status || ''))) , 'error', 7000);       return;     }     showFlash('Αποθηκεύτηκε η απόδειξη (excel + json).', 'success');     document.getElementById('summaryModal').style.display = 'none';     // clean hidden fields     document.getElementById('scrapeUrlField').value = '';     document.getElementById('scrapeForceField').value = 'false';   } catch(err){     console.error('confirm_receipt fetch error', err);     showFlash('Σφάλμα δικτύου κατά την αποθήκευση.', 'error');   } });  // --- Fix: on page load, populate modal if summaryJsonInput already contains summary JSON --- // This replaces a missing populateSummaryModal call and uses the populate watcher (RC_forcePopulateSummaryModal) if available. // Robust startup: only show summary modal if summaryJsonInput actually contains meaningful data document.addEventListener("DOMContentLoaded", function(){   try {     const summaryEl = document.getElementById("summaryJsonInput");     const modal = document.getElementById("summaryModal");     if (!summaryEl) return;      let obj = {};     try { obj = JSON.parse(summaryEl.value || '{}'); } catch(e){ obj = {}; }      function isMeaningful(o){       if (!o || typeof o !== 'object') return false;        // quick acceptors: important single fields       const important = ['mark','MARK','AFM_issuer','AFM','totalValue','totalNetValue','total_amount','issueDate','issue_date','progressive_aa','AA'];       for (const k of important) {         if (o[k] !== undefined && o[k] !== null && String(o[k]).trim() !== '') return true;       }        // if lines array exists and has at least one line with some non-empty field -> accept       if (Array.isArray(o.lines) && o.lines.length) {         for (const ln of o.lines) {           if (!ln) continue;           if ( (ln.description && String(ln.description).trim() !== '') ||                (ln.amount && String(ln.amount).trim() !== '') ||                (ln.id && String(ln.id).trim() !== '') ) return true;         }       }        // fallback: if object has more than one non-empty key -> accept       const nonEmptyKeys = Object.keys(o).filter(k => {         try { return o[k] !== null && o[k] !== undefined && String(o[k]).trim() !== ''; } catch(e){ return false; }       });       if (nonEmptyKeys.length > 1) return true;        return false;     }      if (isMeaningful(obj)) {       // ask the populate watcher to run (if available), else run a safe local populate       if (window.RC_forcePopulateSummaryModal) {         try { window.RC_forcePopulateSummaryModal(); } catch(e){ console.warn('RC_forcePopulateSummaryModal failed', e); }       } else {         // try to populate basic fields if populate function not present         try {           if (typeof populateSummaryModal === 'function') try { populateSummaryModal(obj); } catch(_) {}         } catch(_) {}       }        if (modal) if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }     } else {       // ensure modal remains hidden on load       if (modal) modal.style.display = 'none';     }   } catch(e){     console.warn('startup populate summary failed', e);   } });      // This expects rows to have 'input[type="radio"][name="active_name"]' and row id pattern cred-row-<name>   document.querySelectorAll('tr[id^="cred-row-"]').forEach(tr=>{     tr.addEventListener('dblclick', function(e){       try {         const radio = tr.querySelector('input[type="radio"][name="active_name"]');         if(radio){           radio.checked = true;           // also give visual feedback (optional)           tr.classList.add('bg-gray-100');           setTimeout(()=>tr.classList.remove('bg-gray-100'), 600);         }       } catch(err){ console.warn('dblclick select radio failed', err); }     });   });  });  // === DEBUG SNIPPET: paste near end of your existing scripts === (function(){   function safeLog(...a){ try{ console.log('[RC-DEBUG]', ...a); }catch(e){} }    // Global JS error catcher   window.addEventListener('error', function(e){     safeLog('Window error', e.message, e.filename + ':' + e.lineno, e.error);   });   window.addEventListener('unhandledrejection', function(ev){     safeLog('Unhandled promise rejection', ev.reason);   });    // Watch important DOM elements existence   function checkDom(){     const names = [       'markSearchForm','useReceiptsSwitch','scrapeUrlInput',       'summaryModal','summaryJsonInput','saveSummaryForm',       'scrapeUrlField','scrapeCategoryField','scrapeForceField'     ];     const out = {};     names.forEach(n => out[n] = !!document.getElementById(n));     safeLog('DOM presence', out);   }   document.addEventListener('DOMContentLoaded', function(){ checkDom(); });    // Hook markSearchForm submit   const msf = document.getElementById('markSearchForm');   if(msf){     msf.addEventListener('submit', function(e){       try{         const useReceipts = !!(document.getElementById('useReceiptsSwitch') && document.getElementById('useReceiptsSwitch').checked);         safeLog('markSearchForm.submit fired', 'useReceipts=', useReceipts, 'mark=', (document.getElementById('markInput')?.value||''), 'urlInput=', (document.getElementById('scrapeUrlInput')?.value||''));       }catch(err){ safeLog('submit hook error', err); }     }, true);   } else safeLog('markSearchForm NOT FOUND');    // Hook receipts switch changes   const rs = document.getElementById('useReceiptsSwitch');   if(rs){     rs.addEventListener('change', function(e){       safeLog('useReceiptsSwitch change, checked=', rs.checked);       // show/hide created url input for visibility       const ui = document.getElementById('scrapeUrlInput');       if(ui) ui.style.outline = rs.checked ? '2px solid orange' : 'none';     });   } else safeLog('useReceiptsSwitch NOT FOUND');    // Monitor fetch to /api/scrape_receipt by wrapping fetch (only for debugging)   const origFetch = window.fetch;   window.fetch = async function(resource, init){     try{       if(typeof resource === 'string' && resource.indexOf('/api/scrape_receipt') !== -1){         safeLog('FETCH -> /api/scrape_receipt called', resource, init && init.body ? (init.body.length>100 ? init.body.slice(0,100)+'...' : init.body) : init);       }       if(typeof resource === 'string' && resource.indexOf('/api/confirm_receipt') !== -1){         safeLog('FETCH -> /api/confirm_receipt called', resource, init && init.body ? (function(){ try { return JSON.parse(init.body); } catch(e){ return init.body; } })() : init);         // Visual cue: flash border on modal         const m = document.getElementById('summaryModal');         if(m) { m.style.outline = '4px dashed lime'; setTimeout(()=>{ if(m) m.style.outline=''; }, 1200); }       }     }catch(e){ safeLog('fetch-wrap log failed', e); }     return origFetch.apply(this, arguments);   };    // Hook the saveSummaryForm submit (the interceptor should already exist in your code)   const ssf = document.getElementById('saveSummaryForm');   if(ssf){     ssf.addEventListener('submit', function(e){       try{         // show current fields         const summaryVal = (document.getElementById('summaryJsonInput')?.value) || null;         const scrapeUrl = document.getElementById('scrapeUrlField')?.value || null;         const scrapeCat = document.getElementById('scrapeCategoryField')?.value || null;         const scrapeForce = document.getElementById('scrapeForceField')?.value || null;         safeLog('saveSummaryForm.submit (intercept) summaryPresent=', !!summaryVal, 'scrapeUrl=', scrapeUrl, 'scrapeCat=', scrapeCat, 'scrapeForce=', scrapeForce);         // also pretty-print JSON if small         if(summaryVal){           try { safeLog('summary JSON', JSON.parse(summaryVal)); } catch(e){ safeLog('summary raw', summaryVal.slice(0,500)); }         }       }catch(err){ safeLog('saveSummaryForm submit hook error', err); }     }, true);   } else safeLog('saveSummaryForm NOT FOUND');    // When modal is shown/hidden, log it   const observer = new MutationObserver(function(muts){     try{       const modal = document.getElementById('summaryModal');       if(modal){         const style = window.getComputedStyle(modal);         if(style.display !== 'none'){           safeLog('summaryModal is visible');         } else {           // optional: safeLog('summaryModal is hidden');         }       }     }catch(e){ safeLog('mutation observer err', e); }   });   observer.observe(document.documentElement || document.body, { attributes: true, childList: true, subtree: true });    // Periodic sanity check: print whether modal and form are present every 2s for 6 checks   let checks = 0;   const interval = setInterval(function(){     checks++;     const present = {       modal: !!document.getElementById('summaryModal'),       summaryInput: !!document.getElementById('summaryJsonInput'),       saveForm: !!document.getElementById('saveSummaryForm'),       urlField: !!document.getElementById('scrapeUrlField')     };     safeLog('periodic-dom-check', present);     if(checks>6) clearInterval(interval);   }, 2000);    safeLog('RC-DEBUG injected'); })(); (function(){   function getSummaryData(){     const input = document.getElementById('summaryJsonInput');     if(!input) return null;     try {       const data = JSON.parse(input.value || '{}');       if(!Array.isArray(data.lines)) data.lines = [];       return { input, data };     } catch(e) {       return { input, data: { lines: [] } };     }   }    function saveSummaryData(obj){     if(!obj || !obj.input) return;     obj.input.value = JSON.stringify(obj.data);   }    // Click on category buttons (delegation)   document.addEventListener('click', function(ev){     const btn = ev.target.closest && ev.target.closest('.category-btn');     if(!btn) return;     ev.preventDefault();     // prevent other handlers (the "other modal" that opened)     try { ev.stopImmediatePropagation(); } catch(e){}     try { ev.stopPropagation(); } catch(e){}      const lid = btn.dataset.lineId || (btn.closest('[data-line-id]') && btn.closest('[data-line-id]').dataset.lineId) || '';     const cat = btn.dataset.cat || '';     if(!lid) return;      const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }      // toggle: if already set -> clear, else set     line.category = (String(line.category || '') === String(cat)) ? '' : String(cat);      // update button classes for that line     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.toggle('bg-sky-600', (b.dataset.cat === line.category));       b.classList.toggle('text-white', (b.dataset.cat === line.category));     });      // also update corresponding select if present     const sel = document.querySelector('select.expense-category[data-line-id="'+CSSescape(lid)+'"]');     if(sel) try { sel.value = line.category || ''; } catch(e){}      saveSummaryData(state);   }, true);    // change on line-selects   document.addEventListener('change', function(ev){     const sel = ev.target;     if(!sel || !sel.matches || !sel.matches('select.expense-category')) return;     const lid = sel.dataset.lineId || (sel.closest('[data-line-id]') && sel.closest('[data-line-id]').dataset.lineId) || '';     if(!lid) return;     const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }     line.category = String(sel.value || '');     // update any buttons     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.toggle('bg-sky-600', (b.dataset.cat === line.category));       b.classList.toggle('text-white', (b.dataset.cat === line.category));     });     saveSummaryData(state);   }, true);    // clear button (if exists)   document.addEventListener('click', function(ev){     const cb = ev.target.closest && ev.target.closest('#clearCategory');     if(!cb) return;     ev.preventDefault();     try { ev.stopImmediatePropagation(); } catch(e){}     const container = cb.closest('[data-line-id]') || document;     const lid = container && container.dataset && container.dataset.lineId ? container.dataset.lineId : '';     if(!lid) return;     const state = getSummaryData();     if(!state) return;     let { data } = state;     let line = data.lines.find(l => String(l.id || l.line_id || '') === String(lid));     if(!line){       line = { id: lid, category: '' };       data.lines.push(line);     }     line.category = '';     // update UI     document.querySelectorAll('.category-btn[data-line-id="'+CSSescape(lid)+'"]').forEach(b=>{       b.classList.remove('bg-sky-600','text-white');     });     const sel = document.querySelector('select.expense-category[data-line-id="'+CSSescape(lid)+'"]');     if(sel) sel.value = '';     saveSummaryData(state);   }, true);    // Ensure hidden input is up-to-date before normal form submit   const saveForm = document.getElementById('saveSummaryForm');   if(saveForm){     saveForm.addEventListener('submit', function(ev){       // just ensure input is stringified (handlers already update it live)       const s = getSummaryData();       if(s) saveSummaryData(s);       // allow normal submit (server-side will persist)     });   }    // small CSS.escape fallback used above   function CSSescape(s){     if(window.CSS && CSS.escape) return CSS.escape(s);     return String(s).replace(/([ #;?%&,.+*~\':"!^$[\]()=>|\/@])/g,'\\$1');   } })();  (function RC_AUTO_INJECT_SUMMARY_MODAL(){   try {     console.log('[RC-DEBUG] periodic-dom-check starting');      function exists(id){ return !!document.getElementById(id); }      const needs = {       modal: exists('summaryModal'),       summaryInput: exists('summaryJsonInput'),       saveForm: exists('saveSummaryForm'),       urlField: exists('scrapeUrlField')     };     console.log('[RC-DEBUG] DOM presence (before inject)', needs);      if (needs.modal && needs.summaryInput && needs.saveForm) {       console.log('[RC-DEBUG] All required DOM elements present, no injection needed');       return;     }      // Build modal HTML (minimal, matches server-side expected IDs)     const modalHtml = ` <div id="summaryModal" class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 overflow-auto p-4" style="display:none;">   <div class="bg-white rounded-lg shadow-lg w-full max-w-6xl p-6">     <div class="flex justify-between items-center mb-4">       <h3 class="text-lg font-semibold">Περίληψη Παραστατικού - <span id="summaryModalMark">MARK</span></h3>       <button id="modalCloseX" class="text-gray-500 text-xl font-bold">✕</button>     </div>      <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">       <div><strong>Α/Α Παραστατικού</strong><div id="summary_AA"></div></div>       <div><strong>ΑΦΜ</strong><div id="summary_AFM"></div></div>       <div><strong>Επωνυμία</strong><div id="summary_Name"></div></div>       <div><strong>Ημερομηνία</strong><div id="summary_issueDate"></div></div>       <div><strong>Τύπος Παραστατικού</strong><div id="summary_type_name"></div></div>       <div><strong>Καθαρή Αξία</strong><div id="summary_totalNetValue"></div></div>       <div><strong>ΦΠΑ</strong><div id="summary_totalVatAmount"></div></div>       <div><strong>Σύνολο</strong><div id="summary_totalValue"></div></div>     </div>      <h4 class="font-medium mt-4 mb-2">Γραμμές Παραστατικού (για χαρακτηρισμό)</h4>     <div id="summaryLinesContainer" class="overflow-auto max-h-96 border rounded p-2"></div>      <div class="mt-4 flex justify-between items-center">       <div class="text-sm text-gray-600">Σημείωση: οι κατηγορίες προέρχονται από τα settings του πελάτη.</div>       <div class="flex justify-end gap-2">         <form method="POST" action="{{ url_for('save_summary') }}" id="saveSummaryForm">           <input type="hidden" name="summary_json" id="summaryJsonInput" value='{}'>           <button type="submit" class="bg-sky-600 text-white px-3 py-2 rounded">Αποθήκευση στο Cache</button>           <input type="hidden" id="scrapeUrlField" name="scrape_url" value="">           <input type="hidden" id="scrapeCategoryField" name="scrape_category" value="">           <input type="hidden" id="scrapeForceField" name="scrape_force" value="false">         </form>         <button id="modalCloseBtn" class="px-3 py-2 border rounded">Κλείσιμο</button>       </div>     </div>   </div> </div>`.trim();      // Inject into document.body     const wrapper = document.createElement('div');     wrapper.innerHTML = modalHtml;     // append at end of body so it does not break layout     document.body.appendChild(wrapper.firstChild);      // wire close buttons to hide modal (same behavior as original)     function hideModal(){       const m = document.getElementById('summaryModal');       if (m) m.style.display = 'none';       try { history.replaceState(null, '', location.pathname + (location.search || '') + location.hash); } catch(e){}     }     document.getElementById('modalCloseX')?.addEventListener('click', hideModal);     document.getElementById('modalCloseBtn')?.addEventListener('click', hideModal);      // Re-check presence     const needs_after = {       modal: exists('summaryModal'),       summaryInput: exists('summaryJsonInput'),       saveForm: exists('saveSummaryForm'),       urlField: exists('scrapeUrlField')     };     console.log('[RC-DEBUG] DOM presence (after inject)', needs_after);     console.log('[RC-DEBUG] Auto-injection done — the client flow should now find the modal and form.');    } catch (e) {     console.error('[RC-DEBUG] auto-inject error', e);   } })(); (function RC_POPULATE_SUMMARY_MODAL(){   try {     console.log('[RC-DEBUG] summary-populate init');      const summaryInput = document.getElementById('summaryJsonInput');     const modal = document.getElementById('summaryModal');     const markEl = document.getElementById('summaryModalMark');     const aaEl = document.getElementById('summary_AA');     const afmEl = document.getElementById('summary_AFM');     const nameEl = document.getElementById('summary_Name');     const issueEl = document.getElementById('summary_issueDate');     const typeEl = document.getElementById('summary_type_name');     const netEl = document.getElementById('summary_totalNetValue');     const vatEl = document.getElementById('summary_totalVatAmount');     const totEl = document.getElementById('summary_totalValue');     const linesContainer = document.getElementById('summaryLinesContainer');      if (!summaryInput) {       console.warn('[RC-DEBUG] summaryJsonInput NOT FOUND — modal will not populate');       return;     }     if (!modal) {       console.warn('[RC-DEBUG] summaryModal NOT FOUND — abort populate watcher');       return;     }      let lastVal = '';     function safeText(node, v){       if(!node) return;       node.textContent = (v === null || v === undefined) ? '' : String(v);     }      function renderLines(lines){       if(!linesContainer) return;       linesContainer.innerHTML = '';       if(!Array.isArray(lines) || lines.length === 0){         const p = document.createElement('div'); p.className = 'p-2 text-sm text-gray-600'; p.textContent = 'Δεν βρέθηκαν γραμμές.';         linesContainer.appendChild(p);         return;       }        // build a small table       const tbl = document.createElement('table');       tbl.className = 'w-full text-sm';       tbl.style.borderCollapse = 'collapse';       const thead = document.createElement('thead');       thead.innerHTML = '<tr><th class="p-1 border text-left">#</th><th class="p-1 border text-left">Περιγραφή</th><th class="p-1 border text-right">Ποσό</th><th class="p-1 border text-right">ΦΠΑ</th></tr>';       tbl.appendChild(thead);       const tbody = document.createElement('tbody');       lines.forEach((ln, idx) => {         const tr = document.createElement('tr');         tr.innerHTML = `<td class="p-1 border text-left">${idx+1}</td>                         <td class="p-1 border text-left">${(ln.description||ln.desc||'').toString().slice(0,200)}</td>                         <td class="p-1 border text-right">${ln.amount||ln.lineTotal||''}</td>                         <td class="p-1 border text-right">${ln.vat||ln.vatRate||''}</td>`;         tbody.appendChild(tr);       });       tbl.appendChild(tbody);       linesContainer.appendChild(tbl);     }      function populateOnce(){       try {         const v = (summaryInput.value || '').trim();         if (!v) {           // nothing to show           return;         }         if (v === lastVal) return;         lastVal = v;         let obj = {};         try { obj = JSON.parse(v); } catch(err){           console.warn('[RC-DEBUG] failed parsing summaryJsonInput JSON', err, v);           return;         }         console.log('[RC-DEBUG] populate modal from summary JSON', obj);          safeText(markEl, obj.mark || obj.MARK || (obj.raw && obj.raw.MARK) || '');         safeText(aaEl, obj.AA || obj.aa || obj.progressive_aa || (obj.raw && obj.raw.progressive_aa) || '');         safeText(afmEl, obj.AFM_issuer || obj.AFM || obj.issuer_vat || (obj.raw && obj.raw.issuer_vat) || '');         safeText(nameEl, obj.Name || obj.Name_issuer || obj.issuer_name || (obj.raw && obj.raw.issuer_name) || '');         safeText(issueEl, obj.issueDate || obj.issue_date || (obj.raw && obj.raw.issue_date) || '');         safeText(typeEl, obj.type_name || obj.type || (obj.raw && obj.raw.doc_type) || '');         safeText(netEl, obj.totalNetValue || obj.total_amount || obj.totalValue || (obj.raw && obj.raw.total_amount) || '');         safeText(vatEl, obj.totalVatAmount || (obj.raw && obj.raw.totalVatAmount) || '');         safeText(totEl, obj.totalValue || obj.total_amount || (obj.raw && obj.raw.total_amount) || '');          // lines         let lines = [];         if (Array.isArray(obj.lines) && obj.lines.length) lines = obj.lines;         else if (obj.raw && Array.isArray(obj.raw.lines) && obj.raw.lines.length) lines = obj.raw.lines;         else if (obj.lines && typeof obj.lines === 'object') {           // sometimes backend sends object: try to collect values           try {             lines = Object.values(obj.lines).filter(x => x);           } catch(e){}         }         renderLines(lines);          // if modal is hidden, ensure it's visible when populate invoked by scraper flow         try {           if (modal && modal.style.display === 'none') {             if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }           }         } catch(e){}        } catch(e){         console.error('[RC-DEBUG] populateOnce error', e);       }     }      // Start polling for changes to summaryJsonInput.value     const poll = setInterval(populateOnce, 250);      // Also populate when modal opens (observe style attribute)     const obs = new MutationObserver(muts => {       for(const m of muts){         if (m.type === 'attributes' && m.attributeName === 'style'){           try { if (modal.style.display !== 'none') populateOnce(); } catch(e){}         }       }     });     try { obs.observe(modal, { attributes: true, attributeFilter: ['style'] }); } catch(e){}      // expose a debug function on window to force populate     window.RC_forcePopulateSummaryModal = populateOnce;      console.log('[RC-DEBUG] summary-populate watcher started');      // Optional: stop polling after N seconds to be tidy     setTimeout(()=>{ clearInterval(poll); console.log('[RC-DEBUG] stopped summary-populate polling (timeout)'); }, 60*1000);    } catch (err) {     console.error('[RC-DEBUG] summary-populate init failed', err);   } })();  (function RC_FORCE_MODAL_GUARD(){   try {     const dbg = (...a) => { try { console.log('[RC-MODAL-GUARD]', ...a); } catch(e) {} };      function parseSummary() {       const el = document.getElementById('summaryJsonInput');       if (!el) return {};       try { return JSON.parse(el.value || '{}') || {}; } catch(e){ dbg('parseSummary JSON error', e); return {}; }     }      function hasMeaningfulSummary(obj) {       if (!obj || typeof obj !== 'object') return false;       // important single fields that guarantee modal should open       const keys = ['mark','MARK','AFM_issuer','AFM','totalValue','totalNetValue','total_amount','issueDate','issue_date','progressive_aa','AA'];       for (const k of keys) {         if (obj[k] !== undefined && obj[k] !== null && String(obj[k]).trim() !== '') return true;       }       // check raw.* fields if present       if (obj.raw && typeof obj.raw === 'object') {         for (const k of ['MARK','issuer_vat','total_amount','issue_date','progressive_aa']) {           if (obj.raw[k] !== undefined && obj.raw[k] !== null && String(obj.raw[k]).trim() !== '') return true;         }       }       // lines array with at least one non-empty line       if (Array.isArray(obj.lines) && obj.lines.length) {         for (const ln of obj.lines) {           if (!ln) continue;           if ((ln.description && String(ln.description).trim() !== '') ||               (ln.amount && String(ln.amount).trim() !== '') ||               (ln.id && String(ln.id).trim() !== '')) return true;         }       }       // fallback: object with >1 non-empty keys       const nonEmpty = Object.keys(obj).filter(k=>{         try { return obj[k] !== null && obj[k] !== undefined && String(obj[k]).trim() !== ''; } catch(e){ return false; }       });       return nonEmpty.length > 1;     }      function ensureModalHiddenUnlessMeaningful() {       const modal = document.getElementById('summaryModal');       const summaryEl = document.getElementById('summaryJsonInput');       if (!modal || !summaryEl) { dbg('no modal/summaryEl present'); return; }        // Force-hide now (neutralize server/client auto-show)       try { modal.style.display = 'none'; } catch(_) {}        // If summary becomes meaningful, show it (and populate watcher should fill fields)       const checkAndMaybeShow = () => {         const obj = parseSummary();         if (hasMeaningfulSummary(obj)) {           dbg('summary meaningful -> showing modal', obj);           try {             // try to trigger your populate logic if present             if (window.RC_forcePopulateSummaryModal) {               try { window.RC_forcePopulateSummaryModal(); } catch(e){ dbg('RC_forcePopulateSummaryModal failed', e); }             } else if (typeof populateSummaryModal === 'function') {               try { populateSummaryModal(obj); } catch(e){ dbg('populateSummaryModal failed', e); }             }             if (!(window.__RC_FLAGS && window.__RC_FLAGS.autoHandled)) { modal.style.display = 'flex'; }           } catch(e){ dbg('show modal failed', e); }         } else {           // keep hidden           dbg('summary not meaningful -> keep modal hidden');           try { modal.style.display = 'none'; } catch(_) {}         }       };        // run immediate check after tiny delay (let other init finish)       setTimeout(checkAndMaybeShow, 60);        // observe changes to summaryJsonInput.value (detect writes by other code)       try {         let lastVal = summaryEl.value || '';         const poll = setInterval(() => {           try {             const cur = summaryEl.value || '';             if (cur !== lastVal) {               lastVal = cur;               dbg('summaryJsonInput changed -> recheck');               checkAndMaybeShow();             }           } catch(e){ dbg('poll error', e); }         }, 200);         // auto-stop polling after 60s         setTimeout(()=>clearInterval(poll), 60*1000);       } catch(e){ dbg('poll install failed', e); }        // observe modal style changes by others: if someone tries to open it while summary not meaningful, immediately hide       try {         const mo = new MutationObserver(muts => {           try {             const obj = parseSummary();             if (!hasMeaningfulSummary(obj)) {               const modalEl = document.getElementById('summaryModal');               if (modalEl) {                 const disp = window.getComputedStyle(modalEl).display;                 if (disp !== 'none') {                   dbg('modal was opened by other code while summary not meaningful -> hiding it');                   modalEl.style.display = 'none';                 }               }             }           } catch(e){ dbg('mutation observer callback error', e); }         });         const modalNode = document.getElementById('summaryModal');         if (modalNode) mo.observe(modalNode, { attributes: true, attributeFilter: ['style', 'class'] });       } catch(e){ dbg('mutation observer install failed', e); }     }      // Run after DOM ready (also run if DOM already ready)     if (document.readyState === 'loading') {       document.addEventListener('DOMContentLoaded', ensureModalHiddenUnlessMeaningful);     } else {       setTimeout(ensureModalHiddenUnlessMeaningful, 10);     }      dbg('RC_FORCE_MODAL_GUARD installed');   } catch(err) {     try { console.error('[RC-MODAL-GUARD] init failed', err); } catch(e){}   } })();  document.addEventListener('click', function(ev){   const btn = ev.target.closest('.category-btn');   if(!btn) return;    // 1) Αποτροπή bubbling για να μην ανοίγει άλλο modal   ev.preventDefault();   try { ev.stopImmediatePropagation(); } catch(e){}   try { ev.stopPropagation(); } catch(e){}    // 2) Ενημέρωση κουμπιών (UI)   const lineId = btn.dataset.lineId;   const cat = btn.dataset.cat;   const siblings = btn.parentElement.querySelectorAll('.category-btn');   siblings.forEach(s => s.classList.remove('bg-sky-600','text-white'));   btn.classList.add('bg-sky-600','text-white');    // 3) Ενημέρωση του select για compatibility   const sel = document.querySelector('select.expense-category[data-line-id="'+lineId+'"]');   if(sel) sel.value = cat;    // 4) Ενημέρωση του hidden JSON input   const input = document.getElementById('summaryJsonInput');   if(!input) return;   let data = {};   try { data = JSON.parse(input.value || '{}'); } catch(e){ data = {}; }    // Ensure lines array exists   if(!Array.isArray(data.lines)) data.lines = [];    // Update or add line   let line = data.lines.find(l => String(l.id || l.line_id || '') === lineId);   if(!line){     line = {id: lineId};     data.lines.push(line);   }   line.category = cat; // <--- εδώ γράφεται η κατηγορία    // Save back   input.value = JSON.stringify(data); });  document.querySelectorAll('.category-btn').forEach(btn=>{   btn.addEventListener('click', function(ev){     ev.preventDefault(); // δεν χρειάζεται stopPropagation      const lineId = this.dataset.lineId;     const cat = this.dataset.cat;      // Αποτύπωση UI     const siblings = this.parentElement.querySelectorAll('.category-btn');     siblings.forEach(s => s.classList.remove('bg-sky-600','text-white'));     this.classList.add('bg-sky-600','text-white');      // Ενημέρωση select για συμβατότητα     const sel = document.querySelector('select.expense-category[data-line-id="'+lineId+'"]');     if(sel) sel.value = cat;      // Ενημέρωση summaryJsonInput     const input = document.getElementById('summaryJsonInput');     if(!input) return;     let data = {};     try { data = JSON.parse(input.value || '{}'); } catch(e){ data={}; }     if(!Array.isArray(data.lines)) data.lines = [];     let line = data.lines.find(l => String(l.id||l.line_id||'')===lineId);     if(!line){       line = {id: lineId};       data.lines.push(line);     }     line.category = cat;     input.value = JSON.stringify(data);      // !!! Σημαντικό: μην καλείς stopPropagation εδώ !!!     // Άλλο modal handler θα πρέπει να φιλτράρει ποιο στοιχείο το ενεργοποιεί   }); }); document.addEventListener('click', function(ev){   // Αν το click προέρχεται από κουμπί category, αγνόησε   if(ev.target.closest('.category-btn')) return;    // άλλος κώδικας που ανοίγει modal });      // === Frontend patch: enrich delete_invoices POST + clear client-side cache === document.addEventListener('submit', function(ev){   try{     const form = ev.target;     if(!form || !form.action) return;     // Match delete_invoices endpoint (relative or absolute)     const a = document.createElement('a'); a.href = form.action;     const path = (a.pathname || '') + (a.search || '');     if(!/delete_invoices/.test(path)) return;      // 1) Ensure active_vat is posted     const existingHv = form.querySelector('input[name="active_vat"]');     if(!existingHv){       const hv = document.createElement('input');       hv.type = 'hidden';       hv.name = 'active_vat';       const activeVat = (document.querySelector('#vatSelector')?.value                       || document.querySelector('[name="vat"]')?.value                       || document.body.dataset.activeVat                       || '').toString().trim();       hv.value = activeVat;       form.appendChild(hv);     }      // 2) Collect marks to delete     let marks = Array.from(form.querySelectorAll('input[name="delete_mark"]')).map(i => (i.value||'').trim()).filter(Boolean);     if(!marks.length){       marks = Array.from(document.querySelectorAll('input[name="delete_mark"]:checked')).map(i => (i.value||'').trim()).filter(Boolean);     }      // 3) Clear client-side caches (localStorage keys that reference these MARKs)     try{       marks.forEach(mk => {         // common per-mark keys         localStorage.removeItem(`epsilon_summary_${mk}`);         localStorage.removeItem(`EPSILON:INV:${mk}`);       });       // any key containing one of the marks       for(let i=localStorage.length-1; i>=0; i--){         const k = localStorage.key(i);         if(!k) continue;         if(marks.some(mk => k.includes(mk))){           localStorage.removeItem(k);         }       }       // also clear any prefilled summary hidden input to avoid stale reopen       const sumInp = document.getElementById('summaryJsonInput');       if(sumInp) sumInp.value = '';     }catch(e){ /* ignore storage errors */ }    }catch(err){     console.warn('delete_invoices frontend patch failed', err);   } }, true); (function receiptsRepeatModalGuard(){   const once = { submitted:false };    function qs(id){ return document.getElementById(id); }    function readSummary(){     try { return JSON.parse(qs('summaryJsonInput')?.value || '{}'); }     catch(_) { return {}; }   }    function isMeaningfulSummary(o){     try{       if (!o || typeof o!=='object') return false;       const mark = String(o.mark || o.MARK || '').trim();       if (!mark || mark.length<6) return false;       const lines = Array.isArray(o.lines) ? o.lines : [];       if (lines.length===0) return false;       return lines.some(l=>{         if(!l) return false;         const desc=(l.description||l.desc||'').toString().trim();         const amt =(l.amount||l.lineTotal||l.total||'').toString().trim();         const id  =(l.id||l.line_id||'').toString().trim();         return !!(desc||amt||id);       });     }catch(_){ return false; }   }    function isReceiptSummary(o){     try{       const t = (o.type_name || o.type || '').toString().toLowerCase();       const c = (o.category || o.characteristic || o['χαρακτηρισμός'] || '').toString().toLowerCase();       return !!(o.is_receipt || t.includes('απόδει') || t.includes('receipt') || t.includes('λιαν') || c==='αποδειξακια');     }catch(_){ return false; }   }    function forceEdit(){     try { return new URLSearchParams(location.search).get('force_edit') === '1'; }     catch(_){ return false; }   }    function shouldOpenSummaryModal(obj){     const receiptsOn = !!(qs('useReceiptsSwitch') && qs('useReceiptsSwitch').checked);     const repeatOn   = !!(qs('repeatEntrySwitch') && qs('repeatEntrySwitch').checked);     // Αν είμαστε σε αποδείξεις (ή το summary είναι απόδειξη) και repeat ON και ΔΕΝ είναι reclassification -> ΜΗΝ ανοίξεις modal     if ((receiptsOn || isReceiptSummary(obj)) && repeatOn && !forceEdit()) return false;     return true;   }    function autoSubmitReceipt(obj){     if (once.submitted) return;                       // το στείλαμε ήδη σε αυτόν τον κύκλο     if (!isMeaningfulSummary(obj)) return;            // ασφαλιστική δικλείδα     const mark = (obj.mark || obj.MARK || '').toString().trim();     if (!mark) return;     const key = 'rc-auto:' + mark;     if (sessionStorage.getItem(key)) return;          // ήδη υποβλήθηκε μετά από reload      // Επέβαλε “Αποδειξάκια”     try{       if (!Array.isArray(obj.lines)) obj.lines = [];       obj.is_receipt = true;       obj.category = 'αποδειξακια';       obj.characteristic = 'αποδειξακια';       obj['χαρακτηρισμός'] = 'αποδειξακια';       qs('summaryJsonInput').value = JSON.stringify(obj);     }catch(_){}      const form = qs('saveSummaryForm');     if (!form) return;     once.submitted = true;     sessionStorage.setItem(key,'1');                 // ώστε στο επόμενο reload να ΜΗΝ ξαναστείλει     form.submit();   }    // Φρένο: ΜΗΝ υποβάλλεις την search-form χωρίς mark KAI χωρίς url   (function guardEmptySearchSubmit(){     const form = qs('markSearchForm');     if (!form) return;     form.addEventListener('submit', (e)=>{       const mark = (qs('markInput')?.value || '').trim();       const url  = (qs('scrapeUrlInput')?.value || '').trim();       if (!mark && !url) e.preventDefault();     }, true);   })();    // Παρακολούθησε το modal: αν πάει να ανοίξει ενώ ΔΕΝ πρέπει, κλείστο και κάνε auto-submit   const modal = qs('summaryModal');   if (!modal) return;    const observer = new MutationObserver(function(){     try{       const visible = modal && getComputedStyle(modal).display !== 'none';       if (!visible) return;       const obj = readSummary();       if (!shouldOpenSummaryModal(obj)) {         // Μπλόκαρε το modal και προχώρησε σε auto-submit         modal.style.display = 'none';         autoSubmitReceipt(obj);       }     }catch(_){}   });    try{     observer.observe(modal, { attributes:true, attributeFilter:['style','class'] });   }catch(_){}    // One-shot check αν τυχόν ξεκινά ήδη ανοιχτό   setTimeout(()=>{     try{       const visible = modal && getComputedStyle(modal).display !== 'none';       const obj = readSummary();       if (visible && !shouldOpenSummaryModal(obj)) {         modal.style.display = 'none';         autoSubmitReceipt(obj);       }     }catch(_){}   }, 80); })();  </script>  <style>     /* minimal styling for the toggle switch */     /* μόνο για modal */     .modal-summary-table th {         background-color: #0d6efd;         color: white;         border: 1px solid #ccc;     }      .modal-summary-table td {         border: 1px solid #e2e8f0;     }      .modal-summary-table tr:nth-child(even) {         background-color: #f9fafb;     }      .modal-summary-table tr:hover {         background-color: #e6f0ff;     }      .modal-summary-table tfoot td {         background-color: #f1f5f9;     }      /* κλείδωμα κλικ πίσω από modal */     .modal-backdrop {         position: fixed;         inset: 0;         background: rgba(0,0,0,.45);         z-index: 99998;     }      #summaryModal {         z-index: 99999;         position: fixed;         inset: 0;         display: none;         align-items: center;         justify-content: center;     }          #summaryModal.show {             display: flex;         }      body.modal-open #page-root {         pointer-events: none;     }     /* βάλε id=page-root στο κύριο wrapper της σελίδας */     body.modal-open #summaryModal,     body.modal-open #summaryModal * {         pointer-events: auto;     }      .toggle-switch {         width: 42px;         height: 24px;         -webkit-appearance: none;         appearance: none;         background: #e5e7eb;         border-radius: 999px;         position: relative;         outline: none;         cursor: pointer;         vertical-align: middle;     }          .toggle-switch:checked {             background: #0ea5a4;         }          .toggle-switch::after {             content: "";             position: absolute;             top: 3px;             left: 3px;             width: 18px;             height: 18px;             border-radius: 999px;             background: white;             transition: transform .15s ease;         }          .toggle-switch:checked::after {             transform: translateX(18px);         } </style>    <script>/* ===== Auto-submit segmented toggle + guarded auto-detect (receipts & invoices) ===== */ (function(){   try {     // Globals     window.__RC_FLAGS  = window.__RC_FLAGS  || {};     window.__RC_LOCKS  = window.__RC_LOCKS  || {};     const AUTO_KEY = 'rc:autoSubmitEnabled';      // UI refs (may be absent in some partial renders)     const form     = document.getElementById('markSearchForm');     const markEl   = document.getElementById('markInput');     const urlEl    = document.getElementById('scrapeUrlInput'); // may be dynamically created in your code     const btnOn    = document.getElementById('autoSubmitBtnOn');     const btnOff   = document.getElementById('autoSubmitBtnOff');     const receiptsSwitch = document.getElementById('useReceiptsSwitch');      // State helpers     function getAuto(){ try { return localStorage.getItem(AUTO_KEY) === '1'; } catch(_) { return false; } }     function setAuto(v){   try { localStorage.setItem(AUTO_KEY, v ? '1' : '0'); } catch(_) {}   window.__RC_FLAGS.auto_submit_enabled = !!v;   updateUi();    // reload με συγχρονισμό querystring   try {     const p = new URLSearchParams(location.search);     if (v) p.set('auto_submit','1'); else p.delete('auto_submit');     const newQS = p.toString();     const cur  = location.pathname + location.search;     const next = location.pathname + (newQS ? '?' + newQS : '');     if (next === cur) {       location.reload();          // αν δεν αλλάζει το URL, αναγκαστικό reload     } else {       location.search = newQS;    // αλλάζοντας το query κάνει reload μόνο του     }   } catch (e) {     location.reload();   } }      function updateUi(){       const on = getAuto();       if (btnOn && btnOff) {         btnOn.classList.toggle('bg-sky-600', on);         btnOn.classList.toggle('text-white', on);         btnOff.classList.toggle('bg-sky-600', !on);         btnOff.classList.toggle('text-white', !on);       }     }     updateUi();     if (btnOn)  btnOn.addEventListener('click', ()=> setAuto(true));     if (btnOff) btnOff.addEventListener('click', ()=> setAuto(false));      // Utilities     function isVisible(el){       if(!el) return false;       const cs = getComputedStyle(el);       return !(cs.display === 'none' || cs.visibility === 'hidden' || cs.opacity === '0');     }     function warningOpen(){       const ids = ['receiptWarn','afmWarningModal','receiptWarningModal','yearWarningModal'];       for (const id of ids){ const el = document.getElementById(id); if (el && isVisible(el)) return true; }       // generic: any visible dialog that is not the summary modal       const nodes = document.querySelectorAll('[role="dialog"],[aria-modal="true"],.modal,.modal-root');       for (const n of nodes){         if (!isVisible(n)) continue;         if (n.id === 'summaryModal' || n.id === 'receiptsModal') continue;         const t = (n.textContent || '').toLowerCase();         if (/\bπροειδοπ|\bπροσοχ|warning|σφάλμα|error/.test(t)) return true;       }       return false;     }      const normMark = v => (v||'').replace(/\D/g,'');     const isMark   = v => normMark(v).length === 15;     const isUrl    = v => {       const s = (v||'').trim();       return /^https?:\/\/\S+/i.test(s) || /^www\.\S+/i.test(s);     };     const extractMark = s => {       const m = String(s||'').match(/\b(\d{15})\b/);       return m ? m[1] : '';     };      function currentKey(){       const mv = (markEl && markEl.value) ? markEl.value.trim() : '';       const uv = (document.getElementById('scrapeUrlInput')?.value || '').trim(); // requery in case it was injected after       const receipts = !!(receiptsSwitch && receiptsSwitch.checked);        // For receipts: prefer a URL, but accept MARK inside URL as fallback       if (receipts) {         if (isUrl(uv)) return 'url:'+uv.replace(/\/+$/,'');         const ex = extractMark(uv); if (ex) return 'mark:'+ex;         // also allow mark typed in markInput if user didn't switch field         if (isMark(mv)) return 'mark:'+normMark(mv);         return null;       }        // For invoices: prefer MARK; but accept URL too       if (isMark(mv)) return 'mark:'+normMark(mv);       if (isUrl(mv)) return 'url:'+mv.replace(/\/+$/,'');       return null;     }      let pending = false;     const KEY_LAST = 'rc:lastSubmitKey';     const TTL_MS   = 20000;     function readLast(){       try {         const raw = sessionStorage.getItem(KEY_LAST);         if(!raw) return null;         const o = JSON.parse(raw);         if(!o || !o.ts || (Date.now()-o.ts)>TTL_MS) return null;         return o.k || null;       }catch(_){ return null; }     }     function writeLast(k){       try { sessionStorage.setItem(KEY_LAST, JSON.stringify({k, ts: Date.now()})); } catch(_) {}     }      const debounce = (fn,ms)=>{ let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a),ms); }; };      function trySubmit(){       if (!form || !getAuto()) return;       if (warningOpen()) return;       const k = currentKey();       if (!k) return;        // prevent collisions with existing receipts lock if present       if (window.__RC_LOCKS && window.__RC_LOCKS.scrape) return;        // prevent duplicate submits on same key       const last = readLast();       if (last && last === k) return;        // submit once       writeLast(k);       if (pending) return;       pending = true;       try {         if (form.requestSubmit) form.requestSubmit(); else form.submit();       } finally {         setTimeout(()=>{ pending=false; }, 500);       }     }      const onChange = debounce(trySubmit, 140);      // Wire inputs if present     if (markEl) {       markEl.addEventListener('input', onChange);       markEl.addEventListener('keyup', onChange);       markEl.addEventListener('paste', ()=>setTimeout(onChange,0));     }     // url input could be injected later; observe for appearance     let tries = 30;     const iv = setInterval(()=>{       const u = document.getElementById('scrapeUrlInput');       if (u) {         u.addEventListener('input', onChange);         u.addEventListener('keyup', onChange);         u.addEventListener('paste', ()=>setTimeout(onChange,0));         clearInterval(iv);       }       if(--tries<=0) clearInterval(iv);     }, 200);      // Initial pass (for browser autofill)     window.addEventListener('load', ()=> setTimeout(onChange, 60));      // Ensure a stub exists to avoid ReferenceError when other code calls it     if (typeof window.autoSubmitReceipt !== 'function') {       window.autoSubmitReceipt = function(){ /* stub to avoid ReferenceError; actual flow handled elsewhere */ };     }   } catch (err) {     console.warn('Auto-submit toggle patch failed', err);   } })();</script>  <script>/* === Persist Receipts/Invoices toggle across refresh === */ <script> /* === Persist Receipts/Invoices toggle across refresh (v2) === */ (function persistReceiptsToggle(){   const KEY = 'rc:useReceipts';   const sw  = document.getElementById('useReceiptsSwitch');   const markInput = document.getElementById('markInput');   function ensureUrlInput(){     let el = document.getElementById('scrapeUrlInput');     if (!el) {       // try to locate after markInput if dynamically created later by other code       el = document.createElement('input');       el.id = 'scrapeUrlInput';       el.placeholder = 'Εισάγετε URL παραστατικού (για αποδείξεις)';       el.className = 'p-2 border rounded w-2/4 hidden';       el.type = 'text';       if (markInput && markInput.parentElement) {         markInput.parentElement.insertBefore(el, markInput.nextSibling);       } else {         document.body.appendChild(el);       }     }     return el;   }   function applyUI(isReceipts){     const urlInput = ensureUrlInput();     if (isReceipts){       markInput && markInput.classList.add('hidden');       urlInput && urlInput.classList.remove('hidden');     } else {       markInput && markInput.classList.remove('hidden');       urlInput && urlInput.classList.add('hidden');     }   }    if (!sw) return;   // restore saved value   const saved = localStorage.getItem(KEY);   if (saved !== null) sw.checked = (saved === '1');   applyUI(sw.checked);    // if URL input appears later (other scripts), re-apply for a short window   let tries = 20;   const iv = setInterval(()=>{     applyUI(sw.checked);     if (--tries <= 0) clearInterval(iv);   }, 200);    sw.addEventListener('change', () => {     localStorage.setItem(KEY, sw.checked ? '1' : '0');     applyUI(sw.checked);   }); })();</script>  <script>/* === Lightweight warning detector (client/server modals) === */ (function ensureWarningOpenHelper(){   if (typeof window.__rc_warningOpen === 'function') return;   window.__rc_warningOpen = function(){     function vis(el){ if(!el) return false; const cs=getComputedStyle(el); return !(cs.display==='none'||cs.visibility==='hidden'||cs.opacity==='0'); }     const ids=['receiptWarn','afmWarningModal','receiptWarningModal','yearWarningModal'];     for (const id of ids){ const el=document.getElementById(id); if (el && vis(el)) return true; }     const nodes=document.querySelectorAll('[role="dialog"],[aria-modal="true"],.modal,.modal-root');     for (const n of nodes){       if (!vis(n)) continue;       if (n.id==='summaryModal' || n.id==='receiptsModal') continue;       const t=(n.textContent||'').toLowerCase();       if (/(προειδοπ|προσοχ|warning|σφάλμα|error)/.test(t)) return true;     }     return false;   }; })();</script>  <script> /* === RC helpers μόνο για flow Αποδείξεων === */ window.RC = window.RC || {};  RC.hasWarnings = function(){ return (typeof window.__rc_warningOpen === 'function') ? window.__rc_warningOpen() : false; };  RC.normalizeReceiptSummary = function (summaryObj) {   summaryObj.is_receipt = true;   summaryObj.type = summaryObj.type || 'ΑΠΟΔΕΙΞΗ';   summaryObj.type_name = summaryObj.type_name || 'ΑΠΟΔΕΙΞΗ';   summaryObj.category = 'αποδειξακια';   if (!Array.isArray(summaryObj.lines) || !summaryObj.lines.length) {     const tot = summaryObj.total_amount || summaryObj.totalValue || summaryObj.totalNetValue || '';     summaryObj.lines = [{ id:'r0', description:'', amount:String(tot||''), vat:'', vatCategory:'', category:'αποδειξακια' }];   } else {     summaryObj.lines = summaryObj.lines.map((l,i)=>({       id: String(l?.id || l?.line_id || ('r'+i)),       description: String(l?.description || l?.desc || ''),       amount: String(l?.amount || l?.lineTotal || l?.total || ''),       vat: String(l?.vat || l?.vatRate || ''),       vatCategory: String(l?.vatCategory || l?.vat_category || ''),       category: String(l?.category || '') || 'αποδειξακια'     }));   }   return summaryObj; };  RC.confirmReceiptOnce = async function(summaryObj, scrapeUrl){   window.__RC_LOCKS = window.__RC_LOCKS || {};   if (window.__RC_LOCKS.confirm) return { ok:false, reason:'locked' };   window.__RC_LOCKS.confirm = true;    try {     const VAT = "{{ vat or '' }}";     const afmVal = (VAT || summaryObj.AFM_issuer || summaryObj.AFM || (summaryObj.raw && summaryObj.raw.issuer_vat) || '').toString().trim();     if (!afmVal) return { ok:false, reason:'missing_afm' };      if (!/\b\d{15}\b/.test(String(summaryObj.mark||'').trim())) {       const r = await fetch('/api/next_receipt_mark', { credentials:'same-origin' });       const j = await r.json().catch(()=>null);       if (j && j.mark) summaryObj.mark = j.mark;     }      let yearVal = "{{ active_year|default('') }}";     if (!yearVal) {       try { const fy = await fetch('/get_fiscal_year', { credentials:'same-origin' }); const fyj = await fy.json(); if (fyj && fyj.exists) yearVal = String(fyj.fiscal_year); } catch(_){}     }     if (!yearVal) {       const any = summaryObj.issueDate || summaryObj.issue_date || (summaryObj.raw && summaryObj.raw.issue_date) || '';       const m = String(any).match(/\b(19|20)\d{2}\b/);       yearVal = m ? m[0] : String((new Date()).getUTCFullYear());     }      const payload = {       url: (scrapeUrl||'').trim(),       summary_json: JSON.stringify(summaryObj),       force: false,       category: 'αποδειξακια',       afm: afmVal,       year: String(yearVal),       mark: String(summaryObj.mark||'')     };      const res = await fetch('/api/confirm_receipt', {       method: 'POST',       credentials: 'same-origin',       headers: {'Content-Type':'application/json','X-Requested-With':'XMLHttpRequest'},       body: JSON.stringify(payload)     });     const jj = await res.json().catch(()=>null);     if (!res.ok || !jj || !jj.ok) return { ok:false, reason: (jj&&jj.error) || ('HTTP '+res.status) };      return { ok:true };   } finally {     window.__RC_LOCKS.confirm = false;   } };  RC.handleReceiptAfterScrape = async function(summaryObj, scrapeUrl){   try {     const repeatOn = !!document.getElementById('repeatEntrySwitch')?.checked;     const forceEdit = (typeof FORCE_EDIT !== 'undefined') ? !!FORCE_EDIT : false;     if (!repeatOn || forceEdit || RC.hasWarnings()) return false;      RC.normalizeReceiptSummary(summaryObj);     const summaryInput = document.getElementById('summaryJsonInput');     if (summaryInput) summaryInput.value = JSON.stringify(summaryObj);      const r = await RC.confirmReceiptOnce(summaryObj, scrapeUrl);     if (!r.ok) {       if (r.reason === 'missing_afm') {         window.openReceiptWarning && openReceiptWarning('Λείπει AFM ενεργού πελάτη.');       } else {         showFlash('Σφάλμα αποθήκευσης: ' + (r.reason || 'άγνωστο'), 'error', 6000);       }       return false;     }     window.__RC_FLAGS = window.__RC_FLAGS || {}; window.__RC_FLAGS.autoHandled = true;     showFlash('Αποθηκεύτηκε η απόδειξη (repeat).', 'success', 900);     try { document.getElementById('summaryModal').style.display = 'none'; } catch(_){}     try { document.getElementById('scrapeUrlInput').value = ''; } catch(_){}     try { document.getElementById('markInput').value = ''; } catch(_){}     window.location = window.location.pathname;     return true;   } catch (e) {     console.warn('handleReceiptAfterScrape failed', e);     return false;   } }; document.addEventListener('DOMContentLoaded', () => {   const params = new URLSearchParams(location.search);    const isReceipts =     (params.get('use_receipts') === '1') ||     (localStorage.getItem('pref_use_receipts') === '1');    const repeatOn =     (params.get('repeat') === '1') ||     (localStorage.getItem('pref_repeat') === '1');    const autoOn = params.has('auto_submit')     ? (params.get('auto_submit') === '1')     : (localStorage.getItem('pref_auto_submit') === '1');    if (!(isReceipts && repeatOn && autoOn)) return;    // 1) Κρύψε ό,τι modal επιβεβαίωσης υπάρχει για αποδείξεις   const hideModal = () => {     ['#receiptsModal', '#summaryModal', '[data-role="modal-warning"]', '#warningModal']       .forEach(sel => {         const el = document.querySelector(sel);         if (!el) return;         el.classList?.add('hidden');         el.style.display = 'none';       });   };   hideModal();    // 2) Βεβαιώσου ότι στο submit περνάει repeat_enabled=1   const ensureRepeatHidden = (form) => {     if (!form) return;     let h = form.querySelector('input[name="repeat_enabled"]');     if (!h) {       h = document.createElement('input');       h.type = 'hidden';       h.name = 'repeat_enabled';       form.appendChild(h);     }     h.value = '1';   };    // 3) Αυτόματο submit μόλις είναι έτοιμη η φόρμα/δεδομένα   let submitted = false;   const tryAutoSubmit = () => {     if (submitted) return;      // Βρες τη φόρμα αποθήκευσης     const form = document.querySelector('form[action$="/save_summary"]');     if (!form) return;      // Έλεγξε ότι υπάρχει payload: summary_json (input/textarea) ή τουλάχιστον το mark     const payloadEl = form.querySelector('input[name="summary_json"],textarea[name="summary_json"]');     const hasPayload = payloadEl ? String(payloadEl.value || '').trim().length > 0 : false;     const hasMark = String((form.querySelector('[name="mark"]') || {}).value || '').trim().length === 15;      if (!hasPayload && !hasMark) return;      ensureRepeatHidden(form);     submitted = true;     hideModal();     form.submit();   };    // Δοκίμασε άμεσα & με μικρό retry   tryAutoSubmit();   const i1 = setInterval(() => {     if (submitted) { clearInterval(i1); return; }     tryAutoSubmit();   }, 150);    // Παρακολούθησε DOM changes (όταν γεμίσει το modal/φόρμα από το fetch)   const mo = new MutationObserver(() => tryAutoSubmit());   mo.observe(document.body, { subtree: true, childList: true, attributes: false });    // Safety stop μετά από ~6s για να μην τρέχει για πάντα   setTimeout(() => mo.disconnect(), 6000); });  </script>  <script> /* === Receipts Repeat AutoSave (cache submit) — receipts-only, idempotent === */ (function(){   if (window.__rc_autosave_installed__) return;   window.__rc_autosave_installed__ = true;    function $id(id){ return document.getElementById(id); }   function lsGet(k,d){ try{ const v = localStorage.getItem(k); return v==null?d:v; }catch(_){ return d; } }   function lsSet(k,v){ try{ localStorage.setItem(k,v); }catch(_){ } }   function ssGet(k){ try{ return sessionStorage.getItem(k); }catch(_){ return null; } }   function ssSet(k,v){ try{ sessionStorage.setItem(k,v); }catch(_){ } }   function onceKey(mark){ return 'rc-cache:' + String(mark||'').trim(); }    function isReceipts(){ try{ var sw=$id('useReceiptsSwitch'); if (sw) return !!sw.checked; }catch(_){}                           return lsGet('UI:useReceipts','0')==='1'; }   function isRepeat(){   try{ var rsw=$id('repeatEntrySwitch'); if (rsw) return !!rsw.checked; }catch(_){}                           return lsGet('REPEAT:enabled','0')==='1'; }    function parseSummary(){     var el = $id('summaryJsonInput');     if (!el || !el.value || el.value === '{}' || el.value === 'null') return null;     try { return JSON.parse(el.value); } catch(_){ return null; }   }    function isReceiptSummary(s){     if (!s || typeof s!=='object') return false;     if (s.is_receipt === true) return true;     var t = String(s.type_name||s.type||'').toLowerCase();     if (t.includes('απόδει') || t.includes('receipt')) return true;     // fallback: when UI string shows "Λήφθηκε απόδειξη — ελέγξτε..."     var ui = String(s.ui_hint||'').toLowerCase();     if (ui.includes('λήφθηκε') && ui.includes('αποδεί')) return true;     return false;   }    function hasLines(s){ try{ return Array.isArray(s.lines) && s.lines.length>0; } catch(_){ return false; } }    function waitFor(fn, then, maxMs, step){     maxMs = maxMs || 6000; step = step || 120;     var waited = 0;     (function cycle(){       try{ if (fn()) { then(); return; } }catch(_){}       waited += step; if (waited >= maxMs) return;       setTimeout(cycle, step);     })();   }    function tryAutoSave(){     if (!isReceipts() || !isRepeat()) return;     var s = parseSummary();     if (!s || !isReceiptSummary(s) || !hasLines(s)) return;      var mark = String(s.mark || s.MARK || '').trim();     if (!mark) return;     if (ssGet(onceKey(mark))) return; // already submitted this cycle      var form = $id('saveSummaryForm');     if (!form) return;      // Normalize to αποδειξάκια before save, without touching invoices     try{       s.is_receipt = true;       s.category = s.category || 'αποδειξακια';       s.characteristic = s.characteristic || 'αποδειξακια';       if (!Array.isArray(s.lines)) s.lines = [];       s.lines = s.lines.map(function(l){ l=l||{}; l.category='αποδειξακια'; return l; });       $id('summaryJsonInput').value = JSON.stringify(s);     }catch(_){}      // Arm dedupe, keep receipts mode sticky     try { ssSet(onceKey(mark),'1'); } catch(_){}     lsSet('UI:useReceipts','1');      // Submit the cache form programmatically     try {       if (typeof form.requestSubmit === 'function') form.requestSubmit();       else form.submit();       // On navigation, allow next MARK to submit again       setTimeout(function(){ try{ ssSet(onceKey(mark), ''); }catch(_){} }, 2500);     } catch(e) {       console.warn('[RC-AUTOSAVE] submit failed', e);       try{ sessionStorage.removeItem(onceKey(mark)); }catch(_){}     }   }    document.addEventListener('DOMContentLoaded', function(){     // Reflect stored receipts state to the UI toggle early     try {       if (lsGet('UI:useReceipts','0')==='1') {         var sw = $id('useReceiptsSwitch');         if (sw && !sw.checked) { sw.checked = true; sw.dispatchEvent(new Event('change',{bubbles:true})); }       }     } catch(_){}      // Try immediately, microtask, and a short delay     tryAutoSave();     setTimeout(tryAutoSave, 0);     setTimeout(tryAutoSave, 300);      // Poll for hidden input changes produced by scraping     var el = $id('summaryJsonInput');     if (el){       var last = el.value;       setInterval(function(){         if (el.value !== last) { last = el.value; tryAutoSave(); }       }, 250);     }      // Re-run when receipts switch toggles on, or repeat toggles on     var r1 = $id('useReceiptsSwitch');     var r2 = $id('repeatEntrySwitch');     if (r1) r1.addEventListener('change', function(){ if (this.checked) setTimeout(tryAutoSave,10); });     if (r2) r2.addEventListener('change', function(){ if (this.checked) setTimeout(tryAutoSave,10); });      // When modal opens (if present), attempt again     var modal = $id('summaryModal');     if (modal && window.MutationObserver){       var mo = new MutationObserver(function(){ setTimeout(tryAutoSave, 20); });       try { mo.observe(modal, {attributes:true, childList:false, subtree:false}); } catch(_){}     }   }); })(); </script>  {% endblock %}  <!-- === BEGIN: Injected fix (v2) for receipts auto-flow & afm_epsilon cleanup === --> <script><script> /* RC-REPEAT-STATE bridge για Αποδείξεις & Τιμολόγια    - Διαβάζει το state από backend (/api/repeat_state/get) στην εκκίνηση    - Το περνάει και σε localStorage (REPEAT:enabled) & body dataset (data-repeat-enabled)    - Όταν αλλάζει ο διακόπτης repeatEntrySwitch, κάνει POST στο /api/repeat_state/set    - Στο submit της φόρμας αναζήτησης, κάνει ένα φρεσκάρισμα του state πριν τη ροή */ (function() {   const LS_KEY_REPEAT_ENABLED = 'REPEAT:enabled';    async function refreshRepeatState() {     try {       const r = await fetch('/api/repeat_state/get', { credentials: 'include' });       const j = await r.json();       const enabled = !!(j && j.ok && j.enabled);       localStorage.setItem(LS_KEY_REPEAT_ENABLED, enabled ? '1' : '0');       document.body.dataset.repeatEnabled = enabled ? '1' : '0';       window.REPEAT_ENABLED = enabled;        // συγχρόνισε και το switch αν υπάρχει       const sw = document.getElementById('repeatEntrySwitch');       if (sw) {         sw.checked = enabled;       }       console.debug('[RC-REPEAT-STATE] GET ->', { enabled });     } catch (e) {       console.warn('[RC-REPEAT-STATE] GET failed', e);     }   }    async function setRepeatEnabled(enabled) {     try {       const r = await fetch('/api/repeat_state/set', {         method: 'POST',         headers: { 'Content-Type': 'application/json' },         credentials: 'include',         body: JSON.stringify({ enabled: !!enabled })       });       const j = await r.json();       if (!j || !j.ok) throw new Error(j && j.error || 'unknown');       // persist τοπικά       localStorage.setItem(LS_KEY_REPEAT_ENABLED, enabled ? '1' : '0');       document.body.dataset.repeatEnabled = enabled ? '1' : '0';       window.REPEAT_ENABLED = !!enabled;       console.debug('[RC-REPEAT-STATE] SET ->', { enabled });     } catch (e) {       console.warn('[RC-REPEAT-STATE] SET failed', e);     }   }    // bootstrap: στην εκκίνηση   document.addEventListener('DOMContentLoaded', () => {     refreshRepeatState();     const sw = document.getElementById('repeatEntrySwitch');     if (sw) {       sw.addEventListener('change', function() {         setRepeatEnabled(this.checked);       });     }      // στο submit της αναζήτησης: κάνε ένα γρήγορο refresh για να «δει» σωστά το autosave των αποδείξεων     const form = document.getElementById('markSearchForm');     if (form) {       form.addEventListener('submit', () => {         // fire-and-forget, δεν μπλοκάρουμε το submit         refreshRepeatState();       });     }   }); })();</script>   (function(){   function isDetailed(x){     try{       if(!x || typeof x !== 'object') return false;       if (Array.isArray(x.lines) && x.lines.length) {         // any non-empty field in a line         for (const l of x.lines) {           if (l && (String(l.amount||'').trim() || String(l.description||'').trim() || String(l.vat||'').trim())) {             return true;           }         }       }       if (String(x.totalNetValue||'').trim() || String(x.totalValue||'').trim()) return true;       const t = (x.type||x.type_name||'').toString().toLowerCase();       if ((t.includes('απόδει') || t.includes('receipt')) && String(x.totalValue||'').trim()) return true;       return false;     }catch(e){ return false; }   }   function isReceipt(x){     try{       if (x && x.is_receipt) return true;       const t = (x?.type || x?.type_name || '').toString().toLowerCase();       if (t.includes('απόδει') || t.includes('receipt')) return true;       const ch = (x?.category || x?.χαρακτηρισμός || x?.characteristic || '');       return ch === 'αποδειξακια';     }catch(e){ return false; }   }   function prefer(a,b){     const da = isDetailed(a), db = isDetailed(b);     if (da && !db) return a;     if (db && !da) return b;     const la = Array.isArray(a?.lines) ? a.lines.length : 0;     const lb = Array.isArray(b?.lines) ? b.lines.length : 0;     if (lb > la) return b;     return a;   }   function sanitizeAfmEpsilon(arr){     try{       if(!Array.isArray(arr)) return arr;       const byMark = new Map();       for(const item of arr){         const m = String(item?.mark || '').trim();         if(!m) continue;         if(!byMark.has(m)) byMark.set(m, item);         else byMark.set(m, prefer(byMark.get(m), item));       }       let out = Array.from(byMark.values());       out = out.filter(isDetailed); // drop placeholders       return out;     }catch(e){       console.warn('sanitizeAfmEpsilon failed', e);       return arr;     }   }    // Clean global cache once   try { if (window.afm_epsilon) { window.afm_epsilon = sanitizeAfmEpsilon(window.afm_epsilon); } } catch(e){}    // Pick ONE receipt to submit when repeat+receipts is ON   function pickReceiptSummary(){     try{       // Priority 1: explicit modal summary if page defines it       if (window.modal_summary && isReceipt(window.modal_summary)) return window.modal_summary;       // Priority 2: data attribute on any modal container       const el = document.querySelector('[data-modal-summary]');       if (el){         try{           const obj = JSON.parse(el.getAttribute('data-modal-summary'));           if (isReceipt(obj)) return obj;         }catch(_){}       }       // Priority 3: last detailed receipt from afm_epsilon       const arr = Array.isArray(window.afm_epsilon) ? window.afm_epsilon.slice() : [];       const receipts = arr.filter(x => isReceipt(x) && isDetailed(x));       if (receipts.length) return receipts[receipts.length - 1];     }catch(e){ console.warn('pickReceiptSummary failed', e); }     return null;   }    try {     const repeatSwitch = document.getElementById('repeatEntrySwitch');     const useReceipts   = document.getElementById('useReceiptsSwitch');     const summaryInput  = document.getElementById('summaryJsonInput');     const saveForm      = document.getElementById('saveSummaryForm');     const auto = !!(useReceipts && useReceipts.checked) && !!(repeatSwitch && repeatSwitch.checked);     if (auto && summaryInput && saveForm) {       const chosen = pickReceiptSummary();       if (!chosen) {         console.warn('Auto-submit suppressed: no detailed receipt summary found.');         return;       }       // Ensure per-line category and flags       try{         if (!Array.isArray(chosen.lines)) chosen.lines = [];         if (chosen.lines.length === 0) {           // synthesize a simple line from totalValue when missing           const lid = (String(chosen.mark||'') + '_r0').replace(/^_+|_+$/g,'') || 'r0';           chosen.lines = [{             id: lid, description: "", amount: String(chosen.totalValue||""), vat: "", category: "αποδειξακια", vatCategory: ""           }];         } else {           chosen.lines = chosen.lines.map(l => (l && typeof l === 'object') ? {             ...l,             category: l.category || 'αποδειξακια'           } : l);         }         chosen.is_receipt = true;         chosen.category = chosen.category || 'αποδειξακια';         chosen.characteristic = chosen.characteristic || 'αποδειξακια';       }catch(_){}       summaryInput.value = JSON.stringify(chosen);       setTimeout(function(){         if (!saveForm.dataset._autoSubmitted) {           saveForm.dataset._autoSubmitted = '1';           saveForm.requestSubmit ? saveForm.requestSubmit() : saveForm.submit();         }       }, 30);     }   } catch(e) { console.warn('receipts auto-confirm failed', e); } })();</script> <!-- === END: Injected fix (v2) === --> <!-- RC_RECEIPT_AUTOPILOT_PATCH --> <script>(function(){'use strict';   // ====== Robust receipts repeat autopilot (no UI break) ======   window.__RC_FLAGS = window.__RC_FLAGS || {};    function lsget(key, fallback){ try{ const v=localStorage.getItem(key); if(v===null) return fallback; if(v==='1') return true; if(v==='0') return false; return v; }catch(_){     return fallback; } }    function receiptsSwitchOn(){ try{ return !!document.getElementById('useReceiptsSwitch')?.checked; }catch(_){     return !!lsget('rc:useReceipts','receipts')==='receipts'; } }    function autoSubmitOn(){ return !!lsget('rc:autoSubmitEnabled', true); }   function repeatSwitchOn(){ try{ return !!document.getElementById('repeatEntrySwitch')?.checked; }catch(_){ return !!lsget('rc:repeat_enabled', false); } }    async function serverRepeatEnabled(){     try{ const r = await fetch('/api/repeat_entry/get', { credentials:'include' });          const j = await r.json(); return !!(j && (j.enabled || j.repeat_enabled)); }     catch(_){ return repeatSwitchOn(); }   }    function hideReceiptBanner(){     const nodes = document.querySelectorAll('#existingBanner, .flash, .alert');     nodes.forEach(el => {       try{ if(/Λήφθηκε απόδειξη/i.test(el.textContent||'')) el.style.display='none'; }catch(_){}     });   }    function tryAutoSave(){     const form = document.getElementById('saveSummaryForm');     const input = document.getElementById('summaryJsonInput');     if (!form || !input) return false;     // mark flags to suppress informational toast     window.__RC_FLAGS.autoHandled = true;     hideReceiptBanner();     // Submit the server form (keeps server-side logic, excel write etc.)     // Use a microtask so any last-second JSON sync runs first     setTimeout(() => {       try { form.submit(); } catch(e) {         try { form.dispatchEvent(new Event('submit', { cancelable:false })); } catch(_){}       }     }, 30);     return true;   }    function observeModalAndAuto(){     const modal = document.getElementById('summaryModal');     if (!modal) return;     let done = false;     const doIt = () => {       if (done) return;       const visible = getComputedStyle(modal).display !== 'none';       if (!visible) return;       if (tryAutoSave()) { done = true; modal.style.display = 'none'; }     };     try { new MutationObserver(doIt).observe(modal, { attributes:true, attributeFilter:['style','class'] }); } catch(_){}     setTimeout(doIt, 80);   }    // Kickoff when DOM is ready   document.addEventListener('DOMContentLoaded', () => {     // Make search submit more reliable when auto-submit is ON     const form = document.getElementById('markSearchForm');     if (form) {       form.addEventListener('keydown', (e) => {         if (e.key === 'Enter' && autoSubmitOn()) {           const mark = (document.getElementById('markInput')?.value || '').trim();           const url  = (document.getElementById('scrapeUrlInput')?.value || document.getElementById('scrapeUrlField')?.value || '').trim();           if (!mark && !url) e.preventDefault(); // guard empty         }       }, true);     }      // Always ensure page comes back to a clean state after any save     const saveForm = document.getElementById('saveSummaryForm');     if (saveForm) {       let reloaded = false;       const reloadSoon = () => { if (!reloaded) { reloaded = true; setTimeout(() => location.reload(), 300); } };       saveForm.addEventListener('ajax:done', reloadSoon, { once:true });       saveForm.addEventListener('submit', () => setTimeout(reloadSoon, 1200), { once:true });     }      // If receipts + repeat are ON, suppress the "Λήφθηκε..." toast and auto-save     Promise.resolve(serverRepeatEnabled()).then((rep) => {       if (receiptsSwitchOn() && rep) {         window.__RC_FLAGS.repeat_enabled = true;         window.__RC_FLAGS.autoHandled = true; // prevents info message in existing code         if (!tryAutoSave()) observeModalAndAuto();       }     });   }); })();</script>   <!-- ===== Receipts repeat auto-confirm SHIM (appended) ===== --> <script>(function(){   // small utility: safe JSON parse   function parseJSON(x){ try{ return JSON.parse(x); }catch(_){ return null; } }   function getLS(k, d){ try{ const v = localStorage.getItem(k); return (v===null||v===undefined)?d:v; }catch(_){ return d; } }   function setLS(k, v){ try{ localStorage.setItem(k, v); }catch(_){ } }   function isTruthy(v){ return v === true || v === '1' || v === 1 || v === 'true'; }    // Read repeat + receipts mode from both localStorage and globals/switches   function getRepeatOn(){     const ls = getLS('REPEAT:enabled', null);     if (ls !== null) return isTruthy(ls);     if (window.REPEAT_ENABLED !== undefined) return !!window.REPEAT_ENABLED;     const sw = document.getElementById('repeatEntrySwitch');     return !!(sw && sw.checked);   }   function getReceiptsModeOn(){     const ls = getLS('UI:useReceipts', null);     if (ls !== null) return isTruthy(ls);     if (window.USE_RECEIPTS !== undefined) return !!window.USE_RECEIPTS;     const sw = document.getElementById('useReceiptsSwitch');     return !!(sw && sw.checked);   }    function isReceiptSummary(obj){     if(!obj || typeof obj !== 'object') return false;     if (obj.is_receipt === true) return true;     const t = String(obj.type_name || obj.type || '').toLowerCase();     const cat = String(obj.category || obj.characteristic || obj['χαρακτηρισμός'] || '').toLowerCase();     return (t.includes('απόδει') || t.includes('receipt') || cat === 'αποδειξακια');   }    function hasMeaningfulLines(obj){     const arr = Array.isArray(obj && obj.lines) ? obj.lines : [];     if (arr.length === 0) return false;     // any non-empty amount OR category is enough     return arr.some(l => {       const amt = String(l && (l.amount || l.total || l.lineTotal || '')).trim();       const cat = String(l && (l.category || l.cat || '')).trim();       return !!(amt || cat);     });   }    function readSummaryObject(){     const input = document.getElementById('summaryJsonInput');     if(!input) return null;     return parseJSON(input.value || '{}') || null;   }    function getScrapeUrl(){     const u = document.getElementById('scrapeUrlInput') || document.getElementById('scrapeUrlField');     return u ? (u.value || '') : '';   }    let lastMarkTried = null;   let busy = false;    async function tryAutoConfirm(){     if (busy) return;     const rep = getRepeatOn();     const inRec = getReceiptsModeOn();     if (!rep || !inRec) return;      const s = readSummaryObject();     if (!s || !isReceiptSummary(s) || !hasMeaningfulLines(s)) return;      // avoid double firing for the same mark     const mk = String(s.mark || s.MARK || '').trim();     if (!mk || mk === lastMarkTried) return;     lastMarkTried = mk;      // hide modal pre-emptively to avoid flicker     try {       const modal = document.getElementById('summaryModal');       if (modal) modal.style.display = 'none';     } catch(_){}      if (!(window.RC && RC.confirmReceiptOnce && RC.normalizeReceiptSummary)) {       // RC not yet ready; retry later       return;     }      busy = true;     try {       await RC.confirmReceiptOnce(RC.normalizeReceiptSummary(s), getScrapeUrl());       // keep receipts mode sticky on refresh       setLS('UI:useReceipts', '1');       // soft reload to clear form quickly       setTimeout(function(){         try {           const base = location.pathname + '?use_receipts=1';           location.replace(base);         } catch(_){ location.reload(); }       }, 120);     } catch(err){       console.warn('[RC-AUTOCONFIRM] failed', err);       // allow another attempt       lastMarkTried = null;     } finally {       busy = false;     }   }    // Poll for summary changes & conditions (fast but lightweight)   let pollId = null;   function startPoll(){     if (pollId) return;     pollId = setInterval(tryAutoConfirm, 200);   }   function stopPoll(){     if (pollId) { clearInterval(pollId); pollId = null; }   }    // Start ASAP   startPoll();    // Re-run when user submits the search form (so mode is immediately persisted)   document.addEventListener('submit', function(e){     const f = e.target;     if (f && f.id === 'markSearchForm') {       // persist current mode for autosave       try {         const sw = document.getElementById('useReceiptsSwitch');         if (sw) setLS('UI:useReceipts', sw.checked ? '1' : '0');       } catch(_){}       setTimeout(tryAutoConfirm, 0);     }   }, true);    // Also, when repeat switch toggles, persist immediately   document.addEventListener('change', function(e){     const sw = e.target && e.target.id === 'repeatEntrySwitch' ? e.target : null;     if (sw){       setLS('REPEAT:enabled', sw.checked ? '1' : '0');       setTimeout(tryAutoConfirm, 0);     }   }, true);    // One-time bootstrap from server state (if available via endpoint)   // This is best-effort; if it fails, user toggles or previous LS values will be used.   (async function bootstrapRepeatOnce(){     try {       const r = await fetch('/api/repeat_entry/get', { credentials: 'same-origin' });       const j = await r.json();       if (j && j.ok && j.repeat_entry) {         setLS('REPEAT:enabled', j.repeat_entry.enabled ? '1' : '0');         // leave mapping to backend; we only need the enabled bit here         setTimeout(tryAutoConfirm, 0);       }     } catch(_){}   })(); })();</script> <!-- ===== end SHIM ===== --> is_invoice=False mark=
2025-10-23 00:28:53+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:17+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-23 00:32:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-23 00:32:18+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/fetch
2025-10-23 00:32:19+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:19+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:19+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:19+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:19+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:22+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:22+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:22+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:22+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:22+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:22+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:23+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:24+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:24+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:24+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:24+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:24+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:28+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:28+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:28+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:28+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:28+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:28+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:36+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?
2025-10-23 00:32:36+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:36+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:36+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:37+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:37+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:38+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:38+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:38+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:38+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:38+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:38+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:41+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?auto_submit=1
2025-10-23 00:32:41+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011184530011&force_edit=1
2025-10-23 00:32:41+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011184530011&force_edit=1
2025-10-23 00:32:41+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011184530011&force_edit=1
2025-10-23 00:32:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011184530011&force_edit=1
2025-10-23 00:32:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011184530011&force_edit=1
2025-10-23 00:32:41+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011184530011&force_edit=1
2025-10-23 00:32:41+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011184530011&force_edit=1
2025-10-23 00:32:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011184530011&force_edit=1
2025-10-23 00:32:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011184530011&force_edit=1
2025-10-23 00:32:41+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011184530011
2025-10-23 00:32:44+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011184530011
2025-10-23 00:32:44+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:32:44+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:32:44+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011184530011
2025-10-23 00:32:45+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:45+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:45+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:48+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:49+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?mark=400011184530011
2025-10-23 00:32:49+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:49+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:49+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:49+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:49+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:54+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:54+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-23 00:32:54+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-23 00:32:54+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:56+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:56+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:32:56+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:32:56+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:57+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:57+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:57+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:57+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:32:57+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:12+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:16+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:16+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-23 00:33:16+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-23 00:33:16+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:17+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:17+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:33:17+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:33:17+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:17+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:33:17+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:33:17+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:33:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:33:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:33:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:33:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:33:27+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:33:27+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-23 00:33:27+0300 INFO delete_invoices: marks_to_delete resolved = ['400011184530011', '400011184084271', '400011219241352', '400011219241353']
2025-10-23 00:33:27+0300 INFO delete_invoices: deleted 4 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011184530011', '400011184084271', '400011219241352', '400011219241353']
2025-10-23 00:33:27+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:33:27+0300 INFO delete_invoices: Deleted 4 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-23 00:33:27+0300 INFO delete_invoices: finished request. requested=4 excel=4 epsilon=4
2025-10-23 00:33:27+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:33:27+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:27+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:27+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:27+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:28+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:28+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:32+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:33:32+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:32+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:32+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:32+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:32+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:36+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:33:37+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:37+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:37+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:37+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:37+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:38+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:38+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-23 00:33:38+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-23 00:33:38+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:38+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:38+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:33:38+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:33:39+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search
2025-10-23 00:33:39+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:33:39+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:33:39+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:33:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:33:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:33:39+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:33:39+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:01+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:01+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:34:01+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:34:01+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:02+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:02+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:34:02+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:34:02+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:02+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:02+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:02+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:09+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:09+0300 INFO api_scrape_receipt: incoming url=https://mydata.wedoconnect.com/Validation?AC=780A376C9EE3B1300158D75D046DD6954E95A170
2025-10-23 00:34:12+0300 INFO api_scrape_receipt: scraped url=https://mydata.wedoconnect.com/Validation?AC=780A376C9EE3B1300158D75D046DD6954E95A170 is_invoice=True mark=400010624500556
2025-10-23 00:34:39+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:39+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:39+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:39+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:39+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:40+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:48+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:50+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:50+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DLD220246620005207041E1FBEDB99D16B0DAC75CC4C6E0B434B80FA86C15.17
2025-10-23 00:34:50+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DLD220246620005207041E1FBEDB99D16B0DAC75CC4C6E0B434B80FA86C15.17 is_invoice=False mark=
2025-10-23 00:34:54+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:55+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:55+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:55+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:55+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:56+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:56+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:57+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:34:57+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DLD220246620005207041E1FBEDB99D16B0DAC75CC4C6E0B434B80FA86C15.17
2025-10-23 00:34:57+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DLD220246620005207041E1FBEDB99D16B0DAC75CC4C6E0B434B80FA86C15.17 is_invoice=False mark=
2025-10-23 00:35:19+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:20+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:20+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:20+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:20+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:20+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:20+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:20+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:21+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:21+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DLD220246620005207041E1FBEDB99D16B0DAC75CC4C6E0B434B80FA86C15.17
2025-10-23 00:35:21+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DLD220246620005207041E1FBEDB99D16B0DAC75CC4C6E0B434B80FA86C15.17 is_invoice=False mark=
2025-10-23 00:35:38+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:39+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:39+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:39+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:39+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:39+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:44+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:44+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:52+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:35:52+0300 INFO api_scrape_receipt: incoming url=https://mydatapi.aade.gr/myDATA/TimologioQR/QRInfo?q=VlpjfC0v4mkbjWMH%2fgSEMkULv%2fuJ4hfKDjAJ6qZ2mkfDV1lyLXqWEecHxPrYSLl5Ue52X9B9GuLkg8gpRWjbxahawgs%2fB7P6qGgyTvSneqs%3d
2025-10-23 00:35:52+0300 INFO api_scrape_receipt: scraped url=https://mydatapi.aade.gr/myDATA/TimologioQR/QRInfo?q=VlpjfC0v4mkbjWMH%2fgSEMkULv%2fuJ4hfKDjAJ6qZ2mkfDV1lyLXqWEecHxPrYSLl5Ue52X9B9GuLkg8gpRWjbxahawgs%2fB7P6qGgyTvSneqs%3d is_invoice=False mark=400003929272574
2025-10-23 00:37:14+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:37:15+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:37:15+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:37:15+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:37:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:37:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:37:15+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:37:15+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:37:20+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:37:20+0300 INFO api_scrape_receipt: incoming url=https://mydatapi.aade.gr/myDATA/TimologioQR/QRInfo?q=VlpjfC0v4mkbjWMH%2fgSEMkULv%2fuJ4hfKDjAJ6qZ2mkfDV1lyLXqWEecHxPrYSLl5Ue52X9B9GuLkg8gpRWjbxahawgs%2fB7P6qGgyTvSneqs%3d
2025-10-23 00:37:21+0300 INFO api_scrape_receipt: scraped url=https://mydatapi.aade.gr/myDATA/TimologioQR/QRInfo?q=VlpjfC0v4mkbjWMH%2fgSEMkULv%2fuJ4hfKDjAJ6qZ2mkfDV1lyLXqWEecHxPrYSLl5Ue52X9B9GuLkg8gpRWjbxahawgs%2fB7P6qGgyTvSneqs%3d is_invoice=False mark=400003929272574
2025-10-23 00:37:24+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:37:25+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:25+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:25+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:25+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:25+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:26+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:26+0300 INFO api_scrape_receipt: incoming url=https://mydatapi.aade.gr/myDATA/TimologioQR/QRInfo?q=VlpjfC0v4mkbjWMH%2fgSEMkULv%2fuJ4hfKDjAJ6qZ2mkfDV1lyLXqWEecHxPrYSLl5Ue52X9B9GuLkg8gpRWjbxahawgs%2fB7P6qGgyTvSneqs%3d
2025-10-23 00:37:26+0300 INFO api_scrape_receipt: scraped url=https://mydatapi.aade.gr/myDATA/TimologioQR/QRInfo?q=VlpjfC0v4mkbjWMH%2fgSEMkULv%2fuJ4hfKDjAJ6qZ2mkfDV1lyLXqWEecHxPrYSLl5Ue52X9B9GuLkg8gpRWjbxahawgs%2fB7P6qGgyTvSneqs%3d is_invoice=False mark=400003929272574
2025-10-23 00:37:28+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:37:28+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:28+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:28+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:29+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:29+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:34+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:34+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DLD220246620005207041E1FBEDB99D16B0DAC75CC4C6E0B434B80FA86C15.17
2025-10-23 00:37:34+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DLD220246620005207041E1FBEDB99D16B0DAC75CC4C6E0B434B80FA86C15.17 is_invoice=False mark=
2025-10-23 00:37:49+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:37:49+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:49+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:49+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:50+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:53+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:37:53+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:53+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:53+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:54+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:54+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:57+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:37:57+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital14.epsilonnet.gr/DocViewer/14e0101f-23ad-47f2-35c2-08ddef1e840a
2025-10-23 00:37:58+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital14.epsilonnet.gr/DocViewer/14e0101f-23ad-47f2-35c2-08ddef1e840a is_invoice=True mark=400010888168364
2025-10-23 00:38:11+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:38:12+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:38:12+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:38:12+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:38:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:38:12+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:38:12+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:38:12+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:38:13+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:38:13+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:38:13+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:38:13+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:38:13+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:38:13+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:38:13+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:38:13+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:38:13+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:38:13+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1&auto_submit=1
2025-10-23 00:38:14+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:38:14+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:38:14+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:38:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:38:14+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:38:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:38:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:40:00+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:40:00+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-23 00:40:00+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-23 00:40:00+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:40:00+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:40:00+0300 INFO save_summary: start request from 127.0.0.1
2025-10-23 00:40:00+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-23 00:40:01+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:40:01+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:40:01+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:40:01+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:40:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:40:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:40:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-23 00:40:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://animated-succotash-wrqg6w77r5xvh5v47-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:22:09+0300 INFO Starting app - MYDATA_ENV=sandbox
2025-10-24 11:22:11+0300 INFO Starting app - MYDATA_ENV=production
2025-10-24 11:23:09+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp.github.dev/
2025-10-24 11:23:10+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 11:23:10+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 11:23:13+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 11:23:13+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 11:23:13+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 11:23:16+0300 INFO Incoming request: method=POST path=/set_active remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 11:23:16+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 11:23:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 11:23:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 11:23:18+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 11:23:19+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:19+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:19+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:19+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:19+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:22+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:22+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 11:23:22+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 11:23:23+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 11:23:23+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:23+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:23+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:23+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:23+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:42+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:23:43+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?auto_submit=1
2025-10-24 11:23:43+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?auto_submit=1
2025-10-24 11:23:43+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?auto_submit=1
2025-10-24 11:23:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?auto_submit=1
2025-10-24 11:23:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?auto_submit=1
2025-10-24 11:23:43+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?auto_submit=1
2025-10-24 11:23:43+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?auto_submit=1
2025-10-24 11:23:44+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?auto_submit=1
2025-10-24 11:23:44+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-24 11:23:44+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-24 11:23:44+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?auto_submit=1
2025-10-24 11:23:44+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?auto_submit=1
2025-10-24 11:23:44+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:23:44+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 11:23:44+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?auto_submit=1
2025-10-24 11:23:44+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:23:44+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?auto_submit=1
2025-10-24 11:23:44+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:44+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:44+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:48+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?auto_submit=1
2025-10-24 11:23:48+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:48+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:48+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:49+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:49+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:49+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:50+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?auto_submit=1
2025-10-24 11:23:50+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:50+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:51+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:51+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:51+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:52+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?auto_submit=1
2025-10-24 11:23:52+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:52+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:53+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:53+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:53+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:54+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?auto_submit=1
2025-10-24 11:23:55+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:55+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:55+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:55+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:55+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:23:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:24:52+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:24:52+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:24:52+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:24:52+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:24:52+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:24:52+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:24:52+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:24:52+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:24:54+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:24:54+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:24:54+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 11:24:54+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:24:55+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:24:55+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:24:55+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:24:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:24:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:24:55+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:24:55+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:24:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:01+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:25:01+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:01+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:01+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:01+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:01+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:07+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:08+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:08+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:08+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:08+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:08+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:08+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:08+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:25:08+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 11:25:08+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:08+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:08+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:08+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:08+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:09+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:09+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:28+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-24 11:25:28+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:28+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:28+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:28+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:28+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:28+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:30+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:30+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:30+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:30+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:31+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:31+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:38+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:40+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:43+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:43+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:43+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:44+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:44+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:44+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:44+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:46+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:46+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:46+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:46+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:47+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:47+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:50+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:50+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:50+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:50+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:50+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:52+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:52+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:52+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:52+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:52+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:52+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:53+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:53+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:57+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:58+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:58+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:58+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:58+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:58+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:25:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:03+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:26:04+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:04+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:10+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:10+0300 INFO search: invoice-flow blocked (forbidden type) code=8.4 name=Απόδειξη Είσπραξης POS mark=400011185773449 vat=802576637
2025-10-24 11:26:10+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:10+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:10+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:10+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:10+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:10+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:15+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:15+0300 INFO search: invoice-flow blocked (forbidden type) code=9.3 name=Δελτίο Αποστολής mark=400011185784064 vat=802576637
2025-10-24 11:26:15+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:15+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:16+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:16+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:16+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:16+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:22+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:22+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:22+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:22+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:22+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:22+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:22+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:22+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:26:22+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 11:26:22+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:23+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:23+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:23+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:23+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:23+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:23+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:26:23+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:38+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:39+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:39+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-24 11:28:39+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-24 11:28:39+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:41+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:41+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:28:41+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 11:28:41+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:42+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:42+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:42+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:42+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:45+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:46+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:46+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:46+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:46+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:46+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:28:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:31:53+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:31:54+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:31:54+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:31:54+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:31:54+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:31:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:31:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:31:54+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:31:54+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:31:56+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:31:56+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-24 11:31:56+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-24 11:31:56+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:31:56+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:31:56+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:31:56+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 11:31:56+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:31:56+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:31:56+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:31:56+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:31:56+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:31:56+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:31:57+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:31:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:31:57+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:31:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:31:57+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:31:59+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:31:59+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-24 11:32:00+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-24 11:32:00+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:32:00+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:32:00+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:32:00+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 11:32:00+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:32:00+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:32:00+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:32:00+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:32:00+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:32:00+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:32:00+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:32:01+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:32:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:32:01+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:32:01+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:33:36+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:33:36+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-24 11:33:36+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-24 11:33:36+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:33:36+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:33:36+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:33:36+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 11:33:36+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:33:37+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:33:37+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:33:37+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:33:37+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:33:37+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:33:37+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:33:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:33:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:33:53+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:33:53+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-24 11:33:53+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241352', '400011219241353', '400011219241354', '400011219241355', '400011219241356', '400011174046739', '400011184084271', '400011184530011', '400011184830173', '400011185825004']
2025-10-24 11:33:53+0300 INFO delete_invoices: deleted 10 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241352', '400011219241353', '400011219241354', '400011219241355', '400011219241356', '400011174046739', '400011184084271', '400011184530011', '400011184830173', '400011185825004']
2025-10-24 11:33:53+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 11:33:53+0300 INFO delete_invoices: Deleted 10 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-24 11:33:53+0300 INFO delete_invoices: finished request. requested=10 excel=10 epsilon=10
2025-10-24 11:33:53+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:33:53+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:33:53+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:33:53+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:33:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:33:54+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:33:54+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:33:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:33:56+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:33:56+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-24 11:33:56+0300 INFO delete_invoices: marks_to_delete resolved = ['400011219241357', '400011219241358', '400011219241359', '400011219241360']
2025-10-24 11:33:56+0300 INFO delete_invoices: deleted 4 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241357', '400011219241358', '400011219241359', '400011219241360']
2025-10-24 11:33:56+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 11:33:56+0300 INFO delete_invoices: Deleted 4 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-24 11:33:56+0300 INFO delete_invoices: finished request. requested=4 excel=4 epsilon=4
2025-10-24 11:33:56+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:33:56+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:33:56+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:33:56+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:33:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:33:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:33:57+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:33:57+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:33:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:11+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:12+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:12+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:12+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:12+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:13+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:13+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:13+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:24+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:24+0300 INFO search: invoice-flow blocked (forbidden type) code=9.3 name=Δελτίο Αποστολής mark=400011185853502 vat=802576637
2025-10-24 11:35:25+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:25+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:25+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:25+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:25+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:53+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:35:54+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:35:54+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:36:34+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:36:34+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-24 11:36:34+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-24 11:36:34+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:36:34+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:36:34+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:36:34+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 11:36:34+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:36:34+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:36:34+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:36:35+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:36:35+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:36:35+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:36:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:36:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:36:35+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:36:35+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:37:03+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:37:03+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-24 11:37:03+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-24 11:37:03+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:37:03+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:37:03+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:37:03+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 11:37:03+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:37:03+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 11:37:03+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:37:03+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:37:03+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:37:03+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:37:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:37:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:37:03+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:37:03+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:37:13+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 11:37:13+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 11:37:13+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 11:37:16+0300 INFO Incoming request: method=GET path=/client_db_info remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 11:38:10+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 11:38:10+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:38:10+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:38:10+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:38:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:38:11+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:38:11+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 11:38:11+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:07:40+0300 INFO Starting app - MYDATA_ENV=sandbox
2025-10-24 14:07:41+0300 INFO Starting app - MYDATA_ENV=production
2025-10-24 14:07:48+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp.github.dev/
2025-10-24 14:07:48+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 14:07:48+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 14:07:50+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 14:07:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 14:07:50+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 14:07:53+0300 INFO Incoming request: method=GET path=/client_db_info remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 14:08:01+0300 INFO Incoming request: method=GET path=/client_db_info remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 14:08:06+0300 INFO Incoming request: method=GET path=/client_db_info remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 14:08:08+0300 INFO Incoming request: method=GET path=/client_db_info remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 14:08:59+0300 INFO Starting app - MYDATA_ENV=production
2025-10-24 14:09:02+0300 INFO Starting app - MYDATA_ENV=production
2025-10-24 14:09:14+0300 INFO Starting app - MYDATA_ENV=production
2025-10-24 14:17:05+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 14:17:07+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:17:07+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:17:07+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:17:07+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:17:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:17:07+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:17:07+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:17:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:01+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-24 14:19:02+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:02+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:02+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:04+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:05+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/list
2025-10-24 14:19:05+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/list
2025-10-24 14:19:05+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/list
2025-10-24 14:19:06+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:06+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:06+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:06+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:06+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:19:09+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:20:50+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:20:50+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-24 14:20:51+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-24 14:20:52+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:20:52+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:20:52+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:20:52+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:20:52+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:20:52+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:20:53+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:20:53+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:20:53+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:21:04+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:21:04+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-24 14:21:04+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-24 14:21:04+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:21:04+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:21:05+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:21:05+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:21:05+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:21:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:21:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:21:05+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:21:05+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:22:47+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:32:35+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-24 14:32:35+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:32:35+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:32:35+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:32:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:32:35+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:32:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:32:35+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:32:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:32:42+0300 INFO Incoming request: method=GET path=/fetch remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:32:42+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/fetch
2025-10-24 14:32:42+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/fetch
2025-10-24 14:32:43+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/fetch
2025-10-24 14:32:43+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:32:43+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:32:43+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:32:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:32:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:32:43+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:32:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:32:43+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:32:43+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:34:29+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-24 14:34:29+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:34:29+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:34:29+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:34:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:34:29+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:34:30+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:34:30+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:34:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:34:30+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:42:47+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-24 14:42:47+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:42:47+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:42:47+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:42:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:42:48+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:42:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:42:48+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:42:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:42:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:43:02+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:43:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 14:43:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 14:43:03+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 14:43:03+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:43:03+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:43:03+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:43:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:43:03+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:43:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:43:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:43:03+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:43:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:43:04+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:43:05+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:43:59+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:43:59+0300 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619
2025-10-24 14:43:59+0300 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549
2025-10-24 14:43:59+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:43:59+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:43:59+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 14:43:59+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 14:43:59+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 14:43:59+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:43:59+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:43:59+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:43:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:43:59+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:43:59+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:43:59+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:44:04+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:44:04+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-24 14:44:05+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-24 14:44:05+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:44:05+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:44:05+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 14:44:05+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 14:44:05+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:44:05+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 14:44:05+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:44:05+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:44:05+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:44:05+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:44:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:44:05+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:44:05+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:44:05+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 14:54:40+0300 INFO Starting app - MYDATA_ENV=production
2025-10-24 14:55:08+0300 INFO Starting app - MYDATA_ENV=production
2025-10-24 14:58:13+0300 INFO Starting app - MYDATA_ENV=sandbox
2025-10-24 15:00:04+0300 INFO Starting app - MYDATA_ENV=sandbox
2025-10-24 15:00:04+0300 INFO Starting app - MYDATA_ENV=production
2025-10-24 15:00:14+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp.github.dev/
2025-10-24 15:00:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 15:00:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 15:00:16+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 15:00:16+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 15:00:16+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 15:00:17+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 15:00:17+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:17+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:17+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:17+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:18+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:20+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:20+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:00:22+0300 INFO Incoming request: method=GET path=/profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:22+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:00:22+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:00:22+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:00:22+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:00:35+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:00:35+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:35+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:35+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:35+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:35+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:37+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:37+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:00:45+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:46+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:46+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:46+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:46+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:46+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:46+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:48+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:48+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?mark=400011185825004&force_edit=1
2025-10-24 15:00:48+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?mark=400011185825004&force_edit=1
2025-10-24 15:00:48+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?mark=400011185825004&force_edit=1
2025-10-24 15:00:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?mark=400011185825004&force_edit=1
2025-10-24 15:00:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?mark=400011185825004&force_edit=1
2025-10-24 15:00:48+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?mark=400011185825004&force_edit=1
2025-10-24 15:00:48+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?mark=400011185825004&force_edit=1
2025-10-24 15:00:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?mark=400011185825004&force_edit=1
2025-10-24 15:00:48+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?mark=400011185825004
2025-10-24 15:00:48+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?mark=400011185825004&force_edit=1
2025-10-24 15:00:50+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?mark=400011185825004
2025-10-24 15:00:50+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 15:00:50+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 15:00:50+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?mark=400011185825004
2025-10-24 15:00:50+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:50+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:50+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:50+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:50+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:50+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:52+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:52+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:00:54+0300 INFO Incoming request: method=GET path=/profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:00:54+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:00:54+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:00:54+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:00:54+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:01:16+0300 INFO Incoming request: method=GET path=/profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:01:16+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:01:16+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:01:16+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:01:16+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:03:13+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:03:14+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/list
2025-10-24 15:03:14+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/list
2025-10-24 15:03:15+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/list
2025-10-24 15:03:15+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:03:15+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:03:15+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:03:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:03:15+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:03:15+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:03:15+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:03:18+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:03:18+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-24 15:03:18+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-24 15:03:19+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:03:19+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:03:19+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 15:03:19+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 15:03:19+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:03:19+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:03:19+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:03:19+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:03:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:03:19+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:03:19+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:03:19+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:03:24+0300 INFO Incoming request: method=GET path=/list remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:06:01+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-24 15:06:02+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:06:02+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:06:02+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:06:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:06:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:06:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:06:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:06:04+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:06:06+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:06:06+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:06:07+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:06:07+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:06:08+0300 INFO Incoming request: method=GET path=/profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:06:08+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:06:08+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:06:08+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:06:08+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:06:17+0300 INFO Incoming request: method=GET path=/profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:06:17+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:06:17+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:06:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:06:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:07:36+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-24 15:07:36+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:36+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:37+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:37+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:37+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:37+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:38+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:39+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:39+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:39+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:07:44+0300 INFO Incoming request: method=GET path=/profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:44+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:07:44+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:07:44+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:07:44+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:07:54+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:54+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:55+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:55+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:55+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:55+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:55+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:55+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:55+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:58+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:58+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:07:58+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:08:01+0300 INFO Incoming request: method=GET path=/profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:08:02+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:08:02+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:08:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:08:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:08:28+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:08:29+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 15:08:29+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 15:08:33+0300 INFO Incoming request: method=POST path=/credentials/edit/ΒΑΨΙΜΟ remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 15:08:33+0300 INFO Incoming request: method=GET path=/credentials remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 15:08:34+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 15:08:34+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 15:08:35+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/credentials
2025-10-24 15:08:35+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:35+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:35+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:35+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:36+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:36+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:36+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:41+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:41+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:41+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:41+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:08:50+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:50+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:51+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:51+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:51+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:51+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:51+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:51+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:52+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:52+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:52+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:08:57+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:57+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:57+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:08:58+0300 INFO Incoming request: method=GET path=/profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:08:59+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:08:59+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:08:59+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:08:59+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:09:16+0300 INFO Incoming request: method=GET path=/profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:09:17+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:09:17+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:09:17+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:09:17+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:09:25+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:09:25+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:09:25+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:09:25+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:09:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:09:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:09:25+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:09:25+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:09:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:09:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:19+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:24+0300 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:24+0300 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']
2025-10-24 15:12:24+0300 INFO delete_invoices: marks_to_delete resolved = ['400011185825004']
2025-10-24 15:12:24+0300 INFO delete_invoices: deleted 1 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011185825004']
2025-10-24 15:12:24+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 15:12:24+0300 INFO delete_invoices: Deleted 1 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637
2025-10-24 15:12:24+0300 INFO delete_invoices: finished request. requested=1 excel=1 epsilon=1
2025-10-24 15:12:24+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:24+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:24+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:24+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:24+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:24+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:25+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:29+0300 INFO Incoming request: method=POST path=/api/repeat_entry/save remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:31+0300 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:31+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:31+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:31+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:31+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:31+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:31+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:31+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 15:12:31+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 15:12:31+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:32+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:32+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:32+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:32+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:32+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:32+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:12:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:14:18+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-24 15:14:18+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:14:18+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:14:18+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:14:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:14:18+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:14:18+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:14:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:14:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:14:18+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:14:20+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:14:20+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:14:20+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:14:21+0300 INFO Incoming request: method=GET path=/profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:14:21+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:14:21+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:14:21+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:14:21+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:21:01+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-24 15:21:02+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:21:02+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:21:02+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:21:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:21:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:21:02+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:21:02+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:21:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:21:02+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:21:03+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:21:03+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:21:03+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:21:04+0300 INFO Incoming request: method=GET path=/profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:21:04+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:21:04+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:21:04+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:21:04+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:22:24+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-24 15:22:25+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:22:25+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:22:25+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:22:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:22:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:22:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:22:25+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:22:25+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:22:25+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:22:26+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:22:26+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:22:33+0300 INFO Incoming request: method=GET path=/profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:22:33+0300 ERROR Unhandled exception: Object of type Undefined is not JSON serializable
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 2740, in profiles_page
    return render_template("profiles.html")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/workspaces/Firebed_private/templates/profiles.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "/workspaces/Firebed_private/templates/base.html", line 84, in top-level template code
    {% block scripts %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/templates/profiles.html", line 233, in block 'scripts'
    // window.CUSTOMER_CATEGORIES = {{ customer_categories | tojson | safe }};
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/json/provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/python/3.12.1/lib/python3.12/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/usr/local/python/3.12.1/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/python/3.12.1/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/json/provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable

2025-10-24 15:22:33+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:22:33+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:22:55+0300 INFO Starting app - MYDATA_ENV=sandbox
2025-10-24 15:22:56+0300 INFO Starting app - MYDATA_ENV=production
2025-10-24 15:22:58+0300 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp.github.dev/
2025-10-24 15:22:58+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 15:22:58+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 15:22:59+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/
2025-10-24 15:23:00+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:23:00+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:23:00+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:23:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:23:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:23:00+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:23:00+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:23:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:23:00+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:23:01+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:23:01+0300 ERROR Unhandled exception: 'str' object has no attribute 'exists'
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 4103, in api_char_profiles_get
    creds = _load_credentials()
            ^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 169, in _load_credentials
    if not CREDENTIALS_PATH.exists():
           ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'exists'

2025-10-24 15:23:04+0300 INFO Incoming request: method=GET path=/profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:23:04+0300 ERROR Unhandled exception: Object of type Undefined is not JSON serializable
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 2740, in profiles_page
    return render_template("profiles.html")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/workspaces/Firebed_private/templates/profiles.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "/workspaces/Firebed_private/templates/base.html", line 84, in top-level template code
    {% block scripts %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/templates/profiles.html", line 233, in block 'scripts'
    // window.CUSTOMER_CATEGORIES = {{ customer_categories | tojson | safe }};
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/json/provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/python/3.12.1/lib/python3.12/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/usr/local/python/3.12.1/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/python/3.12.1/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/json/provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable

2025-10-24 15:23:04+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:23:04+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:27:47+0300 INFO Starting app - MYDATA_ENV=production
2025-10-24 15:29:31+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=None
2025-10-24 15:29:32+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:29:32+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:29:32+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:29:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:29:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:29:32+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:29:32+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:29:32+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:29:33+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:29:33+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:29:43+0300 INFO Incoming request: method=GET path=/profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:29:43+0300 ERROR Unhandled exception: Object of type Undefined is not JSON serializable
Traceback (most recent call last):
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/app.py", line 2746, in profiles_page
    return render_template("profiles.html")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/workspaces/Firebed_private/templates/profiles.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "/workspaces/Firebed_private/templates/base.html", line 84, in top-level template code
    {% block scripts %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/workspaces/Firebed_private/templates/profiles.html", line 233, in block 'scripts'
    // window.CUSTOMER_CATEGORIES = {{ customer_categories | tojson | safe }};
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/filters.py", line 1721, in do_tojson
    return htmlsafe_json_dumps(value, dumps=dumps, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/jinja2/utils.py", line 669, in htmlsafe_json_dumps
    dumps(obj, **kwargs)
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/json/provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/python/3.12.1/lib/python3.12/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/usr/local/python/3.12.1/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/python/3.12.1/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/flask/json/provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Undefined is not JSON serializable

2025-10-24 15:29:43+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:29:43+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/profiles?vat=802576637
2025-10-24 15:41:44+0300 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:41:44+0300 INFO api_scrape_receipt: incoming url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00
2025-10-24 15:41:44+0300 INFO api_scrape_receipt: scraped url=https://www1.aade.gr/tameiakes/myweb/q1.php?SIG=DSZ2400579600036671D4B85D019A0F19853BA6509E41340225101020088.00 is_invoice=False mark=
2025-10-24 15:41:44+0300 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:41:44+0300 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:41:44+0300 INFO save_summary: start request from 127.0.0.1
2025-10-24 15:41:44+0300 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json
2025-10-24 15:41:45+0300 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search
2025-10-24 15:41:45+0300 INFO Incoming request: method=GET path=/static/loop_hard_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:41:45+0300 INFO Incoming request: method=GET path=/static/repeat_flow_guard.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:41:45+0300 INFO Incoming request: method=GET path=/static/receipts_repeat_direct.js remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:41:45+0300 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:41:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:41:45+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:41:45+0300 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:41:56+0300 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
2025-10-24 15:41:56+0300 INFO Incoming request: method=GET path=/api/char_profiles remote=127.0.0.1 ref=https://curly-space-robot-97g469gx7rp6c9vpp-5000.app.github.dev/search?use_receipts=1
