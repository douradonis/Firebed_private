2025-10-16 09:11:07,979 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:11:07,980 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']

2025-10-16 09:11:07,980 INFO delete_invoices: marks_to_delete resolved = ['400011184830173', '400011219241352']

2025-10-16 09:11:07,994 INFO delete_invoices: deleted 2 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011184830173', '400011219241352']

2025-10-16 09:11:07,997 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json

2025-10-16 09:11:07,997 INFO delete_invoices: Deleted 2 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637

2025-10-16 09:11:07,997 INFO delete_invoices: finished request. requested=2 excel=2 epsilon=2

2025-10-16 09:11:08,141 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:11:08,394 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:11:08,435 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:11:08,575 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:11:12,691 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:11:12,691 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619

2025-10-16 09:11:12,780 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549

2025-10-16 09:11:12,949 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:11:13,951 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:11:13,951 INFO save_summary: start request from 127.0.0.1

2025-10-16 09:11:13,966 ERROR save_summary: helper _ensure_excel_and_update_or_append failed; falling back to inline Excel write
Traceback (most recent call last):
  File "/workspaces/Firebed_private/app.py", line 4280, in save_summary
    helper(summary, vat=vat)
  File "/workspaces/Firebed_private/app.py", line 845, in _ensure_excel_and_update_or_append
    df = df.append(row, ignore_index=True)
         ^^^^^^^^^
  File "/home/codespace/.local/lib/python3.12/site-packages/pandas/core/generic.py", line 6321, in __getattr__
    return object.__getattribute__(self, name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'DataFrame' object has no attribute 'append'. Did you mean: '_append'?
2025-10-16 09:11:13,987 INFO save_summary: appended row to existing excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx

2025-10-16 09:11:13,990 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json

2025-10-16 09:11:13,990 INFO save_summary: appended new epsilon entry for mark=400011219241352 vat=802576637

2025-10-16 09:11:14,072 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:11:14,323 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:11:14,359 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:11:14,428 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:16:02,329 INFO Starting app - MYDATA_ENV=production

2025-10-16 09:16:57,800 INFO Starting app - MYDATA_ENV=production

2025-10-16 09:18:44,811 INFO Starting app - MYDATA_ENV=sandbox

2025-10-16 09:18:45,430 INFO Starting app - MYDATA_ENV=production

2025-10-16 09:19:58,630 INFO Starting app - MYDATA_ENV=production

2025-10-16 09:20:09,827 INFO Incoming request: method=GET path=/ remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx.github.dev/

2025-10-16 09:20:10,233 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/

2025-10-16 09:20:10,243 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/

2025-10-16 09:20:12,429 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/

2025-10-16 09:20:12,911 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:20:12,945 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:20:12,953 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:20:15,463 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:20:15,758 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:20:15,790 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:20:15,956 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:20:20,427 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:20:20,739 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search?mark=400011219241352&force_edit=1

2025-10-16 09:20:20,804 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search?mark=400011219241352&force_edit=1

2025-10-16 09:20:20,831 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search?mark=400011219241352&force_edit=1

2025-10-16 09:20:30,730 INFO Starting app - MYDATA_ENV=production

2025-10-16 09:20:30,942 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search?mark=400011219241352&force_edit=1

2025-10-16 09:20:31,357 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search?mark=400011219241352&force_edit=1

2025-10-16 09:20:31,380 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search?mark=400011219241352&force_edit=1

2025-10-16 09:20:31,466 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search?mark=400011219241352&force_edit=1

2025-10-16 09:20:58,117 INFO Starting app - MYDATA_ENV=production

2025-10-16 09:21:28,004 INFO Starting app - MYDATA_ENV=production

2025-10-16 09:21:33,586 INFO Incoming request: method=POST path=/api/scrape_receipt remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search?mark=400011219241352&force_edit=1

2025-10-16 09:21:33,587 INFO api_scrape_receipt: incoming url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619

2025-10-16 09:21:33,672 INFO api_scrape_receipt: scraped url=https://epsilondigital-mcd.epsilonnet.gr/DocViewer/f592d67e-22fa-40aa-8cbe-08ddfae57619 is_invoice=False mark=400011087006549

2025-10-16 09:21:33,835 INFO Incoming request: method=GET path=/api/next_receipt_mark remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search?mark=400011219241352&force_edit=1

2025-10-16 09:21:35,670 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search?mark=400011219241352&force_edit=1

2025-10-16 09:21:35,670 INFO save_summary: start request from 127.0.0.1

2025-10-16 09:21:35,696 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json

2025-10-16 09:21:35,782 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search?mark=400011219241352&force_edit=1

2025-10-16 09:21:36,061 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:21:36,089 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:21:36,094 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:21:45,250 INFO Incoming request: method=POST path=/delete remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:21:45,250 INFO delete_invoices: request from 127.0.0.1 form_keys=['delete_mark']

2025-10-16 09:21:45,250 INFO delete_invoices: marks_to_delete resolved = ['400011219241352']

2025-10-16 09:21:45,266 INFO delete_invoices: deleted 1 marks from Excel /workspaces/Firebed_private/data/excel/802576637_2025_invoices.xlsx: ['400011219241352']

2025-10-16 09:21:45,268 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json

2025-10-16 09:21:45,269 INFO delete_invoices: Deleted 1 marks from epsilon cache /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json for VAT 802576637

2025-10-16 09:21:45,269 INFO delete_invoices: finished request. requested=1 excel=1 epsilon=1

2025-10-16 09:21:45,350 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:21:45,603 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:21:45,628 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:21:45,632 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:21:56,292 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:21:56,545 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:21:56,654 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:21:56,702 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:21:58,334 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:21:58,334 INFO save_summary: start request from 127.0.0.1

2025-10-16 09:21:58,354 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json

2025-10-16 09:21:58,428 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:21:58,685 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:21:58,716 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:21:58,790 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:22:02,676 INFO Incoming request: method=POST path=/search remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:22:02,942 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:22:02,970 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:22:02,974 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:22:04,437 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:22:04,697 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search?mark=400011184830173&force_edit=1

2025-10-16 09:22:04,724 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search?mark=400011184830173&force_edit=1

2025-10-16 09:22:04,727 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search?mark=400011184830173&force_edit=1

2025-10-16 09:22:04,800 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search?mark=400011184830173

2025-10-16 09:22:06,844 INFO Incoming request: method=POST path=/save_summary remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search?mark=400011184830173

2025-10-16 09:22:06,844 INFO save_summary: start request from 127.0.0.1

2025-10-16 09:22:06,847 INFO _safe_save_epsilon_cache: saved epsilon to /workspaces/Firebed_private/data/epsilon/802576637_epsilon_invoices.json

2025-10-16 09:22:06,928 INFO Incoming request: method=GET path=/search remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search?mark=400011184830173

2025-10-16 09:22:07,223 INFO Incoming request: method=GET path=/api/repeat_entry/get remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:22:07,227 INFO Incoming request: method=GET path=/get_fiscal_year remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

2025-10-16 09:22:07,231 INFO Incoming request: method=GET path=/favicon.ico remote=127.0.0.1 ref=https://solid-spoon-7vjpqg99vwq6cx9qx-5001.app.github.dev/search

